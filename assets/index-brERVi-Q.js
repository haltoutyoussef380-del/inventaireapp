(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function o(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function f(p){if(p.ep)return;p.ep=!0;const m=o(p);fetch(p.href,m)}})();var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var nf={exports:{}},Zl={};var Y1;function rp(){if(Y1)return Zl;Y1=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(f,p,m){var b=null;if(m!==void 0&&(b=""+m),p.key!==void 0&&(b=""+p.key),"key"in p){m={};for(var A in p)A!=="key"&&(m[A]=p[A])}else m=p;return p=m.ref,{$$typeof:l,type:f,key:b,ref:p!==void 0?p:null,props:m}}return Zl.Fragment=i,Zl.jsx=o,Zl.jsxs=o,Zl}var W1;function ip(){return W1||(W1=1,nf.exports=rp()),nf.exports}var k=ip(),rf={exports:{}},Xe={};var K1;function ap(){if(K1)return Xe;K1=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),b=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.iterator;function U(H){return H===null||typeof H!="object"?null:(H=L&&H[L]||H["@@iterator"],typeof H=="function"?H:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,te={};function le(H,oe,ve){this.props=H,this.context=oe,this.refs=te,this.updater=ve||V}le.prototype.isReactComponent={},le.prototype.setState=function(H,oe){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,oe,"setState")},le.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=le.prototype;function Y(H,oe,ve){this.props=H,this.context=oe,this.refs=te,this.updater=ve||V}var pe=Y.prototype=new $;pe.constructor=Y,G(pe,le.prototype),pe.isPureReactComponent=!0;var Be=Array.isArray;function Ee(){}var ee={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function he(H,oe,ve){var Ae=ve.ref;return{$$typeof:l,type:H,key:oe,ref:Ae!==void 0?Ae:null,props:ve}}function ke(H,oe){return he(H.type,oe,H.props)}function it(H){return typeof H=="object"&&H!==null&&H.$$typeof===l}function Ne(H){var oe={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ve){return oe[ve]})}var at=/\/+/g;function Nt(H,oe){return typeof H=="object"&&H!==null&&H.key!=null?Ne(""+H.key):oe.toString(36)}function se(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Ee,Ee):(H.status="pending",H.then(function(oe){H.status==="pending"&&(H.status="fulfilled",H.value=oe)},function(oe){H.status==="pending"&&(H.status="rejected",H.reason=oe)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ie(H,oe,ve,Ae,Ge){var be=typeof H;(be==="undefined"||be==="boolean")&&(H=null);var ft=!1;if(H===null)ft=!0;else switch(be){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(H.$$typeof){case l:case i:ft=!0;break;case R:return ft=H._init,ie(ft(H._payload),oe,ve,Ae,Ge)}}if(ft)return Ge=Ge(H),ft=Ae===""?"."+Nt(H,0):Ae,Be(Ge)?(ve="",ft!=null&&(ve=ft.replace(at,"$&/")+"/"),ie(Ge,oe,ve,"",function(kr){return kr})):Ge!=null&&(it(Ge)&&(Ge=ke(Ge,ve+(Ge.key==null||H&&H.key===Ge.key?"":(""+Ge.key).replace(at,"$&/")+"/")+ft)),oe.push(Ge)),1;ft=0;var dt=Ae===""?".":Ae+":";if(Be(H))for(var kt=0;kt<H.length;kt++)Ae=H[kt],be=dt+Nt(Ae,kt),ft+=ie(Ae,oe,ve,be,Ge);else if(kt=U(H),typeof kt=="function")for(H=kt.call(H),kt=0;!(Ae=H.next()).done;)Ae=Ae.value,be=dt+Nt(Ae,kt++),ft+=ie(Ae,oe,ve,be,Ge);else if(be==="object"){if(typeof H.then=="function")return ie(se(H),oe,ve,Ae,Ge);throw oe=String(H),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return ft}function fe(H,oe,ve){if(H==null)return H;var Ae=[],Ge=0;return ie(H,Ae,"","",function(be){return oe.call(ve,be,Ge++)}),Ae}function Ue(H){if(H._status===-1){var oe=H._result;oe=oe(),oe.then(function(ve){(H._status===0||H._status===-1)&&(H._status=1,H._result=ve)},function(ve){(H._status===0||H._status===-1)&&(H._status=2,H._result=ve)}),H._status===-1&&(H._status=0,H._result=oe)}if(H._status===1)return H._result.default;throw H._result}var $e=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},st={map:fe,forEach:function(H,oe,ve){fe(H,function(){oe.apply(this,arguments)},ve)},count:function(H){var oe=0;return fe(H,function(){oe++}),oe},toArray:function(H){return fe(H,function(oe){return oe})||[]},only:function(H){if(!it(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Xe.Activity=N,Xe.Children=st,Xe.Component=le,Xe.Fragment=o,Xe.Profiler=p,Xe.PureComponent=Y,Xe.StrictMode=f,Xe.Suspense=_,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return ee.H.useMemoCache(H)}},Xe.cache=function(H){return function(){return H.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(H,oe,ve){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Ae=G({},H.props),Ge=H.key;if(oe!=null)for(be in oe.key!==void 0&&(Ge=""+oe.key),oe)!Re.call(oe,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&oe.ref===void 0||(Ae[be]=oe[be]);var be=arguments.length-2;if(be===1)Ae.children=ve;else if(1<be){for(var ft=Array(be),dt=0;dt<be;dt++)ft[dt]=arguments[dt+2];Ae.children=ft}return he(H.type,Ge,Ae)},Xe.createContext=function(H){return H={$$typeof:b,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:m,_context:H},H},Xe.createElement=function(H,oe,ve){var Ae,Ge={},be=null;if(oe!=null)for(Ae in oe.key!==void 0&&(be=""+oe.key),oe)Re.call(oe,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(Ge[Ae]=oe[Ae]);var ft=arguments.length-2;if(ft===1)Ge.children=ve;else if(1<ft){for(var dt=Array(ft),kt=0;kt<ft;kt++)dt[kt]=arguments[kt+2];Ge.children=dt}if(H&&H.defaultProps)for(Ae in ft=H.defaultProps,ft)Ge[Ae]===void 0&&(Ge[Ae]=ft[Ae]);return he(H,be,Ge)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(H){return{$$typeof:A,render:H}},Xe.isValidElement=it,Xe.lazy=function(H){return{$$typeof:R,_payload:{_status:-1,_result:H},_init:Ue}},Xe.memo=function(H,oe){return{$$typeof:E,type:H,compare:oe===void 0?null:oe}},Xe.startTransition=function(H){var oe=ee.T,ve={};ee.T=ve;try{var Ae=H(),Ge=ee.S;Ge!==null&&Ge(ve,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(Ee,$e)}catch(be){$e(be)}finally{oe!==null&&ve.types!==null&&(oe.types=ve.types),ee.T=oe}},Xe.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Xe.use=function(H){return ee.H.use(H)},Xe.useActionState=function(H,oe,ve){return ee.H.useActionState(H,oe,ve)},Xe.useCallback=function(H,oe){return ee.H.useCallback(H,oe)},Xe.useContext=function(H){return ee.H.useContext(H)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(H,oe){return ee.H.useDeferredValue(H,oe)},Xe.useEffect=function(H,oe){return ee.H.useEffect(H,oe)},Xe.useEffectEvent=function(H){return ee.H.useEffectEvent(H)},Xe.useId=function(){return ee.H.useId()},Xe.useImperativeHandle=function(H,oe,ve){return ee.H.useImperativeHandle(H,oe,ve)},Xe.useInsertionEffect=function(H,oe){return ee.H.useInsertionEffect(H,oe)},Xe.useLayoutEffect=function(H,oe){return ee.H.useLayoutEffect(H,oe)},Xe.useMemo=function(H,oe){return ee.H.useMemo(H,oe)},Xe.useOptimistic=function(H,oe){return ee.H.useOptimistic(H,oe)},Xe.useReducer=function(H,oe,ve){return ee.H.useReducer(H,oe,ve)},Xe.useRef=function(H){return ee.H.useRef(H)},Xe.useState=function(H){return ee.H.useState(H)},Xe.useSyncExternalStore=function(H,oe,ve){return ee.H.useSyncExternalStore(H,oe,ve)},Xe.useTransition=function(){return ee.H.useTransition()},Xe.version="19.2.4",Xe}var Z1;function Mf(){return Z1||(Z1=1,rf.exports=ap()),rf.exports}var W=Mf();const sp=np(W);var af={exports:{}},Ql={},sf={exports:{}},lf={};var Q1;function lp(){return Q1||(Q1=1,(function(l){function i(ie,fe){var Ue=ie.length;ie.push(fe);e:for(;0<Ue;){var $e=Ue-1>>>1,st=ie[$e];if(0<p(st,fe))ie[$e]=fe,ie[Ue]=st,Ue=$e;else break e}}function o(ie){return ie.length===0?null:ie[0]}function f(ie){if(ie.length===0)return null;var fe=ie[0],Ue=ie.pop();if(Ue!==fe){ie[0]=Ue;e:for(var $e=0,st=ie.length,H=st>>>1;$e<H;){var oe=2*($e+1)-1,ve=ie[oe],Ae=oe+1,Ge=ie[Ae];if(0>p(ve,Ue))Ae<st&&0>p(Ge,ve)?(ie[$e]=Ge,ie[Ae]=Ue,$e=Ae):(ie[$e]=ve,ie[oe]=Ue,$e=oe);else if(Ae<st&&0>p(Ge,Ue))ie[$e]=Ge,ie[Ae]=Ue,$e=Ae;else break e}}return fe}function p(ie,fe){var Ue=ie.sortIndex-fe.sortIndex;return Ue!==0?Ue:ie.id-fe.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var b=Date,A=b.now();l.unstable_now=function(){return b.now()-A}}var _=[],E=[],R=1,N=null,L=3,U=!1,V=!1,G=!1,te=!1,le=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function pe(ie){for(var fe=o(E);fe!==null;){if(fe.callback===null)f(E);else if(fe.startTime<=ie)f(E),fe.sortIndex=fe.expirationTime,i(_,fe);else break;fe=o(E)}}function Be(ie){if(G=!1,pe(ie),!V)if(o(_)!==null)V=!0,Ee||(Ee=!0,Ne());else{var fe=o(E);fe!==null&&se(Be,fe.startTime-ie)}}var Ee=!1,ee=-1,Re=5,he=-1;function ke(){return te?!0:!(l.unstable_now()-he<Re)}function it(){if(te=!1,Ee){var ie=l.unstable_now();he=ie;var fe=!0;try{e:{V=!1,G&&(G=!1,$(ee),ee=-1),U=!0;var Ue=L;try{t:{for(pe(ie),N=o(_);N!==null&&!(N.expirationTime>ie&&ke());){var $e=N.callback;if(typeof $e=="function"){N.callback=null,L=N.priorityLevel;var st=$e(N.expirationTime<=ie);if(ie=l.unstable_now(),typeof st=="function"){N.callback=st,pe(ie),fe=!0;break t}N===o(_)&&f(_),pe(ie)}else f(_);N=o(_)}if(N!==null)fe=!0;else{var H=o(E);H!==null&&se(Be,H.startTime-ie),fe=!1}}break e}finally{N=null,L=Ue,U=!1}fe=void 0}}finally{fe?Ne():Ee=!1}}}var Ne;if(typeof Y=="function")Ne=function(){Y(it)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Nt=at.port2;at.port1.onmessage=it,Ne=function(){Nt.postMessage(null)}}else Ne=function(){le(it,0)};function se(ie,fe){ee=le(function(){ie(l.unstable_now())},fe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(ie){ie.callback=null},l.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<ie?Math.floor(1e3/ie):5},l.unstable_getCurrentPriorityLevel=function(){return L},l.unstable_next=function(ie){switch(L){case 1:case 2:case 3:var fe=3;break;default:fe=L}var Ue=L;L=fe;try{return ie()}finally{L=Ue}},l.unstable_requestPaint=function(){te=!0},l.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Ue=L;L=ie;try{return fe()}finally{L=Ue}},l.unstable_scheduleCallback=function(ie,fe,Ue){var $e=l.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?$e+Ue:$e):Ue=$e,ie){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Ue+st,ie={id:R++,callback:fe,priorityLevel:ie,startTime:Ue,expirationTime:st,sortIndex:-1},Ue>$e?(ie.sortIndex=Ue,i(E,ie),o(_)===null&&ie===o(E)&&(G?($(ee),ee=-1):G=!0,se(Be,Ue-$e))):(ie.sortIndex=st,i(_,ie),V||U||(V=!0,Ee||(Ee=!0,Ne()))),ie},l.unstable_shouldYield=ke,l.unstable_wrapCallback=function(ie){var fe=L;return function(){var Ue=L;L=fe;try{return ie.apply(this,arguments)}finally{L=Ue}}}})(lf)),lf}var J1;function op(){return J1||(J1=1,sf.exports=lp()),sf.exports}var of={exports:{}},jn={};var $1;function up(){if($1)return jn;$1=1;var l=Mf();function i(_){var E="https://react.dev/errors/"+_;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)E+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var f={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},p=Symbol.for("react.portal");function m(_,E,R){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:N==null?null:""+N,children:_,containerInfo:E,implementation:R}}var b=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(_,E){if(_==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,jn.createPortal=function(_,E){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(i(299));return m(_,E,null,R)},jn.flushSync=function(_){var E=b.T,R=f.p;try{if(b.T=null,f.p=2,_)return _()}finally{b.T=E,f.p=R,f.d.f()}},jn.preconnect=function(_,E){typeof _=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,f.d.C(_,E))},jn.prefetchDNS=function(_){typeof _=="string"&&f.d.D(_)},jn.preinit=function(_,E){if(typeof _=="string"&&E&&typeof E.as=="string"){var R=E.as,N=A(R,E.crossOrigin),L=typeof E.integrity=="string"?E.integrity:void 0,U=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;R==="style"?f.d.S(_,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:N,integrity:L,fetchPriority:U}):R==="script"&&f.d.X(_,{crossOrigin:N,integrity:L,fetchPriority:U,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},jn.preinitModule=function(_,E){if(typeof _=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var R=A(E.as,E.crossOrigin);f.d.M(_,{crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&f.d.M(_)},jn.preload=function(_,E){if(typeof _=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var R=E.as,N=A(R,E.crossOrigin);f.d.L(_,R,{crossOrigin:N,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},jn.preloadModule=function(_,E){if(typeof _=="string")if(E){var R=A(E.as,E.crossOrigin);f.d.m(_,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else f.d.m(_)},jn.requestFormReset=function(_){f.d.r(_)},jn.unstable_batchedUpdates=function(_,E){return _(E)},jn.useFormState=function(_,E,R){return b.H.useFormState(_,E,R)},jn.useFormStatus=function(){return b.H.useHostTransitionStatus()},jn.version="19.2.4",jn}var eg;function cp(){if(eg)return of.exports;eg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),of.exports=up(),of.exports}var tg;function hp(){if(tg)return Ql;tg=1;var l=op(),i=Mf(),o=cp();function f(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function b(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function A(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(m(e)!==e)throw Error(f(188))}function E(e){var n=e.alternate;if(!n){if(n=m(e),n===null)throw Error(f(188));return n!==e?null:e}for(var s=e,h=n;;){var x=s.return;if(x===null)break;var w=x.alternate;if(w===null){if(h=x.return,h!==null){s=h;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===s)return _(x),e;if(w===h)return _(x),n;w=w.sibling}throw Error(f(188))}if(s.return!==h.return)s=x,h=w;else{for(var C=!1,D=x.child;D;){if(D===s){C=!0,s=x,h=w;break}if(D===h){C=!0,h=x,s=w;break}D=D.sibling}if(!C){for(D=w.child;D;){if(D===s){C=!0,s=w,h=x;break}if(D===h){C=!0,h=w,s=x;break}D=D.sibling}if(!C)throw Error(f(189))}}if(s.alternate!==h)throw Error(f(190))}if(s.tag!==3)throw Error(f(188));return s.stateNode.current===s?e:n}function R(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=R(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,L=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),ke=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function Ne(e){return e===null||typeof e!="object"?null:(e=it&&e[it]||e["@@iterator"],typeof e=="function"?e:null)}var at=Symbol.for("react.client.reference");function Nt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===at?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case le:return"Profiler";case te:return"StrictMode";case Be:return"Suspense";case Ee:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case Y:return e.displayName||"Context";case $:return(e._context.displayName||"Context")+".Consumer";case pe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:Nt(e.type)||"Memo";case Re:n=e._payload,e=e._init;try{return Nt(e(n))}catch{}}return null}var se=Array.isArray,ie=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},$e=[],st=-1;function H(e){return{current:e}}function oe(e){0>st||(e.current=$e[st],$e[st]=null,st--)}function ve(e,n){st++,$e[st]=e.current,e.current=n}var Ae=H(null),Ge=H(null),be=H(null),ft=H(null);function dt(e,n){switch(ve(be,n),ve(Ge,e),ve(Ae,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?p1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=p1(n),e=x1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}oe(Ae),ve(Ae,e)}function kt(){oe(Ae),oe(Ge),oe(be)}function kr(e){e.memoizedState!==null&&ve(ft,e);var n=Ae.current,s=x1(n,e.type);n!==s&&(ve(Ge,e),ve(Ae,s))}function wn(e){Ge.current===e&&(oe(Ae),oe(Ge)),ft.current===e&&(oe(ft),Xl._currentValue=Ue)}var Ui,gt;function Xn(e){if(Ui===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Ui=n&&n[1]||"",gt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ui+e+gt}var Yn=!1;function ui(e,n){if(!e||Yn)return"";Yn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var J=ae}Reflect.construct(e,[],de)}else{try{de.call()}catch(ae){J=ae}e.call(de.prototype)}}else{try{throw Error()}catch(ae){J=ae}(de=e())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&J&&typeof ae.stack=="string")return[ae.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],D=w[1];if(C&&D){var j=C.split(`
`),Q=D.split(`
`);for(x=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;if(h===j.length||x===Q.length)for(h=j.length-1,x=Q.length-1;1<=h&&0<=x&&j[h]!==Q[x];)x--;for(;1<=h&&0<=x;h--,x--)if(j[h]!==Q[x]){if(h!==1||x!==1)do if(h--,x--,0>x||j[h]!==Q[x]){var ue=`
`+j[h].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=h&&0<=x);break}}}finally{Yn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Xn(s):""}function bn(e,n){switch(e.tag){case 26:case 27:case 5:return Xn(e.type);case 16:return Xn("Lazy");case 13:return e.child!==n&&n!==null?Xn("Suspense Fallback"):Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 15:return ui(e.type,!1);case 11:return ui(e.type.render,!1);case 1:return ui(e.type,!0);case 31:return Xn("Activity");default:return""}}function Ct(e){try{var n="",s=null;do n+=bn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var et=Object.prototype.hasOwnProperty,ji=l.unstable_scheduleCallback,Ce=l.unstable_cancelCallback,ts=l.unstable_shouldYield,yo=l.unstable_requestPaint,Zt=l.unstable_now,rl=l.unstable_getCurrentPriorityLevel,Wn=l.unstable_ImmediatePriority,il=l.unstable_UserBlockingPriority,ar=l.unstable_NormalPriority,Rn=l.unstable_LowPriority,al=l.unstable_IdlePriority,ns=l.log,lc=l.unstable_setDisableYieldValue,Ft=null,we=null;function It(e){if(typeof ns=="function"&&lc(e),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Ft,e)}catch{}}var We=Math.clz32?Math.clz32:sl,Xt=Math.log,_a=Math.LN2;function sl(e){return e>>>=0,e===0?32:31-(Xt(e)/_a|0)|0}var Sa=256,lt=262144,Er=4194304;function Zr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ca(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var x=0,w=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var D=h&134217727;return D!==0?(h=D&~w,h!==0?x=Zr(h):(C&=D,C!==0?x=Zr(C):s||(s=D&~e,s!==0&&(x=Zr(s))))):(D=h&~w,D!==0?x=Zr(D):C!==0?x=Zr(C):s||(s=h&~e,s!==0&&(x=Zr(s)))),x===0?0:n!==0&&n!==x&&(n&w)===0&&(w=x&-x,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:x}function Nn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ll(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vn(){var e=Er;return Er<<=1,(Er&62914560)===0&&(Er=4194304),e}function Qr(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Jr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ar(e,n,s,h,x,w){var C=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var D=e.entanglements,j=e.expirationTimes,Q=e.hiddenUpdates;for(s=C&~s;0<s;){var ue=31-We(s),de=1<<ue;D[ue]=0,j[ue]=-1;var J=Q[ue];if(J!==null)for(Q[ue]=null,ue=0;ue<J.length;ue++){var ae=J[ue];ae!==null&&(ae.lane&=-536870913)}s&=~de}h!==0&&wo(e,h,0),w!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=w&~(C&~n))}function wo(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-We(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function $r(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-We(s),x=1<<h;x&n|e[h]&n&&(e[h]|=n),s&=~x}}function rs(e,n){var s=n&-n;return s=(s&42)!==0?1:Tn(s),(s&(e.suspendedLanes|n))!==0?0:s}function Tn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:F1(e.type))}function _e(e,n){var s=fe.p;try{return fe.p=e,n()}finally{fe.p=s}}var Fn=Math.random().toString(36).slice(2),ln="__reactFiber$"+Fn,Tt="__reactProps$"+Fn,sr="__reactContainer$"+Fn,Pi="__reactEvents$"+Fn,is="__reactListeners$"+Fn,_r="__reactHandles$"+Fn,bo="__reactResources$"+Fn,Ta="__reactMarker$"+Fn;function Kn(e){delete e[ln],delete e[Tt],delete e[Pi],delete e[is],delete e[_r]}function Jt(e){var n=e[ln];if(n)return n;for(var s=e.parentNode;s;){if(n=s[sr]||s[ln]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=_1(e);e!==null;){if(s=e[ln])return s;e=_1(e)}return n}e=s,s=e.parentNode}return null}function bt(e){if(e=e[ln]||e[sr]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Fi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(f(33))}function zn(e){var n=e[bo];return n||(n=e[bo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function $t(e){e[Ta]=!0}var ge=new Set,vo={};function At(e,n){lr(e,n),lr(e+"Capture",n)}function lr(e,n){for(vo[e]=n,e=0;e<n.length;e++)ge.add(n[e])}var oc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pt={},mt={};function tt(e){return et.call(mt,e)?!0:et.call(pt,e)?!1:oc.test(e)?mt[e]=!0:(pt[e]=!0,!1)}function zi(e,n,s){if(tt(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Hi(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function or(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ur(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function uc(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(C){s=""+C,w.call(this,C)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ht(e){if(!e._valueTracker){var n=Ur(e)?"checked":"value";e._valueTracker=uc(e,n,""+e[n])}}function jr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=Ur(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function as(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gi=/[\n"\\]/g;function Je(e){return e.replace(Gi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function fn(e,n,s,h,x,w,C,D){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),n!=null?C==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+xt(n)):e.value!==""+xt(n)&&(e.value=""+xt(n)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),n!=null?M(e,C,xt(n)):s!=null?M(e,C,xt(s)):h!=null&&e.removeAttribute("value"),x==null&&w!=null&&(e.defaultChecked=!!w),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.name=""+xt(D):e.removeAttribute("name")}function K(e,n,s,h,x,w,C,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){Ht(e);return}s=s!=null?""+xt(s):"",n=n!=null?""+xt(n):s,D||n===e.value||(e.value=n),e.defaultValue=n}h=h??x,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=D?e.checked:!!h,e.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C),Ht(e)}function M(e,n,s){n==="number"&&as(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Oe(e,n,s,h){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&h&&(e[s].defaultSelected=!0)}else{for(s=""+xt(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,h&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function on(e,n,s){if(n!=null&&(n=""+xt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+xt(s):""}function Hn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(f(92));if(se(h)){if(1<h.length)throw Error(f(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=xt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),Ht(e)}function Vi(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ol=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||ol.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Me(e,n,s){if(n!=null&&typeof n!="object")throw Error(f(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var x in n)h=n[x],n.hasOwnProperty(x)&&s[x]!==h&&Gn(e,x,h)}else for(var w in n)n.hasOwnProperty(w)&&Gn(e,w,n[w])}function Lt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(e){return cc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var Oa=null;function ul(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gt=null,Sr=null;function Pr(e){var n=bt(e);if(n&&(e=n.stateNode)){var s=e[Tt]||null;e:switch(e=n.stateNode,n.type){case"input":if(fn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Je(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var x=h[Tt]||null;if(!x)throw Error(f(90));fn(h,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&jr(h)}break e;case"textarea":on(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Oe(e,!!s.multiple,n,!1)}}}var je=!1;function Ao(e,n,s){if(je)return e(n,s);je=!0;try{var h=e(n);return h}finally{if(je=!1,(Gt!==null||Sr!==null)&&(gu(),Gt&&(n=Gt,e=Sr,Sr=Gt=null,Pr(n),e)))for(n=0;n<e.length;n++)Pr(e[n])}}function Ve(e,n){var s=e.stateNode;if(s===null)return null;var h=s[Tt]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(f(231,n,typeof s));return s}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(Ut)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){cl=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{cl=!1}var Fr=null,zr=null,ss=null;function Xi(){if(ss)return ss;var e,n=zr,s=n.length,h,x="value"in Fr?Fr.value:Fr.textContent,w=x.length;for(e=0;e<s&&n[e]===x[e];e++);var C=s-e;for(h=1;h<=C&&n[s-h]===x[w-h];h++);return ss=x.slice(e,1<h?1-h:void 0)}function ei(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function hl(){return!1}function dn(e){function n(s,h,x,w,C){this._reactName=s,this._targetInst=x,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(s=e[D],this[D]=s?s(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ti:hl,this.isPropagationStopped=hl,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),n}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=dn(ur),Yi=N({},ur,{view:0,detail:0}),_o=dn(Yi),ls,fl,Ra,os=N({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ra&&(Ra&&e.type==="mousemove"?(ls=e.screenX-Ra.screenX,fl=e.screenY-Ra.screenY):fl=ls=0,Ra=e),ls)},movementY:function(e){return"movementY"in e?e.movementY:fl}}),vt=dn(os),So=N({},os,{dataTransfer:0}),us=dn(So),ni=N({},Yi,{relatedTarget:0}),dl=dn(ni),re=N({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Ke=dn(re),An=N({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cs=dn(An),Co=N({},ur,{data:0}),To=dn(Co),hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function un(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=gl[e])?!!n[e]:!1}function Na(){return un}var Yt=N({},Yi,{key:function(e){if(e.key){var n=hc[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hs=dn(Yt),hi=N({},os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_t=dn(hi),Pe=N({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),dc=dn(Pe),jt=N({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),fi=dn(jt),Wi=N({},os,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gc=dn(Wi),Cr=N({},ur,{newState:0,oldState:0}),ml=dn(Cr),Oo=[9,13,27,32],Ia=Ut&&"CompositionEvent"in window,Ki=null;Ut&&"documentMode"in document&&(Ki=document.documentMode);var Ro=Ut&&"TextEvent"in window&&!Ki,No=Ut&&(!Ia||Ki&&8<Ki&&11>=Ki),di=" ",fs=!1;function Io(e,n){switch(e){case"keyup":return Oo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function ri(e,n){switch(e){case"compositionend":return Zi(n);case"keypress":return n.which!==32?null:(fs=!0,di);case"textInput":return e=n.data,e===di&&fs?null:e;default:return null}}function ds(e,n){if(Qi)return e==="compositionend"||!Ia&&Io(e,n)?(e=Xi(),ss=zr=Fr=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return No&&n.locale!=="ko"?null:n.data;default:return null}}var Qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Qn[e.type]:n==="textarea"}function cr(e,n,s,h){Gt?Sr?Sr.push(h):Sr=[h]:Gt=h,n=vu(n,"onChange"),0<n.length&&(s=new En("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Da=null,gi=null;function mc(e){c1(e,0)}function Ma(e){var n=Fi(e);if(jr(n))return e}function hr(e,n){if(e==="change")return n}var Do=!1;if(Ut){var Ba;if(Ut){var mi="oninput"in document;if(!mi){var ot=document.createElement("div");ot.setAttribute("oninput","return;"),mi=typeof ot.oninput=="function"}Ba=mi}else Ba=!1;Do=Ba&&(!document.documentMode||9<document.documentMode)}function ka(){Da&&(Da.detachEvent("onpropertychange",T),gi=Da=null)}function T(e){if(e.propertyName==="value"&&Ma(gi)){var n=[];cr(n,gi,e,ul(e)),Ao(mc,n)}}function t(e,n,s){e==="focusin"?(ka(),Da=n,gi=s,Da.attachEvent("onpropertychange",T)):e==="focusout"&&ka()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ma(gi)}function a(e,n){if(e==="click")return Ma(n)}function u(e,n){if(e==="input"||e==="change")return Ma(n)}function c(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var d=typeof Object.is=="function"?Object.is:c;function g(e,n){if(d(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var x=s[h];if(!et.call(n,x)||!d(e[x],n[x]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v(e,n){var s=y(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function S(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?S(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function O(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=as(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=as(e.document)}return n}function I(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var B=Ut&&"documentMode"in document&&11>=document.documentMode,P=null,F=null,X=null,ne=!1;function ye(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ne||P==null||P!==as(h)||(h=P,"selectionStart"in h&&I(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),X&&g(X,h)||(X=h,h=vu(F,"onSelect"),0<h.length&&(n=new En("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=P)))}function xe(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var me={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},Qe={},qe={};Ut&&(qe=document.createElement("div").style,"AnimationEvent"in window||(delete me.animationend.animation,delete me.animationiteration.animation,delete me.animationstart.animation),"TransitionEvent"in window||delete me.transitionend.transition);function en(e){if(Qe[e])return Qe[e];if(!me[e])return e;var n=me[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in qe)return Qe[e]=n[s];return e}var Jn=en("animationend"),In=en("animationiteration"),St=en("animationstart"),_n=en("transitionrun"),Vn=en("transitionstart"),Ji=en("transitioncancel"),pi=en("transitionend"),Mo=new Map,xl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xl.push("scrollEnd");function Hr(e,n){Mo.set(e,n),At(n,[e])}var Bo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tr=[],gs=0,pc=0;function ko(){for(var e=gs,n=pc=gs=0;n<e;){var s=Tr[n];Tr[n++]=null;var h=Tr[n];Tr[n++]=null;var x=Tr[n];Tr[n++]=null;var w=Tr[n];if(Tr[n++]=null,h!==null&&x!==null){var C=h.pending;C===null?x.next=x:(x.next=C.next,C.next=x),h.pending=x}w!==0&&qf(s,x,w)}}function Lo(e,n,s,h){Tr[gs++]=e,Tr[gs++]=n,Tr[gs++]=s,Tr[gs++]=h,pc|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function xc(e,n,s,h){return Lo(e,n,s,h),Uo(e)}function La(e,n){return Lo(e,null,null,n),Uo(e)}function qf(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var x=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(x=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,x&&n!==null&&(x=31-We(s),e=w.hiddenUpdates,h=e[x],h===null?e[x]=[n]:h.push(n),n.lane=s|536870912),w):null}function Uo(e){if(50<Pl)throw Pl=0,Ch=null,Error(f(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ms={};function P2(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(e,n,s,h){return new P2(e,n,s,h)}function yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,n){var s=e.alternate;return s===null?(s=fr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Xf(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function jo(e,n,s,h,x,w){var C=0;if(h=e,typeof e=="function")yc(e)&&(C=1);else if(typeof e=="string")C=Vm(e,s,Ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=fr(31,s,n,x),e.elementType=he,e.lanes=w,e;case G:return Ua(s.children,x,w,n);case te:C=8,x|=24;break;case le:return e=fr(12,s,n,x|2),e.elementType=le,e.lanes=w,e;case Be:return e=fr(13,s,n,x),e.elementType=Be,e.lanes=w,e;case Ee:return e=fr(19,s,n,x),e.elementType=Ee,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:C=10;break e;case $:C=9;break e;case pe:C=11;break e;case ee:C=14;break e;case Re:C=16,h=null;break e}C=29,s=Error(f(130,e===null?"null":typeof e,"")),h=null}return n=fr(C,s,n,x),n.elementType=e,n.type=h,n.lanes=w,n}function Ua(e,n,s,h){return e=fr(7,e,h,n),e.lanes=s,e}function wc(e,n,s){return e=fr(6,e,null,n),e.lanes=s,e}function Yf(e){var n=fr(18,null,null,0);return n.stateNode=e,n}function bc(e,n,s){return n=fr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Wf=new WeakMap;function Or(e,n){if(typeof e=="object"&&e!==null){var s=Wf.get(e);return s!==void 0?s:(n={value:e,source:n,stack:Ct(n)},Wf.set(e,n),n)}return{value:e,source:n,stack:Ct(n)}}var ps=[],xs=0,Po=null,yl=0,Rr=[],Nr=0,$i=null,ii=1,ai="";function yi(e,n){ps[xs++]=yl,ps[xs++]=Po,Po=e,yl=n}function Kf(e,n,s){Rr[Nr++]=ii,Rr[Nr++]=ai,Rr[Nr++]=$i,$i=e;var h=ii;e=ai;var x=32-We(h)-1;h&=~(1<<x),s+=1;var w=32-We(n)+x;if(30<w){var C=x-x%5;w=(h&(1<<C)-1).toString(32),h>>=C,x-=C,ii=1<<32-We(n)+x|s<<x|h,ai=w+e}else ii=1<<w|s<<x|h,ai=e}function vc(e){e.return!==null&&(yi(e,1),Kf(e,1,0))}function Ec(e){for(;e===Po;)Po=ps[--xs],ps[xs]=null,yl=ps[--xs],ps[xs]=null;for(;e===$i;)$i=Rr[--Nr],Rr[Nr]=null,ai=Rr[--Nr],Rr[Nr]=null,ii=Rr[--Nr],Rr[Nr]=null}function Zf(e,n){Rr[Nr++]=ii,Rr[Nr++]=ai,Rr[Nr++]=$i,ii=n.id,ai=n.overflow,$i=e}var Dn=null,Vt=null,ht=!1,ea=null,Ir=!1,Ac=Error(f(519));function ta(e){var n=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Or(n,e)),Ac}function Qf(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[ln]=e,n[Tt]=h,s){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(s=0;s<zl.length;s++)rt(zl[s],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":rt("invalid",n),K(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":rt("invalid",n);break;case"textarea":rt("invalid",n),Hn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||g1(n.textContent,s)?(h.popover!=null&&(rt("beforetoggle",n),rt("toggle",n)),h.onScroll!=null&&rt("scroll",n),h.onScrollEnd!=null&&rt("scrollend",n),h.onClick!=null&&(n.onclick=Zn),n=!0):n=!1,n||ta(e,!0)}function Jf(e){for(Dn=e.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:Dn=Dn.return}}function ys(e){if(e!==Dn)return!1;if(!ht)return Jf(e),ht=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||zh(e.type,e.memoizedProps)),s=!s),s&&Vt&&ta(e),Jf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Vt=A1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Vt=A1(e)}else n===27?(n=Vt,ma(e.type)?(e=Xh,Xh=null,Vt=e):Vt=n):Vt=Dn?Mr(e.stateNode.nextSibling):null;return!0}function ja(){Vt=Dn=null,ht=!1}function _c(){var e=ea;return e!==null&&(nr===null?nr=e:nr.push.apply(nr,e),ea=null),e}function wl(e){ea===null?ea=[e]:ea.push(e)}var Sc=H(null),Pa=null,wi=null;function na(e,n,s){ve(Sc,n._currentValue),n._currentValue=s}function bi(e){e._currentValue=Sc.current,oe(Sc)}function Cc(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function Tc(e,n,s,h){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var w=x.dependencies;if(w!==null){var C=x.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=x;for(var j=0;j<n.length;j++)if(D.context===n[j]){w.lanes|=s,D=w.alternate,D!==null&&(D.lanes|=s),Cc(w.return,s,e),h||(C=null);break e}w=D.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(f(341));C.lanes|=s,w=C.alternate,w!==null&&(w.lanes|=s),Cc(C,s,e),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===e){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function ws(e,n,s,h){e=null;for(var x=n,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(f(387));if(C=C.memoizedProps,C!==null){var D=x.type;d(x.pendingProps.value,C.value)||(e!==null?e.push(D):e=[D])}}else if(x===ft.current){if(C=x.alternate,C===null)throw Error(f(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(Xl):e=[Xl])}x=x.return}e!==null&&Tc(n,e,s,h),n.flags|=262144}function Fo(e){for(e=e.firstContext;e!==null;){if(!d(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Pa=e,wi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mn(e){return $f(Pa,e)}function zo(e,n){return Pa===null&&Fa(e),$f(e,n)}function $f(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},wi===null){if(e===null)throw Error(f(308));wi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else wi=wi.next=n;return s}var F2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},z2=l.unstable_scheduleCallback,H2=l.unstable_NormalPriority,gn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oc(){return{controller:new F2,data:new Map,refCount:0}}function bl(e){e.refCount--,e.refCount===0&&z2(H2,function(){e.controller.abort()})}var vl=null,Rc=0,bs=0,vs=null;function G2(e,n){if(vl===null){var s=vl=[];Rc=0,bs=Dh(),vs={status:"pending",value:void 0,then:function(h){s.push(h)}}}return Rc++,n.then(ed,ed),n}function ed(){if(--Rc===0&&vl!==null){vs!==null&&(vs.status="fulfilled");var e=vl;vl=null,bs=0,vs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function V2(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(x){s.push(x)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var x=0;x<s.length;x++)(0,s[x])(n)},function(x){for(h.status="rejected",h.reason=x,x=0;x<s.length;x++)(0,s[x])(void 0)}),h}var td=ie.S;ie.S=function(e,n){j0=Zt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&G2(e,n),td!==null&&td(e,n)};var za=H(null);function Nc(){var e=za.current;return e!==null?e:Pt.pooledCache}function Ho(e,n){n===null?ve(za,za.current):ve(za,n.pool)}function nd(){var e=Nc();return e===null?null:{parent:gn._currentValue,pool:e}}var Es=Error(f(460)),Ic=Error(f(474)),Go=Error(f(542)),Vo={then:function(){}};function rd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function id(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Zn,Zn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sd(e),e;default:if(typeof n.status=="string")n.then(Zn,Zn);else{if(e=Pt,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=h}},function(h){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sd(e),e}throw Ga=n,Es}}function Ha(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ga=s,Es):s}}var Ga=null;function ad(){if(Ga===null)throw Error(f(459));var e=Ga;return Ga=null,e}function sd(e){if(e===Es||e===Go)throw Error(f(483))}var As=null,El=0;function qo(e){var n=El;return El+=1,As===null&&(As=[]),id(As,e,n)}function Al(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Xo(e,n){throw n.$$typeof===L?Error(f(525)):(e=Object.prototype.toString.call(n),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ld(e){function n(q,z){if(e){var Z=q.deletions;Z===null?(q.deletions=[z],q.flags|=16):Z.push(z)}}function s(q,z){if(!e)return null;for(;z!==null;)n(q,z),z=z.sibling;return null}function h(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function x(q,z){return q=xi(q,z),q.index=0,q.sibling=null,q}function w(q,z,Z){return q.index=Z,e?(Z=q.alternate,Z!==null?(Z=Z.index,Z<z?(q.flags|=67108866,z):Z):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function C(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function D(q,z,Z,ce){return z===null||z.tag!==6?(z=wc(Z,q.mode,ce),z.return=q,z):(z=x(z,Z),z.return=q,z)}function j(q,z,Z,ce){var Le=Z.type;return Le===G?ue(q,z,Z.props.children,ce,Z.key):z!==null&&(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Re&&Ha(Le)===z.type)?(z=x(z,Z.props),Al(z,Z),z.return=q,z):(z=jo(Z.type,Z.key,Z.props,null,q.mode,ce),Al(z,Z),z.return=q,z)}function Q(q,z,Z,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==Z.containerInfo||z.stateNode.implementation!==Z.implementation?(z=bc(Z,q.mode,ce),z.return=q,z):(z=x(z,Z.children||[]),z.return=q,z)}function ue(q,z,Z,ce,Le){return z===null||z.tag!==7?(z=Ua(Z,q.mode,ce,Le),z.return=q,z):(z=x(z,Z),z.return=q,z)}function de(q,z,Z){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=wc(""+z,q.mode,Z),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case U:return Z=jo(z.type,z.key,z.props,null,q.mode,Z),Al(Z,z),Z.return=q,Z;case V:return z=bc(z,q.mode,Z),z.return=q,z;case Re:return z=Ha(z),de(q,z,Z)}if(se(z)||Ne(z))return z=Ua(z,q.mode,Z,null),z.return=q,z;if(typeof z.then=="function")return de(q,qo(z),Z);if(z.$$typeof===Y)return de(q,zo(q,z),Z);Xo(q,z)}return null}function J(q,z,Z,ce){var Le=z!==null?z.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Le!==null?null:D(q,z,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:return Z.key===Le?j(q,z,Z,ce):null;case V:return Z.key===Le?Q(q,z,Z,ce):null;case Re:return Z=Ha(Z),J(q,z,Z,ce)}if(se(Z)||Ne(Z))return Le!==null?null:ue(q,z,Z,ce,null);if(typeof Z.then=="function")return J(q,z,qo(Z),ce);if(Z.$$typeof===Y)return J(q,z,zo(q,Z),ce);Xo(q,Z)}return null}function ae(q,z,Z,ce,Le){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return q=q.get(Z)||null,D(z,q,""+ce,Le);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case U:return q=q.get(ce.key===null?Z:ce.key)||null,j(z,q,ce,Le);case V:return q=q.get(ce.key===null?Z:ce.key)||null,Q(z,q,ce,Le);case Re:return ce=Ha(ce),ae(q,z,Z,ce,Le)}if(se(ce)||Ne(ce))return q=q.get(Z)||null,ue(z,q,ce,Le,null);if(typeof ce.then=="function")return ae(q,z,Z,qo(ce),Le);if(ce.$$typeof===Y)return ae(q,z,Z,zo(z,ce),Le);Xo(z,ce)}return null}function Te(q,z,Z,ce){for(var Le=null,yt=null,Ie=z,Ze=z=0,ct=null;Ie!==null&&Ze<Z.length;Ze++){Ie.index>Ze?(ct=Ie,Ie=null):ct=Ie.sibling;var wt=J(q,Ie,Z[Ze],ce);if(wt===null){Ie===null&&(Ie=ct);break}e&&Ie&&wt.alternate===null&&n(q,Ie),z=w(wt,z,Ze),yt===null?Le=wt:yt.sibling=wt,yt=wt,Ie=ct}if(Ze===Z.length)return s(q,Ie),ht&&yi(q,Ze),Le;if(Ie===null){for(;Ze<Z.length;Ze++)Ie=de(q,Z[Ze],ce),Ie!==null&&(z=w(Ie,z,Ze),yt===null?Le=Ie:yt.sibling=Ie,yt=Ie);return ht&&yi(q,Ze),Le}for(Ie=h(Ie);Ze<Z.length;Ze++)ct=ae(Ie,q,Ze,Z[Ze],ce),ct!==null&&(e&&ct.alternate!==null&&Ie.delete(ct.key===null?Ze:ct.key),z=w(ct,z,Ze),yt===null?Le=ct:yt.sibling=ct,yt=ct);return e&&Ie.forEach(function(ba){return n(q,ba)}),ht&&yi(q,Ze),Le}function Fe(q,z,Z,ce){if(Z==null)throw Error(f(151));for(var Le=null,yt=null,Ie=z,Ze=z=0,ct=null,wt=Z.next();Ie!==null&&!wt.done;Ze++,wt=Z.next()){Ie.index>Ze?(ct=Ie,Ie=null):ct=Ie.sibling;var ba=J(q,Ie,wt.value,ce);if(ba===null){Ie===null&&(Ie=ct);break}e&&Ie&&ba.alternate===null&&n(q,Ie),z=w(ba,z,Ze),yt===null?Le=ba:yt.sibling=ba,yt=ba,Ie=ct}if(wt.done)return s(q,Ie),ht&&yi(q,Ze),Le;if(Ie===null){for(;!wt.done;Ze++,wt=Z.next())wt=de(q,wt.value,ce),wt!==null&&(z=w(wt,z,Ze),yt===null?Le=wt:yt.sibling=wt,yt=wt);return ht&&yi(q,Ze),Le}for(Ie=h(Ie);!wt.done;Ze++,wt=Z.next())wt=ae(Ie,q,Ze,wt.value,ce),wt!==null&&(e&&wt.alternate!==null&&Ie.delete(wt.key===null?Ze:wt.key),z=w(wt,z,Ze),yt===null?Le=wt:yt.sibling=wt,yt=wt);return e&&Ie.forEach(function(tp){return n(q,tp)}),ht&&yi(q,Ze),Le}function Bt(q,z,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===G&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:e:{for(var Le=Z.key;z!==null;){if(z.key===Le){if(Le=Z.type,Le===G){if(z.tag===7){s(q,z.sibling),ce=x(z,Z.props.children),ce.return=q,q=ce;break e}}else if(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Re&&Ha(Le)===z.type){s(q,z.sibling),ce=x(z,Z.props),Al(ce,Z),ce.return=q,q=ce;break e}s(q,z);break}else n(q,z);z=z.sibling}Z.type===G?(ce=Ua(Z.props.children,q.mode,ce,Z.key),ce.return=q,q=ce):(ce=jo(Z.type,Z.key,Z.props,null,q.mode,ce),Al(ce,Z),ce.return=q,q=ce)}return C(q);case V:e:{for(Le=Z.key;z!==null;){if(z.key===Le)if(z.tag===4&&z.stateNode.containerInfo===Z.containerInfo&&z.stateNode.implementation===Z.implementation){s(q,z.sibling),ce=x(z,Z.children||[]),ce.return=q,q=ce;break e}else{s(q,z);break}else n(q,z);z=z.sibling}ce=bc(Z,q.mode,ce),ce.return=q,q=ce}return C(q);case Re:return Z=Ha(Z),Bt(q,z,Z,ce)}if(se(Z))return Te(q,z,Z,ce);if(Ne(Z)){if(Le=Ne(Z),typeof Le!="function")throw Error(f(150));return Z=Le.call(Z),Fe(q,z,Z,ce)}if(typeof Z.then=="function")return Bt(q,z,qo(Z),ce);if(Z.$$typeof===Y)return Bt(q,z,zo(q,Z),ce);Xo(q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,z!==null&&z.tag===6?(s(q,z.sibling),ce=x(z,Z),ce.return=q,q=ce):(s(q,z),ce=wc(Z,q.mode,ce),ce.return=q,q=ce),C(q)):s(q,z)}return function(q,z,Z,ce){try{El=0;var Le=Bt(q,z,Z,ce);return As=null,Le}catch(Ie){if(Ie===Es||Ie===Go)throw Ie;var yt=fr(29,Ie,null,q.mode);return yt.lanes=ce,yt.return=q,yt}}}var Va=ld(!0),od=ld(!1),ra=!1;function Dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Et&2)!==0){var x=h.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),h.pending=n,n=Uo(e),qf(e,null,s),n}return Lo(e,h,n,s),Uo(e)}function _l(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,$r(e,s)}}function Bc(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var x=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var C={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?x=w=C:w=w.next=C,s=s.next}while(s!==null);w===null?x=w=n:w=w.next=n}else x=w=n;s={baseState:h.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var kc=!1;function Sl(){if(kc){var e=vs;if(e!==null)throw e}}function Cl(e,n,s,h){kc=!1;var x=e.updateQueue;ra=!1;var w=x.firstBaseUpdate,C=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var j=D,Q=j.next;j.next=null,C===null?w=Q:C.next=Q,C=j;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==C&&(D===null?ue.firstBaseUpdate=Q:D.next=Q,ue.lastBaseUpdate=j))}if(w!==null){var de=x.baseState;C=0,ue=Q=j=null,D=w;do{var J=D.lane&-536870913,ae=J!==D.lane;if(ae?(ut&J)===J:(h&J)===J){J!==0&&J===bs&&(kc=!0),ue!==null&&(ue=ue.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Te=e,Fe=D;J=n;var Bt=s;switch(Fe.tag){case 1:if(Te=Fe.payload,typeof Te=="function"){de=Te.call(Bt,de,J);break e}de=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Fe.payload,J=typeof Te=="function"?Te.call(Bt,de,J):Te,J==null)break e;de=N({},de,J);break e;case 2:ra=!0}}J=D.callback,J!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=x.callbacks,ae===null?x.callbacks=[J]:ae.push(J))}else ae={lane:J,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(Q=ue=ae,j=de):ue=ue.next=ae,C|=J;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;ae=D,D=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);ue===null&&(j=de),x.baseState=j,x.firstBaseUpdate=Q,x.lastBaseUpdate=ue,w===null&&(x.shared.lanes=0),ca|=C,e.lanes=C,e.memoizedState=de}}function ud(e,n){if(typeof e!="function")throw Error(f(191,e));e.call(n)}function cd(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)ud(s[e],n)}var _s=H(null),Yo=H(0);function hd(e,n){e=Ri,ve(Yo,e),ve(_s,n),Ri=e|n.baseLanes}function Lc(){ve(Yo,Ri),ve(_s,_s.current)}function Uc(){Ri=Yo.current,oe(_s),oe(Yo)}var dr=H(null),Dr=null;function sa(e){var n=e.alternate;ve(cn,cn.current&1),ve(dr,e),Dr===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(Dr=e)}function jc(e){ve(cn,cn.current),ve(dr,e),Dr===null&&(Dr=e)}function fd(e){e.tag===22?(ve(cn,cn.current),ve(dr,e),Dr===null&&(Dr=e)):la()}function la(){ve(cn,cn.current),ve(dr,dr.current)}function gr(e){oe(dr),Dr===e&&(Dr=null),oe(cn)}var cn=H(0);function Wo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Vh(s)||qh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var vi=0,Ye=null,Dt=null,mn=null,Ko=!1,Ss=!1,qa=!1,Zo=0,Tl=0,Cs=null,q2=0;function tn(){throw Error(f(321))}function Pc(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!d(e[s],n[s]))return!1;return!0}function Fc(e,n,s,h,x,w){return vi=w,Ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ie.H=e===null||e.memoizedState===null?Kd:th,qa=!1,w=s(h,x),qa=!1,Ss&&(w=gd(n,s,h,x)),dd(e),w}function dd(e){ie.H=Nl;var n=Dt!==null&&Dt.next!==null;if(vi=0,mn=Dt=Ye=null,Ko=!1,Tl=0,Cs=null,n)throw Error(f(300));e===null||pn||(e=e.dependencies,e!==null&&Fo(e)&&(pn=!0))}function gd(e,n,s,h){Ye=e;var x=0;do{if(Ss&&(Cs=null),Tl=0,Ss=!1,25<=x)throw Error(f(301));if(x+=1,mn=Dt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ie.H=Zd,w=n(s,h)}while(Ss);return w}function X2(){var e=ie.H,n=e.useState()[0];return n=typeof n.then=="function"?Ol(n):n,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(Ye.flags|=1024),n}function zc(){var e=Zo!==0;return Zo=0,e}function Hc(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Gc(e){if(Ko){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Ko=!1}vi=0,mn=Dt=Ye=null,Ss=!1,Tl=Zo=0,Cs=null}function qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Ye.memoizedState=mn=e:mn=mn.next=e,mn}function hn(){if(Dt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var n=mn===null?Ye.memoizedState:mn.next;if(n!==null)mn=n,Dt=e;else{if(e===null)throw Ye.alternate===null?Error(f(467)):Error(f(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},mn===null?Ye.memoizedState=mn=e:mn=mn.next=e}return mn}function Qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(e){var n=Tl;return Tl+=1,Cs===null&&(Cs=[]),e=id(Cs,e,n),n=Ye,(mn===null?n.memoizedState:mn.next)===null&&(n=n.alternate,ie.H=n===null||n.memoizedState===null?Kd:th),e}function Jo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ol(e);if(e.$$typeof===Y)return Mn(e)}throw Error(f(438,String(e)))}function Vc(e){var n=null,s=Ye.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=Ye.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Qo(),Ye.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=ke;return n.index++,s}function Ei(e,n){return typeof n=="function"?n(e):n}function $o(e){var n=hn();return qc(n,Dt,e)}function qc(e,n,s){var h=e.queue;if(h===null)throw Error(f(311));h.lastRenderedReducer=s;var x=e.baseQueue,w=h.pending;if(w!==null){if(x!==null){var C=x.next;x.next=w.next,w.next=C}n.baseQueue=x=w,h.pending=null}if(w=e.baseState,x===null)e.memoizedState=w;else{n=x.next;var D=C=null,j=null,Q=n,ue=!1;do{var de=Q.lane&-536870913;if(de!==Q.lane?(ut&de)===de:(vi&de)===de){var J=Q.revertLane;if(J===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),de===bs&&(ue=!0);else if((vi&J)===J){Q=Q.next,J===bs&&(ue=!0);continue}else de={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(D=j=de,C=w):j=j.next=de,Ye.lanes|=J,ca|=J;de=Q.action,qa&&s(w,de),w=Q.hasEagerState?Q.eagerState:s(w,de)}else J={lane:de,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(D=j=J,C=w):j=j.next=J,Ye.lanes|=de,ca|=de;Q=Q.next}while(Q!==null&&Q!==n);if(j===null?C=w:j.next=D,!d(w,e.memoizedState)&&(pn=!0,ue&&(s=vs,s!==null)))throw s;e.memoizedState=w,e.baseState=C,e.baseQueue=j,h.lastRenderedState=w}return x===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function Xc(e){var n=hn(),s=n.queue;if(s===null)throw Error(f(311));s.lastRenderedReducer=e;var h=s.dispatch,x=s.pending,w=n.memoizedState;if(x!==null){s.pending=null;var C=x=x.next;do w=e(w,C.action),C=C.next;while(C!==x);d(w,n.memoizedState)||(pn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function md(e,n,s){var h=Ye,x=hn(),w=ht;if(w){if(s===void 0)throw Error(f(407));s=s()}else s=n();var C=!d((Dt||x).memoizedState,s);if(C&&(x.memoizedState=s,pn=!0),x=x.queue,Kc(yd.bind(null,h,x,e),[e]),x.getSnapshot!==n||C||mn!==null&&mn.memoizedState.tag&1){if(h.flags|=2048,Ts(9,{destroy:void 0},xd.bind(null,h,x,s,n),null),Pt===null)throw Error(f(349));w||(vi&127)!==0||pd(h,n,s)}return s}function pd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ye.updateQueue,n===null?(n=Qo(),Ye.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function xd(e,n,s,h){n.value=s,n.getSnapshot=h,wd(n)&&bd(e)}function yd(e,n,s){return s(function(){wd(n)&&bd(e)})}function wd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!d(e,s)}catch{return!0}}function bd(e){var n=La(e,2);n!==null&&rr(n,e,2)}function Yc(e){var n=qn();if(typeof e=="function"){var s=e;if(e=s(),qa){It(!0);try{s()}finally{It(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},n}function vd(e,n,s,h){return e.baseState=s,qc(e,Dt,typeof h=="function"?h:Ei)}function Y2(e,n,s,h,x){if(nu(e))throw Error(f(485));if(e=n.action,e!==null){var w={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};ie.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,Ed(n,w)):(w.next=s.next,n.pending=s.next=w)}}function Ed(e,n){var s=n.action,h=n.payload,x=e.state;if(n.isTransition){var w=ie.T,C={};ie.T=C;try{var D=s(x,h),j=ie.S;j!==null&&j(C,D),Ad(e,n,D)}catch(Q){Wc(e,n,Q)}finally{w!==null&&C.types!==null&&(w.types=C.types),ie.T=w}}else try{w=s(x,h),Ad(e,n,w)}catch(Q){Wc(e,n,Q)}}function Ad(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){_d(e,n,h)},function(h){return Wc(e,n,h)}):_d(e,n,s)}function _d(e,n,s){n.status="fulfilled",n.value=s,Sd(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Ed(e,s)))}function Wc(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,Sd(n),n=n.next;while(n!==h)}e.action=null}function Sd(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Cd(e,n){return n}function Td(e,n){if(ht){var s=Pt.formState;if(s!==null){e:{var h=Ye;if(ht){if(Vt){t:{for(var x=Vt,w=Ir;x.nodeType!==8;){if(!w){x=null;break t}if(x=Mr(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Vt=Mr(x.nextSibling),h=x.data==="F!";break e}}ta(h)}h=!1}h&&(n=s[0])}}return s=qn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:n},s.queue=h,s=Xd.bind(null,Ye,h),h.dispatch=s,h=Yc(!1),w=eh.bind(null,Ye,!1,h.queue),h=qn(),x={state:n,dispatch:null,action:e,pending:null},h.queue=x,s=Y2.bind(null,Ye,x,w,s),x.dispatch=s,h.memoizedState=e,[n,s,!1]}function Od(e){var n=hn();return Rd(n,Dt,e)}function Rd(e,n,s){if(n=qc(e,n,Cd)[0],e=$o(Ei)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=Ol(n)}catch(C){throw C===Es?Go:C}else h=n;n=hn();var x=n.queue,w=x.dispatch;return s!==n.memoizedState&&(Ye.flags|=2048,Ts(9,{destroy:void 0},W2.bind(null,x,s),null)),[h,w,e]}function W2(e,n){e.action=n}function Nd(e){var n=hn(),s=Dt;if(s!==null)return Rd(n,s,e);hn(),n=n.memoizedState,s=hn();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ts(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=Ye.updateQueue,n===null&&(n=Qo(),Ye.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function Id(){return hn().memoizedState}function eu(e,n,s,h){var x=qn();Ye.flags|=e,x.memoizedState=Ts(1|n,{destroy:void 0},s,h===void 0?null:h)}function tu(e,n,s,h){var x=hn();h=h===void 0?null:h;var w=x.memoizedState.inst;Dt!==null&&h!==null&&Pc(h,Dt.memoizedState.deps)?x.memoizedState=Ts(n,w,s,h):(Ye.flags|=e,x.memoizedState=Ts(1|n,w,s,h))}function Dd(e,n){eu(8390656,8,e,n)}function Kc(e,n){tu(2048,8,e,n)}function K2(e){Ye.flags|=4;var n=Ye.updateQueue;if(n===null)n=Qo(),Ye.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function Md(e){var n=hn().memoizedState;return K2({ref:n,nextImpl:e}),function(){if((Et&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}function Bd(e,n){return tu(4,2,e,n)}function kd(e,n){return tu(4,4,e,n)}function Ld(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ud(e,n,s){s=s!=null?s.concat([e]):null,tu(4,4,Ld.bind(null,n,e),s)}function Zc(){}function jd(e,n){var s=hn();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&Pc(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function Pd(e,n){var s=hn();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&Pc(n,h[1]))return h[0];if(h=e(),qa){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[h,n],h}function Qc(e,n,s){return s===void 0||(vi&1073741824)!==0&&(ut&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=F0(),Ye.lanes|=e,ca|=e,s)}function Fd(e,n,s,h){return d(s,n)?s:_s.current!==null?(e=Qc(e,s,h),d(e,n)||(pn=!0),e):(vi&42)===0||(vi&1073741824)!==0&&(ut&261930)===0?(pn=!0,e.memoizedState=s):(e=F0(),Ye.lanes|=e,ca|=e,n)}function zd(e,n,s,h,x){var w=fe.p;fe.p=w!==0&&8>w?w:8;var C=ie.T,D={};ie.T=D,eh(e,!1,n,s);try{var j=x(),Q=ie.S;if(Q!==null&&Q(D,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ue=V2(j,h);Rl(e,n,ue,xr(e))}else Rl(e,n,h,xr(e))}catch(de){Rl(e,n,{then:function(){},status:"rejected",reason:de},xr())}finally{fe.p=w,C!==null&&D.types!==null&&(C.types=D.types),ie.T=C}}function Z2(){}function Jc(e,n,s,h){if(e.tag!==5)throw Error(f(476));var x=Hd(e).queue;zd(e,x,n,Ue,s===null?Z2:function(){return Gd(e),s(h)})}function Hd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:Ue},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Gd(e){var n=Hd(e);n.next===null&&(n=e.alternate.memoizedState),Rl(e,n.next.queue,{},xr())}function $c(){return Mn(Xl)}function Vd(){return hn().memoizedState}function qd(){return hn().memoizedState}function Q2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=xr();e=ia(s);var h=aa(n,e,s);h!==null&&(rr(h,n,s),_l(h,n,s)),n={cache:Oc()},e.payload=n;return}n=n.return}}function J2(e,n,s){var h=xr();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},nu(e)?Yd(n,s):(s=xc(e,n,s,h),s!==null&&(rr(s,e,h),Wd(s,n,h)))}function Xd(e,n,s){var h=xr();Rl(e,n,s,h)}function Rl(e,n,s,h){var x={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(nu(e))Yd(n,x);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var C=n.lastRenderedState,D=w(C,s);if(x.hasEagerState=!0,x.eagerState=D,d(D,C))return Lo(e,n,x,0),Pt===null&&ko(),!1}catch{}if(s=xc(e,n,x,h),s!==null)return rr(s,e,h),Wd(s,n,h),!0}return!1}function eh(e,n,s,h){if(h={lane:2,revertLane:Dh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},nu(e)){if(n)throw Error(f(479))}else n=xc(e,s,h,2),n!==null&&rr(n,e,2)}function nu(e){var n=e.alternate;return e===Ye||n!==null&&n===Ye}function Yd(e,n){Ss=Ko=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Wd(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,$r(e,s)}}var Nl={readContext:Mn,use:Jo,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Nl.useEffectEvent=tn;var Kd={readContext:Mn,use:Jo,useCallback:function(e,n){return qn().memoizedState=[e,n===void 0?null:n],e},useContext:Mn,useEffect:Dd,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,eu(4194308,4,Ld.bind(null,n,e),s)},useLayoutEffect:function(e,n){return eu(4194308,4,e,n)},useInsertionEffect:function(e,n){eu(4,2,e,n)},useMemo:function(e,n){var s=qn();n=n===void 0?null:n;var h=e();if(qa){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=qn();if(s!==void 0){var x=s(n);if(qa){It(!0);try{s(n)}finally{It(!1)}}}else x=n;return h.memoizedState=h.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},h.queue=e,e=e.dispatch=J2.bind(null,Ye,e),[h.memoizedState,e]},useRef:function(e){var n=qn();return e={current:e},n.memoizedState=e},useState:function(e){e=Yc(e);var n=e.queue,s=Xd.bind(null,Ye,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Zc,useDeferredValue:function(e,n){var s=qn();return Qc(s,e,n)},useTransition:function(){var e=Yc(!1);return e=zd.bind(null,Ye,e.queue,!0,!1),qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=Ye,x=qn();if(ht){if(s===void 0)throw Error(f(407));s=s()}else{if(s=n(),Pt===null)throw Error(f(349));(ut&127)!==0||pd(h,n,s)}x.memoizedState=s;var w={value:s,getSnapshot:n};return x.queue=w,Dd(yd.bind(null,h,w,e),[e]),h.flags|=2048,Ts(9,{destroy:void 0},xd.bind(null,h,w,s,n),null),s},useId:function(){var e=qn(),n=Pt.identifierPrefix;if(ht){var s=ai,h=ii;s=(h&~(1<<32-We(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Zo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=q2++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:$c,useFormState:Td,useActionState:Td,useOptimistic:function(e){var n=qn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=eh.bind(null,Ye,!0,s),s.dispatch=n,[e,n]},useMemoCache:Vc,useCacheRefresh:function(){return qn().memoizedState=Q2.bind(null,Ye)},useEffectEvent:function(e){var n=qn(),s={impl:e};return n.memoizedState=s,function(){if((Et&2)!==0)throw Error(f(440));return s.impl.apply(void 0,arguments)}}},th={readContext:Mn,use:Jo,useCallback:jd,useContext:Mn,useEffect:Kc,useImperativeHandle:Ud,useInsertionEffect:Bd,useLayoutEffect:kd,useMemo:Pd,useReducer:$o,useRef:Id,useState:function(){return $o(Ei)},useDebugValue:Zc,useDeferredValue:function(e,n){var s=hn();return Fd(s,Dt.memoizedState,e,n)},useTransition:function(){var e=$o(Ei)[0],n=hn().memoizedState;return[typeof e=="boolean"?e:Ol(e),n]},useSyncExternalStore:md,useId:Vd,useHostTransitionStatus:$c,useFormState:Od,useActionState:Od,useOptimistic:function(e,n){var s=hn();return vd(s,Dt,e,n)},useMemoCache:Vc,useCacheRefresh:qd};th.useEffectEvent=Md;var Zd={readContext:Mn,use:Jo,useCallback:jd,useContext:Mn,useEffect:Kc,useImperativeHandle:Ud,useInsertionEffect:Bd,useLayoutEffect:kd,useMemo:Pd,useReducer:Xc,useRef:Id,useState:function(){return Xc(Ei)},useDebugValue:Zc,useDeferredValue:function(e,n){var s=hn();return Dt===null?Qc(s,e,n):Fd(s,Dt.memoizedState,e,n)},useTransition:function(){var e=Xc(Ei)[0],n=hn().memoizedState;return[typeof e=="boolean"?e:Ol(e),n]},useSyncExternalStore:md,useId:Vd,useHostTransitionStatus:$c,useFormState:Nd,useActionState:Nd,useOptimistic:function(e,n){var s=hn();return Dt!==null?vd(s,Dt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Vc,useCacheRefresh:qd};Zd.useEffectEvent=Md;function nh(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:N({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var rh={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=xr(),x=ia(h);x.payload=n,s!=null&&(x.callback=s),n=aa(e,x,h),n!==null&&(rr(n,e,h),_l(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=xr(),x=ia(h);x.tag=1,x.payload=n,s!=null&&(x.callback=s),n=aa(e,x,h),n!==null&&(rr(n,e,h),_l(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=xr(),h=ia(s);h.tag=2,n!=null&&(h.callback=n),n=aa(e,h,s),n!==null&&(rr(n,e,s),_l(n,e,s))}};function Qd(e,n,s,h,x,w,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,C):n.prototype&&n.prototype.isPureReactComponent?!g(s,h)||!g(x,w):!0}function Jd(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&rh.enqueueReplaceState(n,n.state,null)}function Xa(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=N({},s));for(var x in e)s[x]===void 0&&(s[x]=e[x])}return s}function $d(e){Bo(e)}function e0(e){console.error(e)}function t0(e){Bo(e)}function ru(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function n0(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function ih(e,n,s){return s=ia(s),s.tag=3,s.payload={element:null},s.callback=function(){ru(e,n)},s}function r0(e){return e=ia(e),e.tag=3,e}function i0(e,n,s,h){var x=s.type.getDerivedStateFromError;if(typeof x=="function"){var w=h.value;e.payload=function(){return x(w)},e.callback=function(){n0(n,s,h)}}var C=s.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){n0(n,s,h),typeof x!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function $2(e,n,s,h,x){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&ws(n,s,x,!0),s=dr.current,s!==null){switch(s.tag){case 31:case 13:return Dr===null?mu():s.alternate===null&&nn===0&&(nn=3),s.flags&=-257,s.flags|=65536,s.lanes=x,h===Vo?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),Rh(e,h,x)),!1;case 22:return s.flags|=65536,h===Vo?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),Rh(e,h,x)),!1}throw Error(f(435,s.tag))}return Rh(e,h,x),mu(),!1}if(ht)return n=dr.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,h!==Ac&&(e=Error(f(422),{cause:h}),wl(Or(e,s)))):(h!==Ac&&(n=Error(f(423),{cause:h}),wl(Or(n,s))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,h=Or(h,s),x=ih(e.stateNode,h,x),Bc(e,x),nn!==4&&(nn=2)),!1;var w=Error(f(520),{cause:h});if(w=Or(w,s),jl===null?jl=[w]:jl.push(w),nn!==4&&(nn=2),n===null)return!0;h=Or(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=x&-x,s.lanes|=e,e=ih(s.stateNode,h,e),Bc(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ha===null||!ha.has(w))))return s.flags|=65536,x&=-x,s.lanes|=x,x=r0(x),i0(x,e,s,h),Bc(s,x),!1}s=s.return}while(s!==null);return!1}var ah=Error(f(461)),pn=!1;function Bn(e,n,s,h){n.child=e===null?od(n,null,s,h):Va(n,e.child,s,h)}function a0(e,n,s,h,x){s=s.render;var w=n.ref;if("ref"in h){var C={};for(var D in h)D!=="ref"&&(C[D]=h[D])}else C=h;return Fa(n),h=Fc(e,n,s,C,w,x),D=zc(),e!==null&&!pn?(Hc(e,n,x),Ai(e,n,x)):(ht&&D&&vc(n),n.flags|=1,Bn(e,n,h,x),n.child)}function s0(e,n,s,h,x){if(e===null){var w=s.type;return typeof w=="function"&&!yc(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,l0(e,n,w,h,x)):(e=jo(s.type,null,h,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!dh(e,x)){var C=w.memoizedProps;if(s=s.compare,s=s!==null?s:g,s(C,h)&&e.ref===n.ref)return Ai(e,n,x)}return n.flags|=1,e=xi(w,h),e.ref=n.ref,e.return=n,n.child=e}function l0(e,n,s,h,x){if(e!==null){var w=e.memoizedProps;if(g(w,h)&&e.ref===n.ref)if(pn=!1,n.pendingProps=h=w,dh(e,x))(e.flags&131072)!==0&&(pn=!0);else return n.lanes=e.lanes,Ai(e,n,x)}return sh(e,n,s,h,x)}function o0(e,n,s,h){var x=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,x=0;h!==null;)x=x|h.lanes|h.childLanes,h=h.sibling;h=x&~w}else h=0,n.child=null;return u0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ho(n,w!==null?w.cachePool:null),w!==null?hd(n,w):Lc(),fd(n);else return h=n.lanes=536870912,u0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(Ho(n,w.cachePool),hd(n,w),la(),n.memoizedState=null):(e!==null&&Ho(n,null),Lc(),la());return Bn(e,n,x,s),n.child}function Il(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function u0(e,n,s,h,x){var w=Nc();return w=w===null?null:{parent:gn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Ho(n,null),Lc(),fd(n),e!==null&&ws(e,n,h,!0),n.childLanes=x,null}function iu(e,n){return n=su({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function c0(e,n,s){return Va(n,e.child,null,s),e=iu(n,n.pendingProps),e.flags|=2,gr(n),n.memoizedState=null,e}function em(e,n,s){var h=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ht){if(h.mode==="hidden")return e=iu(n,h),n.lanes=536870912,Il(null,e);if(jc(n),(e=Vt)?(e=E1(e,Ir),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$i!==null?{id:ii,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},s=Yf(e),s.return=n,n.child=s,Dn=n,Vt=null)):e=null,e===null)throw ta(n);return n.lanes=536870912,null}return iu(n,h)}var w=e.memoizedState;if(w!==null){var C=w.dehydrated;if(jc(n),x)if(n.flags&256)n.flags&=-257,n=c0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(f(558));else if(pn||ws(e,n,s,!1),x=(s&e.childLanes)!==0,pn||x){if(h=Pt,h!==null&&(C=rs(h,s),C!==0&&C!==w.retryLane))throw w.retryLane=C,La(e,C),rr(h,e,C),ah;mu(),n=c0(e,n,s)}else e=w.treeContext,Vt=Mr(C.nextSibling),Dn=n,ht=!0,ea=null,Ir=!1,e!==null&&Zf(n,e),n=iu(n,h),n.flags|=4096;return n}return e=xi(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function au(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(f(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function sh(e,n,s,h,x){return Fa(n),s=Fc(e,n,s,h,void 0,x),h=zc(),e!==null&&!pn?(Hc(e,n,x),Ai(e,n,x)):(ht&&h&&vc(n),n.flags|=1,Bn(e,n,s,x),n.child)}function h0(e,n,s,h,x,w){return Fa(n),n.updateQueue=null,s=gd(n,h,s,x),dd(e),h=zc(),e!==null&&!pn?(Hc(e,n,w),Ai(e,n,w)):(ht&&h&&vc(n),n.flags|=1,Bn(e,n,s,w),n.child)}function f0(e,n,s,h,x){if(Fa(n),n.stateNode===null){var w=ms,C=s.contextType;typeof C=="object"&&C!==null&&(w=Mn(C)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=rh,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},Dc(n),C=s.contextType,w.context=typeof C=="object"&&C!==null?Mn(C):ms,w.state=n.memoizedState,C=s.getDerivedStateFromProps,typeof C=="function"&&(nh(n,s,C,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&rh.enqueueReplaceState(w,w.state,null),Cl(n,h,w,x),Sl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var D=n.memoizedProps,j=Xa(s,D);w.props=j;var Q=w.context,ue=s.contextType;C=ms,typeof ue=="object"&&ue!==null&&(C=Mn(ue));var de=s.getDerivedStateFromProps;ue=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=n.pendingProps!==D,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||Q!==C)&&Jd(n,w,h,C),ra=!1;var J=n.memoizedState;w.state=J,Cl(n,h,w,x),Sl(),Q=n.memoizedState,D||J!==Q||ra?(typeof de=="function"&&(nh(n,s,de,h),Q=n.memoizedState),(j=ra||Qd(n,s,j,h,J,Q,C))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=Q),w.props=h,w.state=Q,w.context=C,h=j):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,Mc(e,n),C=n.memoizedProps,ue=Xa(s,C),w.props=ue,de=n.pendingProps,J=w.context,Q=s.contextType,j=ms,typeof Q=="object"&&Q!==null&&(j=Mn(Q)),D=s.getDerivedStateFromProps,(Q=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==de||J!==j)&&Jd(n,w,h,j),ra=!1,J=n.memoizedState,w.state=J,Cl(n,h,w,x),Sl();var ae=n.memoizedState;C!==de||J!==ae||ra||e!==null&&e.dependencies!==null&&Fo(e.dependencies)?(typeof D=="function"&&(nh(n,s,D,h),ae=n.memoizedState),(ue=ra||Qd(n,s,ue,h,J,ae,j)||e!==null&&e.dependencies!==null&&Fo(e.dependencies))?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ae,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ae,j)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ae),w.props=h,w.state=ae,w.context=j,h=ue):(typeof w.componentDidUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,au(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=Va(n,e.child,null,x),n.child=Va(n,null,s,x)):Bn(e,n,s,x),n.memoizedState=w.state,e=n.child):e=Ai(e,n,x),e}function d0(e,n,s,h){return ja(),n.flags|=256,Bn(e,n,s,h),n.child}var lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oh(e){return{baseLanes:e,cachePool:nd()}}function uh(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=pr),e}function g0(e,n,s){var h=n.pendingProps,x=!1,w=(n.flags&128)!==0,C;if((C=w)||(C=e!==null&&e.memoizedState===null?!1:(cn.current&2)!==0),C&&(x=!0,n.flags&=-129),C=(n.flags&32)!==0,n.flags&=-33,e===null){if(ht){if(x?sa(n):la(),(e=Vt)?(e=E1(e,Ir),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$i!==null?{id:ii,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},s=Yf(e),s.return=n,n.child=s,Dn=n,Vt=null)):e=null,e===null)throw ta(n);return qh(e)?n.lanes=32:n.lanes=536870912,null}var D=h.children;return h=h.fallback,x?(la(),x=n.mode,D=su({mode:"hidden",children:D},x),h=Ua(h,x,s,null),D.return=n,h.return=n,D.sibling=h,n.child=D,h=n.child,h.memoizedState=oh(s),h.childLanes=uh(e,C,s),n.memoizedState=lh,Il(null,h)):(sa(n),ch(n,D))}var j=e.memoizedState;if(j!==null&&(D=j.dehydrated,D!==null)){if(w)n.flags&256?(sa(n),n.flags&=-257,n=hh(e,n,s)):n.memoizedState!==null?(la(),n.child=e.child,n.flags|=128,n=null):(la(),D=h.fallback,x=n.mode,h=su({mode:"visible",children:h.children},x),D=Ua(D,x,s,null),D.flags|=2,h.return=n,D.return=n,h.sibling=D,n.child=h,Va(n,e.child,null,s),h=n.child,h.memoizedState=oh(s),h.childLanes=uh(e,C,s),n.memoizedState=lh,n=Il(null,h));else if(sa(n),qh(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var Q=C.dgst;C=Q,h=Error(f(419)),h.stack="",h.digest=C,wl({value:h,source:null,stack:null}),n=hh(e,n,s)}else if(pn||ws(e,n,s,!1),C=(s&e.childLanes)!==0,pn||C){if(C=Pt,C!==null&&(h=rs(C,s),h!==0&&h!==j.retryLane))throw j.retryLane=h,La(e,h),rr(C,e,h),ah;Vh(D)||mu(),n=hh(e,n,s)}else Vh(D)?(n.flags|=192,n.child=e.child,n=null):(e=j.treeContext,Vt=Mr(D.nextSibling),Dn=n,ht=!0,ea=null,Ir=!1,e!==null&&Zf(n,e),n=ch(n,h.children),n.flags|=4096);return n}return x?(la(),D=h.fallback,x=n.mode,j=e.child,Q=j.sibling,h=xi(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,Q!==null?D=xi(Q,D):(D=Ua(D,x,s,null),D.flags|=2),D.return=n,h.return=n,h.sibling=D,n.child=h,Il(null,h),h=n.child,D=e.child.memoizedState,D===null?D=oh(s):(x=D.cachePool,x!==null?(j=gn._currentValue,x=x.parent!==j?{parent:j,pool:j}:x):x=nd(),D={baseLanes:D.baseLanes|s,cachePool:x}),h.memoizedState=D,h.childLanes=uh(e,C,s),n.memoizedState=lh,Il(e.child,h)):(sa(n),s=e.child,e=s.sibling,s=xi(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(C=n.deletions,C===null?(n.deletions=[e],n.flags|=16):C.push(e)),n.child=s,n.memoizedState=null,s)}function ch(e,n){return n=su({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function su(e,n){return e=fr(22,e,null,n),e.lanes=0,e}function hh(e,n,s){return Va(n,e.child,null,s),e=ch(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function m0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),Cc(e.return,n,s)}function fh(e,n,s,h,x,w){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:x,treeForkCount:w}:(C.isBackwards=n,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=s,C.tailMode=x,C.treeForkCount=w)}function p0(e,n,s){var h=n.pendingProps,x=h.revealOrder,w=h.tail;h=h.children;var C=cn.current,D=(C&2)!==0;if(D?(C=C&1|2,n.flags|=128):C&=1,ve(cn,C),Bn(e,n,h,s),h=ht?yl:0,!D&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&m0(e,s,n);else if(e.tag===19)m0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&Wo(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),fh(n,!1,x,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&Wo(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}fh(n,!0,s,null,w,h);break;case"together":fh(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Ai(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ca|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(ws(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(f(153));if(n.child!==null){for(e=n.child,s=xi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=xi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function dh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Fo(e)))}function tm(e,n,s){switch(n.tag){case 3:dt(n,n.stateNode.containerInfo),na(n,gn,e.memoizedState.cache),ja();break;case 27:case 5:kr(n);break;case 4:dt(n,n.stateNode.containerInfo);break;case 10:na(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,jc(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(sa(n),n.flags|=128,null):(s&n.child.childLanes)!==0?g0(e,n,s):(sa(n),e=Ai(e,n,s),e!==null?e.sibling:null);sa(n);break;case 19:var x=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(ws(e,n,s,!1),h=(s&n.childLanes)!==0),x){if(h)return p0(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ve(cn,cn.current),h)break;return null;case 22:return n.lanes=0,o0(e,n,s,n.pendingProps);case 24:na(n,gn,e.memoizedState.cache)}return Ai(e,n,s)}function x0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)pn=!0;else{if(!dh(e,s)&&(n.flags&128)===0)return pn=!1,tm(e,n,s);pn=(e.flags&131072)!==0}else pn=!1,ht&&(n.flags&1048576)!==0&&Kf(n,yl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=Ha(n.elementType),n.type=e,typeof e=="function")yc(e)?(h=Xa(e,h),n.tag=1,n=f0(null,n,e,h,s)):(n.tag=0,n=sh(null,n,e,h,s));else{if(e!=null){var x=e.$$typeof;if(x===pe){n.tag=11,n=a0(null,n,e,h,s);break e}else if(x===ee){n.tag=14,n=s0(null,n,e,h,s);break e}}throw n=Nt(e)||e,Error(f(306,n,""))}}return n;case 0:return sh(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,x=Xa(h,n.pendingProps),f0(e,n,h,x,s);case 3:e:{if(dt(n,n.stateNode.containerInfo),e===null)throw Error(f(387));h=n.pendingProps;var w=n.memoizedState;x=w.element,Mc(e,n),Cl(n,h,null,s);var C=n.memoizedState;if(h=C.cache,na(n,gn,h),h!==w.cache&&Tc(n,[gn],s,!0),Sl(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=d0(e,n,h,s);break e}else if(h!==x){x=Or(Error(f(424)),n),wl(x),n=d0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Vt=Mr(e.firstChild),Dn=n,ht=!0,ea=null,Ir=!0,s=od(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ja(),h===x){n=Ai(e,n,s);break e}Bn(e,n,h,s)}n=n.child}return n;case 26:return au(e,n),e===null?(s=O1(n.type,null,n.pendingProps,null))?n.memoizedState=s:ht||(s=n.type,e=n.pendingProps,h=Eu(be.current).createElement(s),h[ln]=n,h[Tt]=e,kn(h,s,e),$t(h),n.stateNode=h):n.memoizedState=O1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return kr(n),e===null&&ht&&(h=n.stateNode=S1(n.type,n.pendingProps,be.current),Dn=n,Ir=!0,x=Vt,ma(n.type)?(Xh=x,Vt=Mr(h.firstChild)):Vt=x),Bn(e,n,n.pendingProps.children,s),au(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ht&&((x=h=Vt)&&(h=Im(h,n.type,n.pendingProps,Ir),h!==null?(n.stateNode=h,Dn=n,Vt=Mr(h.firstChild),Ir=!1,x=!0):x=!1),x||ta(n)),kr(n),x=n.type,w=n.pendingProps,C=e!==null?e.memoizedProps:null,h=w.children,zh(x,w)?h=null:C!==null&&zh(x,C)&&(n.flags|=32),n.memoizedState!==null&&(x=Fc(e,n,X2,null,null,s),Xl._currentValue=x),au(e,n),Bn(e,n,h,s),n.child;case 6:return e===null&&ht&&((e=s=Vt)&&(s=Dm(s,n.pendingProps,Ir),s!==null?(n.stateNode=s,Dn=n,Vt=null,e=!0):e=!1),e||ta(n)),null;case 13:return g0(e,n,s);case 4:return dt(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Va(n,null,h,s):Bn(e,n,h,s),n.child;case 11:return a0(e,n,n.type,n.pendingProps,s);case 7:return Bn(e,n,n.pendingProps,s),n.child;case 8:return Bn(e,n,n.pendingProps.children,s),n.child;case 12:return Bn(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,na(n,n.type,h.value),Bn(e,n,h.children,s),n.child;case 9:return x=n.type._context,h=n.pendingProps.children,Fa(n),x=Mn(x),h=h(x),n.flags|=1,Bn(e,n,h,s),n.child;case 14:return s0(e,n,n.type,n.pendingProps,s);case 15:return l0(e,n,n.type,n.pendingProps,s);case 19:return p0(e,n,s);case 31:return em(e,n,s);case 22:return o0(e,n,s,n.pendingProps);case 24:return Fa(n),h=Mn(gn),e===null?(x=Nc(),x===null&&(x=Pt,w=Oc(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=s),x=w),n.memoizedState={parent:h,cache:x},Dc(n),na(n,gn,x)):((e.lanes&s)!==0&&(Mc(e,n),Cl(n,null,null,s),Sl()),x=e.memoizedState,w=n.memoizedState,x.parent!==h?(x={parent:h,cache:h},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),na(n,gn,h)):(h=w.cache,na(n,gn,h),h!==x.cache&&Tc(n,[gn],s,!0))),Bn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(f(156,n.tag))}function _i(e){e.flags|=4}function gh(e,n,s,h,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(V0())e.flags|=8192;else throw Ga=Vo,Ic}else e.flags&=-16777217}function y0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!M1(n))if(V0())e.flags|=8192;else throw Ga=Vo,Ic}function lu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?vn():536870912,e.lanes|=n,Is|=n)}function Dl(e,n){if(!ht)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function qt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags&65011712,h|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags,h|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function nm(e,n,s){var h=n.pendingProps;switch(Ec(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(n),null;case 1:return qt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),bi(gn),kt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ys(n)?_i(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,_c())),qt(n),null;case 26:var x=n.type,w=n.memoizedState;return e===null?(_i(n),w!==null?(qt(n),y0(n,w)):(qt(n),gh(n,x,null,h,s))):w?w!==e.memoizedState?(_i(n),qt(n),y0(n,w)):(qt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&_i(n),qt(n),gh(n,x,e,h,s)),null;case 27:if(wn(n),s=be.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&_i(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return qt(n),null}e=Ae.current,ys(n)?Qf(n):(e=S1(x,h,s),n.stateNode=e,_i(n))}return qt(n),null;case 5:if(wn(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&_i(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return qt(n),null}if(w=Ae.current,ys(n))Qf(n);else{var C=Eu(be.current);switch(w){case 1:w=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=C.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?C.createElement(x,{is:h.is}):C.createElement(x)}}w[ln]=n,w[Tt]=h;e:for(C=n.child;C!==null;){if(C.tag===5||C.tag===6)w.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===n)break e;for(;C.sibling===null;){if(C.return===null||C.return===n)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}n.stateNode=w;e:switch(kn(w,x,h),x){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&_i(n)}}return qt(n),gh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&_i(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(f(166));if(e=be.current,ys(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,x=Dn,x!==null)switch(x.tag){case 27:case 5:h=x.memoizedProps}e[ln]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||g1(e.nodeValue,s)),e||ta(n,!0)}else e=Eu(e).createTextNode(h),e[ln]=n,n.stateNode=e}return qt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ys(n),s!==null){if(e===null){if(!h)throw Error(f(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[ln]=n}else ja(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),e=!1}else s=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(gr(n),n):(gr(n),null);if((n.flags&128)!==0)throw Error(f(558))}return qt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=ys(n),h!==null&&h.dehydrated!==null){if(e===null){if(!x)throw Error(f(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(f(317));x[ln]=n}else ja(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),x=!1}else x=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(gr(n),n):(gr(n),null)}return gr(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,x=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(x=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==x&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),lu(n,n.updateQueue),qt(n),null);case 4:return kt(),e===null&&Lh(n.stateNode.containerInfo),qt(n),null;case 10:return bi(n.type),qt(n),null;case 19:if(oe(cn),h=n.memoizedState,h===null)return qt(n),null;if(x=(n.flags&128)!==0,w=h.rendering,w===null)if(x)Dl(h,!1);else{if(nn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Wo(e),w!==null){for(n.flags|=128,Dl(h,!1),e=w.updateQueue,n.updateQueue=e,lu(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Xf(s,e),s=s.sibling;return ve(cn,cn.current&1|2),ht&&yi(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Zt()>fu&&(n.flags|=128,x=!0,Dl(h,!1),n.lanes=4194304)}else{if(!x)if(e=Wo(w),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,lu(n,e),Dl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!ht)return qt(n),null}else 2*Zt()-h.renderingStartTime>fu&&s!==536870912&&(n.flags|=128,x=!0,Dl(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Zt(),e.sibling=null,s=cn.current,ve(cn,x?s&1|2:s&1),ht&&yi(n,h.treeForkCount),e):(qt(n),null);case 22:case 23:return gr(n),Uc(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(qt(n),n.subtreeFlags&6&&(n.flags|=8192)):qt(n),s=n.updateQueue,s!==null&&lu(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&oe(za),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),bi(gn),qt(n),null;case 25:return null;case 30:return null}throw Error(f(156,n.tag))}function rm(e,n){switch(Ec(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return bi(gn),kt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return wn(n),null;case 31:if(n.memoizedState!==null){if(gr(n),n.alternate===null)throw Error(f(340));ja()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(gr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(f(340));ja()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return oe(cn),null;case 4:return kt(),null;case 10:return bi(n.type),null;case 22:case 23:return gr(n),Uc(),e!==null&&oe(za),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return bi(gn),null;case 25:return null;default:return null}}function w0(e,n){switch(Ec(n),n.tag){case 3:bi(gn),kt();break;case 26:case 27:case 5:wn(n);break;case 4:kt();break;case 31:n.memoizedState!==null&&gr(n);break;case 13:gr(n);break;case 19:oe(cn);break;case 10:bi(n.type);break;case 22:case 23:gr(n),Uc(),e!==null&&oe(za);break;case 24:bi(gn)}}function Ml(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var x=h.next;s=x;do{if((s.tag&e)===e){h=void 0;var w=s.create,C=s.inst;h=w(),C.destroy=h}s=s.next}while(s!==x)}}catch(D){Rt(n,n.return,D)}}function oa(e,n,s){try{var h=n.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var w=x.next;h=w;do{if((h.tag&e)===e){var C=h.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,x=n;var j=s,Q=D;try{Q()}catch(ue){Rt(x,j,ue)}}}h=h.next}while(h!==w)}}catch(ue){Rt(n,n.return,ue)}}function b0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{cd(n,s)}catch(h){Rt(e,e.return,h)}}}function v0(e,n,s){s.props=Xa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Rt(e,n,h)}}function Bl(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(x){Rt(e,n,x)}}function si(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(x){Rt(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(x){Rt(e,n,x)}else s.current=null}function E0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(x){Rt(e,e.return,x)}}function mh(e,n,s){try{var h=e.stateNode;Sm(h,e.type,s,n),h[Tt]=n}catch(x){Rt(e,e.return,x)}}function A0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function ph(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xh(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Zn));else if(h!==4&&(h===27&&ma(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(xh(e,n,s),e=e.sibling;e!==null;)xh(e,n,s),e=e.sibling}function ou(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&ma(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(ou(e,n,s),e=e.sibling;e!==null;)ou(e,n,s),e=e.sibling}function _0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);kn(n,h,s),n[ln]=e,n[Tt]=s}catch(w){Rt(e,e.return,w)}}var Si=!1,xn=!1,yh=!1,S0=typeof WeakSet=="function"?WeakSet:Set,On=null;function im(e,n){if(e=e.containerInfo,Ph=Ru,e=O(e),I(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var x=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var C=0,D=-1,j=-1,Q=0,ue=0,de=e,J=null;t:for(;;){for(var ae;de!==s||x!==0&&de.nodeType!==3||(D=C+x),de!==w||h!==0&&de.nodeType!==3||(j=C+h),de.nodeType===3&&(C+=de.nodeValue.length),(ae=de.firstChild)!==null;)J=de,de=ae;for(;;){if(de===e)break t;if(J===s&&++Q===x&&(D=C),J===w&&++ue===h&&(j=C),(ae=de.nextSibling)!==null)break;de=J,J=de.parentNode}de=ae}s=D===-1||j===-1?null:{start:D,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(Fh={focusedElem:e,selectionRange:s},Ru=!1,On=n;On!==null;)if(n=On,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,On=e;else for(;On!==null;){switch(n=On,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)x=e[s],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,x=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var Te=Xa(s.type,x);e=h.getSnapshotBeforeUpdate(Te,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(Fe){Rt(s,s.return,Fe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Gh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=n.sibling,e!==null){e.return=n.return,On=e;break}On=n.return}}function C0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ti(e,s),h&4&&Ml(5,s);break;case 1:if(Ti(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(C){Rt(s,s.return,C)}else{var x=Xa(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(C){Rt(s,s.return,C)}}h&64&&b0(s),h&512&&Bl(s,s.return);break;case 3:if(Ti(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{cd(e,n)}catch(C){Rt(s,s.return,C)}}break;case 27:n===null&&h&4&&_0(s);case 26:case 5:Ti(e,s),n===null&&h&4&&E0(s),h&512&&Bl(s,s.return);break;case 12:Ti(e,s);break;case 31:Ti(e,s),h&4&&R0(e,s);break;case 13:Ti(e,s),h&4&&N0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=dm.bind(null,s),Mm(e,s))));break;case 22:if(h=s.memoizedState!==null||Si,!h){n=n!==null&&n.memoizedState!==null||xn,x=Si;var w=xn;Si=h,(xn=n)&&!w?Oi(e,s,(s.subtreeFlags&8772)!==0):Ti(e,s),Si=x,xn=w}break;case 30:break;default:Ti(e,s)}}function T0(e){var n=e.alternate;n!==null&&(e.alternate=null,T0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Kn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,$n=!1;function Ci(e,n,s){for(s=s.child;s!==null;)O0(e,n,s),s=s.sibling}function O0(e,n,s){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Ft,s)}catch{}switch(s.tag){case 26:xn||si(s,n),Ci(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:xn||si(s,n);var h=Wt,x=$n;ma(s.type)&&(Wt=s.stateNode,$n=!1),Ci(e,n,s),Gl(s.stateNode),Wt=h,$n=x;break;case 5:xn||si(s,n);case 6:if(h=Wt,x=$n,Wt=null,Ci(e,n,s),Wt=h,$n=x,Wt!==null)if($n)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(s.stateNode)}catch(w){Rt(s,n,w)}else try{Wt.removeChild(s.stateNode)}catch(w){Rt(s,n,w)}break;case 18:Wt!==null&&($n?(e=Wt,b1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ps(e)):b1(Wt,s.stateNode));break;case 4:h=Wt,x=$n,Wt=s.stateNode.containerInfo,$n=!0,Ci(e,n,s),Wt=h,$n=x;break;case 0:case 11:case 14:case 15:oa(2,s,n),xn||oa(4,s,n),Ci(e,n,s);break;case 1:xn||(si(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&v0(s,n,h)),Ci(e,n,s);break;case 21:Ci(e,n,s);break;case 22:xn=(h=xn)||s.memoizedState!==null,Ci(e,n,s),xn=h;break;default:Ci(e,n,s)}}function R0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(s){Rt(n,n.return,s)}}}function N0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(s){Rt(n,n.return,s)}}function am(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new S0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new S0),n;default:throw Error(f(435,e.tag))}}function uu(e,n){var s=am(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var x=gm.bind(null,e,h);h.then(x,x)}})}function er(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var x=s[h],w=e,C=n,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(ma(D.type)){Wt=D.stateNode,$n=!1;break e}break;case 5:Wt=D.stateNode,$n=!1;break e;case 3:case 4:Wt=D.stateNode.containerInfo,$n=!0;break e}D=D.return}if(Wt===null)throw Error(f(160));O0(w,C,x),Wt=null,$n=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)I0(n,e),n=n.sibling}var Gr=null;function I0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:er(n,e),tr(e),h&4&&(oa(3,e,e.return),Ml(3,e),oa(5,e,e.return));break;case 1:er(n,e),tr(e),h&512&&(xn||s===null||si(s,s.return)),h&64&&Si&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var x=Gr;if(er(n,e),tr(e),h&512&&(xn||s===null||si(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,x=x.ownerDocument||x;t:switch(h){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Ta]||w[ln]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(h),x.head.insertBefore(w,x.querySelector("head > title"))),kn(w,h,s),w[ln]=e,$t(w),h=w;break e;case"link":var C=I1("link","href",x).get(h+(s.href||""));if(C){for(var D=0;D<C.length;D++)if(w=C[D],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){C.splice(D,1);break t}}w=x.createElement(h),kn(w,h,s),x.head.appendChild(w);break;case"meta":if(C=I1("meta","content",x).get(h+(s.content||""))){for(D=0;D<C.length;D++)if(w=C[D],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){C.splice(D,1);break t}}w=x.createElement(h),kn(w,h,s),x.head.appendChild(w);break;default:throw Error(f(468,h))}w[ln]=e,$t(w),h=w}e.stateNode=h}else D1(x,e.type,e.stateNode);else e.stateNode=N1(x,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?D1(x,e.type,e.stateNode):N1(x,h,e.memoizedProps)):h===null&&e.stateNode!==null&&mh(e,e.memoizedProps,s.memoizedProps)}break;case 27:er(n,e),tr(e),h&512&&(xn||s===null||si(s,s.return)),s!==null&&h&4&&mh(e,e.memoizedProps,s.memoizedProps);break;case 5:if(er(n,e),tr(e),h&512&&(xn||s===null||si(s,s.return)),e.flags&32){x=e.stateNode;try{Vi(x,"")}catch(Te){Rt(e,e.return,Te)}}h&4&&e.stateNode!=null&&(x=e.memoizedProps,mh(e,x,s!==null?s.memoizedProps:x)),h&1024&&(yh=!0);break;case 6:if(er(n,e),tr(e),h&4){if(e.stateNode===null)throw Error(f(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(Te){Rt(e,e.return,Te)}}break;case 3:if(Su=null,x=Gr,Gr=Au(n.containerInfo),er(n,e),Gr=x,tr(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(Te){Rt(e,e.return,Te)}yh&&(yh=!1,D0(e));break;case 4:h=Gr,Gr=Au(e.stateNode.containerInfo),er(n,e),tr(e),Gr=h;break;case 12:er(n,e),tr(e);break;case 31:er(n,e),tr(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,uu(e,h)));break;case 13:er(n,e),tr(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(hu=Zt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,uu(e,h)));break;case 22:x=e.memoizedState!==null;var j=s!==null&&s.memoizedState!==null,Q=Si,ue=xn;if(Si=Q||x,xn=ue||j,er(n,e),xn=ue,Si=Q,tr(e),h&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(s===null||j||Si||xn||Ya(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){j=s=n;try{if(w=j.stateNode,x)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=j.stateNode;var de=j.memoizedProps.style,J=de!=null&&de.hasOwnProperty("display")?de.display:null;D.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Te){Rt(j,j.return,Te)}}}else if(n.tag===6){if(s===null){j=n;try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(Te){Rt(j,j.return,Te)}}}else if(n.tag===18){if(s===null){j=n;try{var ae=j.stateNode;x?v1(ae,!0):v1(j.stateNode,!1)}catch(Te){Rt(j,j.return,Te)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,uu(e,s))));break;case 19:er(n,e),tr(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,uu(e,h)));break;case 30:break;case 21:break;default:er(n,e),tr(e)}}function tr(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(A0(h)){s=h;break}h=h.return}if(s==null)throw Error(f(160));switch(s.tag){case 27:var x=s.stateNode,w=ph(e);ou(e,w,x);break;case 5:var C=s.stateNode;s.flags&32&&(Vi(C,""),s.flags&=-33);var D=ph(e);ou(e,D,C);break;case 3:case 4:var j=s.stateNode.containerInfo,Q=ph(e);xh(e,Q,j);break;default:throw Error(f(161))}}catch(ue){Rt(e,e.return,ue)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function D0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;D0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ti(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)C0(e,n.alternate,n),n=n.sibling}function Ya(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:oa(4,n,n.return),Ya(n);break;case 1:si(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&v0(n,n.return,s),Ya(n);break;case 27:Gl(n.stateNode);case 26:case 5:si(n,n.return),Ya(n);break;case 22:n.memoizedState===null&&Ya(n);break;case 30:Ya(n);break;default:Ya(n)}e=e.sibling}}function Oi(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,x=e,w=n,C=w.flags;switch(w.tag){case 0:case 11:case 15:Oi(x,w,s),Ml(4,w);break;case 1:if(Oi(x,w,s),h=w,x=h.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Q){Rt(h,h.return,Q)}if(h=w,x=h.updateQueue,x!==null){var D=h.stateNode;try{var j=x.shared.hiddenCallbacks;if(j!==null)for(x.shared.hiddenCallbacks=null,x=0;x<j.length;x++)ud(j[x],D)}catch(Q){Rt(h,h.return,Q)}}s&&C&64&&b0(w),Bl(w,w.return);break;case 27:_0(w);case 26:case 5:Oi(x,w,s),s&&h===null&&C&4&&E0(w),Bl(w,w.return);break;case 12:Oi(x,w,s);break;case 31:Oi(x,w,s),s&&C&4&&R0(x,w);break;case 13:Oi(x,w,s),s&&C&4&&N0(x,w);break;case 22:w.memoizedState===null&&Oi(x,w,s),Bl(w,w.return);break;case 30:break;default:Oi(x,w,s)}n=n.sibling}}function wh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&bl(s))}function bh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&bl(e))}function Vr(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)M0(e,n,s,h),n=n.sibling}function M0(e,n,s,h){var x=n.flags;switch(n.tag){case 0:case 11:case 15:Vr(e,n,s,h),x&2048&&Ml(9,n);break;case 1:Vr(e,n,s,h);break;case 3:Vr(e,n,s,h),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&bl(e)));break;case 12:if(x&2048){Vr(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,C=w.id,D=w.onPostCommit;typeof D=="function"&&D(C,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Rt(n,n.return,j)}}else Vr(e,n,s,h);break;case 31:Vr(e,n,s,h);break;case 13:Vr(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,C=n.alternate,n.memoizedState!==null?w._visibility&2?Vr(e,n,s,h):kl(e,n):w._visibility&2?Vr(e,n,s,h):(w._visibility|=2,Os(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),x&2048&&wh(C,n);break;case 24:Vr(e,n,s,h),x&2048&&bh(n.alternate,n);break;default:Vr(e,n,s,h)}}function Os(e,n,s,h,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,C=n,D=s,j=h,Q=C.flags;switch(C.tag){case 0:case 11:case 15:Os(w,C,D,j,x),Ml(8,C);break;case 23:break;case 22:var ue=C.stateNode;C.memoizedState!==null?ue._visibility&2?Os(w,C,D,j,x):kl(w,C):(ue._visibility|=2,Os(w,C,D,j,x)),x&&Q&2048&&wh(C.alternate,C);break;case 24:Os(w,C,D,j,x),x&&Q&2048&&bh(C.alternate,C);break;default:Os(w,C,D,j,x)}n=n.sibling}}function kl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,x=h.flags;switch(h.tag){case 22:kl(s,h),x&2048&&wh(h.alternate,h);break;case 24:kl(s,h),x&2048&&bh(h.alternate,h);break;default:kl(s,h)}n=n.sibling}}var Ll=8192;function Rs(e,n,s){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)B0(e,n,s),e=e.sibling}function B0(e,n,s){switch(e.tag){case 26:Rs(e,n,s),e.flags&Ll&&e.memoizedState!==null&&qm(s,Gr,e.memoizedState,e.memoizedProps);break;case 5:Rs(e,n,s);break;case 3:case 4:var h=Gr;Gr=Au(e.stateNode.containerInfo),Rs(e,n,s),Gr=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=Ll,Ll=16777216,Rs(e,n,s),Ll=h):Rs(e,n,s));break;default:Rs(e,n,s)}}function k0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ul(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,U0(h,e)}k0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)L0(e),e=e.sibling}function L0(e){switch(e.tag){case 0:case 11:case 15:Ul(e),e.flags&2048&&oa(9,e,e.return);break;case 3:Ul(e);break;case 12:Ul(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,cu(e)):Ul(e);break;default:Ul(e)}}function cu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,U0(h,e)}k0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:oa(8,n,n.return),cu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,cu(n));break;default:cu(n)}e=e.sibling}}function U0(e,n){for(;On!==null;){var s=On;switch(s.tag){case 0:case 11:case 15:oa(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:bl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,On=h;else e:for(s=e;On!==null;){h=On;var x=h.sibling,w=h.return;if(T0(h),h===s){On=null;break e}if(x!==null){x.return=w,On=x;break e}On=w}}}var sm={getCacheForType:function(e){var n=Mn(gn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Mn(gn).controller.signal}},lm=typeof WeakMap=="function"?WeakMap:Map,Et=0,Pt=null,nt=null,ut=0,Ot=0,mr=null,ua=!1,Ns=!1,vh=!1,Ri=0,nn=0,ca=0,Wa=0,Eh=0,pr=0,Is=0,jl=null,nr=null,Ah=!1,hu=0,j0=0,fu=1/0,du=null,ha=null,Sn=0,fa=null,Ds=null,Ni=0,_h=0,Sh=null,P0=null,Pl=0,Ch=null;function xr(){return(Et&2)!==0&&ut!==0?ut&-ut:ie.T!==null?Dh():Pn()}function F0(){if(pr===0)if((ut&536870912)===0||ht){var e=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),pr=e}else pr=536870912;return e=dr.current,e!==null&&(e.flags|=32),pr}function rr(e,n,s){(e===Pt&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(Ms(e,0),da(e,ut,pr,!1)),Jr(e,s),((Et&2)===0||e!==Pt)&&(e===Pt&&((Et&2)===0&&(Wa|=s),nn===4&&da(e,ut,pr,!1)),li(e))}function z0(e,n,s){if((Et&6)!==0)throw Error(f(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Nn(e,n),x=h?cm(e,n):Oh(e,n,!0),w=h;do{if(x===0){Ns&&!h&&da(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!om(s)){x=Oh(e,n,!1),w=!1;continue}if(x===2){if(w=n,e.errorRecoveryDisabledLanes&w)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){n=C;e:{var D=e;x=jl;var j=D.current.memoizedState.isDehydrated;if(j&&(Ms(D,C).flags|=256),C=Oh(D,C,!1),C!==2){if(vh&&!j){D.errorRecoveryDisabledLanes|=w,Wa|=w,x=4;break e}w=nr,nr=x,w!==null&&(nr===null?nr=w:nr.push.apply(nr,w))}x=C}if(w=!1,x!==2)continue}}if(x===1){Ms(e,0),da(e,n,0,!0);break}e:{switch(h=e,w=x,w){case 0:case 1:throw Error(f(345));case 4:if((n&4194048)!==n)break;case 6:da(h,n,pr,!ua);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(f(329))}if((n&62914560)===n&&(x=hu+300-Zt(),10<x)){if(da(h,n,pr,!ua),Ca(h,0,!0)!==0)break e;Ni=n,h.timeoutHandle=y1(H0.bind(null,h,s,nr,du,Ah,n,pr,Wa,Is,ua,w,"Throttled",-0,0),x);break e}H0(h,s,nr,du,Ah,n,pr,Wa,Is,ua,w,null,-0,0)}}break}while(!0);li(e)}function H0(e,n,s,h,x,w,C,D,j,Q,ue,de,J,ae){if(e.timeoutHandle=-1,de=n.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},B0(n,w,de);var Te=(w&62914560)===w?hu-Zt():(w&4194048)===w?j0-Zt():0;if(Te=Xm(de,Te),Te!==null){Ni=w,e.cancelPendingCommit=Te(Z0.bind(null,e,n,w,s,h,x,C,D,j,ue,de,null,J,ae)),da(e,w,C,!Q);return}}Z0(e,n,w,s,h,x,C,D,j)}function om(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var x=s[h],w=x.getSnapshot;x=x.value;try{if(!d(w(),x))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function da(e,n,s,h){n&=~Eh,n&=~Wa,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var x=n;0<x;){var w=31-We(x),C=1<<w;h[w]=-1,x&=~C}s!==0&&wo(e,s,n)}function gu(){return(Et&6)===0?(Fl(0),!1):!0}function Th(){if(nt!==null){if(Ot===0)var e=nt.return;else e=nt,wi=Pa=null,Gc(e),As=null,El=0,e=nt;for(;e!==null;)w0(e.alternate,e),e=e.return;nt=null}}function Ms(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Om(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ni=0,Th(),Pt=e,nt=s=xi(e.current,null),ut=n,Ot=0,mr=null,ua=!1,Ns=Nn(e,n),vh=!1,Is=pr=Eh=Wa=ca=nn=0,nr=jl=null,Ah=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var x=31-We(h),w=1<<x;n|=e[x],h&=~w}return Ri=n,ko(),s}function G0(e,n){Ye=null,ie.H=Nl,n===Es||n===Go?(n=ad(),Ot=3):n===Ic?(n=ad(),Ot=4):Ot=n===ah?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,mr=n,nt===null&&(nn=1,ru(e,Or(n,e.current)))}function V0(){var e=dr.current;return e===null?!0:(ut&4194048)===ut?Dr===null:(ut&62914560)===ut||(ut&536870912)!==0?e===Dr:!1}function q0(){var e=ie.H;return ie.H=Nl,e===null?Nl:e}function X0(){var e=ie.A;return ie.A=sm,e}function mu(){nn=4,ua||(ut&4194048)!==ut&&dr.current!==null||(Ns=!0),(ca&134217727)===0&&(Wa&134217727)===0||Pt===null||da(Pt,ut,pr,!1)}function Oh(e,n,s){var h=Et;Et|=2;var x=q0(),w=X0();(Pt!==e||ut!==n)&&(du=null,Ms(e,n)),n=!1;var C=nn;e:do try{if(Ot!==0&&nt!==null){var D=nt,j=mr;switch(Ot){case 8:Th(),C=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(n=!0);var Q=Ot;if(Ot=0,mr=null,Bs(e,D,j,Q),s&&Ns){C=0;break e}break;default:Q=Ot,Ot=0,mr=null,Bs(e,D,j,Q)}}um(),C=nn;break}catch(ue){G0(e,ue)}while(!0);return n&&e.shellSuspendCounter++,wi=Pa=null,Et=h,ie.H=x,ie.A=w,nt===null&&(Pt=null,ut=0,ko()),C}function um(){for(;nt!==null;)Y0(nt)}function cm(e,n){var s=Et;Et|=2;var h=q0(),x=X0();Pt!==e||ut!==n?(du=null,fu=Zt()+500,Ms(e,n)):Ns=Nn(e,n);e:do try{if(Ot!==0&&nt!==null){n=nt;var w=mr;t:switch(Ot){case 1:Ot=0,mr=null,Bs(e,n,w,1);break;case 2:case 9:if(rd(w)){Ot=0,mr=null,W0(n);break}n=function(){Ot!==2&&Ot!==9||Pt!==e||(Ot=7),li(e)},w.then(n,n);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:rd(w)?(Ot=0,mr=null,W0(n)):(Ot=0,mr=null,Bs(e,n,w,7));break;case 5:var C=null;switch(nt.tag){case 26:C=nt.memoizedState;case 5:case 27:var D=nt;if(C?M1(C):D.stateNode.complete){Ot=0,mr=null;var j=D.sibling;if(j!==null)nt=j;else{var Q=D.return;Q!==null?(nt=Q,pu(Q)):nt=null}break t}}Ot=0,mr=null,Bs(e,n,w,5);break;case 6:Ot=0,mr=null,Bs(e,n,w,6);break;case 8:Th(),nn=6;break e;default:throw Error(f(462))}}hm();break}catch(ue){G0(e,ue)}while(!0);return wi=Pa=null,ie.H=h,ie.A=x,Et=s,nt!==null?0:(Pt=null,ut=0,ko(),nn)}function hm(){for(;nt!==null&&!ts();)Y0(nt)}function Y0(e){var n=x0(e.alternate,e,Ri);e.memoizedProps=e.pendingProps,n===null?pu(e):nt=n}function W0(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=h0(s,n,n.pendingProps,n.type,void 0,ut);break;case 11:n=h0(s,n,n.pendingProps,n.type.render,n.ref,ut);break;case 5:Gc(n);default:w0(s,n),n=nt=Xf(n,Ri),n=x0(s,n,Ri)}e.memoizedProps=e.pendingProps,n===null?pu(e):nt=n}function Bs(e,n,s,h){wi=Pa=null,Gc(n),As=null,El=0;var x=n.return;try{if($2(e,x,n,s,ut)){nn=1,ru(e,Or(s,e.current)),nt=null;return}}catch(w){if(x!==null)throw nt=x,w;nn=1,ru(e,Or(s,e.current)),nt=null;return}n.flags&32768?(ht||h===1?e=!0:Ns||(ut&536870912)!==0?e=!1:(ua=e=!0,(h===2||h===9||h===3||h===6)&&(h=dr.current,h!==null&&h.tag===13&&(h.flags|=16384))),K0(n,e)):pu(n)}function pu(e){var n=e;do{if((n.flags&32768)!==0){K0(n,ua);return}e=n.return;var s=nm(n.alternate,n,Ri);if(s!==null){nt=s;return}if(n=n.sibling,n!==null){nt=n;return}nt=n=e}while(n!==null);nn===0&&(nn=5)}function K0(e,n){do{var s=rm(e.alternate,e);if(s!==null){s.flags&=32767,nt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){nt=e;return}nt=e=s}while(e!==null);nn=6,nt=null}function Z0(e,n,s,h,x,w,C,D,j){e.cancelPendingCommit=null;do xu();while(Sn!==0);if((Et&6)!==0)throw Error(f(327));if(n!==null){if(n===e.current)throw Error(f(177));if(w=n.lanes|n.childLanes,w|=pc,Ar(e,s,w,C,D,j),e===Pt&&(nt=Pt=null,ut=0),Ds=n,fa=e,Ni=s,_h=w,Sh=x,P0=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,mm(ar,function(){return t1(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=ie.T,ie.T=null,x=fe.p,fe.p=2,C=Et,Et|=4;try{im(e,n,s)}finally{Et=C,fe.p=x,ie.T=h}}Sn=1,Q0(),J0(),$0()}}function Q0(){if(Sn===1){Sn=0;var e=fa,n=Ds,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=ie.T,ie.T=null;var h=fe.p;fe.p=2;var x=Et;Et|=4;try{I0(n,e);var w=Fh,C=O(e.containerInfo),D=w.focusedElem,j=w.selectionRange;if(C!==D&&D&&D.ownerDocument&&S(D.ownerDocument.documentElement,D)){if(j!==null&&I(D)){var Q=j.start,ue=j.end;if(ue===void 0&&(ue=Q),"selectionStart"in D)D.selectionStart=Q,D.selectionEnd=Math.min(ue,D.value.length);else{var de=D.ownerDocument||document,J=de&&de.defaultView||window;if(J.getSelection){var ae=J.getSelection(),Te=D.textContent.length,Fe=Math.min(j.start,Te),Bt=j.end===void 0?Fe:Math.min(j.end,Te);!ae.extend&&Fe>Bt&&(C=Bt,Bt=Fe,Fe=C);var q=v(D,Fe),z=v(D,Bt);if(q&&z&&(ae.rangeCount!==1||ae.anchorNode!==q.node||ae.anchorOffset!==q.offset||ae.focusNode!==z.node||ae.focusOffset!==z.offset)){var Z=de.createRange();Z.setStart(q.node,q.offset),ae.removeAllRanges(),Fe>Bt?(ae.addRange(Z),ae.extend(z.node,z.offset)):(Z.setEnd(z.node,z.offset),ae.addRange(Z))}}}}for(de=[],ae=D;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<de.length;D++){var ce=de[D];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ru=!!Ph,Fh=Ph=null}finally{Et=x,fe.p=h,ie.T=s}}e.current=n,Sn=2}}function J0(){if(Sn===2){Sn=0;var e=fa,n=Ds,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=ie.T,ie.T=null;var h=fe.p;fe.p=2;var x=Et;Et|=4;try{C0(e,n.alternate,n)}finally{Et=x,fe.p=h,ie.T=s}}Sn=3}}function $0(){if(Sn===4||Sn===3){Sn=0,yo();var e=fa,n=Ds,s=Ni,h=P0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Sn=5:(Sn=0,Ds=fa=null,e1(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(ha=null),Lr(s),n=n.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Ft,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=ie.T,x=fe.p,fe.p=2,ie.T=null;try{for(var w=e.onRecoverableError,C=0;C<h.length;C++){var D=h[C];w(D.value,{componentStack:D.stack})}}finally{ie.T=n,fe.p=x}}(Ni&3)!==0&&xu(),li(e),x=e.pendingLanes,(s&261930)!==0&&(x&42)!==0?e===Ch?Pl++:(Pl=0,Ch=e):Pl=0,Fl(0)}}function e1(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,bl(n)))}function xu(){return Q0(),J0(),$0(),t1()}function t1(){if(Sn!==5)return!1;var e=fa,n=_h;_h=0;var s=Lr(Ni),h=ie.T,x=fe.p;try{fe.p=32>s?32:s,ie.T=null,s=Sh,Sh=null;var w=fa,C=Ni;if(Sn=0,Ds=fa=null,Ni=0,(Et&6)!==0)throw Error(f(331));var D=Et;if(Et|=4,L0(w.current),M0(w,w.current,C,s),Et=D,Fl(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Ft,w)}catch{}return!0}finally{fe.p=x,ie.T=h,e1(e,n)}}function n1(e,n,s){n=Or(s,n),n=ih(e.stateNode,n,2),e=aa(e,n,2),e!==null&&(Jr(e,2),li(e))}function Rt(e,n,s){if(e.tag===3)n1(e,e,s);else for(;n!==null;){if(n.tag===3){n1(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ha===null||!ha.has(h))){e=Or(s,e),s=r0(2),h=aa(n,s,2),h!==null&&(i0(s,h,n,e),Jr(h,2),li(h));break}}n=n.return}}function Rh(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new lm;var x=new Set;h.set(n,x)}else x=h.get(n),x===void 0&&(x=new Set,h.set(n,x));x.has(s)||(vh=!0,x.add(s),e=fm.bind(null,e,n,s),n.then(e,e))}function fm(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Pt===e&&(ut&s)===s&&(nn===4||nn===3&&(ut&62914560)===ut&&300>Zt()-hu?(Et&2)===0&&Ms(e,0):Eh|=s,Is===ut&&(Is=0)),li(e)}function r1(e,n){n===0&&(n=vn()),e=La(e,n),e!==null&&(Jr(e,n),li(e))}function dm(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),r1(e,s)}function gm(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(f(314))}h!==null&&h.delete(n),r1(e,s)}function mm(e,n){return ji(e,n)}var yu=null,ks=null,Nh=!1,wu=!1,Ih=!1,ga=0;function li(e){e!==ks&&e.next===null&&(ks===null?yu=ks=e:ks=ks.next=e),wu=!0,Nh||(Nh=!0,xm())}function Fl(e,n){if(!Ih&&wu){Ih=!0;do for(var s=!1,h=yu;h!==null;){if(e!==0){var x=h.pendingLanes;if(x===0)var w=0;else{var C=h.suspendedLanes,D=h.pingedLanes;w=(1<<31-We(42|e)+1)-1,w&=x&~(C&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,l1(h,w))}else w=ut,w=Ca(h,h===Pt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Nn(h,w)||(s=!0,l1(h,w));h=h.next}while(s);Ih=!1}}function pm(){i1()}function i1(){wu=Nh=!1;var e=0;ga!==0&&Tm()&&(e=ga);for(var n=Zt(),s=null,h=yu;h!==null;){var x=h.next,w=a1(h,n);w===0?(h.next=null,s===null?yu=x:s.next=x,x===null&&(ks=s)):(s=h,(e!==0||(w&3)!==0)&&(wu=!0)),h=x}Sn!==0&&Sn!==5||Fl(e),ga!==0&&(ga=0)}function a1(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,x=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var C=31-We(w),D=1<<C,j=x[C];j===-1?((D&s)===0||(D&h)!==0)&&(x[C]=ll(D,n)):j<=n&&(e.expiredLanes|=D),w&=~D}if(n=Pt,s=ut,s=Ca(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Ce(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Nn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Ce(h),Lr(s)){case 2:case 8:s=il;break;case 32:s=ar;break;case 268435456:s=al;break;default:s=ar}return h=s1.bind(null,e),s=ji(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Ce(h),e.callbackPriority=2,e.callbackNode=null,2}function s1(e,n){if(Sn!==0&&Sn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(xu()&&e.callbackNode!==s)return null;var h=ut;return h=Ca(e,e===Pt?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(z0(e,h,n),a1(e,Zt()),e.callbackNode!=null&&e.callbackNode===s?s1.bind(null,e):null)}function l1(e,n){if(xu())return null;z0(e,n,!0)}function xm(){Rm(function(){(Et&6)!==0?ji(Wn,pm):i1()})}function Dh(){if(ga===0){var e=bs;e===0&&(e=Sa,Sa<<=1,(Sa&261888)===0&&(Sa=256)),ga=e}return ga}function o1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qi(""+e)}function u1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function ym(e,n,s,h,x){if(n==="submit"&&s&&s.stateNode===x){var w=o1((x[Tt]||null).action),C=h.submitter;C&&(n=(n=C[Tt]||null)?o1(n.formAction):C.getAttribute("formAction"),n!==null&&(w=n,C=null));var D=new En("action","action",null,h,x);e.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ga!==0){var j=C?u1(x,C):new FormData(x);Jc(s,{pending:!0,data:j,method:x.method,action:w},null,j)}}else typeof w=="function"&&(D.preventDefault(),j=C?u1(x,C):new FormData(x),Jc(s,{pending:!0,data:j,method:x.method,action:w},w,j))},currentTarget:x}]})}}for(var Mh=0;Mh<xl.length;Mh++){var Bh=xl[Mh],wm=Bh.toLowerCase(),bm=Bh[0].toUpperCase()+Bh.slice(1);Hr(wm,"on"+bm)}Hr(Jn,"onAnimationEnd"),Hr(In,"onAnimationIteration"),Hr(St,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(_n,"onTransitionRun"),Hr(Vn,"onTransitionStart"),Hr(Ji,"onTransitionCancel"),Hr(pi,"onTransitionEnd"),lr("onMouseEnter",["mouseout","mouseover"]),lr("onMouseLeave",["mouseout","mouseover"]),lr("onPointerEnter",["pointerout","pointerover"]),lr("onPointerLeave",["pointerout","pointerover"]),At("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),At("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),At("onBeforeInput",["compositionend","keypress","textInput","paste"]),At("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),At("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),At("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function c1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],x=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var C=h.length-1;0<=C;C--){var D=h[C],j=D.instance,Q=D.currentTarget;if(D=D.listener,j!==w&&x.isPropagationStopped())break e;w=D,x.currentTarget=Q;try{w(x)}catch(ue){Bo(ue)}x.currentTarget=null,w=j}else for(C=0;C<h.length;C++){if(D=h[C],j=D.instance,Q=D.currentTarget,D=D.listener,j!==w&&x.isPropagationStopped())break e;w=D,x.currentTarget=Q;try{w(x)}catch(ue){Bo(ue)}x.currentTarget=null,w=j}}}}function rt(e,n){var s=n[Pi];s===void 0&&(s=n[Pi]=new Set);var h=e+"__bubble";s.has(h)||(h1(n,e,2,!1),s.add(h))}function kh(e,n,s){var h=0;n&&(h|=4),h1(s,e,h,n)}var bu="_reactListening"+Math.random().toString(36).slice(2);function Lh(e){if(!e[bu]){e[bu]=!0,ge.forEach(function(s){s!=="selectionchange"&&(vm.has(s)||kh(s,!1,e),kh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[bu]||(n[bu]=!0,kh("selectionchange",!1,n))}}function h1(e,n,s,h){switch(F1(n)){case 2:var x=Km;break;case 8:x=Zm;break;default:x=Qh}s=x.bind(null,n,s,e),x=void 0,!cl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),h?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function Uh(e,n,s,h,x){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var D=h.stateNode.containerInfo;if(D===x)break;if(C===4)for(C=h.return;C!==null;){var j=C.tag;if((j===3||j===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;D!==null;){if(C=Jt(D),C===null)return;if(j=C.tag,j===5||j===6||j===26||j===27){h=w=C;continue e}D=D.parentNode}}h=h.return}Ao(function(){var Q=w,ue=ul(s),de=[];e:{var J=Mo.get(e);if(J!==void 0){var ae=En,Te=e;switch(e){case"keypress":if(ei(s)===0)break e;case"keydown":case"keyup":ae=hs;break;case"focusin":Te="focus",ae=dl;break;case"focusout":Te="blur",ae=dl;break;case"beforeblur":case"afterblur":ae=dl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=vt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=dc;break;case Jn:case In:case St:ae=Ke;break;case pi:ae=fi;break;case"scroll":case"scrollend":ae=_o;break;case"wheel":ae=gc;break;case"copy":case"cut":case"paste":ae=cs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=_t;break;case"toggle":case"beforetoggle":ae=ml}var Fe=(n&4)!==0,Bt=!Fe&&(e==="scroll"||e==="scrollend"),q=Fe?J!==null?J+"Capture":null:J;Fe=[];for(var z=Q,Z;z!==null;){var ce=z;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||q===null||(ce=Ve(z,q),ce!=null&&Fe.push(Hl(z,ce,Z))),Bt)break;z=z.return}0<Fe.length&&(J=new ae(J,Te,null,s,ue),de.push({event:J,listeners:Fe}))}}if((n&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",J&&s!==Oa&&(Te=s.relatedTarget||s.fromElement)&&(Jt(Te)||Te[sr]))break e;if((ae||J)&&(J=ue.window===ue?ue:(J=ue.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(Te=s.relatedTarget||s.toElement,ae=Q,Te=Te?Jt(Te):null,Te!==null&&(Bt=m(Te),Fe=Te.tag,Te!==Bt||Fe!==5&&Fe!==27&&Fe!==6)&&(Te=null)):(ae=null,Te=Q),ae!==Te)){if(Fe=vt,ce="onMouseLeave",q="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Fe=_t,ce="onPointerLeave",q="onPointerEnter",z="pointer"),Bt=ae==null?J:Fi(ae),Z=Te==null?J:Fi(Te),J=new Fe(ce,z+"leave",ae,s,ue),J.target=Bt,J.relatedTarget=Z,ce=null,Jt(ue)===Q&&(Fe=new Fe(q,z+"enter",Te,s,ue),Fe.target=Z,Fe.relatedTarget=Bt,ce=Fe),Bt=ce,ae&&Te)t:{for(Fe=Em,q=ae,z=Te,Z=0,ce=q;ce;ce=Fe(ce))Z++;ce=0;for(var Le=z;Le;Le=Fe(Le))ce++;for(;0<Z-ce;)q=Fe(q),Z--;for(;0<ce-Z;)z=Fe(z),ce--;for(;Z--;){if(q===z||z!==null&&q===z.alternate){Fe=q;break t}q=Fe(q),z=Fe(z)}Fe=null}else Fe=null;ae!==null&&f1(de,J,ae,Fe,!1),Te!==null&&Bt!==null&&f1(de,Bt,Te,Fe,!0)}}e:{if(J=Q?Fi(Q):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var yt=hr;else if(pl(J))if(Do)yt=u;else{yt=r;var Ie=t}else ae=J.nodeName,!ae||ae.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&Lt(Q.elementType)&&(yt=hr):yt=a;if(yt&&(yt=yt(e,Q))){cr(de,yt,s,ue);break e}Ie&&Ie(e,J,Q),e==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&M(J,"number",J.value)}switch(Ie=Q?Fi(Q):window,e){case"focusin":(pl(Ie)||Ie.contentEditable==="true")&&(P=Ie,F=Q,X=null);break;case"focusout":X=F=P=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,ye(de,s,ue);break;case"selectionchange":if(B)break;case"keydown":case"keyup":ye(de,s,ue)}var Ze;if(Ia)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Qi?Io(e,s)&&(ct="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ct="onCompositionStart");ct&&(No&&s.locale!=="ko"&&(Qi||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Qi&&(Ze=Xi()):(Fr=ue,zr="value"in Fr?Fr.value:Fr.textContent,Qi=!0)),Ie=vu(Q,ct),0<Ie.length&&(ct=new To(ct,e,null,s,ue),de.push({event:ct,listeners:Ie}),Ze?ct.data=Ze:(Ze=Zi(s),Ze!==null&&(ct.data=Ze)))),(Ze=Ro?ri(e,s):ds(e,s))&&(ct=vu(Q,"onBeforeInput"),0<ct.length&&(Ie=new To("onBeforeInput","beforeinput",null,s,ue),de.push({event:Ie,listeners:ct}),Ie.data=Ze)),ym(de,e,Q,s,ue)}c1(de,n)})}function Hl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function vu(e,n){for(var s=n+"Capture",h=[];e!==null;){var x=e,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=Ve(e,s),x!=null&&h.unshift(Hl(e,x,w)),x=Ve(e,n),x!=null&&h.push(Hl(e,x,w))),e.tag===3)return h;e=e.return}return[]}function Em(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function f1(e,n,s,h,x){for(var w=n._reactName,C=[];s!==null&&s!==h;){var D=s,j=D.alternate,Q=D.stateNode;if(D=D.tag,j!==null&&j===h)break;D!==5&&D!==26&&D!==27||Q===null||(j=Q,x?(Q=Ve(s,w),Q!=null&&C.unshift(Hl(s,Q,j))):x||(Q=Ve(s,w),Q!=null&&C.push(Hl(s,Q,j)))),s=s.return}C.length!==0&&e.push({event:n,listeners:C})}var Am=/\r\n?/g,_m=/\u0000|\uFFFD/g;function d1(e){return(typeof e=="string"?e:""+e).replace(Am,`
`).replace(_m,"")}function g1(e,n){return n=d1(n),d1(e)===n}function Mt(e,n,s,h,x,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||Vi(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&Vi(e,""+h);break;case"className":Hi(e,"class",h);break;case"tabIndex":Hi(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hi(e,s,h);break;case"style":Me(e,h,w);break;case"data":if(n!=="object"){Hi(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=qi(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&Mt(e,n,"name",x.name,x,null),Mt(e,n,"formEncType",x.formEncType,x,null),Mt(e,n,"formMethod",x.formMethod,x,null),Mt(e,n,"formTarget",x.formTarget,x,null)):(Mt(e,n,"encType",x.encType,x,null),Mt(e,n,"method",x.method,x,null),Mt(e,n,"target",x.target,x,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=qi(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=Zn);break;case"onScroll":h!=null&&rt("scroll",e);break;case"onScrollEnd":h!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=qi(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":rt("beforetoggle",e),rt("toggle",e),zi(e,"popover",h);break;case"xlinkActuate":or(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":or(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":or(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":or(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":or(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":or(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":or(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":or(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":or(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":zi(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Eo.get(s)||s,zi(e,s,h))}}function jh(e,n,s,h,x,w){switch(s){case"style":Me(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"children":typeof h=="string"?Vi(e,h):(typeof h=="number"||typeof h=="bigint")&&Vi(e,""+h);break;case"onScroll":h!=null&&rt("scroll",e);break;case"onScrollEnd":h!=null&&rt("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(x=s.endsWith("Capture"),n=s.slice(2,x?s.length-7:void 0),w=e[Tt]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,x),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,x);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):zi(e,s,h)}}}function kn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var h=!1,x=!1,w;for(w in s)if(s.hasOwnProperty(w)){var C=s[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:Mt(e,n,w,C,s,null)}}x&&Mt(e,n,"srcSet",s.srcSet,s,null),h&&Mt(e,n,"src",s.src,s,null);return;case"input":rt("invalid",e);var D=w=C=x=null,j=null,Q=null;for(h in s)if(s.hasOwnProperty(h)){var ue=s[h];if(ue!=null)switch(h){case"name":x=ue;break;case"type":C=ue;break;case"checked":j=ue;break;case"defaultChecked":Q=ue;break;case"value":w=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(f(137,n));break;default:Mt(e,n,h,ue,s,null)}}K(e,w,D,j,Q,C,x,!1);return;case"select":rt("invalid",e),h=C=w=null;for(x in s)if(s.hasOwnProperty(x)&&(D=s[x],D!=null))switch(x){case"value":w=D;break;case"defaultValue":C=D;break;case"multiple":h=D;default:Mt(e,n,x,D,s,null)}n=w,s=C,e.multiple=!!h,n!=null?Oe(e,!!h,n,!1):s!=null&&Oe(e,!!h,s,!0);return;case"textarea":rt("invalid",e),w=x=h=null;for(C in s)if(s.hasOwnProperty(C)&&(D=s[C],D!=null))switch(C){case"value":h=D;break;case"defaultValue":x=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(f(91));break;default:Mt(e,n,C,D,s,null)}Hn(e,h,x,w);return;case"option":for(j in s)s.hasOwnProperty(j)&&(h=s[j],h!=null)&&(j==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":Mt(e,n,j,h,s,null));return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(h=0;h<zl.length;h++)rt(zl[h],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in s)if(s.hasOwnProperty(Q)&&(h=s[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:Mt(e,n,Q,h,s,null)}return;default:if(Lt(n)){for(ue in s)s.hasOwnProperty(ue)&&(h=s[ue],h!==void 0&&jh(e,n,ue,h,s,void 0));return}}for(D in s)s.hasOwnProperty(D)&&(h=s[D],h!=null&&Mt(e,n,D,h,s,null))}function Sm(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,C=null,D=null,j=null,Q=null,ue=null;for(ae in s){var de=s[ae];if(s.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":j=de;default:h.hasOwnProperty(ae)||Mt(e,n,ae,null,h,de)}}for(var J in h){var ae=h[J];if(de=s[J],h.hasOwnProperty(J)&&(ae!=null||de!=null))switch(J){case"type":w=ae;break;case"name":x=ae;break;case"checked":Q=ae;break;case"defaultChecked":ue=ae;break;case"value":C=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(f(137,n));break;default:ae!==de&&Mt(e,n,J,ae,h,de)}}fn(e,C,D,j,Q,ue,w,x);return;case"select":ae=C=D=J=null;for(w in s)if(j=s[w],s.hasOwnProperty(w)&&j!=null)switch(w){case"value":break;case"multiple":ae=j;default:h.hasOwnProperty(w)||Mt(e,n,w,null,h,j)}for(x in h)if(w=h[x],j=s[x],h.hasOwnProperty(x)&&(w!=null||j!=null))switch(x){case"value":J=w;break;case"defaultValue":D=w;break;case"multiple":C=w;default:w!==j&&Mt(e,n,x,w,h,j)}n=D,s=C,h=ae,J!=null?Oe(e,!!s,J,!1):!!h!=!!s&&(n!=null?Oe(e,!!s,n,!0):Oe(e,!!s,s?[]:"",!1));return;case"textarea":ae=J=null;for(D in s)if(x=s[D],s.hasOwnProperty(D)&&x!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Mt(e,n,D,null,h,x)}for(C in h)if(x=h[C],w=s[C],h.hasOwnProperty(C)&&(x!=null||w!=null))switch(C){case"value":J=x;break;case"defaultValue":ae=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(f(91));break;default:x!==w&&Mt(e,n,C,x,h,w)}on(e,J,ae);return;case"option":for(var Te in s)J=s[Te],s.hasOwnProperty(Te)&&J!=null&&!h.hasOwnProperty(Te)&&(Te==="selected"?e.selected=!1:Mt(e,n,Te,null,h,J));for(j in h)J=h[j],ae=s[j],h.hasOwnProperty(j)&&J!==ae&&(J!=null||ae!=null)&&(j==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Mt(e,n,j,J,h,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in s)J=s[Fe],s.hasOwnProperty(Fe)&&J!=null&&!h.hasOwnProperty(Fe)&&Mt(e,n,Fe,null,h,J);for(Q in h)if(J=h[Q],ae=s[Q],h.hasOwnProperty(Q)&&J!==ae&&(J!=null||ae!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(f(137,n));break;default:Mt(e,n,Q,J,h,ae)}return;default:if(Lt(n)){for(var Bt in s)J=s[Bt],s.hasOwnProperty(Bt)&&J!==void 0&&!h.hasOwnProperty(Bt)&&jh(e,n,Bt,void 0,h,J);for(ue in h)J=h[ue],ae=s[ue],!h.hasOwnProperty(ue)||J===ae||J===void 0&&ae===void 0||jh(e,n,ue,J,h,ae);return}}for(var q in s)J=s[q],s.hasOwnProperty(q)&&J!=null&&!h.hasOwnProperty(q)&&Mt(e,n,q,null,h,J);for(de in h)J=h[de],ae=s[de],!h.hasOwnProperty(de)||J===ae||J==null&&ae==null||Mt(e,n,de,J,h,ae)}function m1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var x=s[h],w=x.transferSize,C=x.initiatorType,D=x.duration;if(w&&D&&m1(C)){for(C=0,D=x.responseEnd,h+=1;h<s.length;h++){var j=s[h],Q=j.startTime;if(Q>D)break;var ue=j.transferSize,de=j.initiatorType;ue&&m1(de)&&(j=j.responseEnd,C+=ue*(j<D?1:(D-Q)/(j-Q)))}if(--h,n+=8*(w+C)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ph=null,Fh=null;function Eu(e){return e.nodeType===9?e:e.ownerDocument}function p1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function zh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Hh=null;function Tm(){var e=window.event;return e&&e.type==="popstate"?e===Hh?!1:(Hh=e,!0):(Hh=null,!1)}var y1=typeof setTimeout=="function"?setTimeout:void 0,Om=typeof clearTimeout=="function"?clearTimeout:void 0,w1=typeof Promise=="function"?Promise:void 0,Rm=typeof queueMicrotask=="function"?queueMicrotask:typeof w1<"u"?function(e){return w1.resolve(null).then(e).catch(Nm)}:y1;function Nm(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function b1(e,n){var s=n,h=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(x),Ps(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")Gl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Gl(s);for(var w=s.firstChild;w;){var C=w.nextSibling,D=w.nodeName;w[Ta]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=C}}else s==="body"&&Gl(e.ownerDocument.body);s=x}while(s);Ps(n)}function v1(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function Gh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Gh(s),Kn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Im(e,n,s,h){for(;e.nodeType===1;){var x=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Ta])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Mr(e.nextSibling),e===null)break}return null}function Dm(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Mr(e.nextSibling),e===null))return null;return e}function E1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Mr(e.nextSibling),e===null))return null;return e}function Vh(e){return e.data==="$?"||e.data==="$~"}function qh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Mm(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Mr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Xh=null;function A1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Mr(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function _1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function S1(e,n,s){switch(n=Eu(s),e){case"html":if(e=n.documentElement,!e)throw Error(f(452));return e;case"head":if(e=n.head,!e)throw Error(f(453));return e;case"body":if(e=n.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function Gl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Kn(e)}var Br=new Map,C1=new Set;function Au(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ii=fe.d;fe.d={f:Bm,r:km,D:Lm,C:Um,L:jm,m:Pm,X:zm,S:Fm,M:Hm};function Bm(){var e=Ii.f(),n=gu();return e||n}function km(e){var n=bt(e);n!==null&&n.tag===5&&n.type==="form"?Gd(n):Ii.r(e)}var Ls=typeof document>"u"?null:document;function T1(e,n,s){var h=Ls;if(h&&typeof n=="string"&&n){var x=Je(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof s=="string"&&(x+='[crossorigin="'+s+'"]'),C1.has(x)||(C1.add(x),e={rel:e,crossOrigin:s,href:n},h.querySelector(x)===null&&(n=h.createElement("link"),kn(n,"link",e),$t(n),h.head.appendChild(n)))}}function Lm(e){Ii.D(e),T1("dns-prefetch",e,null)}function Um(e,n){Ii.C(e,n),T1("preconnect",e,n)}function jm(e,n,s){Ii.L(e,n,s);var h=Ls;if(h&&e&&n){var x='link[rel="preload"][as="'+Je(n)+'"]';n==="image"&&s&&s.imageSrcSet?(x+='[imagesrcset="'+Je(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(x+='[imagesizes="'+Je(s.imageSizes)+'"]')):x+='[href="'+Je(e)+'"]';var w=x;switch(n){case"style":w=Us(e);break;case"script":w=js(e)}Br.has(w)||(e=N({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Br.set(w,e),h.querySelector(x)!==null||n==="style"&&h.querySelector(Vl(w))||n==="script"&&h.querySelector(ql(w))||(n=h.createElement("link"),kn(n,"link",e),$t(n),h.head.appendChild(n)))}}function Pm(e,n){Ii.m(e,n);var s=Ls;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+Je(h)+'"][href="'+Je(e)+'"]',w=x;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=js(e)}if(!Br.has(w)&&(e=N({rel:"modulepreload",href:e},n),Br.set(w,e),s.querySelector(x)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ql(w)))return}h=s.createElement("link"),kn(h,"link",e),$t(h),s.head.appendChild(h)}}}function Fm(e,n,s){Ii.S(e,n,s);var h=Ls;if(h&&e){var x=zn(h).hoistableStyles,w=Us(e);n=n||"default";var C=x.get(w);if(!C){var D={loading:0,preload:null};if(C=h.querySelector(Vl(w)))D.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Br.get(w))&&Yh(e,s);var j=C=h.createElement("link");$t(j),kn(j,"link",e),j._p=new Promise(function(Q,ue){j.onload=Q,j.onerror=ue}),j.addEventListener("load",function(){D.loading|=1}),j.addEventListener("error",function(){D.loading|=2}),D.loading|=4,_u(C,n,h)}C={type:"stylesheet",instance:C,count:1,state:D},x.set(w,C)}}}function zm(e,n){Ii.X(e,n);var s=Ls;if(s&&e){var h=zn(s).hoistableScripts,x=js(e),w=h.get(x);w||(w=s.querySelector(ql(x)),w||(e=N({src:e,async:!0},n),(n=Br.get(x))&&Wh(e,n),w=s.createElement("script"),$t(w),kn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function Hm(e,n){Ii.M(e,n);var s=Ls;if(s&&e){var h=zn(s).hoistableScripts,x=js(e),w=h.get(x);w||(w=s.querySelector(ql(x)),w||(e=N({src:e,async:!0,type:"module"},n),(n=Br.get(x))&&Wh(e,n),w=s.createElement("script"),$t(w),kn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function O1(e,n,s,h){var x=(x=be.current)?Au(x):null;if(!x)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Us(s.href),s=zn(x).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Us(s.href);var w=zn(x).hoistableStyles,C=w.get(e);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,C),(w=x.querySelector(Vl(e)))&&!w._p&&(C.instance=w,C.state.loading=5),Br.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Br.set(e,s),w||Gm(x,e,s,C.state))),n&&h===null)throw Error(f(528,""));return C}if(n&&h!==null)throw Error(f(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=js(s),s=zn(x).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function Us(e){return'href="'+Je(e)+'"'}function Vl(e){return'link[rel="stylesheet"]['+e+"]"}function R1(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function Gm(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),kn(n,"link",s),$t(n),e.head.appendChild(n))}function js(e){return'[src="'+Je(e)+'"]'}function ql(e){return"script[async]"+e}function N1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+Je(s.href)+'"]');if(h)return n.instance=h,$t(h),h;var x=N({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),$t(h),kn(h,"style",x),_u(h,s.precedence,e),n.instance=h;case"stylesheet":x=Us(s.href);var w=e.querySelector(Vl(x));if(w)return n.state.loading|=4,n.instance=w,$t(w),w;h=R1(s),(x=Br.get(x))&&Yh(h,x),w=(e.ownerDocument||e).createElement("link"),$t(w);var C=w;return C._p=new Promise(function(D,j){C.onload=D,C.onerror=j}),kn(w,"link",h),n.state.loading|=4,_u(w,s.precedence,e),n.instance=w;case"script":return w=js(s.src),(x=e.querySelector(ql(w)))?(n.instance=x,$t(x),x):(h=s,(x=Br.get(w))&&(h=N({},s),Wh(h,x)),e=e.ownerDocument||e,x=e.createElement("script"),$t(x),kn(x,"link",h),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(f(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,_u(h,s.precedence,e));return n.instance}function _u(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=h.length?h[h.length-1]:null,w=x,C=0;C<h.length;C++){var D=h[C];if(D.dataset.precedence===n)w=D;else if(w!==x)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Yh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Wh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Su=null;function I1(e,n,s){if(Su===null){var h=new Map,x=Su=new Map;x.set(s,h)}else x=Su,h=x.get(s),h||(h=new Map,x.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),x=0;x<s.length;x++){var w=s[x];if(!(w[Ta]||w[ln]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(n)||"";C=e+C;var D=h.get(C);D?D.push(w):h.set(C,[w])}}return h}function D1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function Vm(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function M1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function qm(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Us(h.href),w=n.querySelector(Vl(x));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Cu.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,$t(w);return}w=n.ownerDocument||n,h=R1(h),(x=Br.get(x))&&Yh(h,x),w=w.createElement("link"),$t(w);var C=w;C._p=new Promise(function(D,j){C.onload=D,C.onerror=j}),kn(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Cu.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Kh=0;function Xm(e,n){return e.stylesheets&&e.count===0&&Ou(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&Ou(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Kh===0&&(Kh=62500*Cm());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ou(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Kh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(x)}}:null}function Cu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ou(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tu=null;function Ou(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tu=new Map,n.forEach(Ym,e),Tu=null,Cu.call(e))}function Ym(e,n){if(!(n.state.loading&4)){var s=Tu.get(e);if(s)var h=s.get(null);else{s=new Map,Tu.set(e,s);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var C=x[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(s.set(C.dataset.precedence,C),h=C)}h&&s.set(null,h)}x=n.instance,C=x.getAttribute("data-precedence"),w=s.get(C)||h,w===h&&s.set(null,x),s.set(C,x),this.count++,h=Cu.bind(this),x.addEventListener("load",h),x.addEventListener("error",h),w?w.parentNode.insertBefore(x,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var Xl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function Wm(e,n,s,h,x,w,C,D,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=h,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function B1(e,n,s,h,x,w,C,D,j,Q,ue,de){return e=new Wm(e,n,s,C,j,Q,ue,de,D),n=1,w===!0&&(n|=24),w=fr(3,null,null,n),e.current=w,w.stateNode=e,n=Oc(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},Dc(w),e}function k1(e){return e?(e=ms,e):ms}function L1(e,n,s,h,x,w){x=k1(x),h.context===null?h.context=x:h.pendingContext=x,h=ia(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=aa(e,h,n),s!==null&&(rr(s,e,n),_l(s,e,n))}function U1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Zh(e,n){U1(e,n),(e=e.alternate)&&U1(e,n)}function j1(e){if(e.tag===13||e.tag===31){var n=La(e,67108864);n!==null&&rr(n,e,67108864),Zh(e,67108864)}}function P1(e){if(e.tag===13||e.tag===31){var n=xr();n=Tn(n);var s=La(e,n);s!==null&&rr(s,e,n),Zh(e,n)}}var Ru=!0;function Km(e,n,s,h){var x=ie.T;ie.T=null;var w=fe.p;try{fe.p=2,Qh(e,n,s,h)}finally{fe.p=w,ie.T=x}}function Zm(e,n,s,h){var x=ie.T;ie.T=null;var w=fe.p;try{fe.p=8,Qh(e,n,s,h)}finally{fe.p=w,ie.T=x}}function Qh(e,n,s,h){if(Ru){var x=Jh(h);if(x===null)Uh(e,n,h,Nu,s),z1(e,h);else if(Jm(x,e,n,s,h))h.stopPropagation();else if(z1(e,h),n&4&&-1<Qm.indexOf(e)){for(;x!==null;){var w=bt(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Zr(w.pendingLanes);if(C!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var j=1<<31-We(C);D.entanglements[1]|=j,C&=~j}li(w),(Et&6)===0&&(fu=Zt()+500,Fl(0))}}break;case 31:case 13:D=La(w,2),D!==null&&rr(D,w,2),gu(),Zh(w,2)}if(w=Jh(h),w===null&&Uh(e,n,h,Nu,s),w===x)break;x=w}x!==null&&h.stopPropagation()}else Uh(e,n,h,null,s)}}function Jh(e){return e=ul(e),$h(e)}var Nu=null;function $h(e){if(Nu=null,e=Jt(e),e!==null){var n=m(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=b(n),e!==null)return e;e=null}else if(s===31){if(e=A(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Nu=e,null}function F1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rl()){case Wn:return 2;case il:return 8;case ar:case Rn:return 32;case al:return 268435456;default:return 32}default:return 32}}var ef=!1,pa=null,xa=null,ya=null,Yl=new Map,Wl=new Map,wa=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z1(e,n){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Yl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(n.pointerId)}}function Kl(e,n,s,h,x,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[x]},n!==null&&(n=bt(n),n!==null&&j1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function Jm(e,n,s,h,x){switch(n){case"focusin":return pa=Kl(pa,e,n,s,h,x),!0;case"dragenter":return xa=Kl(xa,e,n,s,h,x),!0;case"mouseover":return ya=Kl(ya,e,n,s,h,x),!0;case"pointerover":var w=x.pointerId;return Yl.set(w,Kl(Yl.get(w)||null,e,n,s,h,x)),!0;case"gotpointercapture":return w=x.pointerId,Wl.set(w,Kl(Wl.get(w)||null,e,n,s,h,x)),!0}return!1}function H1(e){var n=Jt(e.target);if(n!==null){var s=m(n);if(s!==null){if(n=s.tag,n===13){if(n=b(s),n!==null){e.blockedOn=n,_e(e.priority,function(){P1(s)});return}}else if(n===31){if(n=A(s),n!==null){e.blockedOn=n,_e(e.priority,function(){P1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Iu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Jh(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Oa=h,s.target.dispatchEvent(h),Oa=null}else return n=bt(s),n!==null&&j1(n),e.blockedOn=s,!1;n.shift()}return!0}function G1(e,n,s){Iu(e)&&s.delete(n)}function $m(){ef=!1,pa!==null&&Iu(pa)&&(pa=null),xa!==null&&Iu(xa)&&(xa=null),ya!==null&&Iu(ya)&&(ya=null),Yl.forEach(G1),Wl.forEach(G1)}function Du(e,n){e.blockedOn===n&&(e.blockedOn=null,ef||(ef=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,$m)))}var Mu=null;function V1(e){Mu!==e&&(Mu=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Mu===e&&(Mu=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],x=e[n+2];if(typeof h!="function"){if($h(h||s)===null)continue;break}var w=bt(s);w!==null&&(e.splice(n,3),n-=3,Jc(w,{pending:!0,data:x,method:s.method,action:h},h,x))}}))}function Ps(e){function n(j){return Du(j,e)}pa!==null&&Du(pa,e),xa!==null&&Du(xa,e),ya!==null&&Du(ya,e),Yl.forEach(n),Wl.forEach(n);for(var s=0;s<wa.length;s++){var h=wa[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<wa.length&&(s=wa[0],s.blockedOn===null);)H1(s),s.blockedOn===null&&wa.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var x=s[h],w=s[h+1],C=x[Tt]||null;if(typeof w=="function")C||V1(s);else if(C){var D=null;if(w&&w.hasAttribute("formAction")){if(x=w,C=w[Tt]||null)D=C.formAction;else if($h(x)!==null)continue}else D=C.action;typeof D=="function"?s[h+1]=D:(s.splice(h,3),h-=3),V1(s)}}}function q1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function tf(e){this._internalRoot=e}Bu.prototype.render=tf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(f(409));var s=n.current,h=xr();L1(s,h,e,n,null,null)},Bu.prototype.unmount=tf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;L1(e.current,2,null,e,null,null),gu(),n[sr]=null}};function Bu(e){this._internalRoot=e}Bu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Pn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<wa.length&&n!==0&&n<wa[s].priority;s++);wa.splice(s,0,e),s===0&&H1(e)}};var X1=i.version;if(X1!=="19.2.4")throw Error(f(527,X1,"19.2.4"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=E(n),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var ep={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Ft=ku.inject(ep),we=ku}catch{}}return Ql.createRoot=function(e,n){if(!p(e))throw Error(f(299));var s=!1,h="",x=$d,w=e0,C=t0;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError)),n=B1(e,1,!1,null,null,s,h,null,x,w,C,q1),e[sr]=n.current,Lh(e),new tf(n)},Ql.hydrateRoot=function(e,n,s){if(!p(e))throw Error(f(299));var h=!1,x="",w=$d,C=e0,D=t0,j=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(x=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.formState!==void 0&&(j=s.formState)),n=B1(e,1,!0,n,s??null,h,x,j,w,C,D,q1),n.context=k1(null),s=n.current,h=xr(),h=Tn(h),x=ia(h),x.callback=null,aa(s,x,h),s=h,n.current.lanes=s,Jr(n,s),li(n),e[sr]=n.current,Lh(e),new Bu(n)},Ql.version="19.2.4",Ql}var ng;function fp(){if(ng)return af.exports;ng=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),af.exports=hp(),af.exports}var dp=fp();var rg="popstate";function gp(l={}){function i(f,p){let{pathname:m,search:b,hash:A}=f.location;return wf("",{pathname:m,search:b,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function o(f,p){return typeof p=="string"?p:ao(p)}return pp(i,o,null,l)}function Kt(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function Wr(l,i){if(!l){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function mp(){return Math.random().toString(36).substring(2,10)}function ig(l,i){return{usr:l.state,key:l.key,idx:i}}function wf(l,i,o=null,f){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof i=="string"?$s(i):i,state:o,key:i&&i.key||f||mp()}}function ao({pathname:l="/",search:i="",hash:o=""}){return i&&i!=="?"&&(l+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function $s(l){let i={};if(l){let o=l.indexOf("#");o>=0&&(i.hash=l.substring(o),l=l.substring(0,o));let f=l.indexOf("?");f>=0&&(i.search=l.substring(f),l=l.substring(0,f)),l&&(i.pathname=l)}return i}function pp(l,i,o,f={}){let{window:p=document.defaultView,v5Compat:m=!1}=f,b=p.history,A="POP",_=null,E=R();E==null&&(E=0,b.replaceState({...b.state,idx:E},""));function R(){return(b.state||{idx:null}).idx}function N(){A="POP";let te=R(),le=te==null?null:te-E;E=te,_&&_({action:A,location:G.location,delta:le})}function L(te,le){A="PUSH";let $=wf(G.location,te,le);E=R()+1;let Y=ig($,E),pe=G.createHref($);try{b.pushState(Y,"",pe)}catch(Be){if(Be instanceof DOMException&&Be.name==="DataCloneError")throw Be;p.location.assign(pe)}m&&_&&_({action:A,location:G.location,delta:1})}function U(te,le){A="REPLACE";let $=wf(G.location,te,le);E=R();let Y=ig($,E),pe=G.createHref($);b.replaceState(Y,"",pe),m&&_&&_({action:A,location:G.location,delta:0})}function V(te){return xp(te)}let G={get action(){return A},get location(){return l(p,b)},listen(te){if(_)throw new Error("A history only accepts one active listener");return p.addEventListener(rg,N),_=te,()=>{p.removeEventListener(rg,N),_=null}},createHref(te){return i(p,te)},createURL:V,encodeLocation(te){let le=V(te);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:L,replace:U,go(te){return b.go(te)}};return G}function xp(l,i=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(o,"No window.location.(origin|href) available to create URL");let f=typeof l=="string"?l:ao(l);return f=f.replace(/ $/,"%20"),!i&&f.startsWith("//")&&(f=o+f),new URL(f,o)}function Zg(l,i,o="/"){return yp(l,i,o,!1)}function yp(l,i,o,f){let p=typeof i=="string"?$s(i):i,m=ki(p.pathname||"/",o);if(m==null)return null;let b=Qg(l);wp(b);let A=null;for(let _=0;A==null&&_<b.length;++_){let E=Np(m);A=Op(b[_],E,f)}return A}function Qg(l,i=[],o=[],f="",p=!1){let m=(b,A,_=p,E)=>{let R={relativePath:E===void 0?b.path||"":E,caseSensitive:b.caseSensitive===!0,childrenIndex:A,route:b};if(R.relativePath.startsWith("/")){if(!R.relativePath.startsWith(f)&&_)return;Kt(R.relativePath.startsWith(f),`Absolute route path "${R.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(f.length)}let N=Bi([f,R.relativePath]),L=o.concat(R);b.children&&b.children.length>0&&(Kt(b.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),Qg(b.children,i,L,N,_)),!(b.path==null&&!b.index)&&i.push({path:N,score:Cp(N,b.index),routesMeta:L})};return l.forEach((b,A)=>{if(b.path===""||!b.path?.includes("?"))m(b,A);else for(let _ of Jg(b.path))m(b,A,!0,_)}),i}function Jg(l){let i=l.split("/");if(i.length===0)return[];let[o,...f]=i,p=o.endsWith("?"),m=o.replace(/\?$/,"");if(f.length===0)return p?[m,""]:[m];let b=Jg(f.join("/")),A=[];return A.push(...b.map(_=>_===""?m:[m,_].join("/"))),p&&A.push(...b),A.map(_=>l.startsWith("/")&&_===""?"/":_)}function wp(l){l.sort((i,o)=>i.score!==o.score?o.score-i.score:Tp(i.routesMeta.map(f=>f.childrenIndex),o.routesMeta.map(f=>f.childrenIndex)))}var bp=/^:[\w-]+$/,vp=3,Ep=2,Ap=1,_p=10,Sp=-2,ag=l=>l==="*";function Cp(l,i){let o=l.split("/"),f=o.length;return o.some(ag)&&(f+=Sp),i&&(f+=Ep),o.filter(p=>!ag(p)).reduce((p,m)=>p+(bp.test(m)?vp:m===""?Ap:_p),f)}function Tp(l,i){return l.length===i.length&&l.slice(0,-1).every((f,p)=>f===i[p])?l[l.length-1]-i[i.length-1]:0}function Op(l,i,o=!1){let{routesMeta:f}=l,p={},m="/",b=[];for(let A=0;A<f.length;++A){let _=f[A],E=A===f.length-1,R=m==="/"?i:i.slice(m.length)||"/",N=Yu({path:_.relativePath,caseSensitive:_.caseSensitive,end:E},R),L=_.route;if(!N&&E&&o&&!f[f.length-1].route.index&&(N=Yu({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},R)),!N)return null;Object.assign(p,N.params),b.push({params:p,pathname:Bi([m,N.pathname]),pathnameBase:Bp(Bi([m,N.pathnameBase])),route:L}),N.pathnameBase!=="/"&&(m=Bi([m,N.pathnameBase]))}return b}function Yu(l,i){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,f]=Rp(l.path,l.caseSensitive,l.end),p=i.match(o);if(!p)return null;let m=p[0],b=m.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:f.reduce((E,{paramName:R,isOptional:N},L)=>{if(R==="*"){let V=A[L]||"";b=m.slice(0,m.length-V.length).replace(/(.)\/+$/,"$1")}const U=A[L];return N&&!U?E[R]=void 0:E[R]=(U||"").replace(/%2F/g,"/"),E},{}),pathname:m,pathnameBase:b,pattern:l}}function Rp(l,i=!1,o=!0){Wr(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let f=[],p="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,A,_)=>(f.push({paramName:A,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(f.push({paramName:"*"}),p+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?p+="\\/*$":l!==""&&l!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,i?void 0:"i"),f]}function Np(l){try{return l.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Wr(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),l}}function ki(l,i){if(i==="/")return l;if(!l.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,f=l.charAt(o);return f&&f!=="/"?null:l.slice(o)||"/"}var Ip=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Dp(l,i="/"){let{pathname:o,search:f="",hash:p=""}=typeof l=="string"?$s(l):l,m;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?m=sg(o.substring(1),"/"):m=sg(o,i)):m=i,{pathname:m,search:kp(f),hash:Lp(p)}}function sg(l,i){let o=i.replace(/\/+$/,"").split("/");return l.split("/").forEach(p=>{p===".."?o.length>1&&o.pop():p!=="."&&o.push(p)}),o.length>1?o.join("/"):"/"}function uf(l,i,o,f){return`Cannot include a '${l}' character in a manually specified \`to.${i}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mp(l){return l.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function Bf(l){let i=Mp(l);return i.map((o,f)=>f===i.length-1?o.pathname:o.pathnameBase)}function kf(l,i,o,f=!1){let p;typeof l=="string"?p=$s(l):(p={...l},Kt(!p.pathname||!p.pathname.includes("?"),uf("?","pathname","search",p)),Kt(!p.pathname||!p.pathname.includes("#"),uf("#","pathname","hash",p)),Kt(!p.search||!p.search.includes("#"),uf("#","search","hash",p)));let m=l===""||p.pathname==="",b=m?"/":p.pathname,A;if(b==null)A=o;else{let N=i.length-1;if(!f&&b.startsWith("..")){let L=b.split("/");for(;L[0]==="..";)L.shift(),N-=1;p.pathname=L.join("/")}A=N>=0?i[N]:"/"}let _=Dp(p,A),E=b&&b!=="/"&&b.endsWith("/"),R=(m||b===".")&&o.endsWith("/");return!_.pathname.endsWith("/")&&(E||R)&&(_.pathname+="/"),_}var Bi=l=>l.join("/").replace(/\/\/+/g,"/"),Bp=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),kp=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Lp=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,Up=class{constructor(l,i,o,f=!1){this.status=l,this.statusText=i||"",this.internal=f,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function jp(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function Pp(l){return l.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function e2(l,i){let o=l;if(typeof o!="string"||!Ip.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let f=o,p=!1;if($g)try{let m=new URL(window.location.href),b=o.startsWith("//")?new URL(m.protocol+o):new URL(o),A=ki(b.pathname,i);b.origin===m.origin&&A!=null?o=A+b.search+b.hash:p=!0}catch{Wr(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:f,isExternal:p,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var t2=["POST","PUT","PATCH","DELETE"];new Set(t2);var Fp=["GET",...t2];new Set(Fp);var el=W.createContext(null);el.displayName="DataRouter";var ec=W.createContext(null);ec.displayName="DataRouterState";var zp=W.createContext(!1),n2=W.createContext({isTransitioning:!1});n2.displayName="ViewTransition";var Hp=W.createContext(new Map);Hp.displayName="Fetchers";var Gp=W.createContext(null);Gp.displayName="Await";var vr=W.createContext(null);vr.displayName="Navigation";var mo=W.createContext(null);mo.displayName="Location";var Kr=W.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var Lf=W.createContext(null);Lf.displayName="RouteError";var r2="REACT_ROUTER_ERROR",Vp="REDIRECT",qp="ROUTE_ERROR_RESPONSE";function Xp(l){if(l.startsWith(`${r2}:${Vp}:{`))try{let i=JSON.parse(l.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function Yp(l){if(l.startsWith(`${r2}:${qp}:{`))try{let i=JSON.parse(l.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new Up(i.status,i.statusText,i.data)}catch{}}function Wp(l,{relative:i}={}){Kt(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:f}=W.useContext(vr),{hash:p,pathname:m,search:b}=po(l,{relative:i}),A=m;return o!=="/"&&(A=m==="/"?o:Bi([o,m])),f.createHref({pathname:A,search:b,hash:p})}function tl(){return W.useContext(mo)!=null}function Aa(){return Kt(tl(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(mo).location}var i2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a2(l){W.useContext(vr).static||W.useLayoutEffect(l)}function Uf(){let{isDataRoute:l}=W.useContext(Kr);return l?ux():Kp()}function Kp(){Kt(tl(),"useNavigate() may be used only in the context of a <Router> component.");let l=W.useContext(el),{basename:i,navigator:o}=W.useContext(vr),{matches:f}=W.useContext(Kr),{pathname:p}=Aa(),m=JSON.stringify(Bf(f)),b=W.useRef(!1);return a2(()=>{b.current=!0}),W.useCallback((_,E={})=>{if(Wr(b.current,i2),!b.current)return;if(typeof _=="number"){o.go(_);return}let R=kf(_,JSON.parse(m),p,E.relative==="path");l==null&&i!=="/"&&(R.pathname=R.pathname==="/"?i:Bi([i,R.pathname])),(E.replace?o.replace:o.push)(R,E.state,E)},[i,o,m,p,l])}var Zp=W.createContext(null);function Qp(l){let i=W.useContext(Kr).outlet;return W.useMemo(()=>i&&W.createElement(Zp.Provider,{value:l},i),[i,l])}function po(l,{relative:i}={}){let{matches:o}=W.useContext(Kr),{pathname:f}=Aa(),p=JSON.stringify(Bf(o));return W.useMemo(()=>kf(l,JSON.parse(p),f,i==="path"),[l,p,f,i])}function Jp(l,i){return s2(l,i)}function s2(l,i,o,f,p){Kt(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=W.useContext(vr),{matches:b}=W.useContext(Kr),A=b[b.length-1],_=A?A.params:{},E=A?A.pathname:"/",R=A?A.pathnameBase:"/",N=A&&A.route;{let $=N&&N.path||"";o2(E,!N||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let L=Aa(),U;if(i){let $=typeof i=="string"?$s(i):i;Kt(R==="/"||$.pathname?.startsWith(R),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${R}" but pathname "${$.pathname}" was given in the \`location\` prop.`),U=$}else U=L;let V=U.pathname||"/",G=V;if(R!=="/"){let $=R.replace(/^\//,"").split("/");G="/"+V.replace(/^\//,"").split("/").slice($.length).join("/")}let te=Zg(l,{pathname:G});Wr(N||te!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),Wr(te==null||te[te.length-1].route.element!==void 0||te[te.length-1].route.Component!==void 0||te[te.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=rx(te&&te.map($=>Object.assign({},$,{params:Object.assign({},_,$.params),pathname:Bi([R,m.encodeLocation?m.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?R:Bi([R,m.encodeLocation?m.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),b,o,f,p);return i&&le?W.createElement(mo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},le):le}function $p(){let l=ox(),i=jp(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},m={padding:"2px 4px",backgroundColor:f},b=null;return console.error("Error handled by React Router default ErrorBoundary:",l),b=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:m},"ErrorBoundary")," or"," ",W.createElement("code",{style:m},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},i),o?W.createElement("pre",{style:p},o):null,b)}var ex=W.createElement($p,null),l2=class extends W.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,i){return i.location!==l.location||i.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:i.error,location:i.location,revalidation:l.revalidation||i.revalidation}}componentDidCatch(l,i){this.props.onError?this.props.onError(l,i):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=Yp(l.digest);o&&(l=o)}let i=l!==void 0?W.createElement(Kr.Provider,{value:this.props.routeContext},W.createElement(Lf.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?W.createElement(tx,{error:l},i):i}};l2.contextType=zp;var cf=new WeakMap;function tx({children:l,error:i}){let{basename:o}=W.useContext(vr);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let f=Xp(i.digest);if(f){let p=cf.get(i);if(p)throw p;let m=e2(f.location,o);if($g&&!cf.get(i))if(m.isExternal||f.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const b=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:f.replace}));throw cf.set(i,b),b}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return l}function nx({routeContext:l,match:i,children:o}){let f=W.useContext(el);return f&&f.static&&f.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=i.route.id),W.createElement(Kr.Provider,{value:l},o)}function rx(l,i=[],o=null,f=null,p=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(i.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let m=l,b=o?.errors;if(b!=null){let R=m.findIndex(N=>N.route.id&&b?.[N.route.id]!==void 0);Kt(R>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(b).join(",")}`),m=m.slice(0,Math.min(m.length,R+1))}let A=!1,_=-1;if(o)for(let R=0;R<m.length;R++){let N=m[R];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(_=R),N.route.id){let{loaderData:L,errors:U}=o,V=N.route.loader&&!L.hasOwnProperty(N.route.id)&&(!U||U[N.route.id]===void 0);if(N.route.lazy||V){A=!0,_>=0?m=m.slice(0,_+1):m=[m[0]];break}}}let E=o&&f?(R,N)=>{f(R,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:Pp(o.matches),errorInfo:N})}:void 0;return m.reduceRight((R,N,L)=>{let U,V=!1,G=null,te=null;o&&(U=b&&N.route.id?b[N.route.id]:void 0,G=N.route.errorElement||ex,A&&(_<0&&L===0?(o2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,te=null):_===L&&(V=!0,te=N.route.hydrateFallbackElement||null)));let le=i.concat(m.slice(0,L+1)),$=()=>{let Y;return U?Y=G:V?Y=te:N.route.Component?Y=W.createElement(N.route.Component,null):N.route.element?Y=N.route.element:Y=R,W.createElement(nx,{match:N,routeContext:{outlet:R,matches:le,isDataRoute:o!=null},children:Y})};return o&&(N.route.ErrorBoundary||N.route.errorElement||L===0)?W.createElement(l2,{location:o.location,revalidation:o.revalidation,component:G,error:U,children:$(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:E}):$()},null)}function jf(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ix(l){let i=W.useContext(el);return Kt(i,jf(l)),i}function ax(l){let i=W.useContext(ec);return Kt(i,jf(l)),i}function sx(l){let i=W.useContext(Kr);return Kt(i,jf(l)),i}function Pf(l){let i=sx(l),o=i.matches[i.matches.length-1];return Kt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function lx(){return Pf("useRouteId")}function ox(){let l=W.useContext(Lf),i=ax("useRouteError"),o=Pf("useRouteError");return l!==void 0?l:i.errors?.[o]}function ux(){let{router:l}=ix("useNavigate"),i=Pf("useNavigate"),o=W.useRef(!1);return a2(()=>{o.current=!0}),W.useCallback(async(p,m={})=>{Wr(o.current,i2),o.current&&(typeof p=="number"?await l.navigate(p):await l.navigate(p,{fromRouteId:i,...m}))},[l,i])}var lg={};function o2(l,i,o){!i&&!lg[l]&&(lg[l]=!0,Wr(!1,o))}W.memo(cx);function cx({routes:l,future:i,state:o,onError:f}){return s2(l,void 0,o,f,i)}function bf({to:l,replace:i,state:o,relative:f}){Kt(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:p}=W.useContext(vr);Wr(!p,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=W.useContext(Kr),{pathname:b}=Aa(),A=Uf(),_=kf(l,Bf(m),b,f==="path"),E=JSON.stringify(_);return W.useEffect(()=>{A(JSON.parse(E),{replace:i,state:o,relative:f})},[A,E,f,i,o]),null}function u2(l){return Qp(l.context)}function oi(l){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hx({basename:l="/",children:i=null,location:o,navigationType:f="POP",navigator:p,static:m=!1,unstable_useTransitions:b}){Kt(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=l.replace(/^\/*/,"/"),_=W.useMemo(()=>({basename:A,navigator:p,static:m,unstable_useTransitions:b,future:{}}),[A,p,m,b]);typeof o=="string"&&(o=$s(o));let{pathname:E="/",search:R="",hash:N="",state:L=null,key:U="default"}=o,V=W.useMemo(()=>{let G=ki(E,A);return G==null?null:{location:{pathname:G,search:R,hash:N,state:L,key:U},navigationType:f}},[A,E,R,N,L,U,f]);return Wr(V!=null,`<Router basename="${A}"> is not able to match the URL "${E}${R}${N}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:W.createElement(vr.Provider,{value:_},W.createElement(mo.Provider,{children:i,value:V}))}function fx({children:l,location:i}){return Jp(vf(l),i)}function vf(l,i=[]){let o=[];return W.Children.forEach(l,(f,p)=>{if(!W.isValidElement(f))return;let m=[...i,p];if(f.type===W.Fragment){o.push.apply(o,vf(f.props.children,m));return}Kt(f.type===oi,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!f.props.index||!f.props.children,"An index route cannot have child routes.");let b={id:f.props.id||m.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,middleware:f.props.middleware,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(b.children=vf(f.props.children,m)),o.push(b)}),o}var qu="get",Xu="application/x-www-form-urlencoded";function tc(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function dx(l){return tc(l)&&l.tagName.toLowerCase()==="button"}function gx(l){return tc(l)&&l.tagName.toLowerCase()==="form"}function mx(l){return tc(l)&&l.tagName.toLowerCase()==="input"}function px(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function xx(l,i){return l.button===0&&(!i||i==="_self")&&!px(l)}var Uu=null;function yx(){if(Uu===null)try{new FormData(document.createElement("form"),0),Uu=!1}catch{Uu=!0}return Uu}var wx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hf(l){return l!=null&&!wx.has(l)?(Wr(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xu}"`),null):l}function bx(l,i){let o,f,p,m,b;if(gx(l)){let A=l.getAttribute("action");f=A?ki(A,i):null,o=l.getAttribute("method")||qu,p=hf(l.getAttribute("enctype"))||Xu,m=new FormData(l)}else if(dx(l)||mx(l)&&(l.type==="submit"||l.type==="image")){let A=l.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=l.getAttribute("formaction")||A.getAttribute("action");if(f=_?ki(_,i):null,o=l.getAttribute("formmethod")||A.getAttribute("method")||qu,p=hf(l.getAttribute("formenctype"))||hf(A.getAttribute("enctype"))||Xu,m=new FormData(A,l),!yx()){let{name:E,type:R,value:N}=l;if(R==="image"){let L=E?`${E}.`:"";m.append(`${L}x`,"0"),m.append(`${L}y`,"0")}else E&&m.append(E,N)}}else{if(tc(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=qu,f=null,p=Xu,b=l}return m&&p==="text/plain"&&(b=m,m=void 0),{action:f,method:o.toLowerCase(),encType:p,formData:m,body:b}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ff(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function vx(l,i,o,f){let p=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?p.pathname.endsWith("/")?p.pathname=`${p.pathname}_.${f}`:p.pathname=`${p.pathname}.${f}`:p.pathname==="/"?p.pathname=`_root.${f}`:i&&ki(p.pathname,i)==="/"?p.pathname=`${i.replace(/\/$/,"")}/_root.${f}`:p.pathname=`${p.pathname.replace(/\/$/,"")}.${f}`,p}async function Ex(l,i){if(l.id in i)return i[l.id];try{let o=await import(l.module);return i[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ax(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function _x(l,i,o){let f=await Promise.all(l.map(async p=>{let m=i.routes[p.route.id];if(m){let b=await Ex(m,o);return b.links?b.links():[]}return[]}));return Ox(f.flat(1).filter(Ax).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function og(l,i,o,f,p,m){let b=(_,E)=>o[E]?_.route.id!==o[E].route.id:!0,A=(_,E)=>o[E].pathname!==_.pathname||o[E].route.path?.endsWith("*")&&o[E].params["*"]!==_.params["*"];return m==="assets"?i.filter((_,E)=>b(_,E)||A(_,E)):m==="data"?i.filter((_,E)=>{let R=f.routes[_.route.id];if(!R||!R.hasLoader)return!1;if(b(_,E)||A(_,E))return!0;if(_.route.shouldRevalidate){let N=_.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Sx(l,i,{includeHydrateFallback:o}={}){return Cx(l.map(f=>{let p=i.routes[f.route.id];if(!p)return[];let m=[p.module];return p.clientActionModule&&(m=m.concat(p.clientActionModule)),p.clientLoaderModule&&(m=m.concat(p.clientLoaderModule)),o&&p.hydrateFallbackModule&&(m=m.concat(p.hydrateFallbackModule)),p.imports&&(m=m.concat(p.imports)),m}).flat(1))}function Cx(l){return[...new Set(l)]}function Tx(l){let i={},o=Object.keys(l).sort();for(let f of o)i[f]=l[f];return i}function Ox(l,i){let o=new Set;return new Set(i),l.reduce((f,p)=>{let m=JSON.stringify(Tx(p));return o.has(m)||(o.add(m),f.push({key:m,link:p})),f},[])}function c2(){let l=W.useContext(el);return Ff(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Rx(){let l=W.useContext(ec);return Ff(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var zf=W.createContext(void 0);zf.displayName="FrameworkContext";function h2(){let l=W.useContext(zf);return Ff(l,"You must render this element inside a <HydratedRouter> element"),l}function Nx(l,i){let o=W.useContext(zf),[f,p]=W.useState(!1),[m,b]=W.useState(!1),{onFocus:A,onBlur:_,onMouseEnter:E,onMouseLeave:R,onTouchStart:N}=i,L=W.useRef(null);W.useEffect(()=>{if(l==="render"&&b(!0),l==="viewport"){let G=le=>{le.forEach($=>{b($.isIntersecting)})},te=new IntersectionObserver(G,{threshold:.5});return L.current&&te.observe(L.current),()=>{te.disconnect()}}},[l]),W.useEffect(()=>{if(f){let G=setTimeout(()=>{b(!0)},100);return()=>{clearTimeout(G)}}},[f]);let U=()=>{p(!0)},V=()=>{p(!1),b(!1)};return o?l!=="intent"?[m,L,{}]:[m,L,{onFocus:Jl(A,U),onBlur:Jl(_,V),onMouseEnter:Jl(E,U),onMouseLeave:Jl(R,V),onTouchStart:Jl(N,U)}]:[!1,L,{}]}function Jl(l,i){return o=>{l&&l(o),o.defaultPrevented||i(o)}}function Ix({page:l,...i}){let{router:o}=c2(),f=W.useMemo(()=>Zg(o.routes,l,o.basename),[o.routes,l,o.basename]);return f?W.createElement(Mx,{page:l,matches:f,...i}):null}function Dx(l){let{manifest:i,routeModules:o}=h2(),[f,p]=W.useState([]);return W.useEffect(()=>{let m=!1;return _x(l,i,o).then(b=>{m||p(b)}),()=>{m=!0}},[l,i,o]),f}function Mx({page:l,matches:i,...o}){let f=Aa(),{future:p,manifest:m,routeModules:b}=h2(),{basename:A}=c2(),{loaderData:_,matches:E}=Rx(),R=W.useMemo(()=>og(l,i,E,m,f,"data"),[l,i,E,m,f]),N=W.useMemo(()=>og(l,i,E,m,f,"assets"),[l,i,E,m,f]),L=W.useMemo(()=>{if(l===f.pathname+f.search+f.hash)return[];let G=new Set,te=!1;if(i.forEach($=>{let Y=m.routes[$.route.id];!Y||!Y.hasLoader||(!R.some(pe=>pe.route.id===$.route.id)&&$.route.id in _&&b[$.route.id]?.shouldRevalidate||Y.hasClientLoader?te=!0:G.add($.route.id))}),G.size===0)return[];let le=vx(l,A,p.unstable_trailingSlashAwareDataRequests,"data");return te&&G.size>0&&le.searchParams.set("_routes",i.filter($=>G.has($.route.id)).map($=>$.route.id).join(",")),[le.pathname+le.search]},[A,p.unstable_trailingSlashAwareDataRequests,_,f,m,R,i,l,b]),U=W.useMemo(()=>Sx(N,m),[N,m]),V=Dx(N);return W.createElement(W.Fragment,null,L.map(G=>W.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...o})),U.map(G=>W.createElement("link",{key:G,rel:"modulepreload",href:G,...o})),V.map(({key:G,link:te})=>W.createElement("link",{key:G,nonce:o.nonce,...te,crossOrigin:te.crossOrigin??o.crossOrigin})))}function Bx(...l){return i=>{l.forEach(o=>{typeof o=="function"?o(i):o!=null&&(o.current=i)})}}var kx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kx&&(window.__reactRouterVersion="7.13.0")}catch{}function Lx({basename:l,children:i,unstable_useTransitions:o,window:f}){let p=W.useRef();p.current==null&&(p.current=gp({window:f,v5Compat:!0}));let m=p.current,[b,A]=W.useState({action:m.action,location:m.location}),_=W.useCallback(E=>{o===!1?A(E):W.startTransition(()=>A(E))},[o]);return W.useLayoutEffect(()=>m.listen(_),[m,_]),W.createElement(hx,{basename:l,children:i,location:b.location,navigationType:b.action,navigator:m,unstable_useTransitions:o})}var f2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ks=W.forwardRef(function({onClick:i,discover:o="render",prefetch:f="none",relative:p,reloadDocument:m,replace:b,state:A,target:_,to:E,preventScrollReset:R,viewTransition:N,unstable_defaultShouldRevalidate:L,...U},V){let{basename:G,unstable_useTransitions:te}=W.useContext(vr),le=typeof E=="string"&&f2.test(E),$=e2(E,G);E=$.to;let Y=Wp(E,{relative:p}),[pe,Be,Ee]=Nx(f,U),ee=Fx(E,{replace:b,state:A,target:_,preventScrollReset:R,relative:p,viewTransition:N,unstable_defaultShouldRevalidate:L,unstable_useTransitions:te});function Re(ke){i&&i(ke),ke.defaultPrevented||ee(ke)}let he=W.createElement("a",{...U,...Ee,href:$.absoluteURL||Y,onClick:$.isExternal||m?i:Re,ref:Bx(V,Be),target:_,"data-discover":!le&&o==="render"?"true":void 0});return pe&&!le?W.createElement(W.Fragment,null,he,W.createElement(Ix,{page:Y})):he});Ks.displayName="Link";var Ux=W.forwardRef(function({"aria-current":i="page",caseSensitive:o=!1,className:f="",end:p=!1,style:m,to:b,viewTransition:A,children:_,...E},R){let N=po(b,{relative:E.relative}),L=Aa(),U=W.useContext(ec),{navigator:V,basename:G}=W.useContext(vr),te=U!=null&&qx(N)&&A===!0,le=V.encodeLocation?V.encodeLocation(N).pathname:N.pathname,$=L.pathname,Y=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;o||($=$.toLowerCase(),Y=Y?Y.toLowerCase():null,le=le.toLowerCase()),Y&&G&&(Y=ki(Y,G)||Y);const pe=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let Be=$===le||!p&&$.startsWith(le)&&$.charAt(pe)==="/",Ee=Y!=null&&(Y===le||!p&&Y.startsWith(le)&&Y.charAt(le.length)==="/"),ee={isActive:Be,isPending:Ee,isTransitioning:te},Re=Be?i:void 0,he;typeof f=="function"?he=f(ee):he=[f,Be?"active":null,Ee?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let ke=typeof m=="function"?m(ee):m;return W.createElement(Ks,{...E,"aria-current":Re,className:he,ref:R,style:ke,to:b,viewTransition:A},typeof _=="function"?_(ee):_)});Ux.displayName="NavLink";var jx=W.forwardRef(({discover:l="render",fetcherKey:i,navigate:o,reloadDocument:f,replace:p,state:m,method:b=qu,action:A,onSubmit:_,relative:E,preventScrollReset:R,viewTransition:N,unstable_defaultShouldRevalidate:L,...U},V)=>{let{unstable_useTransitions:G}=W.useContext(vr),te=Gx(),le=Vx(A,{relative:E}),$=b.toLowerCase()==="get"?"get":"post",Y=typeof A=="string"&&f2.test(A),pe=Be=>{if(_&&_(Be),Be.defaultPrevented)return;Be.preventDefault();let Ee=Be.nativeEvent.submitter,ee=Ee?.getAttribute("formmethod")||b,Re=()=>te(Ee||Be.currentTarget,{fetcherKey:i,method:ee,navigate:o,replace:p,state:m,relative:E,preventScrollReset:R,viewTransition:N,unstable_defaultShouldRevalidate:L});G&&o!==!1?W.startTransition(()=>Re()):Re()};return W.createElement("form",{ref:V,method:$,action:le,onSubmit:f?_:pe,...U,"data-discover":!Y&&l==="render"?"true":void 0})});jx.displayName="Form";function Px(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d2(l){let i=W.useContext(el);return Kt(i,Px(l)),i}function Fx(l,{target:i,replace:o,state:f,preventScrollReset:p,relative:m,viewTransition:b,unstable_defaultShouldRevalidate:A,unstable_useTransitions:_}={}){let E=Uf(),R=Aa(),N=po(l,{relative:m});return W.useCallback(L=>{if(xx(L,i)){L.preventDefault();let U=o!==void 0?o:ao(R)===ao(N),V=()=>E(l,{replace:U,state:f,preventScrollReset:p,relative:m,viewTransition:b,unstable_defaultShouldRevalidate:A});_?W.startTransition(()=>V()):V()}},[R,E,N,o,f,i,l,p,m,b,A,_])}var zx=0,Hx=()=>`__${String(++zx)}__`;function Gx(){let{router:l}=d2("useSubmit"),{basename:i}=W.useContext(vr),o=lx(),f=l.fetch,p=l.navigate;return W.useCallback(async(m,b={})=>{let{action:A,method:_,encType:E,formData:R,body:N}=bx(m,i);if(b.navigate===!1){let L=b.fetcherKey||Hx();await f(L,o,b.action||A,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:R,body:N,formMethod:b.method||_,formEncType:b.encType||E,flushSync:b.flushSync})}else await p(b.action||A,{unstable_defaultShouldRevalidate:b.unstable_defaultShouldRevalidate,preventScrollReset:b.preventScrollReset,formData:R,body:N,formMethod:b.method||_,formEncType:b.encType||E,replace:b.replace,state:b.state,fromRouteId:o,flushSync:b.flushSync,viewTransition:b.viewTransition})},[f,p,i,o])}function Vx(l,{relative:i}={}){let{basename:o}=W.useContext(vr),f=W.useContext(Kr);Kt(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),m={...po(l||".",{relative:i})},b=Aa();if(l==null){m.search=b.search;let A=new URLSearchParams(m.search),_=A.getAll("index");if(_.some(R=>R==="")){A.delete("index"),_.filter(N=>N).forEach(N=>A.append("index",N));let R=A.toString();m.search=R?`?${R}`:""}}return(!l||l===".")&&p.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(m.pathname=m.pathname==="/"?o:Bi([o,m.pathname])),ao(m)}function qx(l,{relative:i}={}){let o=W.useContext(n2);Kt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=d2("useViewTransitionState"),p=po(l,{relative:i});if(!o.isTransitioning)return!1;let m=ki(o.currentLocation.pathname,f)||o.currentLocation.pathname,b=ki(o.nextLocation.pathname,f)||o.nextLocation.pathname;return Yu(p.pathname,b)!=null||Yu(p.pathname,m)!=null}const g2=(...l)=>l.filter((i,o,f)=>!!i&&i.trim()!==""&&f.indexOf(i)===o).join(" ").trim();const Xx=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Yx=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,f)=>f?f.toUpperCase():o.toLowerCase());const ug=l=>{const i=Yx(l);return i.charAt(0).toUpperCase()+i.slice(1)};var Wx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kx=l=>{for(const i in l)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};const Zx=W.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:f,className:p="",children:m,iconNode:b,...A},_)=>W.createElement("svg",{ref:_,...Wx,width:i,height:i,stroke:l,strokeWidth:f?Number(o)*24/Number(i):o,className:g2("lucide",p),...!m&&!Kx(A)&&{"aria-hidden":"true"},...A},[...b.map(([E,R])=>W.createElement(E,R)),...Array.isArray(m)?m:[m]]));const ir=(l,i)=>{const o=W.forwardRef(({className:f,...p},m)=>W.createElement(Zx,{ref:m,iconNode:i,className:g2(`lucide-${Xx(ug(l))}`,`lucide-${l}`,f),...p}));return o.displayName=ug(l),o};const Qx=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cg=ir("arrow-left",Qx);const Jx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hg=ir("circle-check-big",Jx);const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ey=ir("circle-plus",$x);const ty=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ny=ir("clipboard-list",ty);const ry=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],iy=ir("layout-dashboard",ry);const ay=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],sy=ir("list",ay);const ly=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oy=ir("menu",ly);const uy=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],cy=ir("package",uy);const hy=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fy=ir("play",hy);const dy=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],gy=ir("printer",dy);const my=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],py=ir("triangle-alert",my);const xy=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],yy=ir("trophy",xy);const wy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],by=ir("user-plus",wy);const vy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],m2=ir("users",vy);function nc(l,i){var o={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&i.indexOf(f)<0&&(o[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,f=Object.getOwnPropertySymbols(l);p<f.length;p++)i.indexOf(f[p])<0&&Object.prototype.propertyIsEnumerable.call(l,f[p])&&(o[f[p]]=l[f[p]]);return o}function Ey(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})}const Ay=l=>l?(...i)=>l(...i):(...i)=>fetch(...i);class Hf extends Error{constructor(i,o="FunctionsError",f){super(i),this.name=o,this.context=f}}class _y extends Hf{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class fg extends Hf{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class dg extends Hf{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var Ef;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Ef||(Ef={}));class Sy{constructor(i,{headers:o={},customFetch:f,region:p=Ef.Any}={}){this.url=i,this.headers=o,this.region=p,this.fetch=Ay(f)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return Ey(this,arguments,void 0,function*(o,f={}){var p;let m,b;try{const{headers:A,method:_,body:E,signal:R,timeout:N}=f;let L={},{region:U}=f;U||(U=this.region);const V=new URL(`${this.url}/${o}`);U&&U!=="any"&&(L["x-region"]=U,V.searchParams.set("forceFunctionRegion",U));let G;E&&(A&&!Object.prototype.hasOwnProperty.call(A,"Content-Type")||!A)?typeof Blob<"u"&&E instanceof Blob||E instanceof ArrayBuffer?(L["Content-Type"]="application/octet-stream",G=E):typeof E=="string"?(L["Content-Type"]="text/plain",G=E):typeof FormData<"u"&&E instanceof FormData?G=E:(L["Content-Type"]="application/json",G=JSON.stringify(E)):E&&typeof E!="string"&&!(typeof Blob<"u"&&E instanceof Blob)&&!(E instanceof ArrayBuffer)&&!(typeof FormData<"u"&&E instanceof FormData)?G=JSON.stringify(E):G=E;let te=R;N&&(b=new AbortController,m=setTimeout(()=>b.abort(),N),R?(te=b.signal,R.addEventListener("abort",()=>b.abort())):te=b.signal);const le=yield this.fetch(V.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},L),this.headers),A),body:G,signal:te}).catch(Be=>{throw new _y(Be)}),$=le.headers.get("x-relay-error");if($&&$==="true")throw new fg(le);if(!le.ok)throw new dg(le);let Y=((p=le.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),pe;return Y==="application/json"?pe=yield le.json():Y==="application/octet-stream"||Y==="application/pdf"?pe=yield le.blob():Y==="text/event-stream"?pe=le:Y==="multipart/form-data"?pe=yield le.formData():pe=yield le.text(),{data:pe,error:null,response:le}}catch(A){return{data:null,error:A,response:A instanceof dg||A instanceof fg?A.context:void 0}}finally{m&&clearTimeout(m)}})}}var Cy=class extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}},Ty=class{constructor(l){var i,o,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(i=l.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=l.signal,this.isMaybeSingle=(o=l.isMaybeSingle)!==null&&o!==void 0?o:!1,this.urlLengthLimit=(f=l.urlLengthLimit)!==null&&f!==void 0?f:8e3,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,i){return this.headers=new Headers(this.headers),this.headers.set(l,i),this}then(l,i){var o=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let b=null,A=null,_=null,E=m.status,R=m.statusText;if(m.ok){var N,L;if(o.method!=="HEAD"){var U;const le=await m.text();le===""||(o.headers.get("Accept")==="text/csv"||o.headers.get("Accept")&&(!((U=o.headers.get("Accept"))===null||U===void 0)&&U.includes("application/vnd.pgrst.plan+text"))?A=le:A=JSON.parse(le))}const G=(N=o.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),te=(L=m.headers.get("content-range"))===null||L===void 0?void 0:L.split("/");G&&te&&te.length>1&&(_=parseInt(te[1])),o.isMaybeSingle&&o.method==="GET"&&Array.isArray(A)&&(A.length>1?(b={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,_=null,E=406,R="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{var V;const G=await m.text();try{b=JSON.parse(G),Array.isArray(b)&&m.status===404&&(A=[],b=null,E=200,R="OK")}catch{m.status===404&&G===""?(E=204,R="No Content"):b={message:G}}if(b&&o.isMaybeSingle&&(!(b==null||(V=b.details)===null||V===void 0)&&V.includes("0 rows"))&&(b=null,E=200,R="OK"),b&&o.shouldThrowOnError)throw new Cy(b)}return{error:b,data:A,count:_,status:E,statusText:R}});return this.shouldThrowOnError||(p=p.catch(m=>{var b;let A="",_="",E="";const R=m?.cause;if(R){var N,L,U,V;const le=(N=R?.message)!==null&&N!==void 0?N:"",$=(L=R?.code)!==null&&L!==void 0?L:"";A=`${(U=m?.name)!==null&&U!==void 0?U:"FetchError"}: ${m?.message}`,A+=`

Caused by: ${(V=R?.name)!==null&&V!==void 0?V:"Error"}: ${le}`,$&&(A+=` (${$})`),R?.stack&&(A+=`
${R.stack}`)}else{var G;A=(G=m?.stack)!==null&&G!==void 0?G:""}const te=this.url.toString().length;return m?.name==="AbortError"||m?.code==="ABORT_ERR"?(E="",_="Request was aborted (timeout or manual cancellation)",te>this.urlLengthLimit&&(_+=`. Note: Your request URL is ${te} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(R?.name==="HeadersOverflowError"||R?.code==="UND_ERR_HEADERS_OVERFLOW")&&(E="",_="HTTP headers exceeded server limits (typically 16KB)",te>this.urlLengthLimit&&(_+=`. Your request URL is ${te} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(b=m?.name)!==null&&b!==void 0?b:"FetchError"}: ${m?.message}`,details:A,hint:_,code:E},data:null,count:null,status:0,statusText:""}})),p.then(l,i)}returns(){return this}overrideTypes(){return this}},Oy=class extends Ty{select(l){let i=!1;const o=(l??"*").split("").map(f=>/\s/.test(f)&&!i?"":(f==='"'&&(i=!i),f)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:i=!0,nullsFirst:o,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",b=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${b?`${b},`:""}${l}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:i,referencedTable:o=i}={}){const f=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(f,`${l}`),this}range(l,i,{foreignTable:o,referencedTable:f=o}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(m,`${i-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:i=!1,settings:o=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var b;const A=[l?"analyze":null,i?"verbose":null,o?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${_}"; options=${A};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};const gg=new RegExp("[,()]");var Xs=class extends Oy{eq(l,i){return this.url.searchParams.append(l,`eq.${i}`),this}neq(l,i){return this.url.searchParams.append(l,`neq.${i}`),this}gt(l,i){return this.url.searchParams.append(l,`gt.${i}`),this}gte(l,i){return this.url.searchParams.append(l,`gte.${i}`),this}lt(l,i){return this.url.searchParams.append(l,`lt.${i}`),this}lte(l,i){return this.url.searchParams.append(l,`lte.${i}`),this}like(l,i){return this.url.searchParams.append(l,`like.${i}`),this}likeAllOf(l,i){return this.url.searchParams.append(l,`like(all).{${i.join(",")}}`),this}likeAnyOf(l,i){return this.url.searchParams.append(l,`like(any).{${i.join(",")}}`),this}ilike(l,i){return this.url.searchParams.append(l,`ilike.${i}`),this}ilikeAllOf(l,i){return this.url.searchParams.append(l,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(l,i){return this.url.searchParams.append(l,`ilike(any).{${i.join(",")}}`),this}regexMatch(l,i){return this.url.searchParams.append(l,`match.${i}`),this}regexIMatch(l,i){return this.url.searchParams.append(l,`imatch.${i}`),this}is(l,i){return this.url.searchParams.append(l,`is.${i}`),this}isDistinct(l,i){return this.url.searchParams.append(l,`isdistinct.${i}`),this}in(l,i){const o=Array.from(new Set(i)).map(f=>typeof f=="string"&&gg.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${o})`),this}notIn(l,i){const o=Array.from(new Set(i)).map(f=>typeof f=="string"&&gg.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`not.in.(${o})`),this}contains(l,i){return typeof i=="string"?this.url.searchParams.append(l,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(l,`cs.{${i.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(i)}`),this}containedBy(l,i){return typeof i=="string"?this.url.searchParams.append(l,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(l,`cd.{${i.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(i)}`),this}rangeGt(l,i){return this.url.searchParams.append(l,`sr.${i}`),this}rangeGte(l,i){return this.url.searchParams.append(l,`nxl.${i}`),this}rangeLt(l,i){return this.url.searchParams.append(l,`sl.${i}`),this}rangeLte(l,i){return this.url.searchParams.append(l,`nxr.${i}`),this}rangeAdjacent(l,i){return this.url.searchParams.append(l,`adj.${i}`),this}overlaps(l,i){return typeof i=="string"?this.url.searchParams.append(l,`ov.${i}`):this.url.searchParams.append(l,`ov.{${i.join(",")}}`),this}textSearch(l,i,{config:o,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const m=o===void 0?"":`(${o})`;return this.url.searchParams.append(l,`${p}fts${m}.${i}`),this}match(l){return Object.entries(l).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(l,i,o){return this.url.searchParams.append(l,`not.${i}.${o}`),this}or(l,{foreignTable:i,referencedTable:o=i}={}){const f=o?`${o}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,i,o){return this.url.searchParams.append(l,`${i}.${o}`),this}},Ry=class{constructor(l,{headers:i={},schema:o,fetch:f,urlLengthLimit:p=8e3}){this.url=l,this.headers=new Headers(i),this.schema=o,this.fetch=f,this.urlLengthLimit=p}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(l,i){const{head:o=!1,count:f}=i??{},p=o?"HEAD":"GET";let m=!1;const b=(l??"*").split("").map(E=>/\s/.test(E)&&!m?"":(E==='"'&&(m=!m),E)).join(""),{url:A,headers:_}=this.cloneRequestState();return A.searchParams.set("select",b),f&&_.append("Prefer",`count=${f}`),new Xs({method:p,url:A,headers:_,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(l,{count:i,defaultToNull:o=!0}={}){var f;const p="POST",{url:m,headers:b}=this.cloneRequestState();if(i&&b.append("Prefer",`count=${i}`),o||b.append("Prefer","missing=default"),Array.isArray(l)){const A=l.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(A.length>0){const _=[...new Set(A)].map(E=>`"${E}"`);m.searchParams.set("columns",_.join(","))}}return new Xs({method:p,url:m,headers:b,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(l,{onConflict:i,ignoreDuplicates:o=!1,count:f,defaultToNull:p=!0}={}){var m;const b="POST",{url:A,headers:_}=this.cloneRequestState();if(_.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&A.searchParams.set("on_conflict",i),f&&_.append("Prefer",`count=${f}`),p||_.append("Prefer","missing=default"),Array.isArray(l)){const E=l.reduce((R,N)=>R.concat(Object.keys(N)),[]);if(E.length>0){const R=[...new Set(E)].map(N=>`"${N}"`);A.searchParams.set("columns",R.join(","))}}return new Xs({method:b,url:A,headers:_,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch,urlLengthLimit:this.urlLengthLimit})}update(l,{count:i}={}){var o;const f="PATCH",{url:p,headers:m}=this.cloneRequestState();return i&&m.append("Prefer",`count=${i}`),new Xs({method:f,url:p,headers:m,schema:this.schema,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:l}={}){var i;const o="DELETE",{url:f,headers:p}=this.cloneRequestState();return l&&p.append("Prefer",`count=${l}`),new Xs({method:o,url:f,headers:p,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};function so(l){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},so(l)}function Ny(l,i){if(so(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var f=o.call(l,i);if(so(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function Iy(l){var i=Ny(l,"string");return so(i)=="symbol"?i:i+""}function Dy(l,i,o){return(i=Iy(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function mg(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(l);i&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,f)}return o}function ju(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?mg(Object(o),!0).forEach(function(f){Dy(l,f,o[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):mg(Object(o)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(o,f))})}return l}var My=class p2{constructor(i,{headers:o={},schema:f,fetch:p,timeout:m,urlLengthLimit:b=8e3}={}){this.url=i,this.headers=new Headers(o),this.schemaName=f,this.urlLengthLimit=b;const A=p??globalThis.fetch;m!==void 0&&m>0?this.fetch=(_,E)=>{const R=new AbortController,N=setTimeout(()=>R.abort(),m),L=E?.signal;if(L){if(L.aborted)return clearTimeout(N),A(_,E);const U=()=>{clearTimeout(N),R.abort()};return L.addEventListener("abort",U,{once:!0}),A(_,ju(ju({},E),{},{signal:R.signal})).finally(()=>{clearTimeout(N),L.removeEventListener("abort",U)})}return A(_,ju(ju({},E),{},{signal:R.signal})).finally(()=>clearTimeout(N))}:this.fetch=A}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ry(new URL(`${this.url}/${i}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(i){return new p2(this.url,{headers:this.headers,schema:i,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(i,o={},{head:f=!1,get:p=!1,count:m}={}){var b;let A;const _=new URL(`${this.url}/rpc/${i}`);let E;const R=U=>U!==null&&typeof U=="object"&&(!Array.isArray(U)||U.some(R)),N=f&&Object.values(o).some(R);N?(A="POST",E=o):f||p?(A=f?"HEAD":"GET",Object.entries(o).filter(([U,V])=>V!==void 0).map(([U,V])=>[U,Array.isArray(V)?`{${V.join(",")}}`:`${V}`]).forEach(([U,V])=>{_.searchParams.append(U,V)})):(A="POST",E=o);const L=new Headers(this.headers);return N?L.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&L.set("Prefer",`count=${m}`),new Xs({method:A,url:_,headers:L,schema:this.schemaName,body:E,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch,urlLengthLimit:this.urlLengthLimit})}};class By{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const o=globalThis.process;if(o){const f=o.versions;if(f&&f.node){const p=f.node,m=parseInt(p.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let o=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(o+=`

Suggested solution: ${i.workaround}`),new Error(o)}static createWebSocket(i,o){const f=this.getWebSocketConstructor();return new f(i,o)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const ky="2.96.0",Ly=`realtime-js/${ky}`,Uy="1.0.0",x2="2.0.0",pg=x2,Af=1e4,jy=1e3,Py=100;var va;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(va||(va={}));var Cn;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Cn||(Cn={}));var Yr;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Yr||(Yr={}));var _f;(function(l){l.websocket="websocket"})(_f||(_f={}));var Ja;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Ja||(Ja={}));class Fy{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,o){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return o(this._binaryEncodeUserBroadcastPush(i));let f=[i.join_ref,i.ref,i.topic,i.event,i.payload];return o(JSON.stringify(f))}_binaryEncodeUserBroadcastPush(i){var o;return this._isArrayBuffer((o=i.payload)===null||o===void 0?void 0:o.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var o,f;const p=(f=(o=i.payload)===null||o===void 0?void 0:o.payload)!==null&&f!==void 0?f:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(i){var o,f;const p=(f=(o=i.payload)===null||o===void 0?void 0:o.payload)!==null&&f!==void 0?f:{},b=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,b)}_encodeUserBroadcastPush(i,o,f){var p,m;const b=i.topic,A=(p=i.ref)!==null&&p!==void 0?p:"",_=(m=i.join_ref)!==null&&m!==void 0?m:"",E=i.payload.event,R=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},N=Object.keys(R).length===0?"":JSON.stringify(R);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`ref length ${A.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`topic length ${b.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`userEvent length ${E.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const L=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+A.length+b.length+E.length+N.length,U=new ArrayBuffer(this.HEADER_LENGTH+L);let V=new DataView(U),G=0;V.setUint8(G++,this.KINDS.userBroadcastPush),V.setUint8(G++,_.length),V.setUint8(G++,A.length),V.setUint8(G++,b.length),V.setUint8(G++,E.length),V.setUint8(G++,N.length),V.setUint8(G++,o),Array.from(_,le=>V.setUint8(G++,le.charCodeAt(0))),Array.from(A,le=>V.setUint8(G++,le.charCodeAt(0))),Array.from(b,le=>V.setUint8(G++,le.charCodeAt(0))),Array.from(E,le=>V.setUint8(G++,le.charCodeAt(0))),Array.from(N,le=>V.setUint8(G++,le.charCodeAt(0)));var te=new Uint8Array(U.byteLength+f.byteLength);return te.set(new Uint8Array(U),0),te.set(new Uint8Array(f),U.byteLength),te.buffer}decode(i,o){if(this._isArrayBuffer(i)){let f=this._binaryDecode(i);return o(f)}if(typeof i=="string"){const f=JSON.parse(i),[p,m,b,A,_]=f;return o({join_ref:p,ref:m,topic:b,event:A,payload:_})}return o({})}_binaryDecode(i){const o=new DataView(i),f=o.getUint8(0),p=new TextDecoder;if(f===this.KINDS.userBroadcast)return this._decodeUserBroadcast(i,o,p)}_decodeUserBroadcast(i,o,f){const p=o.getUint8(1),m=o.getUint8(2),b=o.getUint8(3),A=o.getUint8(4);let _=this.HEADER_LENGTH+4;const E=f.decode(i.slice(_,_+p));_=_+p;const R=f.decode(i.slice(_,_+m));_=_+m;const N=f.decode(i.slice(_,_+b));_=_+b;const L=i.slice(_,i.byteLength),U=A===this.JSON_ENCODING?JSON.parse(f.decode(L)):L,V={type:this.BROADCAST_EVENT,event:R,payload:U};return b>0&&(V.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:E,event:this.BROADCAST_EVENT,payload:V}}_isArrayBuffer(i){var o;return i instanceof ArrayBuffer||((o=i?.constructor)===null||o===void 0?void 0:o.name)==="ArrayBuffer"}_pick(i,o){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([f])=>o.includes(f)))}}class y2{constructor(i,o){this.callback=i,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zt;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(zt||(zt={}));const xg=(l,i,o={})=>{var f;const p=(f=o.skipTypes)!==null&&f!==void 0?f:[];return i?Object.keys(i).reduce((m,b)=>(m[b]=zy(b,l,i,p),m),{}):{}},zy=(l,i,o,f)=>{const p=i.find(A=>A.name===l),m=p?.type,b=o[l];return m&&!f.includes(m)?w2(m,b):Sf(b)},w2=(l,i)=>{if(l.charAt(0)==="_"){const o=l.slice(1,l.length);return qy(i,o)}switch(l){case zt.bool:return Hy(i);case zt.float4:case zt.float8:case zt.int2:case zt.int4:case zt.int8:case zt.numeric:case zt.oid:return Gy(i);case zt.json:case zt.jsonb:return Vy(i);case zt.timestamp:return Xy(i);case zt.abstime:case zt.date:case zt.daterange:case zt.int4range:case zt.int8range:case zt.money:case zt.reltime:case zt.text:case zt.time:case zt.timestamptz:case zt.timetz:case zt.tsrange:case zt.tstzrange:return Sf(i);default:return Sf(i)}},Sf=l=>l,Hy=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Gy=l=>{if(typeof l=="string"){const i=parseFloat(l);if(!Number.isNaN(i))return i}return l},Vy=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l}return l},qy=(l,i)=>{if(typeof l!="string")return l;const o=l.length-1,f=l[o];if(l[0]==="{"&&f==="}"){let m;const b=l.slice(1,o);try{m=JSON.parse("["+b+"]")}catch{m=b?b.split(","):[]}return m.map(A=>w2(i,A))}return l},Xy=l=>typeof l=="string"?l.replace(" ","T"):l,b2=l=>{const i=new URL(l);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class ff{constructor(i,o,f={},p=Af){this.channel=i,this.event=o,this.payload=f,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,o){var f;return this._hasReceived(i)&&o((f=this.receivedResp)===null||f===void 0?void 0:f.response),this.recHooks.push({status:i,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:o}){this.recHooks.filter(f=>f.status===i).forEach(f=>f.callback(o))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var yg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(yg||(yg={}));class ro{constructor(i,o){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const f=o?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(f.state,{},p=>{const{onJoin:m,onLeave:b,onSync:A}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ro.syncState(this.state,p,m,b),this.pendingDiffs.forEach(_=>{this.state=ro.syncDiff(this.state,_,m,b)}),this.pendingDiffs=[],A()}),this.channel._on(f.diff,{},p=>{const{onJoin:m,onLeave:b,onSync:A}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=ro.syncDiff(this.state,p,m,b),A())}),this.onJoin((p,m,b)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:m,newPresences:b})}),this.onLeave((p,m,b)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:m,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,o,f,p){const m=this.cloneDeep(i),b=this.transformState(o),A={},_={};return this.map(m,(E,R)=>{b[E]||(_[E]=R)}),this.map(b,(E,R)=>{const N=m[E];if(N){const L=R.map(te=>te.presence_ref),U=N.map(te=>te.presence_ref),V=R.filter(te=>U.indexOf(te.presence_ref)<0),G=N.filter(te=>L.indexOf(te.presence_ref)<0);V.length>0&&(A[E]=V),G.length>0&&(_[E]=G)}else A[E]=R}),this.syncDiff(m,{joins:A,leaves:_},f,p)}static syncDiff(i,o,f,p){const{joins:m,leaves:b}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return f||(f=()=>{}),p||(p=()=>{}),this.map(m,(A,_)=>{var E;const R=(E=i[A])!==null&&E!==void 0?E:[];if(i[A]=this.cloneDeep(_),R.length>0){const N=i[A].map(U=>U.presence_ref),L=R.filter(U=>N.indexOf(U.presence_ref)<0);i[A].unshift(...L)}f(A,R,_)}),this.map(b,(A,_)=>{let E=i[A];if(!E)return;const R=_.map(N=>N.presence_ref);E=E.filter(N=>R.indexOf(N.presence_ref)<0),i[A]=E,p(A,E,_),E.length===0&&delete i[A]}),i}static map(i,o){return Object.getOwnPropertyNames(i).map(f=>o(f,i[f]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((o,f)=>{const p=i[f];return"metas"in p?o[f]=p.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):o[f]=p,o},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(wg||(wg={}));var io;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(io||(io={}));var Mi;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Mi||(Mi={}));class Zs{constructor(i,o={config:{}},f){var p,m;if(this.topic=i,this.params=o,this.socket=f,this.bindings={},this.state=Cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new ff(this,Yr.join,this.params,this.timeout),this.rejoinTimer=new y2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(b=>b.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cn.closed,this.socket._remove(this)}),this._onError(b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yr.reply,{},(b,A)=>{this._trigger(this._replyEventName(A),b)}),this.presence=new ro(this),this.broadcastEndpointURL=b2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,o=this.timeout){var f,p,m;if(this.socket.isConnected()||this.socket.connect(),this.state==Cn.closed){const{config:{broadcast:b,presence:A,private:_}}=this.params,E=(p=(f=this.bindings.postgres_changes)===null||f===void 0?void 0:f.map(U=>U.filter))!==null&&p!==void 0?p:[],R=!!this.bindings[io.PRESENCE]&&this.bindings[io.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,N={},L={broadcast:b,presence:Object.assign(Object.assign({},A),{enabled:R}),postgres_changes:E,private:_};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(U=>i?.(Mi.CHANNEL_ERROR,U)),this._onClose(()=>i?.(Mi.CLOSED)),this.updateJoinPayload(Object.assign({config:L},N)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:U})=>{var V;if(this.socket._isManualToken()||this.socket.setAuth(),U===void 0){i?.(Mi.SUBSCRIBED);return}else{const G=this.bindings.postgres_changes,te=(V=G?.length)!==null&&V!==void 0?V:0,le=[];for(let $=0;$<te;$++){const Y=G[$],{filter:{event:pe,schema:Be,table:Ee,filter:ee}}=Y,Re=U&&U[$];if(Re&&Re.event===pe&&Zs.isFilterValueEqual(Re.schema,Be)&&Zs.isFilterValueEqual(Re.table,Ee)&&Zs.isFilterValueEqual(Re.filter,ee))le.push(Object.assign(Object.assign({},Y),{id:Re.id}));else{this.unsubscribe(),this.state=Cn.errored,i?.(Mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=le,i&&i(Mi.SUBSCRIBED);return}}).receive("error",U=>{this.state=Cn.errored,i?.(Mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(U).join(", ")||"error")))}).receive("timeout",()=>{i?.(Mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,o={}){return await this.send({type:"presence",event:"track",payload:i},o.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,o,f){return this.state===Cn.joined&&i===io.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(i,o,f)}async httpSend(i,o,f={}){var p;if(o==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const b={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})},A=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(p=f.timeout)!==null&&p!==void 0?p:this.timeout);if(A.status===202)return{success:!0};let _=A.statusText;try{const E=await A.json();_=E.error||E.message||_}catch{}return Promise.reject(new Error(_))}async send(i,o={}){var f,p;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:b}=i,A={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(A.Authorization=`Bearer ${this.socket.accessTokenValue}`);const _={method:"POST",headers:A,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:b,private:this.private}]})};try{const E=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(f=o.timeout)!==null&&f!==void 0?f:this.timeout);return await((p=E.body)===null||p===void 0?void 0:p.cancel()),E.ok?"ok":"error"}catch(E){return E.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var b,A,_;const E=this._push(i.type,i,o.timeout||this.timeout);i.type==="broadcast"&&!(!((_=(A=(b=this.params)===null||b===void 0?void 0:b.config)===null||A===void 0?void 0:A.broadcast)===null||_===void 0)&&_.ack)&&m("ok"),E.receive("ok",()=>m("ok")),E.receive("error",()=>m("error")),E.receive("timeout",()=>m("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Cn.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yr.close,"leave",this._joinRef())};this.joinPush.destroy();let f=null;return new Promise(p=>{f=new ff(this,Yr.leave,{},i),f.receive("ok",()=>{o(),p("ok")}).receive("timeout",()=>{o(),p("timed out")}).receive("error",()=>{p("error")}),f.send(),this._canPush()||f.trigger("ok",{})}).finally(()=>{f?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Cn.closed,this.bindings={}}async _fetchWithTimeout(i,o,f){const p=new AbortController,m=setTimeout(()=>p.abort(),f),b=await this.socket.fetch(i,Object.assign(Object.assign({},o),{signal:p.signal}));return clearTimeout(m),b}_push(i,o,f=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new ff(this,i,o,f);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>Py){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(i,o,f){return o}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,o,f){var p,m;const b=i.toLocaleLowerCase(),{close:A,error:_,leave:E,join:R}=Yr;if(f&&[A,_,E,R].indexOf(b)>=0&&f!==this._joinRef())return;let L=this._onMessage(b,o,f);if(o&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(U=>{var V,G,te;return((V=U.filter)===null||V===void 0?void 0:V.event)==="*"||((te=(G=U.filter)===null||G===void 0?void 0:G.event)===null||te===void 0?void 0:te.toLocaleLowerCase())===b}).map(U=>U.callback(L,f)):(m=this.bindings[b])===null||m===void 0||m.filter(U=>{var V,G,te,le,$,Y;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in U){const pe=U.id,Be=(V=U.filter)===null||V===void 0?void 0:V.event;return pe&&((G=o.ids)===null||G===void 0?void 0:G.includes(pe))&&(Be==="*"||Be?.toLocaleLowerCase()===((te=o.data)===null||te===void 0?void 0:te.type.toLocaleLowerCase()))}else{const pe=($=(le=U?.filter)===null||le===void 0?void 0:le.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return pe==="*"||pe===((Y=o?.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return U.type.toLocaleLowerCase()===b}).map(U=>{if(typeof L=="object"&&"ids"in L){const V=L.data,{schema:G,table:te,commit_timestamp:le,type:$,errors:Y}=V;L=Object.assign(Object.assign({},{schema:G,table:te,commit_timestamp:le,eventType:$,new:{},old:{},errors:Y}),this._getPayloadRecords(V))}U.callback(L,f)})}_isClosed(){return this.state===Cn.closed}_isJoined(){return this.state===Cn.joined}_isJoining(){return this.state===Cn.joining}_isLeaving(){return this.state===Cn.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,o,f){const p=i.toLocaleLowerCase(),m={type:p,filter:o,callback:f};return this.bindings[p]?this.bindings[p].push(m):this.bindings[p]=[m],this}_off(i,o){const f=i.toLocaleLowerCase();return this.bindings[f]&&(this.bindings[f]=this.bindings[f].filter(p=>{var m;return!(((m=p.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===f&&Zs.isEqual(p.filter,o))})),this}static isEqual(i,o){if(Object.keys(i).length!==Object.keys(o).length)return!1;for(const f in i)if(i[f]!==o[f])return!1;return!0}static isFilterValueEqual(i,o){return(i??void 0)===(o??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Yr.close,{},i)}_onError(i){this._on(Yr.error,{},o=>i(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cn.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const o={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(o.new=xg(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(o.old=xg(i.columns,i.old_record)),o}}const df=()=>{},Pu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yy=[1e3,2e3,5e3,1e4],Wy=1e4,Ky=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zy{constructor(i,o){var f;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Af,this.transport=null,this.heartbeatIntervalMs=Pu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=df,this.ref=0,this.reconnectTimer=null,this.vsn=pg,this.logger=df,this.conn=null,this.sendBuffer=[],this.serializer=new Fy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...m)=>p(...m):(...m)=>fetch(...m),!(!((f=o?.params)===null||f===void 0)&&f.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${i}/${_f.websocket}`,this.httpEndpoint=b2(i),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=By.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const o=i.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const f=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(f),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,o??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const o=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const i=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,o,f){this.logger(i,o,f)}connectionState(){switch(this.conn&&this.conn.readyState){case va.connecting:return Ja.Connecting;case va.open:return Ja.Open;case va.closing:return Ja.Closing;default:return Ja.Closed}}isConnected(){return this.connectionState()===Ja.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,o={config:{}}){const f=`realtime:${i}`,p=this.getChannels().find(m=>m.topic===f);if(p)return p;{const m=new Zs(`realtime:${i}`,o,this);return this.channels.push(m),m}}push(i){const{topic:o,event:f,payload:p,ref:m}=i,b=()=>{this.encode(i,A=>{var _;(_=this.conn)===null||_===void 0||_.send(A)})};this.log("push",`${o} ${f} (${m})`,p),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(jy,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},Pu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let o=this.channels.find(f=>f.topic===i&&(f._isJoined()||f._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${i}"`),o.unsubscribe())}_remove(i){this.channels=this.channels.filter(o=>o.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply"&&o.ref&&o.ref===this.pendingHeartbeatRef){const E=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error",E)}catch(R){this.log("error","error in heartbeat callback",R)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:f,event:p,payload:m,ref:b}=o,A=b?`(${b})`:"",_=m.status||"";this.log("receive",`${_} ${f} ${p} ${A}`.trim(),m),this.channels.filter(E=>E._isMember(f)).forEach(E=>E._trigger(p,m,b)),this._triggerStateCallbacks("message",o)})}_clearTimer(i){var o;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i),this.conn.readyState===va.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===va.open||this.conn.readyState===va.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(o=>{this.log("error","error waiting for auth on connect",o),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this._terminateWorker()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(i){var o;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i);try{this.heartbeatCallback("error")}catch(o){this.log("error","error in heartbeat callback",o)}}_triggerChanError(){this.channels.forEach(i=>i._trigger(Yr.error))}_appendParams(i,o){if(Object.keys(o).length===0)return i;const f=i.match(/\?/)?"&":"?",p=new URLSearchParams(o);return`${i}${f}${p}`}_workerObjectUrl(i){let o;if(i)o=i;else{const f=new Blob([Ky],{type:"application/javascript"});o=URL.createObjectURL(f)}return o}_setConnectionState(i,o=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(i=null){let o,f=!1;if(i)o=i,f=!0;else if(this.accessToken)try{o=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),o=this.accessTokenValue}else o=this.accessTokenValue;f?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(p=>{const m={access_token:o,version:Ly};o&&p.updateJoinPayload(m),p.joinedOnce&&p._isJoined()&&p._push(Yr.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this._isManualToken()||this.setAuth().catch(o=>{this.log("error",`Error setting auth in ${i}`,o)})}_triggerStateCallbacks(i,o){try{this.stateChangeCallbacks[i].forEach(f=>{try{f(o)}catch(p){this.log("error",`error in ${i} callback`,p)}})}catch(f){this.log("error",`error triggering ${i} callbacks`,f)}}_setupReconnectionTimer(){this.reconnectTimer=new y2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var o,f,p,m,b,A,_,E,R,N,L,U;switch(this.transport=(o=i?.transport)!==null&&o!==void 0?o:null,this.timeout=(f=i?.timeout)!==null&&f!==void 0?f:Af,this.heartbeatIntervalMs=(p=i?.heartbeatIntervalMs)!==null&&p!==void 0?p:Pu.HEARTBEAT_INTERVAL,this.worker=(m=i?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(b=i?.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=(A=i?.heartbeatCallback)!==null&&A!==void 0?A:df,this.vsn=(_=i?.vsn)!==null&&_!==void 0?_:pg,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(E=i?.reconnectAfterMs)!==null&&E!==void 0?E:(V=>Yy[V-1]||Wy),this.vsn){case Uy:this.encode=(R=i?.encode)!==null&&R!==void 0?R:((V,G)=>G(JSON.stringify(V))),this.decode=(N=i?.decode)!==null&&N!==void 0?N:((V,G)=>G(JSON.parse(V)));break;case x2:this.encode=(L=i?.encode)!==null&&L!==void 0?L:this.serializer.encode.bind(this.serializer),this.decode=(U=i?.decode)!==null&&U!==void 0?U:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}var lo=class extends Error{constructor(l,i){super(l),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&i.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Qy(l,i,o){const f=new URL(i,l);if(o)for(const[p,m]of Object.entries(o))m!==void 0&&f.searchParams.set(p,m);return f.toString()}async function Jy(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function $y(l){const i=l.fetchImpl??globalThis.fetch;return{async request({method:o,path:f,query:p,body:m,headers:b}){const A=Qy(l.baseUrl,f,p),_=await Jy(l.auth),E=await i(A,{method:o,headers:{...m?{"Content-Type":"application/json"}:{},..._,...b},body:m?JSON.stringify(m):void 0}),R=await E.text(),N=(E.headers.get("content-type")||"").includes("application/json"),L=N&&R?JSON.parse(R):R;if(!E.ok){const U=N?L:void 0,V=U?.error;throw new lo(V?.message??`Request failed with status ${E.status}`,{status:E.status,icebergType:V?.type,icebergCode:V?.code,details:U})}return{status:E.status,headers:E.headers,data:L}}}}function Fu(l){return l.join("")}var ew=class{constructor(l,i=""){this.client=l,this.prefix=i}async listNamespaces(l){const i=l?{parent:Fu(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(f=>({namespace:f}))}async createNamespace(l,i){const o={namespace:l.namespace,properties:i?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:o})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fu(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fu(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fu(l.namespace)}`}),!0}catch(i){if(i instanceof lo&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(l,i){try{return await this.createNamespace(l,i)}catch(o){if(o instanceof lo&&o.status===409)return;throw o}}};function Fs(l){return l.join("")}var tw=class{constructor(l,i="",o){this.client=l,this.prefix=i,this.accessDelegation=o}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables`})).data.identifiers}async createTable(l,i){const o={};return this.accessDelegation&&(o["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables`,body:i,headers:o})).data.metadata}async updateTable(l,i){const o=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables/${l.name}`,body:i});return{"metadata-location":o.data["metadata-location"],metadata:o.data.metadata}}async dropTable(l,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String(i?.purge??!1)}})}async loadTable(l){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables/${l.name}`,headers:i})).data.metadata}async tableExists(l){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(l.namespace)}/tables/${l.name}`,headers:i}),!0}catch(o){if(o instanceof lo&&o.status===404)return!1;throw o}}async createTableIfNotExists(l,i){try{return await this.createTable(l,i)}catch(o){if(o instanceof lo&&o.status===409)return await this.loadTable({namespace:l.namespace,name:i.name});throw o}}},nw=class{constructor(l){let i="v1";l.catalogName&&(i+=`/${l.catalogName}`);const o=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=$y({baseUrl:o,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=l.accessDelegation?.join(","),this.namespaceOps=new ew(this.client,i),this.tableOps=new tw(this.client,i,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,i){return this.namespaceOps.createNamespace(l,i)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,i){return this.tableOps.createTable(l,i)}async updateTable(l,i){return this.tableOps.updateTable(l,i)}async dropTable(l,i){await this.tableOps.dropTable(l,i)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,i){return this.namespaceOps.createNamespaceIfNotExists(l,i)}async createTableIfNotExists(l,i){return this.tableOps.createTableIfNotExists(l,i)}},rc=class extends Error{constructor(l,i="storage",o,f){super(l),this.__isStorageError=!0,this.namespace=i,this.name=i==="vectors"?"StorageVectorsError":"StorageError",this.status=o,this.statusCode=f}};function ic(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}var zu=class extends rc{constructor(l,i,o,f="storage"){super(l,f,i,o),this.name=f==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},v2=class extends rc{constructor(l,i,o="storage"){super(l,o),this.name=o==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=i}};const rw=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),iw=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Cf=l=>{if(Array.isArray(l))return l.map(o=>Cf(o));if(typeof l=="function"||l!==Object(l))return l;const i={};return Object.entries(l).forEach(([o,f])=>{const p=o.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));i[p]=Cf(f)}),i},aw=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l);function oo(l){"@babel/helpers - typeof";return oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},oo(l)}function sw(l,i){if(oo(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var f=o.call(l,i);if(oo(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function lw(l){var i=sw(l,"string");return oo(i)=="symbol"?i:i+""}function ow(l,i,o){return(i=lw(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function bg(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(l);i&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,f)}return o}function ze(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?bg(Object(o),!0).forEach(function(f){ow(l,f,o[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):bg(Object(o)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(o,f))})}return l}const vg=l=>{var i;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(i=l.error)===null||i===void 0?void 0:i.message)||JSON.stringify(l)},uw=async(l,i,o,f)=>{if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!o?.noResolveJson){const p=l,m=p.status||500;if(typeof p.json=="function")p.json().then(b=>{const A=b?.statusCode||b?.code||m+"";i(new zu(vg(b),m,A,f))}).catch(()=>{if(f==="vectors"){const b=m+"";i(new zu(p.statusText||`HTTP ${m} error`,m,b,f))}else{const b=m+"";i(new zu(p.statusText||`HTTP ${m} error`,m,b,f))}});else{const b=m+"";i(new zu(p.statusText||`HTTP ${m} error`,m,b,f))}}else i(new v2(vg(l),l,f))},cw=(l,i,o,f)=>{const p={method:l,headers:i?.headers||{}};return l==="GET"||l==="HEAD"||!f?ze(ze({},p),o):(iw(f)?(p.headers=ze({"Content-Type":"application/json"},i?.headers),p.body=JSON.stringify(f)):p.body=f,i?.duplex&&(p.duplex=i.duplex),ze(ze({},p),o))};async function $l(l,i,o,f,p,m,b){return new Promise((A,_)=>{l(o,cw(i,f,p,m)).then(E=>{if(!E.ok)throw E;if(f?.noResolveJson)return E;if(b==="vectors"){const R=E.headers.get("content-type");if(E.headers.get("content-length")==="0"||E.status===204)return{};if(!R||!R.includes("application/json"))return{}}return E.json()}).then(E=>A(E)).catch(E=>uw(E,_,f,b))})}function E2(l="storage"){return{get:async(i,o,f,p)=>$l(i,"GET",o,f,p,void 0,l),post:async(i,o,f,p,m)=>$l(i,"POST",o,p,m,f,l),put:async(i,o,f,p,m)=>$l(i,"PUT",o,p,m,f,l),head:async(i,o,f,p)=>$l(i,"HEAD",o,ze(ze({},f),{},{noResolveJson:!0}),p,void 0,l),remove:async(i,o,f,p,m)=>$l(i,"DELETE",o,p,m,f,l)}}const hw=E2("storage"),{get:uo,post:Xr,put:Tf,head:fw,remove:Gf}=hw,br=E2("vectors");var nl=class{constructor(l,i={},o,f="storage"){this.shouldThrowOnError=!1,this.url=l,this.headers=i,this.fetch=rw(o),this.namespace=f}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,i){return this.headers=ze(ze({},this.headers),{},{[l]:i}),this}async handleOperation(l){var i=this;try{return{data:await l(),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(ic(o))return{data:null,error:o};throw o}}},dw=class{constructor(l,i){this.downloadFn=l,this.shouldThrowOnError=i}then(l,i){return this.execute().then(l,i)}async execute(){var l=this;try{return{data:(await l.downloadFn()).body,error:null}}catch(i){if(l.shouldThrowOnError)throw i;if(ic(i))return{data:null,error:i};throw i}}};let A2;A2=Symbol.toStringTag;var gw=class{constructor(l,i){this.downloadFn=l,this.shouldThrowOnError=i,this[A2]="BlobDownloadBuilder",this.promise=null}asStream(){return new dw(this.downloadFn,this.shouldThrowOnError)}then(l,i){return this.getPromise().then(l,i)}catch(l){return this.getPromise().catch(l)}finally(l){return this.getPromise().finally(l)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var l=this;try{return{data:await(await l.downloadFn()).blob(),error:null}}catch(i){if(l.shouldThrowOnError)throw i;if(ic(i))return{data:null,error:i};throw i}}};const mw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Eg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pw=class extends nl{constructor(l,i={},o,f){super(l,i,f,"storage"),this.bucketId=o}async uploadOrUpdate(l,i,o,f){var p=this;return p.handleOperation(async()=>{let m;const b=ze(ze({},Eg),f);let A=ze(ze({},p.headers),l==="POST"&&{"x-upsert":String(b.upsert)});const _=b.metadata;typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",b.cacheControl),_&&m.append("metadata",p.encodeMetadata(_)),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.has("cacheControl")||m.append("cacheControl",b.cacheControl),_&&!m.has("metadata")&&m.append("metadata",p.encodeMetadata(_))):(m=o,A["cache-control"]=`max-age=${b.cacheControl}`,A["content-type"]=b.contentType,_&&(A["x-metadata"]=p.toBase64(p.encodeMetadata(_))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!b.duplex&&(b.duplex="half")),f?.headers&&(A=ze(ze({},A),f.headers));const E=p._removeEmptyFolders(i),R=p._getFinalPath(E),N=await(l=="PUT"?Tf:Xr)(p.fetch,`${p.url}/object/${R}`,m,ze({headers:A},b?.duplex?{duplex:b.duplex}:{}));return{path:E,id:N.Id,fullPath:N.Key}})}async upload(l,i,o){return this.uploadOrUpdate("POST",l,i,o)}async uploadToSignedUrl(l,i,o,f){var p=this;const m=p._removeEmptyFolders(l),b=p._getFinalPath(m),A=new URL(p.url+`/object/upload/sign/${b}`);return A.searchParams.set("token",i),p.handleOperation(async()=>{let _;const E=ze({upsert:Eg.upsert},f),R=ze(ze({},p.headers),{"x-upsert":String(E.upsert)});return typeof Blob<"u"&&o instanceof Blob?(_=new FormData,_.append("cacheControl",E.cacheControl),_.append("",o)):typeof FormData<"u"&&o instanceof FormData?(_=o,_.append("cacheControl",E.cacheControl)):(_=o,R["cache-control"]=`max-age=${E.cacheControl}`,R["content-type"]=E.contentType),{path:m,fullPath:(await Tf(p.fetch,A.toString(),_,{headers:R})).Key}})}async createSignedUploadUrl(l,i){var o=this;return o.handleOperation(async()=>{let f=o._getFinalPath(l);const p=ze({},o.headers);i?.upsert&&(p["x-upsert"]="true");const m=await Xr(o.fetch,`${o.url}/object/upload/sign/${f}`,{},{headers:p}),b=new URL(o.url+m.url),A=b.searchParams.get("token");if(!A)throw new rc("No token returned by API");return{signedUrl:b.toString(),path:l,token:A}})}async update(l,i,o){return this.uploadOrUpdate("PUT",l,i,o)}async move(l,i,o){var f=this;return f.handleOperation(async()=>await Xr(f.fetch,`${f.url}/object/move`,{bucketId:f.bucketId,sourceKey:l,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:f.headers}))}async copy(l,i,o){var f=this;return f.handleOperation(async()=>({path:(await Xr(f.fetch,`${f.url}/object/copy`,{bucketId:f.bucketId,sourceKey:l,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:f.headers})).Key}))}async createSignedUrl(l,i,o){var f=this;return f.handleOperation(async()=>{let p=f._getFinalPath(l),m=await Xr(f.fetch,`${f.url}/object/sign/${p}`,ze({expiresIn:i},o?.transform?{transform:o.transform}:{}),{headers:f.headers});const b=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{signedUrl:encodeURI(`${f.url}${m.signedURL}${b}`)}})}async createSignedUrls(l,i,o){var f=this;return f.handleOperation(async()=>{const p=await Xr(f.fetch,`${f.url}/object/sign/${f.bucketId}`,{expiresIn:i,paths:l},{headers:f.headers}),m=o?.download?`&download=${o.download===!0?"":o.download}`:"";return p.map(b=>ze(ze({},b),{},{signedUrl:b.signedURL?encodeURI(`${f.url}${b.signedURL}${m}`):null}))})}download(l,i,o){const f=typeof i?.transform<"u"?"render/image/authenticated":"object",p=this.transformOptsToQueryString(i?.transform||{}),m=p?`?${p}`:"",b=this._getFinalPath(l),A=()=>uo(this.fetch,`${this.url}/${f}/${b}${m}`,{headers:this.headers,noResolveJson:!0},o);return new gw(A,this.shouldThrowOnError)}async info(l){var i=this;const o=i._getFinalPath(l);return i.handleOperation(async()=>Cf(await uo(i.fetch,`${i.url}/object/info/${o}`,{headers:i.headers})))}async exists(l){var i=this;const o=i._getFinalPath(l);try{return await fw(i.fetch,`${i.url}/object/${o}`,{headers:i.headers}),{data:!0,error:null}}catch(f){if(i.shouldThrowOnError)throw f;if(ic(f)&&f instanceof v2){const p=f.originalError;if([400,404].includes(p?.status))return{data:!1,error:f}}throw f}}getPublicUrl(l,i){const o=this._getFinalPath(l),f=[],p=i?.download?`download=${i.download===!0?"":i.download}`:"";p!==""&&f.push(p);const m=typeof i?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(i?.transform||{});b!==""&&f.push(b);let A=f.join("&");return A!==""&&(A=`?${A}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${A}`)}}}async remove(l){var i=this;return i.handleOperation(async()=>await Gf(i.fetch,`${i.url}/object/${i.bucketId}`,{prefixes:l},{headers:i.headers}))}async list(l,i,o){var f=this;return f.handleOperation(async()=>{const p=ze(ze(ze({},mw),i),{},{prefix:l||""});return await Xr(f.fetch,`${f.url}/object/list/${f.bucketId}`,p,{headers:f.headers},o)})}async listV2(l,i){var o=this;return o.handleOperation(async()=>{const f=ze({},l);return await Xr(o.fetch,`${o.url}/object/list-v2/${o.bucketId}`,f,{headers:o.headers},i)})}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const i=[];return l.width&&i.push(`width=${l.width}`),l.height&&i.push(`height=${l.height}`),l.resize&&i.push(`resize=${l.resize}`),l.format&&i.push(`format=${l.format}`),l.quality&&i.push(`quality=${l.quality}`),i.join("&")}};const xw="2.96.0",xo={"X-Client-Info":`storage-js/${xw}`};var yw=class extends nl{constructor(l,i={},o,f){const p=new URL(l);f?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const m=p.href.replace(/\/$/,""),b=ze(ze({},xo),i);super(m,b,o,"storage")}async listBuckets(l){var i=this;return i.handleOperation(async()=>{const o=i.listBucketOptionsToQueryString(l);return await uo(i.fetch,`${i.url}/bucket${o}`,{headers:i.headers})})}async getBucket(l){var i=this;return i.handleOperation(async()=>await uo(i.fetch,`${i.url}/bucket/${l}`,{headers:i.headers}))}async createBucket(l,i={public:!1}){var o=this;return o.handleOperation(async()=>await Xr(o.fetch,`${o.url}/bucket`,{id:l,name:l,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:o.headers}))}async updateBucket(l,i){var o=this;return o.handleOperation(async()=>await Tf(o.fetch,`${o.url}/bucket/${l}`,{id:l,name:l,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:o.headers}))}async emptyBucket(l){var i=this;return i.handleOperation(async()=>await Xr(i.fetch,`${i.url}/bucket/${l}/empty`,{},{headers:i.headers}))}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await Gf(i.fetch,`${i.url}/bucket/${l}`,{},{headers:i.headers}))}listBucketOptionsToQueryString(l){const i={};return l&&("limit"in l&&(i.limit=String(l.limit)),"offset"in l&&(i.offset=String(l.offset)),l.search&&(i.search=l.search),l.sortColumn&&(i.sortColumn=l.sortColumn),l.sortOrder&&(i.sortOrder=l.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}},ww=class extends nl{constructor(l,i={},o){const f=l.replace(/\/$/,""),p=ze(ze({},xo),i);super(f,p,o,"storage")}async createBucket(l){var i=this;return i.handleOperation(async()=>await Xr(i.fetch,`${i.url}/bucket`,{name:l},{headers:i.headers}))}async listBuckets(l){var i=this;return i.handleOperation(async()=>{const o=new URLSearchParams;l?.limit!==void 0&&o.set("limit",l.limit.toString()),l?.offset!==void 0&&o.set("offset",l.offset.toString()),l?.sortColumn&&o.set("sortColumn",l.sortColumn),l?.sortOrder&&o.set("sortOrder",l.sortOrder),l?.search&&o.set("search",l.search);const f=o.toString(),p=f?`${i.url}/bucket?${f}`:`${i.url}/bucket`;return await uo(i.fetch,p,{headers:i.headers})})}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await Gf(i.fetch,`${i.url}/bucket/${l}`,{},{headers:i.headers}))}from(l){var i=this;if(!aw(l))throw new rc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const o=new nw({baseUrl:this.url,catalogName:l,auth:{type:"custom",getHeaders:async()=>i.headers},fetch:this.fetch}),f=this.shouldThrowOnError;return new Proxy(o,{get(p,m){const b=p[m];return typeof b!="function"?b:async(...A)=>{try{return{data:await b.apply(p,A),error:null}}catch(_){if(f)throw _;return{data:null,error:_}}}}})}},bw=class extends nl{constructor(l,i={},o){const f=l.replace(/\/$/,""),p=ze(ze({},xo),{},{"Content-Type":"application/json"},i);super(f,p,o,"vectors")}async createIndex(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/CreateIndex`,l,{headers:i.headers})||{})}async getIndex(l,i){var o=this;return o.handleOperation(async()=>await br.post(o.fetch,`${o.url}/GetIndex`,{vectorBucketName:l,indexName:i},{headers:o.headers}))}async listIndexes(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/ListIndexes`,l,{headers:i.headers}))}async deleteIndex(l,i){var o=this;return o.handleOperation(async()=>await br.post(o.fetch,`${o.url}/DeleteIndex`,{vectorBucketName:l,indexName:i},{headers:o.headers})||{})}},vw=class extends nl{constructor(l,i={},o){const f=l.replace(/\/$/,""),p=ze(ze({},xo),{},{"Content-Type":"application/json"},i);super(f,p,o,"vectors")}async putVectors(l){var i=this;if(l.vectors.length<1||l.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/PutVectors`,l,{headers:i.headers})||{})}async getVectors(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/GetVectors`,l,{headers:i.headers}))}async listVectors(l){var i=this;if(l.segmentCount!==void 0){if(l.segmentCount<1||l.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(l.segmentIndex!==void 0&&(l.segmentIndex<0||l.segmentIndex>=l.segmentCount))throw new Error(`segmentIndex must be between 0 and ${l.segmentCount-1}`)}return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/ListVectors`,l,{headers:i.headers}))}async queryVectors(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/QueryVectors`,l,{headers:i.headers}))}async deleteVectors(l){var i=this;if(l.keys.length<1||l.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/DeleteVectors`,l,{headers:i.headers})||{})}},Ew=class extends nl{constructor(l,i={},o){const f=l.replace(/\/$/,""),p=ze(ze({},xo),{},{"Content-Type":"application/json"},i);super(f,p,o,"vectors")}async createBucket(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/CreateVectorBucket`,{vectorBucketName:l},{headers:i.headers})||{})}async getBucket(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/GetVectorBucket`,{vectorBucketName:l},{headers:i.headers}))}async listBuckets(l={}){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/ListVectorBuckets`,l,{headers:i.headers}))}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await br.post(i.fetch,`${i.url}/DeleteVectorBucket`,{vectorBucketName:l},{headers:i.headers})||{})}},Aw=class extends Ew{constructor(l,i={}){super(l,i.headers||{},i.fetch)}from(l){return new _w(this.url,this.headers,l,this.fetch)}async createBucket(l){var i=()=>super.createBucket,o=this;return i().call(o,l)}async getBucket(l){var i=()=>super.getBucket,o=this;return i().call(o,l)}async listBuckets(l={}){var i=()=>super.listBuckets,o=this;return i().call(o,l)}async deleteBucket(l){var i=()=>super.deleteBucket,o=this;return i().call(o,l)}},_w=class extends bw{constructor(l,i,o,f){super(l,i,f),this.vectorBucketName=o}async createIndex(l){var i=()=>super.createIndex,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName}))}async listIndexes(l={}){var i=()=>super.listIndexes,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName}))}async getIndex(l){var i=()=>super.getIndex,o=this;return i().call(o,o.vectorBucketName,l)}async deleteIndex(l){var i=()=>super.deleteIndex,o=this;return i().call(o,o.vectorBucketName,l)}index(l){return new Sw(this.url,this.headers,this.vectorBucketName,l,this.fetch)}},Sw=class extends vw{constructor(l,i,o,f,p){super(l,i,p),this.vectorBucketName=o,this.indexName=f}async putVectors(l){var i=()=>super.putVectors,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async getVectors(l){var i=()=>super.getVectors,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async listVectors(l={}){var i=()=>super.listVectors,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async queryVectors(l){var i=()=>super.queryVectors,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async deleteVectors(l){var i=()=>super.deleteVectors,o=this;return i().call(o,ze(ze({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}},Cw=class extends yw{constructor(l,i={},o,f){super(l,i,o,f)}from(l){return new pw(this.url,this.headers,l,this.fetch)}get vectors(){return new Aw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ww(this.url+"/iceberg",this.headers,this.fetch)}};const _2="2.96.0",Ys=30*1e3,Of=3,gf=Of*Ys,Tw="http://localhost:9999",Ow="supabase.auth.token",Rw={"X-Client-Info":`gotrue-js/${_2}`},Rf="X-Supabase-Api-Version",S2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Nw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Iw=600*1e3;class co extends Error{constructor(i,o,f){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=f}}function De(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Dw extends co{constructor(i,o,f){super(i,o,f),this.name="AuthApiError",this.status=o,this.code=f}}function Mw(l){return De(l)&&l.name==="AuthApiError"}class $a extends co{constructor(i,o){super(i),this.name="AuthUnknownError",this.originalError=o}}class Li extends co{constructor(i,o,f,p){super(i,f,p),this.name=o,this.status=f}}class yr extends Li{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mf(l){return De(l)&&l.name==="AuthSessionMissingError"}class zs extends Li{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hu extends Li{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class Gu extends Li{constructor(i,o=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bw(l){return De(l)&&l.name==="AuthImplicitGrantRedirectError"}class Ag extends Li{constructor(i,o=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kw extends Li{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Nf extends Li{constructor(i,o){super(i,"AuthRetryableFetchError",o,void 0)}}function pf(l){return De(l)&&l.name==="AuthRetryableFetchError"}class _g extends Li{constructor(i,o,f){super(i,"AuthWeakPasswordError",o,"weak_password"),this.reasons=f}}class If extends Li{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sg=` 	
\r=`.split(""),Lw=(()=>{const l=new Array(128);for(let i=0;i<l.length;i+=1)l[i]=-1;for(let i=0;i<Sg.length;i+=1)l[Sg[i].charCodeAt(0)]=-2;for(let i=0;i<Wu.length;i+=1)l[Wu[i].charCodeAt(0)]=i;return l})();function Cg(l,i,o){if(l!==null)for(i.queue=i.queue<<8|l,i.queuedBits+=8;i.queuedBits>=6;){const f=i.queue>>i.queuedBits-6&63;o(Wu[f]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const f=i.queue>>i.queuedBits-6&63;o(Wu[f]),i.queuedBits-=6}}function C2(l,i,o){const f=Lw[l];if(f>-1)for(i.queue=i.queue<<6|f,i.queuedBits+=6;i.queuedBits>=8;)o(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(f===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Tg(l){const i=[],o=b=>{i.push(String.fromCodePoint(b))},f={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},m=b=>{Pw(b,f,o)};for(let b=0;b<l.length;b+=1)C2(l.charCodeAt(b),p,m);return i.join("")}function Uw(l,i){if(l<=127){i(l);return}else if(l<=2047){i(192|l>>6),i(128|l&63);return}else if(l<=65535){i(224|l>>12),i(128|l>>6&63),i(128|l&63);return}else if(l<=1114111){i(240|l>>18),i(128|l>>12&63),i(128|l>>6&63),i(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function jw(l,i){for(let o=0;o<l.length;o+=1){let f=l.charCodeAt(o);if(f>55295&&f<=56319){const p=(f-55296)*1024&65535;f=(l.charCodeAt(o+1)-56320&65535|p)+65536,o+=1}Uw(f,i)}}function Pw(l,i,o){if(i.utf8seq===0){if(l<=127){o(l);return}for(let f=1;f<6;f+=1)if((l>>7-f&1)===0){i.utf8seq=f;break}if(i.utf8seq===2)i.codepoint=l&31;else if(i.utf8seq===3)i.codepoint=l&15;else if(i.utf8seq===4)i.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|l&63,i.utf8seq-=1,i.utf8seq===0&&o(i.codepoint)}}function Js(l){const i=[],o={queue:0,queuedBits:0},f=p=>{i.push(p)};for(let p=0;p<l.length;p+=1)C2(l.charCodeAt(p),o,f);return new Uint8Array(i)}function Fw(l){const i=[];return jw(l,o=>i.push(o)),new Uint8Array(i)}function es(l){const i=[],o={queue:0,queuedBits:0},f=p=>{i.push(p)};return l.forEach(p=>Cg(p,o,f)),Cg(null,o,f),i.join("")}function zw(l){return Math.round(Date.now()/1e3)+l}function Hw(){return Symbol("auth-callback")}const Un=()=>typeof window<"u"&&typeof document<"u",Ka={tested:!1,writable:!1},T2=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ka.tested)return Ka.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Ka.tested=!0,Ka.writable=!0}catch{Ka.tested=!0,Ka.writable=!1}return Ka.writable};function Gw(l){const i={},o=new URL(l);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((p,m)=>{i[m]=p})}catch{}return o.searchParams.forEach((f,p)=>{i[p]=f}),i}const O2=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),Vw=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Ws=async(l,i,o)=>{await l.setItem(i,JSON.stringify(o))},Za=async(l,i)=>{const o=await l.getItem(i);if(!o)return null;try{return JSON.parse(o)}catch{return o}},Ln=async(l,i)=>{await l.removeItem(i)};class ac{constructor(){this.promise=new ac.promiseConstructor((i,o)=>{this.resolve=i,this.reject=o})}}ac.promiseConstructor=Promise;function Vu(l){const i=l.split(".");if(i.length!==3)throw new If("Invalid JWT structure");for(let f=0;f<i.length;f++)if(!Nw.test(i[f]))throw new If("JWT not in base64url format");return{header:JSON.parse(Tg(i[0])),payload:JSON.parse(Tg(i[1])),signature:Js(i[2]),raw:{header:i[0],payload:i[1]}}}async function qw(l){return await new Promise(i=>{setTimeout(()=>i(null),l)})}function Xw(l,i){return new Promise((f,p)=>{(async()=>{for(let m=0;m<1/0;m++)try{const b=await l(m);if(!i(m,null,b)){f(b);return}}catch(b){if(!i(m,b)){p(b);return}}})()})}function Yw(l){return("0"+l.toString(16)).substr(-2)}function Ww(){const i=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",f=o.length;let p="";for(let m=0;m<56;m++)p+=o.charAt(Math.floor(Math.random()*f));return p}return crypto.getRandomValues(i),Array.from(i,Yw).join("")}async function Kw(l){const o=new TextEncoder().encode(l),f=await crypto.subtle.digest("SHA-256",o),p=new Uint8Array(f);return Array.from(p).map(m=>String.fromCharCode(m)).join("")}async function Zw(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const o=await Kw(l);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hs(l,i,o=!1){const f=Ww();let p=f;o&&(p+="/PASSWORD_RECOVERY"),await Ws(l,`${i}-code-verifier`,p);const m=await Zw(f);return[m,f===m?"plain":"s256"]}const Qw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jw(l){const i=l.headers.get(Rf);if(!i||!i.match(Qw))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function $w(l){if(!l)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(l<=i)throw new Error("JWT has expired")}function eb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gs(l){if(!tb.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xf(){const l={};return new Proxy(l,{get:(i,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const f=o.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nb(l,i){return new Proxy(l,{get:(o,f,p)=>{if(f==="__isInsecureUserWarningProxy")return!0;if(typeof f=="symbol"){const m=f.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(o,f,p)}return!i.value&&typeof f=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(o,f,p)}})}function Og(l){return JSON.parse(JSON.stringify(l))}const Qa=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),rb=[502,503,504];async function Rg(l){var i;if(!Vw(l))throw new Nf(Qa(l),0);if(rb.includes(l.status))throw new Nf(Qa(l),l.status);let o;try{o=await l.json()}catch(m){throw new $a(Qa(m),m)}let f;const p=Jw(l);if(p&&p.getTime()>=S2["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?f=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(f=o.error_code),f){if(f==="weak_password")throw new _g(Qa(o),l.status,((i=o.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(f==="session_not_found")throw new yr}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((m,b)=>m&&typeof b=="string",!0))throw new _g(Qa(o),l.status,o.weak_password.reasons);throw new Dw(Qa(o),l.status||500,f)}const ib=(l,i,o,f)=>{const p={method:l,headers:i?.headers||{}};return l==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),p.body=JSON.stringify(f),Object.assign(Object.assign({},p),o))};async function He(l,i,o,f){var p;const m=Object.assign({},f?.headers);m[Rf]||(m[Rf]=S2["2024-01-01"].name),f?.jwt&&(m.Authorization=`Bearer ${f.jwt}`);const b=(p=f?.query)!==null&&p!==void 0?p:{};f?.redirectTo&&(b.redirect_to=f.redirectTo);const A=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",_=await ab(l,i,o+A,{headers:m,noResolveJson:f?.noResolveJson},{},f?.body);return f?.xform?f?.xform(_):{data:Object.assign({},_),error:null}}async function ab(l,i,o,f,p,m){const b=ib(i,f,p,m);let A;try{A=await l(o,Object.assign({},b))}catch(_){throw console.error(_),new Nf(Qa(_),0)}if(A.ok||await Rg(A),f?.noResolveJson)return A;try{return await A.json()}catch(_){await Rg(_)}}function qr(l){var i;let o=null;ob(l)&&(o=Object.assign({},l),l.expires_at||(o.expires_at=zw(l.expires_in)));const f=(i=l.user)!==null&&i!==void 0?i:l;return{data:{session:o,user:f},error:null}}function Ng(l){const i=qr(l);return!i.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((o,f)=>o&&typeof f=="string",!0)&&(i.data.weak_password=l.weak_password),i}function Ea(l){var i;return{data:{user:(i=l.user)!==null&&i!==void 0?i:l},error:null}}function sb(l){return{data:l,error:null}}function lb(l){const{action_link:i,email_otp:o,hashed_token:f,redirect_to:p,verification_type:m}=l,b=nc(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),A={action_link:i,email_otp:o,hashed_token:f,redirect_to:p,verification_type:m},_=Object.assign({},b);return{data:{properties:A,user:_},error:null}}function Ig(l){return l}function ob(l){return l.access_token&&l.refresh_token&&l.expires_in}const yf=["global","local","others"];class ub{constructor({url:i="",headers:o={},fetch:f}){this.url=i,this.headers=o,this.fetch=O2(f),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,o=yf[0]){if(yf.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yf.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(f){if(De(f))return{data:null,error:f};throw f}}async inviteUserByEmail(i,o={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:Ea})}catch(f){if(De(f))return{data:{user:null},error:f};throw f}}async generateLink(i){try{const{options:o}=i,f=nc(i,["options"]),p=Object.assign(Object.assign({},f),o);return"newEmail"in f&&(p.new_email=f?.newEmail,delete p.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:lb,redirectTo:o?.redirectTo})}catch(o){if(De(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(i){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:Ea})}catch(o){if(De(o))return{data:{user:null},error:o};throw o}}async listUsers(i){var o,f,p,m,b,A,_;try{const E={nextPage:null,lastPage:0,total:0},R=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(o=i?.page)===null||o===void 0?void 0:o.toString())!==null&&f!==void 0?f:"",per_page:(m=(p=i?.perPage)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""},xform:Ig});if(R.error)throw R.error;const N=await R.json(),L=(b=R.headers.get("x-total-count"))!==null&&b!==void 0?b:0,U=(_=(A=R.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&_!==void 0?_:[];return U.length>0&&(U.forEach(V=>{const G=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),te=JSON.parse(V.split(";")[1].split("=")[1]);E[`${te}Page`]=G}),E.total=parseInt(L)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(De(E))return{data:{users:[]},error:E};throw E}}async getUserById(i){Gs(i);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:Ea})}catch(o){if(De(o))return{data:{user:null},error:o};throw o}}async updateUserById(i,o){Gs(i);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:o,headers:this.headers,xform:Ea})}catch(f){if(De(f))return{data:{user:null},error:f};throw f}}async deleteUser(i,o=!1){Gs(i);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:o},xform:Ea})}catch(f){if(De(f))return{data:{user:null},error:f};throw f}}async _listFactors(i){Gs(i.userId);try{const{data:o,error:f}=await He(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:o,error:f}}catch(o){if(De(o))return{data:null,error:o};throw o}}async _deleteFactor(i){Gs(i.userId),Gs(i.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(o){if(De(o))return{data:null,error:o};throw o}}async _listOAuthClients(i){var o,f,p,m,b,A,_;try{const E={nextPage:null,lastPage:0,total:0},R=await He(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(o=i?.page)===null||o===void 0?void 0:o.toString())!==null&&f!==void 0?f:"",per_page:(m=(p=i?.perPage)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""},xform:Ig});if(R.error)throw R.error;const N=await R.json(),L=(b=R.headers.get("x-total-count"))!==null&&b!==void 0?b:0,U=(_=(A=R.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&_!==void 0?_:[];return U.length>0&&(U.forEach(V=>{const G=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),te=JSON.parse(V.split(";")[1].split("=")[1]);E[`${te}Page`]=G}),E.total=parseInt(L)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(De(E))return{data:{clients:[]},error:E};throw E}}async _createOAuthClient(i){try{return await He(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(De(o))return{data:null,error:o};throw o}}async _getOAuthClient(i){try{return await He(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(De(o))return{data:null,error:o};throw o}}async _updateOAuthClient(i,o){try{return await He(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:o,headers:this.headers,xform:f=>({data:f,error:null})})}catch(f){if(De(f))return{data:null,error:f};throw f}}async _deleteOAuthClient(i){try{return await He(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(o){if(De(o))return{data:null,error:o};throw o}}async _regenerateOAuthClientSecret(i){try{return await He(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(De(o))return{data:null,error:o};throw o}}}function Dg(l={}){return{getItem:i=>l[i]||null,setItem:(i,o)=>{l[i]=o},removeItem:i=>{delete l[i]}}}const Vs={debug:!!(globalThis&&T2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R2 extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Mg extends R2{}async function cb(l,i,o){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,i);const f=new globalThis.AbortController;i>0&&setTimeout(()=>{f.abort(),Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},i),await Promise.resolve();try{return await globalThis.navigator.locks.request(l,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:f.signal},async p=>{if(p){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,p.name);try{return await o()}finally{Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,p.name)}}else{if(i===0)throw Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Mg(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Vs.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}})}catch(p){throw p?.name==="AbortError"?new Mg(`Acquiring an exclusive Navigator LockManager lock "${l}" timed out waiting ${i}ms`):p}}function hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N2(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function fb(l){return parseInt(l,16)}function db(l){const i=new TextEncoder().encode(l);return"0x"+Array.from(i,f=>f.toString(16).padStart(2,"0")).join("")}function gb(l){var i;const{chainId:o,domain:f,expirationTime:p,issuedAt:m=new Date,nonce:b,notBefore:A,requestId:_,resources:E,scheme:R,uri:N,version:L}=l;{if(!Number.isInteger(o))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(b&&b.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${b}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(L!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${L}`);if(!((i=l.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const U=N2(l.address),V=R?`${R}://${f}`:f,G=l.statement?`${l.statement}
`:"",te=`${V} wants you to sign in with your Ethereum account:
${U}

${G}`;let le=`URI: ${N}
Version: ${L}
Chain ID: ${o}${b?`
Nonce: ${b}`:""}
Issued At: ${m.toISOString()}`;if(p&&(le+=`
Expiration Time: ${p.toISOString()}`),A&&(le+=`
Not Before: ${A.toISOString()}`),_&&(le+=`
Request ID: ${_}`),E){let $=`
Resources:`;for(const Y of E){if(!Y||typeof Y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Y}`);$+=`
- ${Y}`}le+=$}return`${te}
${le}`}class yn extends Error{constructor({message:i,code:o,cause:f,name:p}){var m;super(i,{cause:f}),this.__isWebAuthnError=!0,this.name=(m=p??(f instanceof Error?f.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=o}}class Ku extends yn{constructor(i,o){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o,message:i}),this.name="WebAuthnUnknownError",this.originalError=o}}function mb({error:l,options:i}){var o,f,p;const{publicKey:m}=i;if(!m)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new yn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((o=m.authenticatorSelection)===null||o===void 0?void 0:o.requireResidentKey)===!0)return new yn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(i.mediation==="conditional"&&((f=m.authenticatorSelection)===null||f===void 0?void 0:f.userVerification)==="required")return new yn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((p=m.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new yn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new yn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new yn({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return m.pubKeyCredParams.filter(A=>A.type==="public-key").length===0?new yn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new yn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const b=window.location.hostname;if(I2(b)){if(m.rp.id!==b)return new yn({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new yn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function pb({error:l,options:i}){const{publicKey:o}=i;if(!o)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new yn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new yn({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(I2(f)){if(o.rpId!==f)return new yn({message:`The RP ID "${o.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class xb{createNewAbortSignal(){if(this.controller){const o=new Error("Cancelling existing WebAuthn API call for new one");o.name="AbortError",this.controller.abort(o)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const yb=new xb;function wb(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:i,user:o,excludeCredentials:f}=l,p=nc(l,["challenge","user","excludeCredentials"]),m=Js(i).buffer,b=Object.assign(Object.assign({},o),{id:Js(o.id).buffer}),A=Object.assign(Object.assign({},p),{challenge:m,user:b});if(f&&f.length>0){A.excludeCredentials=new Array(f.length);for(let _=0;_<f.length;_++){const E=f[_];A.excludeCredentials[_]=Object.assign(Object.assign({},E),{id:Js(E.id).buffer,type:E.type||"public-key",transports:E.transports})}}return A}function bb(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:i,allowCredentials:o}=l,f=nc(l,["challenge","allowCredentials"]),p=Js(i).buffer,m=Object.assign(Object.assign({},f),{challenge:p});if(o&&o.length>0){m.allowCredentials=new Array(o.length);for(let b=0;b<o.length;b++){const A=o[b];m.allowCredentials[b]=Object.assign(Object.assign({},A),{id:Js(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return m}function vb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l;return{id:l.id,rawId:l.id,response:{attestationObject:es(new Uint8Array(l.response.attestationObject)),clientDataJSON:es(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(i=o.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Eb(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l,f=l.getClientExtensionResults(),p=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:es(new Uint8Array(p.authenticatorData)),clientDataJSON:es(new Uint8Array(p.clientDataJSON)),signature:es(new Uint8Array(p.signature)),userHandle:p.userHandle?es(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:f,authenticatorAttachment:(i=o.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function I2(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function Bg(){var l,i;return!!(Un()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Ab(l){try{const i=await navigator.credentials.create(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Ku("Browser returned unexpected credential type",i)}:{data:null,error:new Ku("Empty credential response",i)}}catch(i){return{data:null,error:mb({error:i,options:l})}}}async function _b(l){try{const i=await navigator.credentials.get(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Ku("Browser returned unexpected credential type",i)}:{data:null,error:new Ku("Empty credential response",i)}}catch(i){return{data:null,error:pb({error:i,options:l})}}}const Sb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Cb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zu(...l){const i=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),o=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),f={};for(const p of l)if(p)for(const m in p){const b=p[m];if(b!==void 0)if(Array.isArray(b))f[m]=b;else if(o(b))f[m]=b;else if(i(b)){const A=f[m];i(A)?f[m]=Zu(A,b):f[m]=Zu(b)}else f[m]=b}return f}function Tb(l,i){return Zu(Sb,l,i||{})}function Ob(l,i){return Zu(Cb,l,i||{})}class Rb{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:o,friendlyName:f,signal:p},m){var b;try{const{data:A,error:_}=await this.client.mfa.challenge({factorId:i,webauthn:o});if(!A)return{data:null,error:_};const E=p??yb.createNewAbortSignal();if(A.webauthn.type==="create"){const{user:R}=A.webauthn.credential_options.publicKey;if(!R.name){const N=f;if(N)R.name=`${R.id}:${N}`;else{const U=(await this.client.getUser()).data.user,V=((b=U?.user_metadata)===null||b===void 0?void 0:b.name)||U?.email||U?.id||"User";R.name=`${R.id}:${V}`}}R.displayName||(R.displayName=R.name)}switch(A.webauthn.type){case"create":{const R=Tb(A.webauthn.credential_options.publicKey,m?.create),{data:N,error:L}=await Ab({publicKey:R,signal:E});return N?{data:{factorId:i,challengeId:A.id,webauthn:{type:A.webauthn.type,credential_response:N}},error:null}:{data:null,error:L}}case"request":{const R=Ob(A.webauthn.credential_options.publicKey,m?.request),{data:N,error:L}=await _b(Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:R,signal:E}));return N?{data:{factorId:i,challengeId:A.id,webauthn:{type:A.webauthn.type,credential_response:N}},error:null}:{data:null,error:L}}}}catch(A){return De(A)?{data:null,error:A}:{data:null,error:new $a("Unexpected error in challenge",A)}}}async _verify({challengeId:i,factorId:o,webauthn:f}){return this.client.mfa.verify({factorId:o,challengeId:i,webauthn:f})}async _authenticate({factorId:i,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},m){if(!o)return{data:null,error:new co("rpId is required for WebAuthn authentication")};try{if(!Bg())return{data:null,error:new $a("Browser does not support WebAuthn",null)};const{data:b,error:A}=await this.challenge({factorId:i,webauthn:{rpId:o,rpOrigins:f},signal:p},{request:m});if(!b)return{data:null,error:A};const{webauthn:_}=b;return this._verify({factorId:i,challengeId:b.challengeId,webauthn:{type:_.type,rpId:o,rpOrigins:f,credential_response:_.credential_response}})}catch(b){return De(b)?{data:null,error:b}:{data:null,error:new $a("Unexpected error in authenticate",b)}}}async _register({friendlyName:i,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},m){if(!o)return{data:null,error:new co("rpId is required for WebAuthn registration")};try{if(!Bg())return{data:null,error:new $a("Browser does not support WebAuthn",null)};const{data:b,error:A}=await this._enroll({friendlyName:i});if(!b)return await this.client.mfa.listFactors().then(R=>{var N;return(N=R.data)===null||N===void 0?void 0:N.all.find(L=>L.factor_type==="webauthn"&&L.friendly_name===i&&L.status!=="unverified")}).then(R=>R?this.client.mfa.unenroll({factorId:R?.id}):void 0),{data:null,error:A};const{data:_,error:E}=await this._challenge({factorId:b.id,friendlyName:b.friendly_name,webauthn:{rpId:o,rpOrigins:f},signal:p},{create:m});return _?this._verify({factorId:b.id,challengeId:_.challengeId,webauthn:{rpId:o,rpOrigins:f,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:E}}catch(b){return De(b)?{data:null,error:b}:{data:null,error:new $a("Unexpected error in register",b)}}}}hb();const Nb={url:Tw,storageKey:Ow,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function kg(l,i,o){return await o()}const qs={};class ho{get jwks(){var i,o;return(o=(i=qs[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(i){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,o;return(o=(i=qs[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{cachedAt:i})}constructor(i){var o,f,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},Nb),i);if(this.storageKey=m.storageKey,this.instanceID=(o=ho.nextInstanceID[this.storageKey])!==null&&o!==void 0?o:0,ho.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&Un()){const b=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(b),this.logDebugMessages&&console.trace(b)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new ub({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=O2(m.fetch),this.lock=m.lock||kg,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&Un()&&(!((f=globalThis?.navigator)===null||f===void 0)&&f.locks)?this.lock=cb:this.lock=kg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Rb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:T2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dg(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=Dg(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(b){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",b)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async b=>{this._debug("received broadcast notification from other tab or client",b);try{await this._notifyAllSubscribers(b.data.event,b.data.session,!1)}catch(A){this._debug("#broadcastChannel","error",A)}})}this.initialize().catch(b=>{this._debug("#initialize()","error",b)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_2}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let o={},f="none";if(Un()&&(o=Gw(window.location.href),this._isImplicitGrantCallback(o)?f="implicit":await this._isPKCECallback(o)&&(f="pkce")),Un()&&this.detectSessionInUrl&&f!=="none"){const{data:p,error:m}=await this._getSessionFromURL(o,f);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),Bw(m)){const _=(i=m.details)===null||i===void 0?void 0:i.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:b,redirectType:A}=p;return this._debug("#_initialize()","detected session in URL",b,"redirect type",A),await this._saveSession(b),setTimeout(async()=>{A==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return De(o)?this._returnResult({error:o}):this._returnResult({error:new $a("Unexpected error during initialization",o)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var o,f,p;try{const m=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(f=(o=i?.options)===null||o===void 0?void 0:o.data)!==null&&f!==void 0?f:{},gotrue_meta_security:{captcha_token:(p=i?.options)===null||p===void 0?void 0:p.captchaToken}},xform:qr}),{data:b,error:A}=m;if(A||!b)return this._returnResult({data:{user:null,session:null},error:A});const _=b.session,E=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:E,session:_},error:null})}catch(m){if(De(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(i){var o,f,p;try{let m;if("email"in i){const{email:R,password:N,options:L}=i;let U=null,V=null;this.flowType==="pkce"&&([U,V]=await Hs(this.storage,this.storageKey)),m=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:L?.emailRedirectTo,body:{email:R,password:N,data:(o=L?.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:L?.captchaToken},code_challenge:U,code_challenge_method:V},xform:qr})}else if("phone"in i){const{phone:R,password:N,options:L}=i;m=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:R,password:N,data:(f=L?.data)!==null&&f!==void 0?f:{},channel:(p=L?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:L?.captchaToken}},xform:qr})}else throw new Hu("You must provide either an email or phone number and a password");const{data:b,error:A}=m;if(A||!b)return await Ln(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:A});const _=b.session,E=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:E,session:_},error:null})}catch(m){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(i){try{let o;if("email"in i){const{email:m,password:b,options:A}=i;o=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:b,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:Ng})}else if("phone"in i){const{phone:m,password:b,options:A}=i;o=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:b,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:Ng})}else throw new Hu("You must provide either an email or phone number and a password");const{data:f,error:p}=o;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const m=new zs;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({user:f.user,session:f.session},f.weak_password?{weakPassword:f.weak_password}:null),error:p})}catch(o){if(De(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOAuth(i){var o,f,p,m;return await this._handleProviderSignIn(i.provider,{redirectTo:(o=i.options)===null||o===void 0?void 0:o.redirectTo,scopes:(f=i.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=i.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(m=i.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:o}=i;switch(o){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}}async signInWithEthereum(i){var o,f,p,m,b,A,_,E,R,N,L;let U,V;if("message"in i)U=i.message,V=i.signature;else{const{chain:G,wallet:te,statement:le,options:$}=i;let Y;if(Un())if(typeof te=="object")Y=te;else{const he=window;if("ethereum"in he&&typeof he.ethereum=="object"&&"request"in he.ethereum&&typeof he.ethereum.request=="function")Y=he.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof te!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=te}const pe=new URL((o=$?.url)!==null&&o!==void 0?o:window.location.href),Be=await Y.request({method:"eth_requestAccounts"}).then(he=>he).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Be||Be.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ee=N2(Be[0]);let ee=(f=$?.signInWithEthereum)===null||f===void 0?void 0:f.chainId;if(!ee){const he=await Y.request({method:"eth_chainId"});ee=fb(he)}const Re={domain:pe.host,address:Ee,statement:le,uri:pe.href,version:"1",chainId:ee,nonce:(p=$?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(b=(m=$?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&b!==void 0?b:new Date,expirationTime:(A=$?.signInWithEthereum)===null||A===void 0?void 0:A.expirationTime,notBefore:(_=$?.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(E=$?.signInWithEthereum)===null||E===void 0?void 0:E.requestId,resources:(R=$?.signInWithEthereum)===null||R===void 0?void 0:R.resources};U=gb(Re),V=await Y.request({method:"personal_sign",params:[db(U),Ee]})}try{const{data:G,error:te}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:U,signature:V},!((N=i.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(L=i.options)===null||L===void 0?void 0:L.captchaToken}}:null),xform:qr});if(te)throw te;if(!G||!G.session||!G.user){const le=new zs;return this._returnResult({data:{user:null,session:null},error:le})}return G.session&&(await this._saveSession(G.session),await this._notifyAllSubscribers("SIGNED_IN",G.session)),this._returnResult({data:Object.assign({},G),error:te})}catch(G){if(De(G))return this._returnResult({data:{user:null,session:null},error:G});throw G}}async signInWithSolana(i){var o,f,p,m,b,A,_,E,R,N,L,U;let V,G;if("message"in i)V=i.message,G=i.signature;else{const{chain:te,wallet:le,statement:$,options:Y}=i;let pe;if(Un())if(typeof le=="object")pe=le;else{const Ee=window;if("solana"in Ee&&typeof Ee.solana=="object"&&("signIn"in Ee.solana&&typeof Ee.solana.signIn=="function"||"signMessage"in Ee.solana&&typeof Ee.solana.signMessage=="function"))pe=Ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof le!="object"||!Y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");pe=le}const Be=new URL((o=Y?.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in pe&&pe.signIn){const Ee=await pe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Y?.signInWithSolana),{version:"1",domain:Be.host,uri:Be.href}),$?{statement:$}:null));let ee;if(Array.isArray(Ee)&&Ee[0]&&typeof Ee[0]=="object")ee=Ee[0];else if(Ee&&typeof Ee=="object"&&"signedMessage"in Ee&&"signature"in Ee)ee=Ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)V=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),G=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in pe)||typeof pe.signMessage!="function"||!("publicKey"in pe)||typeof pe!="object"||!pe.publicKey||!("toBase58"in pe.publicKey)||typeof pe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");V=[`${Be.host} wants you to sign in with your Solana account:`,pe.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${Be.href}`,`Issued At: ${(p=(f=Y?.signInWithSolana)===null||f===void 0?void 0:f.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((m=Y?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${Y.signInWithSolana.notBefore}`]:[],...!((b=Y?.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${Y.signInWithSolana.expirationTime}`]:[],...!((A=Y?.signInWithSolana)===null||A===void 0)&&A.chainId?[`Chain ID: ${Y.signInWithSolana.chainId}`]:[],...!((_=Y?.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${Y.signInWithSolana.nonce}`]:[],...!((E=Y?.signInWithSolana)===null||E===void 0)&&E.requestId?[`Request ID: ${Y.signInWithSolana.requestId}`]:[],...!((N=(R=Y?.signInWithSolana)===null||R===void 0?void 0:R.resources)===null||N===void 0)&&N.length?["Resources",...Y.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const Ee=await pe.signMessage(new TextEncoder().encode(V),"utf8");if(!Ee||!(Ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");G=Ee}}try{const{data:te,error:le}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:V,signature:es(G)},!((L=i.options)===null||L===void 0)&&L.captchaToken?{gotrue_meta_security:{captcha_token:(U=i.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:qr});if(le)throw le;if(!te||!te.session||!te.user){const $=new zs;return this._returnResult({data:{user:null,session:null},error:$})}return te.session&&(await this._saveSession(te.session),await this._notifyAllSubscribers("SIGNED_IN",te.session)),this._returnResult({data:Object.assign({},te),error:le})}catch(te){if(De(te))return this._returnResult({data:{user:null,session:null},error:te});throw te}}async _exchangeCodeForSession(i){const o=await Za(this.storage,`${this.storageKey}-code-verifier`),[f,p]=(o??"").split("/");try{if(!f&&this.flowType==="pkce")throw new kw;const{data:m,error:b}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:f},xform:qr});if(await Ln(this.storage,`${this.storageKey}-code-verifier`),b)throw b;if(!m||!m.session||!m.user){const A=new zs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:A})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:p??null}),error:b})}catch(m){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(i){try{const{options:o,provider:f,token:p,access_token:m,nonce:b}=i,A=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:f,id_token:p,access_token:m,nonce:b,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:qr}),{data:_,error:E}=A;if(E)return this._returnResult({data:{user:null,session:null},error:E});if(!_||!_.session||!_.user){const R=new zs;return this._returnResult({data:{user:null,session:null},error:R})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:E})}catch(o){if(De(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOtp(i){var o,f,p,m,b;try{if("email"in i){const{email:A,options:_}=i;let E=null,R=null;this.flowType==="pkce"&&([E,R]=await Hs(this.storage,this.storageKey));const{error:N}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:A,data:(o=_?.data)!==null&&o!==void 0?o:{},create_user:(f=_?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:E,code_challenge_method:R},redirectTo:_?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in i){const{phone:A,options:_}=i,{data:E,error:R}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:A,data:(p=_?.data)!==null&&p!==void 0?p:{},create_user:(m=_?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},channel:(b=_?.channel)!==null&&b!==void 0?b:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:R})}throw new Hu("You must provide either an email or phone number.")}catch(A){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async verifyOtp(i){var o,f;try{let p,m;"options"in i&&(p=(o=i.options)===null||o===void 0?void 0:o.redirectTo,m=(f=i.options)===null||f===void 0?void 0:f.captchaToken);const{data:b,error:A}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:m}}),redirectTo:p,xform:qr});if(A)throw A;if(!b)throw new Error("An error occurred on token verification.");const _=b.session,E=b.user;return _?.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:E,session:_},error:null})}catch(p){if(De(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(i){var o,f,p,m,b;try{let A=null,_=null;this.flowType==="pkce"&&([A,_]=await Hs(this.storage,this.storageKey));const E=await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(f=(o=i.options)===null||o===void 0?void 0:o.redirectTo)!==null&&f!==void 0?f:void 0}),!((p=i?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:A,code_challenge_method:_}),headers:this.headers,xform:sb});return!((m=E.data)===null||m===void 0)&&m.url&&Un()&&!(!((b=i.options)===null||b===void 0)&&b.skipBrowserRedirect)&&window.location.assign(E.data.url),this._returnResult(E)}catch(A){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(A))return this._returnResult({data:null,error:A});throw A}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:o},error:f}=i;if(f)throw f;if(!o)throw new yr;const{error:p}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(i){if(De(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const o=`${this.url}/resend`;if("email"in i){const{email:f,type:p,options:m}=i,{error:b}=await He(this.fetch,"POST",o,{headers:this.headers,body:{email:f,type:p,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}else if("phone"in i){const{phone:f,type:p,options:m}=i,{data:b,error:A}=await He(this.fetch,"POST",o,{headers:this.headers,body:{phone:f,type:p,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:A})}throw new Hu("You must provide either an email or phone number and a type")}catch(o){if(De(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async o=>o))}async _acquireLock(i,o){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const f=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await f,await o()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const f=o();for(this.pendingInLock.push((async()=>{try{await f}catch{}})()),await f;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await f}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await i(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const o=await Za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?i=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const f=i.expires_at?i.expires_at*1e3-Date.now()<gf:!1;if(this._debug("#__loadSession()",`session has${f?"":" not"} expired`,"expires_at",i.expires_at),!f){if(this.userStorage){const b=await Za(this.userStorage,this.storageKey+"-user");b?.user?i.user=b.user:i.user=xf()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const b={value:this.suppressGetSessionWarning};i.user=nb(i.user,b),b.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:p,error:m}=await this._callRefreshToken(i.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){if(i)return await this._getUser(i);await this.initializePromise;const o=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return o.data.user&&(this.suppressGetSessionWarning=!0),o}async _getUser(i){try{return i?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:Ea}):await this._useSession(async o=>{var f,p,m;const{data:b,error:A}=o;if(A)throw A;return!(!((f=b.session)===null||f===void 0)&&f.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yr}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0,xform:Ea})})}catch(o){if(De(o))return mf(o)&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:o});throw o}}async updateUser(i,o={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(i,o))}async _updateUser(i,o={}){try{return await this._useSession(async f=>{const{data:p,error:m}=f;if(m)throw m;if(!p.session)throw new yr;const b=p.session;let A=null,_=null;this.flowType==="pkce"&&i.email!=null&&([A,_]=await Hs(this.storage,this.storageKey));const{data:E,error:R}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:A,code_challenge_method:_}),jwt:b.access_token,xform:Ea});if(R)throw R;return b.user=E.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),this._returnResult({data:{user:b.user},error:null})})}catch(f){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(f))return this._returnResult({data:{user:null},error:f});throw f}}async setSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new yr;const o=Date.now()/1e3;let f=o,p=!0,m=null;const{payload:b}=Vu(i.access_token);if(b.exp&&(f=b.exp,p=f<=o),p){const{data:A,error:_}=await this._callRefreshToken(i.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!A)return{data:{user:null,session:null},error:null};m=A}else{const{data:A,error:_}=await this._getUser(i.access_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});m={access_token:i.access_token,refresh_token:i.refresh_token,user:A.user,token_type:"bearer",expires_in:f-o,expires_at:f},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(o){if(De(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async o=>{var f;if(!i){const{data:b,error:A}=o;if(A)throw A;i=(f=b.session)!==null&&f!==void 0?f:void 0}if(!i?.refresh_token)throw new yr;const{data:p,error:m}=await this._callRefreshToken(i.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(o){if(De(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async _getSessionFromURL(i,o){try{if(!Un())throw new Gu("No browser detected.");if(i.error||i.error_description||i.error_code)throw new Gu(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new Ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gu("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new Ag("No code detected.");const{data:$,error:Y}=await this._exchangeCodeForSession(i.code);if(Y)throw Y;const pe=new URL(window.location.href);return pe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",pe.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:f,provider_refresh_token:p,access_token:m,refresh_token:b,expires_in:A,expires_at:_,token_type:E}=i;if(!m||!A||!b||!E)throw new Gu("No session defined in URL");const R=Math.round(Date.now()/1e3),N=parseInt(A);let L=R+N;_&&(L=parseInt(_));const U=L-R;U*1e3<=Ys&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${U}s, should have been closer to ${N}s`);const V=L-N;R-V>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",V,L,R):R-V<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",V,L,R);const{data:G,error:te}=await this._getUser(m);if(te)throw te;const le={provider_token:f,provider_refresh_token:p,access_token:m,expires_in:N,expires_at:L,refresh_token:b,token_type:E,user:G.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:le,redirectType:i.type},error:null})}catch(f){if(De(f))return this._returnResult({data:{session:null,redirectType:null},error:f});throw f}}_isImplicitGrantCallback(i){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),i):!!(i.access_token||i.error_description)}async _isPKCECallback(i){const o=await Za(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&o)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async o=>{var f;const{data:p,error:m}=o;if(m&&!mf(m))return this._returnResult({error:m});const b=(f=p.session)===null||f===void 0?void 0:f.access_token;if(b){const{error:A}=await this.admin.signOut(b,i);if(A&&!(Mw(A)&&(A.status===404||A.status===401||A.status===403)||mf(A)))return this._returnResult({error:A})}return i!=="others"&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const o=Hw(),f={id:o,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,f),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:f}}}async _emitInitialSession(i){return await this._useSession(async o=>{var f,p;try{const{data:{session:m},error:b}=o;if(b)throw b;await((f=this.stateChangeEmitters.get(i))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",i,"session",m)}catch(m){await((p=this.stateChangeEmitters.get(i))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",m),console.error(m)}})}async resetPasswordForEmail(i,o={}){let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Hs(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:f,code_challenge_method:p,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(m){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var i;try{const{data:o,error:f}=await this.getUser();if(f)throw f;return this._returnResult({data:{identities:(i=o.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var o;try{const{data:f,error:p}=await this._useSession(async m=>{var b,A,_,E,R;const{data:N,error:L}=m;if(L)throw L;const U=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(b=i.options)===null||b===void 0?void 0:b.redirectTo,scopes:(A=i.options)===null||A===void 0?void 0:A.scopes,queryParams:(_=i.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",U,{headers:this.headers,jwt:(R=(E=N.session)===null||E===void 0?void 0:E.access_token)!==null&&R!==void 0?R:void 0})});if(p)throw p;return Un()&&!(!((o=i.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(f?.url),this._returnResult({data:{provider:i.provider,url:f?.url},error:null})}catch(f){if(De(f))return this._returnResult({data:{provider:i.provider,url:null},error:f});throw f}}async linkIdentityIdToken(i){return await this._useSession(async o=>{var f;try{const{error:p,data:{session:m}}=o;if(p)throw p;const{options:b,provider:A,token:_,access_token:E,nonce:R}=i,N=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(f=m?.access_token)!==null&&f!==void 0?f:void 0,body:{provider:A,id_token:_,access_token:E,nonce:R,link_identity:!0,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:qr}),{data:L,error:U}=N;return U?this._returnResult({data:{user:null,session:null},error:U}):!L||!L.session||!L.user?this._returnResult({data:{user:null,session:null},error:new zs}):(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("USER_UPDATED",L.session)),this._returnResult({data:L,error:U}))}catch(p){if(await Ln(this.storage,`${this.storageKey}-code-verifier`),De(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(i){try{return await this._useSession(async o=>{var f,p;const{data:m,error:b}=o;if(b)throw b;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async _refreshAccessToken(i){const o=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(o,"begin");try{const f=Date.now();return await Xw(async p=>(p>0&&await qw(200*Math.pow(2,p-1)),this._debug(o,"refreshing attempt",p),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:qr})),(p,m)=>{const b=200*Math.pow(2,p);return m&&pf(m)&&Date.now()+b-f<Ys})}catch(f){if(this._debug(o,"error",f),De(f))return this._returnResult({data:{session:null,user:null},error:f});throw f}finally{this._debug(o,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,o){const f=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",o,"url",f),Un()&&!o.skipBrowserRedirect&&window.location.assign(f),{data:{provider:i,url:f},error:null}}async _recoverAndRefresh(){var i,o;const f="#_recoverAndRefresh()";this._debug(f,"begin");try{const p=await Za(this.storage,this.storageKey);if(p&&this.userStorage){let b=await Za(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:p.user},await Ws(this.userStorage,this.storageKey+"-user",b)),p.user=(i=b?.user)!==null&&i!==void 0?i:xf()}else if(p&&!p.user&&!p.user){const b=await Za(this.storage,this.storageKey+"-user");b&&b?.user?(p.user=b.user,await Ln(this.storage,this.storageKey+"-user"),await Ws(this.storage,this.storageKey,p)):p.user=xf()}if(this._debug(f,"session from storage",p),!this._isValidSession(p)){this._debug(f,"session is not valid"),p!==null&&await this._removeSession();return}const m=((o=p.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<gf;if(this._debug(f,`session has${m?"":" not"} expired with margin of ${gf}s`),m){if(this.autoRefreshToken&&p.refresh_token){const{error:b}=await this._callRefreshToken(p.refresh_token);b&&(console.error(b),pf(b)||(this._debug(f,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:A}=await this._getUser(p.access_token);!A&&b?.user?(p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(f,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(f,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(f,"error",p),console.error(p);return}finally{this._debug(f,"end")}}async _callRefreshToken(i){var o,f;if(!i)throw new yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new ac;const{data:m,error:b}=await this._refreshAccessToken(i);if(b)throw b;if(!m.session)throw new yr;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const A={data:m.session,error:null};return this.refreshingDeferred.resolve(A),A}catch(m){if(this._debug(p,"error",m),De(m)){const b={data:null,error:m};return pf(m)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(b),b}throw(f=this.refreshingDeferred)===null||f===void 0||f.reject(m),m}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(i,o,f=!0){const p=`#_notifyAllSubscribers(${i})`;this._debug(p,"begin",o,`broadcast = ${f}`);try{this.broadcastChannel&&f&&this.broadcastChannel.postMessage({event:i,session:o});const m=[],b=Array.from(this.stateChangeEmitters.values()).map(async A=>{try{await A.callback(i,o)}catch(_){m.push(_)}});if(await Promise.all(b),m.length>0){for(let A=0;A<m.length;A+=1)console.error(m[A]);throw m[0]}}finally{this._debug(p,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await Ln(this.storage,`${this.storageKey}-code-verifier`);const o=Object.assign({},i),f=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!f&&o.user&&await Ws(this.userStorage,this.storageKey+"-user",{user:o.user});const p=Object.assign({},o);delete p.user;const m=Og(p);await Ws(this.storage,this.storageKey,m)}else{const p=Og(o);await Ws(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ln(this.storage,this.storageKey),await Ln(this.storage,this.storageKey+"-code-verifier"),await Ln(this.storage,this.storageKey+"-user"),this.userStorage&&await Ln(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&Un()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),Ys);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i);const o=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=o,o&&typeof o=="object"&&typeof o.unref=="function"?o.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(o)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i);const o=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,o&&clearTimeout(o)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async o=>{const{data:{session:f}}=o;if(!f||!f.refresh_token||!f.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((f.expires_at*1e3-i)/Ys);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Ys}ms, refresh threshold is ${Of} ticks`),p<=Of&&await this._callRefreshToken(f.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof R2)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(i){this._debug("#visibilityChangedCallback","error",i)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const o=`#_onVisibilityChanged(${i})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,o,f){const p=[`provider=${encodeURIComponent(o)}`];if(f?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(f.redirectTo)}`),f?.scopes&&p.push(`scopes=${encodeURIComponent(f.scopes)}`),this.flowType==="pkce"){const[m,b]=await Hs(this.storage,this.storageKey),A=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(b)}`});p.push(A.toString())}if(f?.queryParams){const m=new URLSearchParams(f.queryParams);p.push(m.toString())}return f?.skipBrowserRedirect&&p.push(`skip_http_redirect=${f.skipBrowserRedirect}`),`${i}?${p.join("&")}`}async _unenroll(i){try{return await this._useSession(async o=>{var f;const{data:p,error:m}=o;return m?this._returnResult({data:null,error:m}):await He(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token})})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async _enroll(i){try{return await this._useSession(async o=>{var f,p;const{data:m,error:b}=o;if(b)return this._returnResult({data:null,error:b});const A=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:_,error:E}=await He(this.fetch,"POST",`${this.url}/factors`,{body:A,headers:this.headers,jwt:(f=m?.session)===null||f===void 0?void 0:f.access_token});return E?this._returnResult({data:null,error:E}):(i.factorType==="totp"&&_.type==="totp"&&(!((p=_?.totp)===null||p===void 0)&&p.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async _verify(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async o=>{var f;const{data:p,error:m}=o;if(m)return this._returnResult({data:null,error:m});const b=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?vb(i.webauthn.credential_response):Eb(i.webauthn.credential_response)})}:{code:i.code}),{data:A,error:_}=await He(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:b,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+A.expires_in},A)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",A),this._returnResult({data:A,error:_}))})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}})}async _challenge(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async o=>{var f;const{data:p,error:m}=o;if(m)return this._returnResult({data:null,error:m});const b=await He(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});if(b.error)return b;const{data:A}=b;if(A.type!=="webauthn")return{data:A,error:null};switch(A.webauthn.type){case"create":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:wb(A.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:bb(A.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}})}async _challengeAndVerify(i){const{data:o,error:f}=await this._challenge({factorId:i.factorId});return f?this._returnResult({data:null,error:f}):await this._verify({factorId:i.factorId,challengeId:o.id,code:i.code})}async _listFactors(){var i;const{data:{user:o},error:f}=await this.getUser();if(f)return{data:null,error:f};const p={all:[],phone:[],totp:[],webauthn:[]};for(const m of(i=o?.factors)!==null&&i!==void 0?i:[])p.all.push(m),m.status==="verified"&&p[m.factor_type].push(m);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(i){var o,f,p,m;if(i)try{const{payload:U}=Vu(i);let V=null;U.aal&&(V=U.aal);let G=V;const{data:{user:te},error:le}=await this.getUser(i);if(le)return this._returnResult({data:null,error:le});((f=(o=te?.factors)===null||o===void 0?void 0:o.filter(pe=>pe.status==="verified"))!==null&&f!==void 0?f:[]).length>0&&(G="aal2");const Y=U.amr||[];return{data:{currentLevel:V,nextLevel:G,currentAuthenticationMethods:Y},error:null}}catch(U){if(De(U))return this._returnResult({data:null,error:U});throw U}const{data:{session:b},error:A}=await this.getSession();if(A)return this._returnResult({data:null,error:A});if(!b)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=Vu(b.access_token);let E=null;_.aal&&(E=_.aal);let R=E;((m=(p=b.user.factors)===null||p===void 0?void 0:p.filter(U=>U.status==="verified"))!==null&&m!==void 0?m:[]).length>0&&(R="aal2");const L=_.amr||[];return{data:{currentLevel:E,nextLevel:R,currentAuthenticationMethods:L},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async o=>{const{data:{session:f},error:p}=o;return p?this._returnResult({data:null,error:p}):f?await He(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:f.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new yr})})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async _approveAuthorization(i,o){try{return await this._useSession(async f=>{const{data:{session:p},error:m}=f;if(m)return this._returnResult({data:null,error:m});if(!p)return this._returnResult({data:null,error:new yr});const b=await He(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:A=>({data:A,error:null})});return b.data&&b.data.redirect_url&&Un()&&!o?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(De(f))return this._returnResult({data:null,error:f});throw f}}async _denyAuthorization(i,o){try{return await this._useSession(async f=>{const{data:{session:p},error:m}=f;if(m)return this._returnResult({data:null,error:m});if(!p)return this._returnResult({data:null,error:new yr});const b=await He(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:A=>({data:A,error:null})});return b.data&&b.data.redirect_url&&Un()&&!o?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(De(f))return this._returnResult({data:null,error:f});throw f}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:o},error:f}=i;return f?this._returnResult({data:null,error:f}):o?await He(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new yr})})}catch(i){if(De(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async o=>{const{data:{session:f},error:p}=o;return p?this._returnResult({data:null,error:p}):f?(await He(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:f.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yr})})}catch(o){if(De(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(i,o={keys:[]}){let f=o.keys.find(A=>A.kid===i);if(f)return f;const p=Date.now();if(f=this.jwks.keys.find(A=>A.kid===i),f&&this.jwks_cached_at+Iw>p)return f;const{data:m,error:b}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=p,f=m.keys.find(A=>A.kid===i),!f)?null:f}async getClaims(i,o={}){try{let f=i;if(!f){const{data:U,error:V}=await this.getSession();if(V||!U.session)return this._returnResult({data:null,error:V});f=U.session.access_token}const{header:p,payload:m,signature:b,raw:{header:A,payload:_}}=Vu(f);o?.allowExpired||$w(m.exp);const E=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,o?.keys?{keys:o.keys}:o?.jwks);if(!E){const{error:U}=await this.getUser(f);if(U)throw U;return{data:{claims:m,header:p,signature:b},error:null}}const R=eb(p.alg),N=await crypto.subtle.importKey("jwk",E,R,!0,["verify"]);if(!await crypto.subtle.verify(R,N,b,Fw(`${A}.${_}`)))throw new If("Invalid JWT signature");return{data:{claims:m,header:p,signature:b},error:null}}catch(f){if(De(f))return this._returnResult({data:null,error:f});throw f}}}ho.nextInstanceID={};const Ib=ho,Db="2.96.0";let to="";typeof Deno<"u"?to="deno":typeof document<"u"?to="web":typeof navigator<"u"&&navigator.product==="ReactNative"?to="react-native":to="node";const Mb={"X-Client-Info":`supabase-js-${to}/${Db}`},Bb={headers:Mb},kb={schema:"public"},Lb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ub={};function fo(l){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},fo(l)}function jb(l,i){if(fo(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var f=o.call(l,i);if(fo(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function Pb(l){var i=jb(l,"string");return fo(i)=="symbol"?i:i+""}function Fb(l,i,o){return(i=Pb(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function Lg(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(l);i&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,f)}return o}function an(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Lg(Object(o),!0).forEach(function(f){Fb(l,f,o[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):Lg(Object(o)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(o,f))})}return l}const zb=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),Hb=()=>Headers,Gb=(l,i,o)=>{const f=zb(o),p=Hb();return async(m,b)=>{var A;const _=(A=await i())!==null&&A!==void 0?A:l;let E=new p(b?.headers);return E.has("apikey")||E.set("apikey",l),E.has("Authorization")||E.set("Authorization",`Bearer ${_}`),f(m,an(an({},b),{},{headers:E}))}};function Vb(l){return l.endsWith("/")?l:l+"/"}function qb(l,i){var o,f;const{db:p,auth:m,realtime:b,global:A}=l,{db:_,auth:E,realtime:R,global:N}=i,L={db:an(an({},_),p),auth:an(an({},E),m),realtime:an(an({},R),b),storage:{},global:an(an(an({},N),A),{},{headers:an(an({},(o=N?.headers)!==null&&o!==void 0?o:{}),(f=A?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return l.accessToken?L.accessToken=l.accessToken:delete L.accessToken,L}function Xb(l){const i=l?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Vb(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yb=class extends Ib{constructor(l){super(l)}},Wb=class{constructor(l,i,o){var f,p;this.supabaseUrl=l,this.supabaseKey=i;const m=Xb(l);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const b=`sb-${m.hostname.split(".")[0]}-auth-token`,A={db:kb,realtime:Ub,auth:an(an({},Lb),{},{storageKey:b}),global:Bb},_=qb(o??{},A);if(this.storageKey=(f=_.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(p=_.global.headers)!==null&&p!==void 0?p:{},_.accessToken)this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(R,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var E;this.auth=this._initSupabaseAuthClient((E=_.auth)!==null&&E!==void 0?E:{},this.headers,_.global.fetch)}this.fetch=Gb(i,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(an({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(R=>this.realtime.setAuth(R)).catch(R=>console.warn("Failed to set initial Realtime auth token:",R)),this.rest=new My(new URL("rest/v1",m).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch,timeout:_.db.timeout,urlLengthLimit:_.db.urlLengthLimit}),this.storage=new Cw(this.storageUrl.href,this.headers,this.fetch,o?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new Sy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,i={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(l,i,o)}channel(l,i={config:{}}){return this.realtime.channel(l,i)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var l=this,i,o;if(l.accessToken)return await l.accessToken();const{data:f}=await l.auth.getSession();return(i=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:l.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:i,detectSessionInUrl:o,storage:f,userStorage:p,storageKey:m,flowType:b,lock:A,debug:_,throwOnError:E},R,N){const L={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yb({url:this.authUrl.href,headers:an(an({},L),R),storageKey:m,autoRefreshToken:l,persistSession:i,detectSessionInUrl:o,storage:f,userStorage:p,flowType:b,lock:A,debug:_,throwOnError:E,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(U=>U.toLowerCase()==="authorization")})}_initRealtimeClient(l){return new Zy(this.realtimeUrl.href,an(an({},l),{},{params:an(an({},{apikey:this.supabaseKey}),l?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i?.access_token)})}_handleTokenChanged(l,i,o){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):l==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const D2=(l,i,o)=>new Wb(l,i,o);function Kb(){if(typeof window<"u")return!1;const l=globalThis.process;if(!l)return!1;const i=l.version;if(i==null)return!1;const o=i.match(/^v(\d+)\./);return o?parseInt(o[1],10)<=18:!1}Kb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const M2="https://hckfizhzvslhyxsaftnx.supabase.co",B2="sb_publishable_mWORlipYfNbwlhdgq6WM5g_lEiFxWMW",sn=D2(M2,B2),k2=W.createContext({session:null,user:null,role:null,loading:!0,signOut:async()=>{}}),Zb=({children:l})=>{const[i,o]=W.useState(null),[f,p]=W.useState(null),[m,b]=W.useState(null),[A,_]=W.useState(!1);console.log("AuthProvider initializing. Supabase client present?",!!sn),W.useEffect(()=>{let N=!0;console.log("AuthProvider mounted");const L=setTimeout(()=>{N&&A&&(console.warn("Force stop loading (timeout)"),_(!1))},3e3);sn.auth.getSession().then(({data:{session:V}})=>{console.log("Supabase session checked",V),N&&(o(V),p(V?.user??null),V?.user?E(V.user.id):_(!1))}).catch(()=>{console.error("Session check failed"),N&&_(!1)});const{data:{subscription:U}}=sn.auth.onAuthStateChange((V,G)=>{N&&(o(G),p(G?.user??null),G?.user?E(G.user.id):(b(null),_(!1)))});return()=>{N=!1,U.unsubscribe(),clearTimeout(L)}},[]);const E=async N=>{try{const{data:L}=await sn.from("profiles").select("role").eq("id",N).single();L?b(L.role):console.warn("No profile found for user")}catch{}finally{_(!1)}},R=async()=>{await sn.auth.signOut(),b(null),p(null),o(null)};return k.jsx(k2.Provider,{value:{session:i,user:f,role:m,loading:A,signOut:R},children:l})},sc=()=>W.useContext(k2),Qb=()=>{const[l,i]=sp.useState(!1),{role:o}=sc();return k.jsxs("div",{className:"flex h-screen bg-gray-100",children:[l&&k.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 lg:hidden",onClick:()=>i(!1)}),k.jsxs("aside",{className:`fixed z-30 inset-y-0 left-0 w-64 bg-white shadow-lg transform transition-transform duration-300 lg:translate-x-0 lg:static lg:inset-0 ${l?"translate-x-0":"-translate-x-full"}`,children:[k.jsx("div",{className:"flex items-center justify-center h-16 bg-blue-600 text-white font-bold text-xl",children:"Hpital Inventaire"}),k.jsxs("nav",{className:"mt-5 px-4 space-y-2",children:[k.jsxs(Ks,{to:"/",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[k.jsx(iy,{className:"w-5 h-5 mr-3"}),"Tableau de bord"]}),k.jsxs(Ks,{to:"/materiels",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[k.jsx(cy,{className:"w-5 h-5 mr-3"}),"Matriels"]}),k.jsxs(Ks,{to:"/inventaire",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[k.jsx(ny,{className:"w-5 h-5 mr-3"}),"Campagne Inventaire"]}),o==="admin"&&k.jsxs(Ks,{to:"/users",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[k.jsx(m2,{className:"w-5 h-5 mr-3"}),"Agents"]}),k.jsxs("button",{onClick:()=>{sn.auth.signOut(),i(!1)},className:"flex w-full items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md mt-4",children:[k.jsx("span",{className:"w-5 h-5 mr-3",children:""}),"Dconnexion"]})]})]}),k.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[k.jsxs("header",{className:"flex items-center justify-between h-16 bg-white shadow px-4 lg:hidden",children:[k.jsx("button",{onClick:()=>i(!0),className:"text-gray-500 focus:outline-none",children:k.jsx(oy,{className:"w-6 h-6"})}),k.jsx("span",{className:"font-semibold text-gray-700",children:"Inventaire"})]}),k.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4",children:k.jsx(u2,{})})]})]})},go={getAll:async()=>{const{data:l,error:i}=await sn.from("materiels").select("*, categories(code, libelle)").order("created_at",{ascending:!1});if(i)throw i;return l},create:async l=>{const i={...l};i.date_acquisition||delete i.date_acquisition,i.categorie_id&&(i.categorie_id=parseInt(i.categorie_id,10));const{data:o}=await sn.from("categories").select("code").eq("id",i.categorie_id).single(),f=o?.code||"INC",m=`PSY-${new Date().getFullYear()}-${f}`,{data:b}=await sn.from("materiels").select("numero_inventaire").ilike("numero_inventaire",`${m}-%`).order("numero_inventaire",{ascending:!1}).limit(1).single();let A=1;if(b){const N=b.numero_inventaire.split("-"),L=parseInt(N[3]);isNaN(L)||(A=L+1)}const _=`${m}-${A.toString().padStart(4,"0")}`,{data:E,error:R}=await sn.from("materiels").insert([{...i,numero_inventaire:_}]).select().single();if(R)throw console.error("Supabase Create Error:",R),R;return E},uploadPhoto:async l=>{const i=l.name.split(".").pop(),f=`${`${Math.random()}.${i}`}`,{error:p}=await sn.storage.from("materiel-photos").upload(f,l);if(p)throw p;const{data:m}=sn.storage.from("materiel-photos").getPublicUrl(f);return m.publicUrl},getBarcodeUrl:l=>`https://bwipjs-api.metafloor.com/?bcid=code128&text=${l}&scale=3&includetext`},Jb={getAll:async()=>{const{data:l,error:i}=await sn.from("categories").select("*");if(i)throw i;return l}},eo={create:async l=>{const{data:i,error:o}=await sn.from("inventaires").insert([l]).select().single();if(o)throw o;return i},getMaterielByCode:async l=>{const{data:i,error:o}=await sn.from("materiels").select("*").eq("numero_inventaire",l).single();if(o||!i)throw new Error("Matriel non trouv");return i},confirmScan:async l=>{const{data:i}=await sn.from("inventaire_lignes").select("id").eq("inventaire_id",l.inventaire_id).eq("materiel_id",l.materiel_id).single();if(i)throw new Error("Dj scann dans cet inventaire");const{data:o,error:f}=await sn.from("inventaire_lignes").insert([{inventaire_id:l.inventaire_id,materiel_id:l.materiel_id,scanne_par:l.user_id,presence:!0}]).select().single();if(f)throw f;return o},getAll:async()=>{const{data:l,error:i}=await sn.from("inventaires").select("*").order("date_debut",{ascending:!1});if(i)throw i;return l},getStats:async(l,i)=>{const{count:o,error:f}=await sn.from("inventaire_lignes").select("*",{count:"exact",head:!0}).eq("inventaire_id",l).eq("scanne_par",i);if(f)throw f;return{scannedCount:o||0}}},Ug={getAgents:async()=>{const{data:l,error:i}=await sn.from("profiles").select("*").eq("role","agent");if(i)throw i;return l},createAgent:async(l,i,o)=>{const f=D2(M2,B2),{data:p,error:m}=await f.auth.signUp({email:l,password:i,options:{data:{role:"agent",full_name:o}}});if(m)throw m;if(p.user){const{error:b}=await sn.from("profiles").update({role:"agent",email:l}).eq("id",p.user.id);b&&console.error("Error updating profile role:",b)}return p}},$b=()=>{const[l,i]=W.useState({totalMateriels:0,byCategory:{},byStatus:{}});W.useEffect(()=>{o()},[]);const o=async()=>{try{const f=await go.getAll(),p={},m={};f.forEach(b=>{const A=b.categories?.libelle||"Inconnu";p[A]=(p[A]||0)+1;const _=b.statut||"Inconnu";m[_]=(m[_]||0)+1}),i({totalMateriels:f.length,byCategory:p,byStatus:m})}catch(f){console.error("Erreur chargement stats",f)}};return k.jsxs("div",{children:[k.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Tableau de bord"}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:k.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[k.jsx("h2",{className:"text-xl text-gray-700 font-semibold mb-2",children:"Total Matriels"}),k.jsx("p",{className:"text-4xl font-bold text-blue-600",children:l.totalMateriels})]})}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[k.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[k.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Par Catgorie"}),k.jsx("ul",{children:Object.entries(l.byCategory).map(([f,p])=>k.jsxs("li",{className:"flex justify-between py-2 border-b",children:[k.jsx("span",{children:f}),k.jsx("span",{className:"font-bold",children:p})]},f))})]}),k.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[k.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Par Statut"}),k.jsx("ul",{children:Object.entries(l.byStatus).map(([f,p])=>k.jsxs("li",{className:"flex justify-between py-2 border-b",children:[k.jsx("span",{children:f}),k.jsx("span",{className:"font-bold",children:p})]},f))})]})]})]})},ev=({onSuccess:l})=>{const[i,o]=W.useState([]),[f,p]=W.useState({categorie_id:"",nom:"",marque:"",modele:"",numero_serie:"",date_acquisition:"",service:"",statut:"En service",commentaires:"",photo_url:""}),[m,b]=W.useState(!1);W.useEffect(()=>{Jb.getAll().then(E=>o(E))},[]);const A=async E=>{if(!(!E.target.files||E.target.files.length===0)){b(!0);try{const R=E.target.files[0],N=await go.uploadPhoto(R);p({...f,photo_url:N})}catch(R){console.error(R),alert("Erreur upload photo")}finally{b(!1)}}},_=async E=>{E.preventDefault();try{await go.create(f),l(),p({...f,nom:"",numero_serie:"",photo_url:""})}catch(R){alert("Erreur lors de la cration"),console.error(R)}};return k.jsxs("form",{onSubmit:_,className:"space-y-4",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Catgorie"}),k.jsxs("select",{className:"w-full border p-2 rounded",value:f.categorie_id,onChange:E=>p({...f,categorie_id:E.target.value}),required:!0,children:[k.jsx("option",{value:"",children:"Slectionner..."}),i.map(E=>k.jsxs("option",{value:E.id,children:[E.libelle," (",E.code,")"]},E.id))]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Nom matriel"}),k.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f.nom,onChange:E=>p({...f,nom:E.target.value}),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Marque"}),k.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f.marque,onChange:E=>p({...f,marque:E.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Modle"}),k.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f.modele,onChange:E=>p({...f,modele:E.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Numro Srie"}),k.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f.numero_serie,onChange:E=>p({...f,numero_serie:E.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Service / Emplacement"}),k.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f.service,onChange:E=>p({...f,service:E.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Date d'acquisition"}),k.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:f.date_acquisition,onChange:E=>p({...f,date_acquisition:E.target.value})})]}),k.jsxs("div",{className:"md:col-span-2",children:[k.jsx("label",{className:"block text-sm font-medium",children:"Photo"}),k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:A,className:`block w-full text-sm text-gray-500\r
                            file:mr-4 file:py-2 file:px-4\r
                            file:rounded-full file:border-0\r
                            file:text-sm file:font-semibold\r
                            file:bg-blue-50 file:text-blue-700\r
                            hover:file:bg-blue-100`,disabled:m}),m&&k.jsx("span",{className:"text-gray-500 text-sm",children:"Upload en cours..."}),f.photo_url&&k.jsx("img",{src:f.photo_url,alt:"Aperu",className:"h-16 w-16 object-cover rounded"})]})]})]}),k.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:m,children:m?"Patientez...":"Enregistrer"})]})},jg=()=>{const[l,i]=W.useState([]),[o,f]=W.useState(!1),{role:p}=sc(),m=async()=>{try{const A=await go.getAll();i(A)}catch(A){console.error(A)}};W.useEffect(()=>{m()},[]);const b=A=>{const _=go.getBarcodeUrl(A),E=window.open("","_blank");E&&(E.document.write(`<img src="${_}" onload="window.print();" />`),E.document.close())};return k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Matriels"}),p==="admin"&&k.jsx("button",{onClick:()=>f(!o),className:"bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700",children:o?"Fermer":"Ajouter un matriel"})]}),o&&p==="admin"&&k.jsxs("div",{className:"bg-white p-6 rounded shadow mb-6 animate-fade-in",children:[k.jsx("h2",{className:"text-xl mb-4",children:"Nouveau Matriel"}),k.jsx(ev,{onSuccess:()=>{f(!1),m()}})]}),k.jsx("div",{className:"bg-white rounded shadow overflow-x-auto",children:k.jsxs("table",{className:"min-w-full",children:[k.jsx("thead",{children:k.jsxs("tr",{className:"bg-gray-50 border-b",children:[k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N Inventaire"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),k.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tiquette"})]})}),k.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(A=>k.jsxs("tr",{children:[k.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.photo_url?k.jsx("img",{src:A.photo_url,alt:"Matriel",className:"h-10 w-10 rounded-full object-cover"}):k.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"No"})}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:A.numero_inventaire}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.categories?.code}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:A.nom}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.service}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.statut==="En service"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.statut})}),k.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.jsxs("button",{onClick:()=>b(A.numero_inventaire),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[k.jsx(gy,{className:"w-4 h-4 mr-1"})," Barcode"]})})]},A.id))})]})})]})};var Se;(function(l){l[l.QR_CODE=0]="QR_CODE",l[l.AZTEC=1]="AZTEC",l[l.CODABAR=2]="CODABAR",l[l.CODE_39=3]="CODE_39",l[l.CODE_93=4]="CODE_93",l[l.CODE_128=5]="CODE_128",l[l.DATA_MATRIX=6]="DATA_MATRIX",l[l.MAXICODE=7]="MAXICODE",l[l.ITF=8]="ITF",l[l.EAN_13=9]="EAN_13",l[l.EAN_8=10]="EAN_8",l[l.PDF_417=11]="PDF_417",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Se||(Se={}));var Pg=new Map([[Se.QR_CODE,"QR_CODE"],[Se.AZTEC,"AZTEC"],[Se.CODABAR,"CODABAR"],[Se.CODE_39,"CODE_39"],[Se.CODE_93,"CODE_93"],[Se.CODE_128,"CODE_128"],[Se.DATA_MATRIX,"DATA_MATRIX"],[Se.MAXICODE,"MAXICODE"],[Se.ITF,"ITF"],[Se.EAN_13,"EAN_13"],[Se.EAN_8,"EAN_8"],[Se.PDF_417,"PDF_417"],[Se.RSS_14,"RSS_14"],[Se.RSS_EXPANDED,"RSS_EXPANDED"],[Se.UPC_A,"UPC_A"],[Se.UPC_E,"UPC_E"],[Se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fg;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.URL=1]="URL"})(Fg||(Fg={}));function tv(l){return Object.values(Se).includes(l)}var Qu;(function(l){l[l.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",l[l.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Qu||(Qu={}));var nv=(function(){function l(){}return l.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",l.SCAN_DEFAULT_FPS=2,l.DEFAULT_DISABLE_FLIP=!1,l.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,l.DEFAULT_SUPPORTED_SCAN_TYPE=[Qu.SCAN_TYPE_CAMERA,Qu.SCAN_TYPE_FILE],l})(),L2=(function(){function l(i,o){this.format=i,this.formatName=o}return l.prototype.toString=function(){return this.formatName},l.create=function(i){if(!Pg.has(i))throw"".concat(i," not in html5QrcodeSupportedFormatsTextMap");return new l(i,Pg.get(i))},l})(),zg=(function(){function l(){}return l.createFromText=function(i){var o={text:i};return{decodedText:i,result:o}},l.createFromQrcodeResult=function(i){return{decodedText:i.text,result:i}},l})(),Df;(function(l){l[l.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",l[l.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",l[l.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Df||(Df={}));var rv=(function(){function l(){}return l.createFrom=function(i){return{errorMessage:i,type:Df.UNKWOWN_ERROR}},l})(),iv=(function(){function l(i){this.verbose=i}return l.prototype.log=function(i){this.verbose&&console.log(i)},l.prototype.warn=function(i){this.verbose&&console.warn(i)},l.prototype.logError=function(i,o){(this.verbose||o===!0)&&console.error(i)},l.prototype.logErrors=function(i){if(i.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(i)},l})();function Di(l){return typeof l>"u"||l===null}var Qs=(function(){function l(){}return l.codeParseError=function(i){return"QR code parse error, error = ".concat(i)},l.errorGettingUserMedia=function(i){return"Error getting userMedia, error = ".concat(i)},l.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},l.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},l.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},l.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},l.scannerPaused=function(){return"Scanner paused"},l})(),U2=(function(){function l(){}return l.isMediaStreamConstraintsValid=function(i,o){if(typeof i!="object"){var f=typeof i;return o.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(p),b=Object.keys(i),A=0,_=b;A<_.length;A++){var E=_[A];if(m.has(E))return o.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},l})(),no={exports:{}},av=no.exports,Hg;function sv(){return Hg||(Hg=1,(function(l,i){(function(o,f){f(i)})(av,(function(o){function f(T){return T==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var r in t)t.hasOwnProperty(r)&&(T[r]=t[r])};function m(T,t){p(T,t);function r(){this.constructor=T}T.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function b(T,t){var r=Object.setPrototypeOf;r?r(T,t):T.__proto__=t}function A(T,t){t===void 0&&(t=T.constructor);var r=Error.captureStackTrace;r&&r(T,t)}var _=(function(T){m(t,T);function t(r){var a=this.constructor,u=T.call(this,r)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1}),b(u,a.prototype),A(u),u}return t})(Error);class E extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}E.kind="Exception";class R extends E{}R.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class L{constructor(t){if(this.binarizer=t,t===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,a,u){const c=this.binarizer.getLuminanceSource().crop(t,r,a,u);return new L(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new L(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new L(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends E{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class V{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(t,r,a,u,c){for(;c--;)a[u++]=t[r++]}static currentTimeMillis(){return Date.now()}}class te extends E{}te.kind="IndexOutOfBoundsException";class le extends te{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}le.kind="ArrayIndexOutOfBoundsException";class ${static fill(t,r){for(let a=0,u=t.length;a<u;a++)t[a]=r}static fillWithin(t,r,a,u){$.rangeCheck(t.length,r,a);for(let c=r;c<a;c++)t[c]=u}static rangeCheck(t,r,a){if(r>a)throw new N("fromIndex("+r+") > toIndex("+a+")");if(r<0)throw new le(r);if(a>t)throw new le(a)}static asList(...t){return t}static create(t,r,a){return Array.from({length:t}).map(c=>Array.from({length:r}).fill(a))}static createInt32Array(t,r,a){return Array.from({length:t}).map(c=>Int32Array.from({length:r}).fill(a))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let a=0,u=t.length;a<u;a++)if(t[a]!==r[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const a of t)r=31*r+a;return r}static fillUint8Array(t,r){for(let a=0;a!==t.length;a++)t[a]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const a=new Uint8Array(r);return a.set(t),a}return t.slice(0,r)}static copyOfRange(t,r,a){const u=a-r,c=new Int32Array(u);return G.arraycopy(t,r,c,0,u),c}static binarySearch(t,r,a){a===void 0&&(a=$.numberComparator);let u=0,c=t.length-1;for(;u<=c;){const d=c+u>>1,g=a(r,t[d]);if(g>0)u=d+1;else if(g<0)c=d-1;else return d}return-u-1}static numberComparator(t,r){return t-r}}class Y{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let a=31;return r=t<<16,r!==0&&(a-=16,t=r),r=t<<8,r!==0&&(a-=8,t=r),r=t<<4,r!==0&&(a-=4,t=r),r=t<<2,r!==0&&(a-=2,t=r),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}Y.MIN_VALUE_32_BITS=-2147483648,Y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=pe.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=pe.makeArray(t);G.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const a=this.bits;let u=Math.floor(t/32),c=a[u];c&=~((1<<(t&31))-1);const d=a.length;for(;c===0;){if(++u===d)return r;c=a[u]}const g=u*32+Y.numberOfTrailingZeros(c);return g>r?r:g}getNextUnset(t){const r=this.size;if(t>=r)return r;const a=this.bits;let u=Math.floor(t/32),c=~a[u];c&=~((1<<(t&31))-1);const d=a.length;for(;c===0;){if(++u===d)return r;c=~a[u]}const g=u*32+Y.numberOfTrailingZeros(c);return g>r?r:g}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new N;if(r===t)return;r--;const a=Math.floor(t/32),u=Math.floor(r/32),c=this.bits;for(let d=a;d<=u;d++){const g=d>a?0:t&31,v=(2<<(d<u?31:r&31))-(1<<g);c[d]|=v}}clear(){const t=this.bits.length,r=this.bits;for(let a=0;a<t;a++)r[a]=0}isRange(t,r,a){if(r<t||t<0||r>this.size)throw new N;if(r===t)return!0;r--;const u=Math.floor(t/32),c=Math.floor(r/32),d=this.bits;for(let g=u;g<=c;g++){const y=g>u?0:t&31,S=(2<<(g<c?31:r&31))-(1<<y)&4294967295;if((d[g]&S)!==(a?S:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let a=r;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let a=0;a<r;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new N("Sizes don't match");const r=this.bits;for(let a=0,u=r.length;a<u;a++)r[a]^=t.bits[a]}toBytes(t,r,a,u){for(let c=0;c<u;c++){let d=0;for(let g=0;g<8;g++)this.get(t)&&(d|=1<<7-g),t++;r[a+c]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),a=r+1,u=this.bits;for(let c=0;c<a;c++){let d=u[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[r-c]=d}if(this.size!==a*32){const c=a*32-this.size;let d=t[0]>>>c;for(let g=1;g<a;g++){const y=t[g];d|=y<<32-c,t[g-1]=d,d=y>>>c}t[a-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof pe))return!1;const r=t;return this.size===r.size&&$.equals(this.bits,r.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let t="";for(let r=0,a=this.size;r<a;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new pe(this.size,this.bits.slice())}}var Be;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Be||(Be={}));var Ee=Be;class ee extends E{static getFormatInstance(){return new ee}}ee.kind="FormatException";var Re;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Re||(Re={}));class he{constructor(t,r,a,...u){this.valueIdentifier=t,this.name=a,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=u,he.VALUE_IDENTIFIER_TO_ECI.set(t,this),he.NAME_TO_ECI.set(a,this);const c=this.values;for(let d=0,g=c.length;d!==g;d++){const y=c[d];he.VALUES_TO_ECI.set(y,this)}for(const d of u)he.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new ee("incorect value");const r=he.VALUES_TO_ECI.get(t);if(r===void 0)throw new ee("incorect value");return r}static getCharacterSetECIByName(t){const r=he.NAME_TO_ECI.get(t);if(r===void 0)throw new ee("incorect value");return r}equals(t){if(!(t instanceof he))return!1;const r=t;return this.getName()===r.getName()}}he.VALUE_IDENTIFIER_TO_ECI=new Map,he.VALUES_TO_ECI=new Map,he.NAME_TO_ECI=new Map,he.Cp437=new he(Re.Cp437,Int32Array.from([0,2]),"Cp437"),he.ISO8859_1=new he(Re.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),he.ISO8859_2=new he(Re.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),he.ISO8859_3=new he(Re.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),he.ISO8859_4=new he(Re.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),he.ISO8859_5=new he(Re.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),he.ISO8859_6=new he(Re.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),he.ISO8859_7=new he(Re.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),he.ISO8859_8=new he(Re.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),he.ISO8859_9=new he(Re.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),he.ISO8859_10=new he(Re.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),he.ISO8859_11=new he(Re.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),he.ISO8859_13=new he(Re.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),he.ISO8859_14=new he(Re.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),he.ISO8859_15=new he(Re.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),he.ISO8859_16=new he(Re.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),he.SJIS=new he(Re.SJIS,20,"SJIS","Shift_JIS"),he.Cp1250=new he(Re.Cp1250,21,"Cp1250","windows-1250"),he.Cp1251=new he(Re.Cp1251,22,"Cp1251","windows-1251"),he.Cp1252=new he(Re.Cp1252,23,"Cp1252","windows-1252"),he.Cp1256=new he(Re.Cp1256,24,"Cp1256","windows-1256"),he.UnicodeBigUnmarked=new he(Re.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),he.UTF8=new he(Re.UTF8,26,"UTF8","UTF-8"),he.ASCII=new he(Re.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),he.Big5=new he(Re.Big5,28,"Big5"),he.GB18030=new he(Re.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),he.EUC_KR=new he(Re.EUC_KR,30,"EUC_KR","EUC-KR");class ke extends E{}ke.kind="UnsupportedOperationException";class it{static decode(t,r){const a=this.encodingName(r);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!it.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const a=this.encodingName(r);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof he?t:he.getCharacterSetECIByName(t)}static decodeFallback(t,r){const a=this.encodingCharacterSet(r);if(it.isDecodeFallbackSupported(a)){let u="";for(let c=0,d=t.length;c<d;c++){let g=t[c].toString(16);g.length<2&&(g="0"+g),u+="%"+g}return decodeURIComponent(u)}if(a.equals(he.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new ke(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(he.UTF8)||t.equals(he.ISO8859_1)||t.equals(he.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),u=[];for(let c=0;c<a.length;c++)u.push(a[c].charCodeAt(0));return new Uint8Array(u)}}class Ne{static castAsNonUtf8Char(t,r=null){const a=r?r.getName():this.ISO88591;return it.decode(new Uint8Array([t]),a)}static guessEncoding(t,r){if(r!=null&&r.get(Ee.CHARACTER_SET)!==void 0)return r.get(Ee.CHARACTER_SET).toString();const a=t.length;let u=!0,c=!0,d=!0,g=0,y=0,v=0,S=0,O=0,I=0,B=0,P=0,F=0,X=0,ne=0;const ye=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let xe=0;xe<a&&(u||c||d);xe++){const me=t[xe]&255;d&&(g>0?(me&128)===0?d=!1:g--:(me&128)!==0&&((me&64)===0?d=!1:(g++,(me&32)===0?y++:(g++,(me&16)===0?v++:(g++,(me&8)===0?S++:d=!1))))),u&&(me>127&&me<160?u=!1:me>159&&(me<192||me===215||me===247)&&ne++),c&&(O>0?me<64||me===127||me>252?c=!1:O--:me===128||me===160||me>239?c=!1:me>160&&me<224?(I++,P=0,B++,B>F&&(F=B)):me>127?(O++,B=0,P++,P>X&&(X=P)):(B=0,P=0))}return d&&g>0&&(d=!1),c&&O>0&&(c=!1),d&&(ye||y+v+S>0)?Ne.UTF8:c&&(Ne.ASSUME_SHIFT_JIS||F>=3||X>=3)?Ne.SHIFT_JIS:u&&c?F===2&&I===2||ne*10>=a?Ne.SHIFT_JIS:Ne.ISO88591:u?Ne.ISO88591:c?Ne.SHIFT_JIS:d?Ne.UTF8:Ne.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let a=-1;function u(d,g,y,v,S,O){if(d==="%%")return"%";if(r[++a]===void 0)return;d=v?parseInt(v.substr(1)):void 0;let I=S?parseInt(S.substr(1)):void 0,B;switch(O){case"s":B=r[a];break;case"c":B=r[a][0];break;case"f":B=parseFloat(r[a]).toFixed(d);break;case"p":B=parseFloat(r[a]).toPrecision(d);break;case"e":B=parseFloat(r[a]).toExponential(d);break;case"x":B=parseInt(r[a]).toString(I||16);break;case"d":B=parseFloat(parseInt(r[a],I||10).toPrecision(d)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(I);let P=parseInt(y),F=y&&y[0]+""=="0"?"0":" ";for(;B.length<P;)B=g!==void 0?B+F:F+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,u)}static getBytes(t,r){return it.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}Ne.SHIFT_JIS=he.SJIS.getName(),Ne.GB2312="GB2312",Ne.ISO88591=he.ISO8859_1.getName(),Ne.EUC_JP="EUC_JP",Ne.UTF8=he.UTF8.getName(),Ne.PLATFORM_DEFAULT_ENCODING=Ne.UTF8,Ne.ASSUME_SHIFT_JIS=!1;class at{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Ne.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,a){for(let u=r;r<r+a;u++)this.append(t[u]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Nt{constructor(t,r,a,u){if(this.width=t,this.height=r,this.rowSize=a,this.bits=u,r==null&&(r=t),this.height=r,t<1||r<1)throw new N("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,a=t[0].length,u=new Nt(a,r);for(let c=0;c<r;c++){const d=t[c];for(let g=0;g<a;g++)d[g]&&u.set(g,c)}return u}static parseFromString(t,r,a){if(t===null)throw new N("stringRepresentation cannot be null");const u=new Array(t.length);let c=0,d=0,g=-1,y=0,v=0;for(;v<t.length;)if(t.charAt(v)===`
`||t.charAt(v)==="\r"){if(c>d){if(g===-1)g=c-d;else if(c-d!==g)throw new N("row lengths do not match");d=c,y++}v++}else if(t.substring(v,v+r.length)===r)v+=r.length,u[c]=!0,c++;else if(t.substring(v,v+a.length)===a)v+=a.length,u[c]=!1,c++;else throw new N("illegal character encountered: "+t.substring(v));if(c>d){if(g===-1)g=c-d;else if(c-d!==g)throw new N("row lengths do not match");y++}const S=new Nt(g,y);for(let O=0;O<c;O++)u[O]&&S.set(Math.floor(O%g),Math.floor(O/g));return S}get(t,r){const a=r*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new N("input matrix dimensions do not match");const r=new pe(Math.floor(this.width/32)+1),a=this.rowSize,u=this.bits;for(let c=0,d=this.height;c<d;c++){const g=c*a,y=t.getRow(c,r).getBitArray();for(let v=0;v<a;v++)u[g+v]^=y[v]}}clear(){const t=this.bits,r=t.length;for(let a=0;a<r;a++)t[a]=0}setRegion(t,r,a,u){if(r<0||t<0)throw new N("Left and top must be nonnegative");if(u<1||a<1)throw new N("Height and width must be at least 1");const c=t+a,d=r+u;if(d>this.height||c>this.width)throw new N("The region must fit inside the matrix");const g=this.rowSize,y=this.bits;for(let v=r;v<d;v++){const S=v*g;for(let O=t;O<c;O++)y[S+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new pe(this.width):r.clear();const a=this.rowSize,u=this.bits,c=t*a;for(let d=0;d<a;d++)r.setBulk(d*32,u[c+d]);return r}setRow(t,r){G.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let a=new pe(t),u=new pe(t);for(let c=0,d=Math.floor((r+1)/2);c<d;c++)a=this.getRow(c,a),u=this.getRow(r-1-c,u),a.reverse(),u.reverse(),this.setRow(c,u),this.setRow(r-1-c,a)}getEnclosingRectangle(){const t=this.width,r=this.height,a=this.rowSize,u=this.bits;let c=t,d=r,g=-1,y=-1;for(let v=0;v<r;v++)for(let S=0;S<a;S++){const O=u[v*a+S];if(O!==0){if(v<d&&(d=v),v>y&&(y=v),S*32<c){let I=0;for(;(O<<31-I&4294967295)===0;)I++;S*32+I<c&&(c=S*32+I)}if(S*32+31>g){let I=31;for(;!(O>>>I);)I--;S*32+I>g&&(g=S*32+I)}}}return g<c||y<d?null:Int32Array.from([c,d,g-c+1,y-d+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let a=0;for(;a<r.length&&r[a]===0;)a++;if(a===r.length)return null;const u=a/t;let c=a%t*32;const d=r[a];let g=0;for(;(d<<31-g&4294967295)===0;)g++;return c+=g,Int32Array.from([c,u])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let a=r.length-1;for(;a>=0&&r[a]===0;)a--;if(a<0)return null;const u=Math.floor(a/t);let c=Math.floor(a%t)*32;const d=r[a];let g=31;for(;!(d>>>g);)g--;return c+=g,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Nt))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&$.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+$.hashCode(this.bits),t}toString(t="X ",r="  ",a=`
`){return this.buildToString(t,r,a)}buildToString(t,r,a){let u=new at;for(let c=0,d=this.height;c<d;c++){for(let g=0,y=this.width;g<y;g++)u.append(this.get(g,c)?t:r);u.append(a)}return u.toString()}clone(){return new Nt(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends E{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class ie extends V{constructor(t){super(t),this.luminances=ie.EMPTY,this.buckets=new Int32Array(ie.LUMINANCE_BUCKETS)}getBlackRow(t,r){const a=this.getLuminanceSource(),u=a.getWidth();r==null||r.getSize()<u?r=new pe(u):r.clear(),this.initArrays(u);const c=a.getRow(t,this.luminances),d=this.buckets;for(let y=0;y<u;y++)d[(c[y]&255)>>ie.LUMINANCE_SHIFT]++;const g=ie.estimateBlackPoint(d);if(u<3)for(let y=0;y<u;y++)(c[y]&255)<g&&r.set(y);else{let y=c[0]&255,v=c[1]&255;for(let S=1;S<u-1;S++){const O=c[S+1]&255;(v*4-y-O)/2<g&&r.set(S),y=v,v=O}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),a=t.getHeight(),u=new Nt(r,a);this.initArrays(r);const c=this.buckets;for(let y=1;y<5;y++){const v=Math.floor(a*y/5),S=t.getRow(v,this.luminances),O=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<O;I++){const B=S[I]&255;c[B>>ie.LUMINANCE_SHIFT]++}}const d=ie.estimateBlackPoint(c),g=t.getMatrix();for(let y=0;y<a;y++){const v=y*r;for(let S=0;S<r;S++)(g[v+S]&255)<d&&u.set(S,y)}return u}createBinarizer(t){return new ie(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let a=0;a<ie.LUMINANCE_BUCKETS;a++)r[a]=0}static estimateBlackPoint(t){const r=t.length;let a=0,u=0,c=0;for(let S=0;S<r;S++)t[S]>c&&(u=S,c=t[S]),t[S]>a&&(a=t[S]);let d=0,g=0;for(let S=0;S<r;S++){const O=S-u,I=t[S]*O*O;I>g&&(d=S,g=I)}if(u>d){const S=u;u=d,d=S}if(d-u<=r/16)throw new se;let y=d-1,v=-1;for(let S=d-1;S>u;S--){const O=S-u,I=O*O*(d-S)*(a-t[S]);I>v&&(y=S,v=I)}return y<<ie.LUMINANCE_SHIFT}}ie.LUMINANCE_BITS=5,ie.LUMINANCE_SHIFT=8-ie.LUMINANCE_BITS,ie.LUMINANCE_BUCKETS=1<<ie.LUMINANCE_BITS,ie.EMPTY=Uint8ClampedArray.from([0]);class fe extends ie{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),a=t.getHeight();if(r>=fe.MINIMUM_DIMENSION&&a>=fe.MINIMUM_DIMENSION){const u=t.getMatrix();let c=r>>fe.BLOCK_SIZE_POWER;(r&fe.BLOCK_SIZE_MASK)!==0&&c++;let d=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&d++;const g=fe.calculateBlackPoints(u,c,d,r,a),y=new Nt(r,a);fe.calculateThresholdForBlock(u,c,d,r,a,g,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,r,a,u,c,d,g){const y=c-fe.BLOCK_SIZE,v=u-fe.BLOCK_SIZE;for(let S=0;S<a;S++){let O=S<<fe.BLOCK_SIZE_POWER;O>y&&(O=y);const I=fe.cap(S,2,a-3);for(let B=0;B<r;B++){let P=B<<fe.BLOCK_SIZE_POWER;P>v&&(P=v);const F=fe.cap(B,2,r-3);let X=0;for(let ye=-2;ye<=2;ye++){const xe=d[I+ye];X+=xe[F-2]+xe[F-1]+xe[F]+xe[F+1]+xe[F+2]}const ne=X/25;fe.thresholdBlock(t,P,O,ne,u,g)}}}static cap(t,r,a){return t<r?r:t>a?a:t}static thresholdBlock(t,r,a,u,c,d){for(let g=0,y=a*c+r;g<fe.BLOCK_SIZE;g++,y+=c)for(let v=0;v<fe.BLOCK_SIZE;v++)(t[y+v]&255)<=u&&d.set(r+v,a+g)}static calculateBlackPoints(t,r,a,u,c){const d=c-fe.BLOCK_SIZE,g=u-fe.BLOCK_SIZE,y=new Array(a);for(let v=0;v<a;v++){y[v]=new Int32Array(r);let S=v<<fe.BLOCK_SIZE_POWER;S>d&&(S=d);for(let O=0;O<r;O++){let I=O<<fe.BLOCK_SIZE_POWER;I>g&&(I=g);let B=0,P=255,F=0;for(let ne=0,ye=S*u+I;ne<fe.BLOCK_SIZE;ne++,ye+=u){for(let xe=0;xe<fe.BLOCK_SIZE;xe++){const me=t[ye+xe]&255;B+=me,me<P&&(P=me),me>F&&(F=me)}if(F-P>fe.MIN_DYNAMIC_RANGE)for(ne++,ye+=u;ne<fe.BLOCK_SIZE;ne++,ye+=u)for(let xe=0;xe<fe.BLOCK_SIZE;xe++)B+=t[ye+xe]&255}let X=B>>fe.BLOCK_SIZE_POWER*2;if(F-P<=fe.MIN_DYNAMIC_RANGE&&(X=P/2,v>0&&O>0)){const ne=(y[v-1][O]+2*y[v][O-1]+y[v-1][O-1])/4;P<ne&&(X=ne)}y[v][O]=X}}return y}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ue{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,a,u){throw new ke("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ke("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ke("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new at;for(let a=0;a<this.height;a++){const u=this.getRow(a,t);for(let c=0;c<this.width;c++){const d=u[c]&255;let g;d<64?g="#":d<128?g="+":d<192?g=".":g=" ",r.append(g)}r.append(`
`)}return r.toString()}}class $e extends Ue{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const a=this.delegate.getRow(t,r),u=this.getWidth();for(let c=0;c<u;c++)a[c]=255-(a[c]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(r);for(let u=0;u<r;u++)a[u]=255-(t[u]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,a,u){return new $e(this.delegate.crop(t,r,a,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $e(this.delegate.rotateCounterClockwise45())}}class st extends Ue{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=st.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return st.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,a){const u=new Uint8ClampedArray(r*a);for(let c=0,d=0,g=t.length;c<g;c+=4,d++){let y;if(t[c+3]===0)y=255;else{const S=t[c],O=t[c+1],I=t[c+2];y=306*S+601*O+117*I+512>>10}u[d]=y}return u}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const a=this.getWidth(),u=t*a;return r===null?r=this.buffer.slice(u,u+a):(r.length<a&&(r=new Uint8ClampedArray(a)),r.set(this.buffer.slice(u,u+a))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,a,u){return super.crop(t,r,a,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),a=r.getContext("2d"),u=t*st.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*d),y=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*d);return r.width=g,r.height=y,a.translate(g/2,y/2),a.rotate(u),a.drawImage(this.canvas,c/-2,d/-2),this.buffer=st.makeBufferFromCanvasImageData(r),this}invert(){return new $e(this)}}st.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(t,r,a){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||Lu||self||window||void 0)&&(globalThis||Lu||self||window||void 0).__awaiter||function(T,t,r,a){function u(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function g(S){try{v(a.next(S))}catch(O){d(O)}}function y(S){try{v(a.throw(S))}catch(O){d(O)}}function v(S){S.done?c(S.value):u(S.value).then(g,y)}v((a=a.apply(T,t||[])).next())})};class ve{constructor(t,r=500,a){this.reader=t,this.timeBetweenScansMillis=r,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const a of t){const u=a.kind==="video"?"videoinput":a.kind;if(u!=="videoinput")continue;const c=a.deviceId||a.id,d=a.label||`Video device ${r.length+1}`,g=a.groupId,y={deviceId:c,label:d,kind:u,groupId:g};r.push(y)}return r})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new H(r.deviceId,r.label))})}findDeviceById(t){return oe(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return oe(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeOnceFromConstraints(u,r)})}decodeOnceFromConstraints(t,r){return oe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,r)})}decodeOnceFromStream(t,r){return oe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,r,a){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,a)})}decodeFromVideoDevice(t,r,a){return oe(this,void 0,void 0,function*(){let u;t?u={deviceId:{exact:t}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,r,a)})}decodeFromConstraints(t,r,a){return oe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(u,r,a)})}decodeFromStream(t,r,a){return oe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(u,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return oe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(r);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((r,a)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const a=document.getElementById(t);if(!a)throw new R(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==r.toLowerCase())throw new R(`element with id '${t}' must be an ${r} element`);return a}decodeFromImage(t,r){if(!t&&!r)throw new R("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new R("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,a){if(t===void 0&&r===void 0)throw new R("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new R("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let a;return this.isImageLoaded(r)?a=this.decodeOnce(r,!1,!0):a=this._decodeOnLoadImage(r),a}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,r)}_decodeFromVideoElementSetup(t){if(!t)throw new R("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const a=this._decodeOnLoadImage(r);return r.src=t,a}decodeFromVideoUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),a=this.decodeFromVideoElement(r);return r.src=t,a}decodeFromVideoUrlContinuously(t,r){if(!t)throw new R("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(a,r);return a.src=t,u}_decodeOnLoadImage(t){return new Promise((r,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,a=!0){this._stopAsyncDecode=!1;const u=(c,d)=>{if(this._stopAsyncDecode){d(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(t);c(g)}catch(g){const y=r&&g instanceof se,S=(g instanceof U||g instanceof ee)&&a;if(y||S)return setTimeout(u,this._timeBetweenDecodingAttempts,c,d);d(g)}};return new Promise((c,d)=>u(c,d))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(t);r(u,null),setTimeout(a,this.timeBetweenScansMillis)}catch(u){r(null,u);const c=u instanceof U||u instanceof ee,d=u instanceof se;(c||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,a){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,a=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),a=new st(r),u=new fe(a);return new L(u)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let a,u;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,u=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,u=t.naturalHeight||t.height)),r.style.width=a+"px",r.style.height=u+"px",r.width=a,r.height=u,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ae{constructor(t,r,a=r==null?0:8*r.length,u,c,d=G.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=a,this.resultPoints=u,this.format=c,this.timestamp=d,this.text=t,this.rawBytes=r,a==null?this.numBits=r==null?0:8*r.length:this.numBits=a,this.resultPoints=u,this.format=c,this.resultMetadata=null,d==null?this.timestamp=G.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(r.length+t.length);G.arraycopy(r,0,a,0,r.length),G.arraycopy(t,0,a,r.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ge;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var be=Ge,ft;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ft||(ft={}));var dt=ft;class kt{constructor(t,r,a,u,c=-1,d=-1){this.rawBytes=t,this.text=r,this.byteSegments=a,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class kr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class wn{constructor(t,r){if(r.length===0)throw new N;this.field=t;const a=r.length;if(a>1&&r[0]===0){let u=1;for(;u<a&&r[u]===0;)u++;u===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-u),G.arraycopy(r,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let a;if(t===1){a=0;for(let d=0,g=r.length;d!==g;d++){const y=r[d];a=kr.addOrSubtract(a,y)}return a}a=r[0];const u=r.length,c=this.field;for(let d=1;d<u;d++)a=kr.addOrSubtract(c.multiply(t,a),r[d]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,a=t.coefficients;if(r.length>a.length){const d=r;r=a,a=d}let u=new Int32Array(a.length);const c=a.length-r.length;G.arraycopy(a,0,u,0,c);for(let d=c;d<a.length;d++)u[d]=kr.addOrSubtract(r[d-c],a[d]);return new wn(this.field,u)}multiply(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,a=r.length,u=t.coefficients,c=u.length,d=new Int32Array(a+c-1),g=this.field;for(let y=0;y<a;y++){const v=r[y];for(let S=0;S<c;S++)d[y+S]=kr.addOrSubtract(d[y+S],g.multiply(v,u[S]))}return new wn(g,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,a=this.field,u=new Int32Array(r),c=this.coefficients;for(let d=0;d<r;d++)u[d]=a.multiply(c[d],t);return new wn(a,u)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return this.field.getZero();const a=this.coefficients,u=a.length,c=new Int32Array(u+t),d=this.field;for(let g=0;g<u;g++)c[g]=d.multiply(a[g],r);return new wn(d,c)}divide(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new N("Divide by 0");const r=this.field;let a=r.getZero(),u=this;const c=t.getCoefficient(t.getDegree()),d=r.inverse(c);for(;u.getDegree()>=t.getDegree()&&!u.isZero();){const g=u.getDegree()-t.getDegree(),y=r.multiply(u.getCoefficient(u.getDegree()),d),v=t.multiplyByMonomial(g,y),S=r.buildMonomial(g,y);a=a.addOrSubtract(S),u=u.addOrSubtract(v)}return[a,u]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),r===0||a!==1){const u=this.field.log(a);u===0?t+="1":u===1?t+="a":(t+="a^",t+=u)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class Ui extends E{}Ui.kind="ArithmeticException";class gt extends kr{constructor(t,r,a){super(),this.primitive=t,this.size=r,this.generatorBase=a;const u=new Int32Array(r);let c=1;for(let g=0;g<r;g++)u[g]=c,c*=2,c>=r&&(c^=t,c&=r-1);this.expTable=u;const d=new Int32Array(r);for(let g=0;g<r-1;g++)d[u[g]]=g;this.logTable=d,this.zero=new wn(this,Int32Array.from([0])),this.one=new wn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;const a=new Int32Array(t+1);return a[0]=r,new wn(this,a)}inverse(t){if(t===0)throw new Ui;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Y.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}gt.AZTEC_DATA_12=new gt(4201,4096,1),gt.AZTEC_DATA_10=new gt(1033,1024,1),gt.AZTEC_DATA_6=new gt(67,64,1),gt.AZTEC_PARAM=new gt(19,16,1),gt.QR_CODE_FIELD_256=new gt(285,256,0),gt.DATA_MATRIX_FIELD_256=new gt(301,256,1),gt.AZTEC_DATA_8=gt.DATA_MATRIX_FIELD_256,gt.MAXICODE_FIELD_64=gt.AZTEC_DATA_6;class Xn extends E{}Xn.kind="ReedSolomonException";class Yn extends E{}Yn.kind="IllegalStateException";class ui{constructor(t){this.field=t}decode(t,r){const a=this.field,u=new wn(a,t),c=new Int32Array(r);let d=!0;for(let B=0;B<r;B++){const P=u.evaluateAt(a.exp(B+a.getGeneratorBase()));c[c.length-1-B]=P,P!==0&&(d=!1)}if(d)return;const g=new wn(a,c),y=this.runEuclideanAlgorithm(a.buildMonomial(r,1),g,r),v=y[0],S=y[1],O=this.findErrorLocations(v),I=this.findErrorMagnitudes(S,O);for(let B=0;B<O.length;B++){const P=t.length-1-a.log(O[B]);if(P<0)throw new Xn("Bad error location");t[P]=gt.addOrSubtract(t[P],I[B])}}runEuclideanAlgorithm(t,r,a){if(t.getDegree()<r.getDegree()){const B=t;t=r,r=B}const u=this.field;let c=t,d=r,g=u.getZero(),y=u.getOne();for(;d.getDegree()>=(a/2|0);){let B=c,P=g;if(c=d,g=y,c.isZero())throw new Xn("r_{i-1} was zero");d=B;let F=u.getZero();const X=c.getCoefficient(c.getDegree()),ne=u.inverse(X);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const ye=d.getDegree()-c.getDegree(),xe=u.multiply(d.getCoefficient(d.getDegree()),ne);F=F.addOrSubtract(u.buildMonomial(ye,xe)),d=d.addOrSubtract(c.multiplyByMonomial(ye,xe))}if(y=F.multiply(g).addOrSubtract(P),d.getDegree()>=c.getDegree())throw new Yn("Division algorithm failed to reduce polynomial?")}const v=y.getCoefficient(0);if(v===0)throw new Xn("sigmaTilde(0) was zero");const S=u.inverse(v),O=y.multiplyScalar(S),I=d.multiplyScalar(S);return[O,I]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(r);let u=0;const c=this.field;for(let d=1;d<c.getSize()&&u<r;d++)t.evaluateAt(d)===0&&(a[u]=c.inverse(d),u++);if(u!==r)throw new Xn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,r){const a=r.length,u=new Int32Array(a),c=this.field;for(let d=0;d<a;d++){const g=c.inverse(r[d]);let y=1;for(let v=0;v<a;v++)if(d!==v){const S=c.multiply(r[v],g),O=(S&1)===0?S|1:S&-2;y=c.multiply(y,O)}u[d]=c.multiply(t.evaluateAt(g),c.inverse(y)),c.getGeneratorBase()!==0&&(u[d]=c.multiply(u[d],g))}return u}}var bn;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(bn||(bn={}));class Ct{decode(t){this.ddata=t;let r=t.getBits(),a=this.extractBits(r),u=this.correctBits(a),c=Ct.convertBoolArrayToByteArray(u),d=Ct.getEncodedData(u),g=new kt(c,d,null,null);return g.setNumBits(u.length),g}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,a=bn.UPPER,u=bn.UPPER,c="",d=0;for(;d<r;)if(u===bn.BINARY){if(r-d<5)break;let g=Ct.readCode(t,d,5);if(d+=5,g===0){if(r-d<11)break;g=Ct.readCode(t,d,11)+31,d+=11}for(let y=0;y<g;y++){if(r-d<8){d=r;break}const v=Ct.readCode(t,d,8);c+=Ne.castAsNonUtf8Char(v),d+=8}u=a}else{let g=u===bn.DIGIT?4:5;if(r-d<g)break;let y=Ct.readCode(t,d,g);d+=g;let v=Ct.getCharacter(u,y);v.startsWith("CTRL_")?(a=u,u=Ct.getTable(v.charAt(5)),v.charAt(6)==="L"&&(a=u)):(c+=v,u=a)}return c}static getTable(t){switch(t){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;default:return bn.UPPER}}static getCharacter(t,r){switch(t){case bn.UPPER:return Ct.UPPER_TABLE[r];case bn.LOWER:return Ct.LOWER_TABLE[r];case bn.MIXED:return Ct.MIXED_TABLE[r];case bn.PUNCT:return Ct.PUNCT_TABLE[r];case bn.DIGIT:return Ct.DIGIT_TABLE[r];default:throw new Yn("Bad table")}}correctBits(t){let r,a;this.ddata.getNbLayers()<=2?(a=6,r=gt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,r=gt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,r=gt.AZTEC_DATA_10):(a=12,r=gt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=t.length/a;if(c<u)throw new ee;let d=t.length%a,g=new Int32Array(c);for(let I=0;I<c;I++,d+=a)g[I]=Ct.readCode(t,d,a);try{new ui(r).decode(g,c-u)}catch(I){throw new ee(I)}let y=(1<<a)-1,v=0;for(let I=0;I<u;I++){let B=g[I];if(B===0||B===y)throw new ee;(B===1||B===y-1)&&v++}let S=new Array(u*a-v),O=0;for(let I=0;I<u;I++){let B=g[I];if(B===1||B===y-1)S.fill(B>1,O,O+a-1),O+=a-1;else for(let P=a-1;P>=0;--P)S[O++]=(B&1<<P)!==0}return S}extractBits(t){let r=this.ddata.isCompact(),a=this.ddata.getNbLayers(),u=(r?11:14)+a*4,c=new Int32Array(u),d=new Array(this.totalBitsInLayer(a,r));if(r)for(let g=0;g<c.length;g++)c[g]=g;else{let g=u+1+2*Y.truncDivision(Y.truncDivision(u,2)-1,15),y=u/2,v=Y.truncDivision(g,2);for(let S=0;S<y;S++){let O=S+Y.truncDivision(S,15);c[y-S-1]=v-O-1,c[y+S]=v+O+1}}for(let g=0,y=0;g<a;g++){let v=(a-g)*4+(r?9:12),S=g*2,O=u-1-S;for(let I=0;I<v;I++){let B=I*2;for(let P=0;P<2;P++)d[y+B+P]=t.get(c[S+P],c[S+I]),d[y+2*v+B+P]=t.get(c[S+I],c[O-P]),d[y+4*v+B+P]=t.get(c[O-P],c[O-I]),d[y+6*v+B+P]=t.get(c[O-I],c[S+P])}y+=v*8}return d}static readCode(t,r,a){let u=0;for(let c=r;c<r+a;c++)u<<=1,t[c]&&(u|=1);return u}static readByte(t,r){let a=t.length-r;return a>=8?Ct.readCode(t,r,8):Ct.readCode(t,r,a)<<8-a}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let a=0;a<r.length;a++)r[a]=Ct.readByte(t,8*a);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Ct.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ct.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ct.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,a,u){const c=t-a,d=r-u;return Math.sqrt(c*c+d*d)}static sum(t){let r=0;for(let a=0,u=t.length;a!==u;a++){const c=t[a];r+=c}return r}}class ji{static floatToIntBits(t){return t}}ji.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ce){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*ji.floatToIntBits(this.x)+ji.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),u=this.distance(t[0],t[2]);let c,d,g;if(a>=r&&a>=u?(d=t[0],c=t[1],g=t[2]):u>=a&&u>=r?(d=t[1],c=t[0],g=t[2]):(d=t[2],c=t[0],g=t[1]),this.crossProductZ(c,d,g)<0){const y=c;c=g,g=y}t[0]=c,t[1]=d,t[2]=g}static distance(t,r){return et.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,a){const u=r.x,c=r.y;return(a.x-u)*(t.y-c)-(a.y-c)*(t.x-u)}}class ts{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class yo extends ts{constructor(t,r,a,u,c){super(t,r),this.compact=a,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(t,r,a,u){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Zt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),u==null&&(u=t.getHeight()/2|0);const c=r/2|0;if(this.leftInit=a-c,this.rightInit=a+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let t=this.leftInit,r=this.rightInit,a=this.upInit,u=this.downInit,c=!1,d=!0,g=!1,y=!1,v=!1,S=!1,O=!1;const I=this.width,B=this.height;for(;d;){d=!1;let P=!0;for(;(P||!y)&&r<I;)P=this.containsBlackPoint(a,u,r,!1),P?(r++,d=!0,y=!0):y||r++;if(r>=I){c=!0;break}let F=!0;for(;(F||!v)&&u<B;)F=this.containsBlackPoint(t,r,u,!0),F?(u++,d=!0,v=!0):v||u++;if(u>=B){c=!0;break}let X=!0;for(;(X||!S)&&t>=0;)X=this.containsBlackPoint(a,u,t,!1),X?(t--,d=!0,S=!0):S||t--;if(t<0){c=!0;break}let ne=!0;for(;(ne||!O)&&a>=0;)ne=this.containsBlackPoint(t,r,a,!0),ne?(a--,d=!0,O=!0):O||a--;if(a<0){c=!0;break}d&&(g=!0)}if(!c&&g){const P=r-t;let F=null;for(let xe=1;F===null&&xe<P;xe++)F=this.getBlackPointOnSegment(t,u-xe,t+xe,u);if(F==null)throw new se;let X=null;for(let xe=1;X===null&&xe<P;xe++)X=this.getBlackPointOnSegment(t,a+xe,t+xe,a);if(X==null)throw new se;let ne=null;for(let xe=1;ne===null&&xe<P;xe++)ne=this.getBlackPointOnSegment(r,a+xe,r-xe,a);if(ne==null)throw new se;let ye=null;for(let xe=1;ye===null&&xe<P;xe++)ye=this.getBlackPointOnSegment(r,u-xe,r-xe,u);if(ye==null)throw new se;return this.centerEdges(ye,F,ne,X)}else throw new se}getBlackPointOnSegment(t,r,a,u){const c=et.round(et.distance(t,r,a,u)),d=(a-t)/c,g=(u-r)/c,y=this.image;for(let v=0;v<c;v++){const S=et.round(t+v*d),O=et.round(r+v*g);if(y.get(S,O))return new Ce(S,O)}return null}centerEdges(t,r,a,u){const c=t.getX(),d=t.getY(),g=r.getX(),y=r.getY(),v=a.getX(),S=a.getY(),O=u.getX(),I=u.getY(),B=Zt.CORR;return c<this.width/2?[new Ce(O-B,I+B),new Ce(g+B,y+B),new Ce(v-B,S-B),new Ce(c+B,d-B)]:[new Ce(O+B,I+B),new Ce(g+B,y-B),new Ce(v-B,S+B),new Ce(c-B,d-B)]}containsBlackPoint(t,r,a,u){const c=this.image;if(u){for(let d=t;d<=r;d++)if(c.get(d,a))return!0}else for(let d=t;d<=r;d++)if(c.get(a,d))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class rl{static checkAndNudgePoints(t,r){const a=t.getWidth(),u=t.getHeight();let c=!0;for(let d=0;d<r.length&&c;d+=2){const g=Math.floor(r[d]),y=Math.floor(r[d+1]);if(g<-1||g>a||y<-1||y>u)throw new se;c=!1,g===-1?(r[d]=0,c=!0):g===a&&(r[d]=a-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===u&&(r[d+1]=u-1,c=!0)}c=!0;for(let d=r.length-2;d>=0&&c;d-=2){const g=Math.floor(r[d]),y=Math.floor(r[d+1]);if(g<-1||g>a||y<-1||y>u)throw new se;c=!1,g===-1?(r[d]=0,c=!0):g===a&&(r[d]=a-1,c=!0),y===-1?(r[d+1]=0,c=!0):y===u&&(r[d+1]=u-1,c=!0)}}}class Wn{constructor(t,r,a,u,c,d,g,y,v){this.a11=t,this.a21=r,this.a31=a,this.a12=u,this.a22=c,this.a32=d,this.a13=g,this.a23=y,this.a33=v}static quadrilateralToQuadrilateral(t,r,a,u,c,d,g,y,v,S,O,I,B,P,F,X){const ne=Wn.quadrilateralToSquare(t,r,a,u,c,d,g,y);return Wn.squareToQuadrilateral(v,S,O,I,B,P,F,X).times(ne)}transformPoints(t){const r=t.length,a=this.a11,u=this.a12,c=this.a13,d=this.a21,g=this.a22,y=this.a23,v=this.a31,S=this.a32,O=this.a33;for(let I=0;I<r;I+=2){const B=t[I],P=t[I+1],F=c*B+y*P+O;t[I]=(a*B+d*P+v)/F,t[I+1]=(u*B+g*P+S)/F}}transformPointsWithValues(t,r){const a=this.a11,u=this.a12,c=this.a13,d=this.a21,g=this.a22,y=this.a23,v=this.a31,S=this.a32,O=this.a33,I=t.length;for(let B=0;B<I;B++){const P=t[B],F=r[B],X=c*P+y*F+O;t[B]=(a*P+d*F+v)/X,r[B]=(u*P+g*F+S)/X}}static squareToQuadrilateral(t,r,a,u,c,d,g,y){const v=t-a+c-g,S=r-u+d-y;if(v===0&&S===0)return new Wn(a-t,c-a,t,u-r,d-u,r,0,0,1);{const O=a-c,I=g-c,B=u-d,P=y-d,F=O*P-I*B,X=(v*P-I*S)/F,ne=(O*S-v*B)/F;return new Wn(a-t+X*a,g-t+ne*g,t,u-r+X*u,y-r+ne*y,r,X,ne,1)}}static quadrilateralToSquare(t,r,a,u,c,d,g,y){return Wn.squareToQuadrilateral(t,r,a,u,c,d,g,y).buildAdjoint()}buildAdjoint(){return new Wn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Wn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class il extends rl{sampleGrid(t,r,a,u,c,d,g,y,v,S,O,I,B,P,F,X,ne,ye,xe){const me=Wn.quadrilateralToQuadrilateral(u,c,d,g,y,v,S,O,I,B,P,F,X,ne,ye,xe);return this.sampleGridWithTransform(t,r,a,me)}sampleGridWithTransform(t,r,a,u){if(r<=0||a<=0)throw new se;const c=new Nt(r,a),d=new Float32Array(2*r);for(let g=0;g<a;g++){const y=d.length,v=g+.5;for(let S=0;S<y;S+=2)d[S]=S/2+.5,d[S+1]=v;u.transformPoints(d),rl.checkAndNudgePoints(t,d);try{for(let S=0;S<y;S+=2)t.get(Math.floor(d[S]),Math.floor(d[S+1]))&&c.set(S/2,g)}catch{throw new se}}return c}}class ar{static setGridSampler(t){ar.gridSampler=t}static getInstance(){return ar.gridSampler}}ar.gridSampler=new il;class Rn{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class al{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),a=this.getBullsEyeCorners(r);if(t){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let u=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),c=this.getMatrixCornerPoints(a);return new yo(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new se;let r=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(a,r);let u=0;for(let d=0;d<4;d++){let g=a[(this.shift+d)%4];this.compact?(u<<=7,u+=g>>1&127):(u<<=10,u+=(g>>2&992)+(g>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(t,r){let a=0;t.forEach((u,c,d)=>{let g=(u>>r-2<<1)+(u&1);a=(a<<3)+g}),a=((a&1)<<11)+(a>>1);for(let u=0;u<4;u++)if(Y.bitCount(a^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new se}getCorrectedParameterData(t,r){let a,u;r?(a=7,u=2):(a=10,u=4);let c=a-u,d=new Int32Array(a);for(let y=a-1;y>=0;--y)d[y]=t&15,t>>=4;try{new ui(gt.AZTEC_PARAM).decode(d,c)}catch{throw new se}let g=0;for(let y=0;y<u;y++)g=(g<<4)+d[y];return g}getBullsEyeCorners(t){let r=t,a=t,u=t,c=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(r,d,1,-1),I=this.getFirstDifferent(a,d,1,1),B=this.getFirstDifferent(u,d,-1,1),P=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let F=this.distancePoint(P,O)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(F<.75||F>1.25||!this.isWhiteOrBlackRectangle(O,I,B,P))break}r=O,a=I,u=B,c=P,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let g=new Ce(r.getX()+.5,r.getY()-.5),y=new Ce(a.getX()+.5,a.getY()+.5),v=new Ce(u.getX()-.5,u.getY()+.5),S=new Ce(c.getX()-.5,c.getY()-.5);return this.expandSquare([g,y,v,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,a,u;try{let g=new Zt(this.image).detect();t=g[0],r=g[1],a=g[2],u=g[3]}catch{let y=this.image.getWidth()/2,v=this.image.getHeight()/2;t=this.getFirstDifferent(new Rn(y+7,v-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Rn(y+7,v+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Rn(y-7,v+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Rn(y-7,v-7),!1,-1,-1).toResultPoint()}let c=et.round((t.getX()+u.getX()+r.getX()+a.getX())/4),d=et.round((t.getY()+u.getY()+r.getY()+a.getY())/4);try{let g=new Zt(this.image,15,c,d).detect();t=g[0],r=g[1],a=g[2],u=g[3]}catch{t=this.getFirstDifferent(new Rn(c+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Rn(c+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Rn(c-7,d+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Rn(c-7,d-7),!1,-1,-1).toResultPoint()}return c=et.round((t.getX()+u.getX()+r.getX()+a.getX())/4),d=et.round((t.getY()+u.getY()+r.getY()+a.getY())/4),new Rn(c,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,a,u,c){let d=ar.getInstance(),g=this.getDimension(),y=g/2-this.nbCenterLayers,v=g/2+this.nbCenterLayers;return d.sampleGrid(t,g,g,y,y,v,y,v,v,y,v,r.getX(),r.getY(),a.getX(),a.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(t,r,a){let u=0,c=this.distanceResultPoint(t,r),d=c/a,g=t.getX(),y=t.getY(),v=d*(r.getX()-t.getX())/c,S=d*(r.getY()-t.getY())/c;for(let O=0;O<a;O++)this.image.get(et.round(g+O*v),et.round(y+O*S))&&(u|=1<<a-O-1);return u}isWhiteOrBlackRectangle(t,r,a,u){let c=3;t=new Rn(t.getX()-c,t.getY()+c),r=new Rn(r.getX()-c,r.getY()-c),a=new Rn(a.getX()+c,a.getY()-c),u=new Rn(u.getX()+c,u.getY()+c);let d=this.getColor(u,t);if(d===0)return!1;let g=this.getColor(t,r);return g!==d||(g=this.getColor(r,a),g!==d)?!1:(g=this.getColor(a,u),g===d)}getColor(t,r){let a=this.distancePoint(t,r),u=(r.getX()-t.getX())/a,c=(r.getY()-t.getY())/a,d=0,g=t.getX(),y=t.getY(),v=this.image.get(t.getX(),t.getY()),S=Math.ceil(a);for(let I=0;I<S;I++)g+=u,y+=c,this.image.get(et.round(g),et.round(y))!==v&&d++;let O=d/a;return O>.1&&O<.9?0:O<=.1===v?1:-1}getFirstDifferent(t,r,a,u){let c=t.getX()+a,d=t.getY()+u;for(;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=a,d+=u;for(c-=a,d-=u;this.isValid(c,d)&&this.image.get(c,d)===r;)c+=a;for(c-=a;this.isValid(c,d)&&this.image.get(c,d)===r;)d+=u;return d-=u,new Rn(c,d)}expandSquare(t,r,a){let u=a/(2*r),c=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),g=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,v=new Ce(g+u*c,y+u*d),S=new Ce(g-u*c,y-u*d);c=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),g=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let O=new Ce(g+u*c,y+u*d),I=new Ce(g-u*c,y-u*d);return[v,O,S,I]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=et.round(t.getX()),a=et.round(t.getY());return this.isValid(r,a)}distancePoint(t,r){return et.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return et.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Y.truncDivision(this.nbLayers-4,8)+1)+15}}class ns{decode(t,r=null){let a=null,u=new al(t.getBlackMatrix()),c=null,d=null;try{let S=u.detectMirror(!1);c=S.getPoints(),this.reportFoundResultPoints(r,c),d=new Ct().decode(S)}catch(S){a=S}if(d==null)try{let S=u.detectMirror(!0);c=S.getPoints(),this.reportFoundResultPoints(r,c),d=new Ct().decode(S)}catch(S){throw a??S}let g=new Ae(d.getText(),d.getRawBytes(),d.getNumBits(),c,be.AZTEC,G.currentTimeMillis()),y=d.getByteSegments();y!=null&&g.putMetadata(dt.BYTE_SEGMENTS,y);let v=d.getECLevel();return v!=null&&g.putMetadata(dt.ERROR_CORRECTION_LEVEL,v),g}reportFoundResultPoints(t,r){if(t!=null){let a=t.get(Ee.NEED_RESULT_POINT_CALLBACK);a!=null&&r.forEach((u,c,d)=>{a.foundPossibleResultPoint(u)})}}reset(){}}class lc extends ve{constructor(t=500){super(new ns,t)}}class Ft{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(Ee.TRY_HARDER)===!0&&t.isRotateSupported()){const c=t.rotateCounterClockwise(),d=this.doDecode(c,r),g=d.getResultMetadata();let y=270;g!==null&&g.get(dt.ORIENTATION)===!0&&(y=y+g.get(dt.ORIENTATION)%360),d.putMetadata(dt.ORIENTATION,y);const v=d.getResultPoints();if(v!==null){const S=c.getHeight();for(let O=0;O<v.length;O++)v[O]=new Ce(S-v[O].getY()-1,v[O].getX())}return d}else throw new se}}reset(){}doDecode(t,r){const a=t.getWidth(),u=t.getHeight();let c=new pe(a);const d=r&&r.get(Ee.TRY_HARDER)===!0,g=Math.max(1,u>>(d?8:5));let y;d?y=u:y=15;const v=Math.trunc(u/2);for(let S=0;S<y;S++){const O=Math.trunc((S+1)/2),I=(S&1)===0,B=v+g*(I?O:-O);if(B<0||B>=u)break;try{c=t.getBlackRow(B,c)}catch{continue}for(let P=0;P<2;P++){if(P===1&&(c.reverse(),r&&r.get(Ee.NEED_RESULT_POINT_CALLBACK)===!0)){const F=new Map;r.forEach((X,ne)=>F.set(ne,X)),F.delete(Ee.NEED_RESULT_POINT_CALLBACK),r=F}try{const F=this.decodeRow(B,c,r);if(P===1){F.putMetadata(dt.ORIENTATION,180);const X=F.getResultPoints();X!==null&&(X[0]=new Ce(a-X[0].getX()-1,X[0].getY()),X[1]=new Ce(a-X[1].getX()-1,X[1].getY()))}return F}catch{}}}throw new se}static recordPattern(t,r,a){const u=a.length;for(let v=0;v<u;v++)a[v]=0;const c=t.getSize();if(r>=c)throw new se;let d=!t.get(r),g=0,y=r;for(;y<c;){if(t.get(y)!==d)a[g]++;else{if(++g===u)break;a[g]=1,d=!d}y++}if(!(g===u||g===u-1&&y===c))throw new se}static recordPatternInReverse(t,r,a){let u=a.length,c=t.get(r);for(;r>0&&u>=0;)t.get(--r)!==c&&(u--,c=!c);if(u>=0)throw new se;Ft.recordPattern(t,r+1,a)}static patternMatchVariance(t,r,a){const u=t.length;let c=0,d=0;for(let v=0;v<u;v++)c+=t[v],d+=r[v];if(c<d)return Number.POSITIVE_INFINITY;const g=c/d;a*=g;let y=0;for(let v=0;v<u;v++){const S=t[v],O=r[v]*g,I=S>O?S-O:O-S;if(I>a)return Number.POSITIVE_INFINITY;y+=I}return y/c}}class we extends Ft{static findStartPattern(t){const r=t.getSize(),a=t.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),d=a,g=!1;const y=6;for(let v=a;v<r;v++)if(t.get(v)!==g)c[u]++;else{if(u===y-1){let S=we.MAX_AVG_VARIANCE,O=-1;for(let I=we.CODE_START_A;I<=we.CODE_START_C;I++){const B=Ft.patternMatchVariance(c,we.CODE_PATTERNS[I],we.MAX_INDIVIDUAL_VARIANCE);B<S&&(S=B,O=I)}if(O>=0&&t.isRange(Math.max(0,d-(v-d)/2),d,!1))return Int32Array.from([d,v,O]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,g=!g}throw new se}static decodeCode(t,r,a){Ft.recordPattern(t,a,r);let u=we.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<we.CODE_PATTERNS.length;d++){const g=we.CODE_PATTERNS[d],y=this.patternMatchVariance(r,g,we.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,c=d)}if(c>=0)return c;throw new se}decodeRow(t,r,a){const u=a&&a.get(Ee.ASSUME_GS1)===!0,c=we.findStartPattern(r),d=c[2];let g=0;const y=new Uint8Array(20);y[g++]=d;let v;switch(d){case we.CODE_START_A:v=we.CODE_CODE_A;break;case we.CODE_START_B:v=we.CODE_CODE_B;break;case we.CODE_START_C:v=we.CODE_CODE_C;break;default:throw new ee}let S=!1,O=!1,I="",B=c[0],P=c[1];const F=Int32Array.from([0,0,0,0,0,0]);let X=0,ne=0,ye=d,xe=0,me=!0,Qe=!1,qe=!1;for(;!S;){const pi=O;switch(O=!1,X=ne,ne=we.decodeCode(r,F,P),y[g++]=ne,ne!==we.CODE_STOP&&(me=!0),ne!==we.CODE_STOP&&(xe++,ye+=xe*ne),B=P,P+=F.reduce((Mo,xl)=>Mo+xl,0),ne){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new ee}switch(v){case we.CODE_CODE_A:if(ne<64)qe===Qe?I+=String.fromCharCode(32+ne):I+=String.fromCharCode(32+ne+128),qe=!1;else if(ne<96)qe===Qe?I+=String.fromCharCode(ne-64):I+=String.fromCharCode(ne+64),qe=!1;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!Qe&&qe?(Qe=!0,qe=!1):Qe&&qe?(Qe=!1,qe=!1):qe=!0;break;case we.CODE_SHIFT:O=!0,v=we.CODE_CODE_B;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:S=!0;break}break;case we.CODE_CODE_B:if(ne<96)qe===Qe?I+=String.fromCharCode(32+ne):I+=String.fromCharCode(32+ne+128),qe=!1;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!Qe&&qe?(Qe=!0,qe=!1):Qe&&qe?(Qe=!1,qe=!1):qe=!0;break;case we.CODE_SHIFT:O=!0,v=we.CODE_CODE_A;break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:S=!0;break}break;case we.CODE_CODE_C:if(ne<100)ne<10&&(I+="0"),I+=ne;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_STOP:S=!0;break}break}pi&&(v=v===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const en=P-B;if(P=r.getNextUnset(P),!r.isRange(P,Math.min(r.getSize(),P+(P-B)/2),!1))throw new se;if(ye-=xe*X,ye%103!==X)throw new U;const Jn=I.length;if(Jn===0)throw new se;Jn>0&&me&&(v===we.CODE_CODE_C?I=I.substring(0,Jn-2):I=I.substring(0,Jn-1));const In=(c[1]+c[0])/2,St=B+en/2,_n=y.length,Vn=new Uint8Array(_n);for(let pi=0;pi<_n;pi++)Vn[pi]=y[pi];const Ji=[new Ce(In,t),new Ce(St,t)];return new Ae(I,Vn,0,Ji,be.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class It extends Ft{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,a){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=It.findAsteriskPattern(r,u),d=r.getNextSet(c[1]),g=r.getSize(),y,v;do{It.recordPattern(r,d,u);let F=It.toNarrowWidePattern(u);if(F<0)throw new se;y=It.patternToChar(F),this.decodeRowResult+=y,v=d;for(let X of u)d+=X;d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let F of u)S+=F;let O=d-v-S;if(d!==g&&O*2<S)throw new se;if(this.usingCheckDigit){let F=this.decodeRowResult.length-1,X=0;for(let ne=0;ne<F;ne++)X+=It.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(F)!==It.ALPHABET_STRING.charAt(X%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new se;let I;this.extendedMode?I=It.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let B=(c[1]+c[0])/2,P=v+S/2;return new Ae(I,null,0,[new Ce(B,t),new Ce(P,t)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let a=t.getSize(),u=t.getNextSet(0),c=0,d=u,g=!1,y=r.length;for(let v=u;v<a;v++)if(t.get(v)!==g)r[c]++;else{if(c===y-1){if(this.toNarrowWidePattern(r)===It.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((v-d)/2)),d,!1))return[d,v];d+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,g=!g}throw new se}static toNarrowWidePattern(t){let r=t.length,a=0,u;do{let c=2147483647;for(let y of t)y<c&&y>a&&(c=y);a=c,u=0;let d=0,g=0;for(let y=0;y<r;y++){let v=t[y];v>a&&(g|=1<<r-1-y,u++,d+=v)}if(u===3){for(let y=0;y<r&&u>0;y++){let v=t[y];if(v>a&&(u--,v*2>=d))return-1}return g}}while(u>3);return-1}static patternToChar(t){for(let r=0;r<It.CHARACTER_ENCODINGS.length;r++)if(It.CHARACTER_ENCODINGS[r]===t)return It.ALPHABET_STRING.charAt(r);if(t===It.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(t){let r=t.length,a="";for(let u=0;u<r;u++){let c=t.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=t.charAt(u+1),g="\0";switch(c){case"+":if(d>="A"&&d<="Z")g=String.fromCharCode(d.charCodeAt(0)+32);else throw new ee;break;case"$":if(d>="A"&&d<="Z")g=String.fromCharCode(d.charCodeAt(0)-64);else throw new ee;break;case"%":if(d>="A"&&d<="E")g=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")g=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")g=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")g=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")g="\0";else if(d==="V")g="@";else if(d==="W")g="`";else if(d==="X"||d==="Y"||d==="Z")g="";else throw new ee;break;case"/":if(d>="A"&&d<="O")g=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")g=":";else throw new ee;break}a+=g,u++}else a+=c}return a}}It.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",It.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],It.ASTERISK_ENCODING=148;class We extends Ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,a){let u=this.decodeStart(r),c=this.decodeEnd(r),d=new at;We.decodeMiddle(r,u[1],c[0],d);let g=d.toString(),y=null;a!=null&&(y=a.get(Ee.ALLOWED_LENGTHS)),y==null&&(y=We.DEFAULT_ALLOWED_LENGTHS);let v=g.length,S=!1,O=0;for(let P of y){if(v===P){S=!0;break}P>O&&(O=P)}if(!S&&v>O&&(S=!0),!S)throw new ee;const I=[new Ce(u[1],t),new Ce(c[0],t)];return new Ae(g,null,0,I,be.ITF,new Date().getTime())}static decodeMiddle(t,r,a,u){let c=new Int32Array(10),d=new Int32Array(5),g=new Int32Array(5);for(c.fill(0),d.fill(0),g.fill(0);r<a;){Ft.recordPattern(t,r,c);for(let v=0;v<5;v++){let S=2*v;d[v]=c[S],g[v]=c[S+1]}let y=We.decodeDigit(d);u.append(y.toString()),y=this.decodeDigit(g),u.append(y.toString()),c.forEach(function(v){r+=v})}}decodeStart(t){let r=We.skipWhiteSpace(t),a=We.findGuardPattern(t,r,We.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,r){let a=this.narrowLineWidth*10;a=a<r?a:r;for(let u=r-1;a>0&&u>=0&&!t.get(u);u--)a--;if(a!==0)throw new se}static skipWhiteSpace(t){const r=t.getSize(),a=t.getNextSet(0);if(a===r)throw new se;return a}decodeEnd(t){t.reverse();try{let r=We.skipWhiteSpace(t),a;try{a=We.findGuardPattern(t,r,We.END_PATTERN_REVERSED[0])}catch(c){c instanceof se&&(a=We.findGuardPattern(t,r,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let u=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-u,a}finally{t.reverse()}}static findGuardPattern(t,r,a){let u=a.length,c=new Int32Array(u),d=t.getSize(),g=!1,y=0,v=r;c.fill(0);for(let S=r;S<d;S++)if(t.get(S)!==g)c[y]++;else{if(y===u-1){if(Ft.patternMatchVariance(c,a,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[v,S];v+=c[0]+c[1],G.arraycopy(c,2,c,0,y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,g=!g}throw new se}static decodeDigit(t){let r=We.MAX_AVG_VARIANCE,a=-1,u=We.PATTERNS.length;for(let c=0;c<u;c++){let d=We.PATTERNS[c],g=Ft.patternMatchVariance(t,d,We.MAX_INDIVIDUAL_VARIANCE);g<r?(r=g,a=c):g===r&&(a=-1)}if(a>=0)return a%10;throw new se}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Xt extends Ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,a,u=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),a=Xt.findGuardPattern(t,u,!1,this.START_END_PATTERN,c);let d=a[0];u=a[1];let g=d-(u-d);g>=0&&(r=t.isRange(g,d,!1))}return a}static checkChecksum(t){return Xt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let a=parseInt(t.charAt(r-1),10);return Xt.getStandardUPCEANChecksum(t.substring(0,r-1))===a}static getStandardUPCEANChecksum(t){let r=t.length,a=0;for(let u=r-1;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new ee;a+=c}a*=3;for(let u=r-2;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new ee;a+=c}return(1e3-a)%10}static decodeEnd(t,r){return Xt.findGuardPattern(t,r,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,a,u){return this.findGuardPattern(t,r,a,u,new Int32Array(u.length))}static findGuardPattern(t,r,a,u,c){let d=t.getSize();r=a?t.getNextUnset(r):t.getNextSet(r);let g=0,y=r,v=u.length,S=a;for(let O=r;O<d;O++)if(t.get(O)!==S)c[g]++;else{if(g===v-1){if(Ft.patternMatchVariance(c,u,Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return Int32Array.from([y,O]);y+=c[0]+c[1];let I=c.slice(2,c.length-1);for(let B=0;B<g-1;B++)c[B]=I[B];c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,S=!S}throw new se}static decodeDigit(t,r,a,u){this.recordPattern(t,a,r);let c=this.MAX_AVG_VARIANCE,d=-1,g=u.length;for(let y=0;y<g;y++){let v=u[y],S=Ft.patternMatchVariance(r,v,Xt.MAX_INDIVIDUAL_VARIANCE);S<c&&(c=S,d=y)}if(d>=0)return d;throw new se}}Xt.MAX_AVG_VARIANCE=.48,Xt.MAX_INDIVIDUAL_VARIANCE=.7,Xt.START_END_PATTERN=Int32Array.from([1,1,1]),Xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _a{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(r,a,u),d=u.toString(),g=_a.parseExtensionString(d),y=[new Ce((a[0]+a[1])/2,t),new Ce(c,t)],v=new Ae(d,null,0,y,be.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&v.putAllMetadata(g),v}decodeMiddle(t,r,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),d=r[1],g=0;for(let v=0;v<5&&d<c;v++){let S=Xt.decodeDigit(t,u,d,Xt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of u)d+=O;S>=10&&(g|=1<<4-v),v!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==5)throw new se;let y=this.determineCheckDigit(g);if(_a.extensionChecksum(a.toString())!==y)throw new se;return d}static extensionChecksum(t){let r=t.length,a=0;for(let u=r-2;u>=0;u-=2)a+=t.charAt(u).charCodeAt(0)-48;a*=3;for(let u=r-1;u>=0;u-=2)a+=t.charAt(u).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new se}static parseExtensionString(t){if(t.length!==5)return null;let r=_a.parseExtension5String(t);return r==null?null:new Map([[dt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let a=parseInt(t.substring(1)),u=(a/100).toString(),c=a%100,d=c<10?"0"+c:c.toString();return r+u+"."+d}}class sl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,a){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(r,a,u),d=u.toString(),g=sl.parseExtensionString(d),y=[new Ce((a[0]+a[1])/2,t),new Ce(c,t)],v=new Ae(d,null,0,y,be.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&v.putAllMetadata(g),v}decodeMiddle(t,r,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),d=r[1],g=0;for(let y=0;y<2&&d<c;y++){let v=Xt.decodeDigit(t,u,d,Xt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let S of u)d+=S;v>=10&&(g|=1<<1-y),y!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==2)throw new se;if(parseInt(a.toString())%4!==g)throw new se;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[dt.ISSUE_NUMBER,parseInt(t)]])}}class Sa{static decodeRow(t,r,a){let u=Xt.findGuardPattern(r,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _a().decodeRow(t,r,u)}catch{return new sl().decodeRow(t,r,u)}}}Sa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Xt{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=lt.L_PATTERNS[t-10],a=new Int32Array(r.length);for(let u=0;u<r.length;u++)a[u]=r[r.length-u-1];lt.L_AND_G_PATTERNS[t]=a}}decodeRow(t,r,a){let u=lt.findStartGuardPattern(r),c=a==null?null:a.get(Ee.NEED_RESULT_POINT_CALLBACK);if(c!=null){const me=new Ce((u[0]+u[1])/2,t);c.foundPossibleResultPoint(me)}let d=this.decodeMiddle(r,u,this.decodeRowStringBuffer),g=d.rowOffset,y=d.resultString;if(c!=null){const me=new Ce(g,t);c.foundPossibleResultPoint(me)}let v=this.decodeEnd(r,g);if(c!=null){const me=new Ce((v[0]+v[1])/2,t);c.foundPossibleResultPoint(me)}let S=v[1],O=S+(S-v[0]);if(O>=r.getSize()||!r.isRange(S,O,!1))throw new se;let I=y.toString();if(I.length<8)throw new ee;if(!lt.checkChecksum(I))throw new U;let B=(u[1]+u[0])/2,P=(v[1]+v[0])/2,F=this.getBarcodeFormat(),X=[new Ce(B,t),new Ce(P,t)],ne=new Ae(I,null,0,X,F,new Date().getTime()),ye=0;try{let me=Sa.decodeRow(t,r,v[1]);ne.putMetadata(dt.UPC_EAN_EXTENSION,me.getText()),ne.putAllMetadata(me.getResultMetadata()),ne.addResultPoints(me.getResultPoints()),ye=me.getText().length}catch{}let xe=a==null?null:a.get(Ee.ALLOWED_EAN_EXTENSIONS);if(xe!=null){let me=!1;for(let Qe in xe)if(ye.toString()===Qe){me=!0;break}if(!me)throw new se}return ne}decodeEnd(t,r){return lt.findGuardPattern(t,r,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return lt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let a=parseInt(t.charAt(r-1),10);return lt.getStandardUPCEANChecksum(t.substring(0,r-1))===a}static getStandardUPCEANChecksum(t){let r=t.length,a=0;for(let u=r-1;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new ee;a+=c}a*=3;for(let u=r-2;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new ee;a+=c}return(1e3-a)%10}}class Er extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),d=r[1],g=0;for(let v=0;v<6&&d<c;v++){let S=lt.decodeDigit(t,u,d,lt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of u)d+=O;S>=10&&(g|=1<<5-v)}a=Er.determineFirstDigit(a,g),d=lt.findGuardPattern(t,d,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&d<c;v++){let S=lt.decodeDigit(t,u,d,lt.L_PATTERNS);a+=String.fromCharCode(48+S);for(let O of u)d+=O}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(t,r){for(let a=0;a<10;a++)if(r===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new se}}Er.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zr extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,a){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),d=r[1];for(let y=0;y<4&&d<c;y++){let v=lt.decodeDigit(t,u,d,lt.L_PATTERNS);a+=String.fromCharCode(48+v);for(let S of u)d+=S}d=lt.findGuardPattern(t,d,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<c;y++){let v=lt.decodeDigit(t,u,d,lt.L_PATTERNS);a+=String.fromCharCode(48+v);for(let S of u)d+=S}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return be.EAN_8}}class Ca extends lt{constructor(){super(...arguments),this.ean13Reader=new Er}getBarcodeFormat(){return be.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,a))}decodeMiddle(t,r,a){return this.ean13Reader.decodeMiddle(t,r,a)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let a=new Ae(r.substring(1),null,null,t.getResultPoints(),be.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new se}reset(){this.ean13Reader.reset()}}class Nn extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,a){const u=this.decodeMiddleCounters.map(v=>v);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=t.getSize();let d=r[1],g=0;for(let v=0;v<6&&d<c;v++){const S=Nn.decodeDigit(t,u,d,Nn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of u)d+=O;S>=10&&(g|=1<<5-v)}let y=Nn.determineNumSysAndCheckDigit(a,g);return{rowOffset:d,resultString:y}}decodeEnd(t,r){return Nn.findGuardPatternWithoutCounters(t,r,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(t){return lt.checkChecksum(Nn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let a=0;a<=1;a++)for(let u=0;u<10;u++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][u]){let c=String.fromCharCode(48+a),d=String.fromCharCode(48+u);return c+t+d}throw se.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(c=>c.charCodeAt(0)),a=new at;a.append(t.charAt(0));let u=r[5];switch(u){case 0:case 1:case 2:a.appendChars(r,0,2),a.append(u),a.append("0000"),a.appendChars(r,2,3);break;case 3:a.appendChars(r,0,3),a.append("00000"),a.appendChars(r,3,2);break;case 4:a.appendChars(r,0,4),a.append("00000"),a.append(r[4]);break;default:a.appendChars(r,0,5),a.append("0000"),a.append(u);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ll extends Ft{constructor(t){super();let r=t==null?null:t.get(Ee.POSSIBLE_FORMATS),a=[];f(r)?(a.push(new Er),a.push(new Ca),a.push(new Zr),a.push(new Nn)):(r.indexOf(be.EAN_13)>-1&&a.push(new Er),r.indexOf(be.UPC_A)>-1&&a.push(new Ca),r.indexOf(be.EAN_8)>-1&&a.push(new Zr),r.indexOf(be.UPC_E)>-1&&a.push(new Nn)),this.readers=a}decodeRow(t,r,a){for(let u of this.readers)try{const c=u.decodeRow(t,r,a),d=c.getBarcodeFormat()===be.EAN_13&&c.getText().charAt(0)==="0",g=a==null?null:a.get(Ee.POSSIBLE_FORMATS),y=g==null||g.includes(be.UPC_A);if(d&&y){const v=c.getRawBytes(),S=new Ae(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),be.UPC_A);return S.putAllMetadata(c.getResultMetadata()),S}return c}catch{}throw new se}reset(){for(let t of this.readers)t.reset()}}class vn extends Ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let a=0;a<r.length;a++)if(Ft.patternMatchVariance(t,r[a],vn.MAX_INDIVIDUAL_VARIANCE)<vn.MAX_AVG_VARIANCE)return a;throw new se}static count(t){return et.sum(new Int32Array(t))}static increment(t,r){let a=0,u=r[0];for(let c=1;c<t.length;c++)r[c]>u&&(u=r[c],a=c);t[a]++}static decrement(t,r){let a=0,u=r[0];for(let c=1;c<t.length;c++)r[c]<u&&(u=r[c],a=c);t[a]--}static isFinderPattern(t){let r=t[0]+t[1],a=r+t[2]+t[3],u=r/a;if(u>=vn.MIN_FINDER_PATTERN_RATIO&&u<=vn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let g of t)g>d&&(d=g),g<c&&(c=g);return d<10*c}return!1}}vn.MAX_AVG_VARIANCE=.2,vn.MAX_INDIVIDUAL_VARIANCE=.45,vn.MIN_FINDER_PATTERN_RATIO=9.5/12,vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Qr{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Qr))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Jr{constructor(t,r,a,u,c){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ce(a,c)),this.resultPoints.push(new Ce(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Jr))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Ar{constructor(){}static getRSSvalue(t,r,a){let u=0;for(let y of t)u+=y;let c=0,d=0,g=t.length;for(let y=0;y<g-1;y++){let v;for(v=1,d|=1<<y;v<t[y];v++,d&=~(1<<y)){let S=Ar.combins(u-v-1,g-y-2);if(a&&d===0&&u-v-(g-y-1)>=g-y-1&&(S-=Ar.combins(u-v-(g-y),g-y-2)),g-y-1>1){let O=0;for(let I=u-v-(g-y-2);I>r;I--)O+=Ar.combins(u-v-I-1,g-y-3);S-=O*(g-1-y)}else u-v>r&&S--;c+=S}u-=v}return c}static combins(t,r){let a,u;t-r>r?(u=r,a=t-r):(u=t-r,a=r);let c=1,d=1;for(let g=t;g>a;g--)c*=g,d<=u&&(c/=d,d++);for(;d<=u;)c/=d,d++;return c}}class wo{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let a=12*r,u=new pe(a),c=0,g=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(g&1<<y)!=0&&u.set(c),c++;for(let y=1;y<t.length;++y){let v=t[y],S=v.getLeftChar().getValue();for(let O=11;O>=0;--O)(S&1<<O)!=0&&u.set(c),c++;if(v.getRightChar()!=null){let O=v.getRightChar().getValue();for(let I=11;I>=0;--I)(O&1<<I)!=0&&u.set(c),c++}}return u}}class $r{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Tn extends rs{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Tn.FNC1}}Tn.FNC1="$";class Lr extends rs{constructor(t,r,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Pn extends rs{constructor(t,r,a){if(super(t),r<0||r>10||a<0||a>10)throw new ee;this.firstDigit=r,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Pn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Pn.FNC1}isAnyFNC1(){return this.firstDigit===Pn.FNC1||this.secondDigit===Pn.FNC1}}Pn.FNC1=10;class _e{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new se;let r=t.substring(0,2);for(let c of _e.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(2,c[2],t):_e.processFixedAI(2,c[1],t);if(t.length<3)throw new se;let a=t.substring(0,3);for(let c of _e.THREE_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(3,c[2],t):_e.processFixedAI(3,c[1],t);for(let c of _e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,c[2],t):_e.processFixedAI(4,c[1],t);if(t.length<4)throw new se;let u=t.substring(0,4);for(let c of _e.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,c[2],t):_e.processFixedAI(4,c[1],t);throw new se}static processFixedAI(t,r,a){if(a.length<t)throw new se;let u=a.substring(0,t);if(a.length<t+r)throw new se;let c=a.substring(t,t+r),d=a.substring(t+r),g="("+u+")"+c,y=_e.parseFieldsInGeneralPurpose(d);return y==null?g:g+y}static processVariableAI(t,r,a){let u=a.substring(0,t),c;a.length<t+r?c=a.length:c=t+r;let d=a.substring(t,c),g=a.substring(c),y="("+u+")"+d,v=_e.parseFieldsInGeneralPurpose(g);return v==null?y:y+v}}_e.VARIABLE_LENGTH=[],_e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",_e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",_e.VARIABLE_LENGTH,20],["22",_e.VARIABLE_LENGTH,29],["30",_e.VARIABLE_LENGTH,8],["37",_e.VARIABLE_LENGTH,8],["90",_e.VARIABLE_LENGTH,30],["91",_e.VARIABLE_LENGTH,30],["92",_e.VARIABLE_LENGTH,30],["93",_e.VARIABLE_LENGTH,30],["94",_e.VARIABLE_LENGTH,30],["95",_e.VARIABLE_LENGTH,30],["96",_e.VARIABLE_LENGTH,30],["97",_e.VARIABLE_LENGTH,3],["98",_e.VARIABLE_LENGTH,30],["99",_e.VARIABLE_LENGTH,30]],_e.THREE_DIGIT_DATA_LENGTH=[["240",_e.VARIABLE_LENGTH,30],["241",_e.VARIABLE_LENGTH,30],["242",_e.VARIABLE_LENGTH,6],["250",_e.VARIABLE_LENGTH,30],["251",_e.VARIABLE_LENGTH,30],["253",_e.VARIABLE_LENGTH,17],["254",_e.VARIABLE_LENGTH,20],["400",_e.VARIABLE_LENGTH,30],["401",_e.VARIABLE_LENGTH,30],["402",17],["403",_e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",_e.VARIABLE_LENGTH,20],["421",_e.VARIABLE_LENGTH,15],["422",3],["423",_e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],_e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",_e.VARIABLE_LENGTH,15],["391",_e.VARIABLE_LENGTH,18],["392",_e.VARIABLE_LENGTH,15],["393",_e.VARIABLE_LENGTH,18],["703",_e.VARIABLE_LENGTH,30]],_e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",_e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",_e.VARIABLE_LENGTH,20],["8003",_e.VARIABLE_LENGTH,30],["8004",_e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",_e.VARIABLE_LENGTH,30],["8008",_e.VARIABLE_LENGTH,12],["8018",18],["8020",_e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",_e.VARIABLE_LENGTH,70],["8200",_e.VARIABLE_LENGTH,70]];class Fn{constructor(t){this.buffer=new at,this.information=t}decodeAllCodes(t,r){let a=r,u=null;do{let c=this.decodeGeneralPurposeField(a,u),d=_e.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&t.append(d),c.isRemaining()?u=""+c.getRemainingValue():u=null,a===c.getNewPosition())break;a=c.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(t,4);return c===0?new Pn(this.information.getSize(),Pn.FNC1,Pn.FNC1):new Pn(this.information.getSize(),c-1,Pn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),a=(r-8)/11,u=(r-8)%11;return new Pn(t+7,a,u)}extractNumericValueFromBitArray(t,r){return Fn.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,a){let u=0;for(let c=0;c<a;++c)t.get(r+c)&&(u|=1<<a-c-1);return u}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Lr(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Lr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let a=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Lr(this.current.getPosition(),this.buffer.toString()):r=new Lr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new $r(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new $r(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $r(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new $r(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $r(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new $r(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $r(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(t,8);return u>=232&&u<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tn(t+5,Tn.FNC1);if(r>=5&&r<15)return new Tn(t+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Tn(t+7,""+(a+1));if(a>=90&&a<116)return new Tn(t+7,""+(a+7));let u=this.extractNumericValueFromBitArray(t,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new ee}return new Tn(t+8,c)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tn(t+5,Tn.FNC1);if(r>=5&&r<15)return new Tn(t+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Tn(t+6,""+(a+33));let u;switch(a){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Yn("Decoding invalid alphanumeric value: "+a)}return new Tn(t+6,u)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class ln{constructor(t){this.information=t,this.generalDecoder=new Fn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Tt extends ln{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,a)}encodeCompressedGtinWithoutAI(t,r,a){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*u,10);c/100===0&&t.append("0"),c/10===0&&t.append("0"),t.append(c)}Tt.appendCheckDigit(t,a)}static appendCheckDigit(t,r){let a=0;for(let u=0;u<13;u++){let c=t.charAt(u+r).charCodeAt(0)-48;a+=(u&1)===0?3*c:c}a=10-a%10,a===10&&(a=0),t.append(a)}}Tt.GTIN_SIZE=40;class sr extends Tt{constructor(t){super(t)}parseInformation(){let t=new at;t.append("(01)");let r=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,sr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,sr.HEADER_SIZE+44)}}sr.HEADER_SIZE=4;class Pi extends ln{constructor(t){super(t)}parseInformation(){let t=new at;return this.getGeneralDecoder().decodeAllCodes(t,Pi.HEADER_SIZE)}}Pi.HEADER_SIZE=5;class is extends Tt{constructor(t){super(t)}encodeCompressedWeight(t,r,a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r,a);this.addWeightCode(t,u);let c=this.checkWeight(u),d=1e5;for(let g=0;g<5;++g)c/d===0&&t.append("0"),d/=10;t.append(c)}}class _r extends is{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=_r.HEADER_SIZE+is.GTIN_SIZE+_r.WEIGHT_SIZE)throw new se;let t=new at;return this.encodeCompressedGtin(t,_r.HEADER_SIZE),this.encodeCompressedWeight(t,_r.HEADER_SIZE+is.GTIN_SIZE,_r.WEIGHT_SIZE),t.toString()}}_r.HEADER_SIZE=5,_r.WEIGHT_SIZE=15;class bo extends _r{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Ta extends _r{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Kn extends Tt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Kn.HEADER_SIZE+Tt.GTIN_SIZE)throw new se;let t=new at;this.encodeCompressedGtin(t,Kn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Kn.HEADER_SIZE+Tt.GTIN_SIZE,Kn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Kn.HEADER_SIZE+Tt.GTIN_SIZE+Kn.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}Kn.HEADER_SIZE=8,Kn.LAST_DIGIT_SIZE=2;class Jt extends Tt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Jt.HEADER_SIZE+Tt.GTIN_SIZE)throw new se;let t=new at;this.encodeCompressedGtin(t,Jt.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Jt.HEADER_SIZE+Tt.GTIN_SIZE,Jt.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Jt.HEADER_SIZE+Tt.GTIN_SIZE+Jt.LAST_DIGIT_SIZE,Jt.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Jt.HEADER_SIZE+Tt.GTIN_SIZE+Jt.LAST_DIGIT_SIZE+Jt.FIRST_THREE_DIGITS_SIZE,null);return t.append(u.getNewString()),t.toString()}}Jt.HEADER_SIZE=8,Jt.LAST_DIGIT_SIZE=2,Jt.FIRST_THREE_DIGITS_SIZE=10;class bt extends is{constructor(t,r,a){super(t),this.dateCode=a,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE+bt.DATE_SIZE)throw new se;let t=new at;return this.encodeCompressedGtin(t,bt.HEADER_SIZE),this.encodeCompressedWeight(t,bt.HEADER_SIZE+bt.GTIN_SIZE,bt.WEIGHT_SIZE),this.encodeCompressedDate(t,bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,bt.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let u=a%32;a/=32;let c=a%12+1;a/=12;let d=a;d/10==0&&t.append("0"),t.append(d),c/10==0&&t.append("0"),t.append(c),u/10==0&&t.append("0"),t.append(u)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}bt.HEADER_SIZE=8,bt.WEIGHT_SIZE=20,bt.DATE_SIZE=16;function Fi(T){try{if(T.get(1))return new sr(T);if(!T.get(2))return new Pi(T);switch(Fn.extractNumericValueFromBitArray(T,1,4)){case 4:return new bo(T);case 5:return new Ta(T)}switch(Fn.extractNumericValueFromBitArray(T,1,5)){case 12:return new Kn(T);case 13:return new Jt(T)}switch(Fn.extractNumericValueFromBitArray(T,1,7)){case 56:return new bt(T,"310","11");case 57:return new bt(T,"320","11");case 58:return new bt(T,"310","13");case 59:return new bt(T,"320","13");case 60:return new bt(T,"310","15");case 61:return new bt(T,"320","15");case 62:return new bt(T,"310","17");case 63:return new bt(T,"320","17")}}catch(t){throw console.log(t),new Yn("unknown decoder: "+T)}}class zn{constructor(t,r,a,u){this.leftchar=t,this.rightchar=r,this.finderpattern=a,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof zn?zn.equalsOrNull(t.leftchar,r.leftchar)&&zn.equalsOrNull(t.rightchar,r.rightchar)&&zn.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:zn.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class $t{constructor(t,r,a){this.pairs=t,this.rowNumber=r,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof $t?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let a;return t.forEach((u,c)=>{r.forEach(d=>{u.getLeftChar().getValue()===d.getLeftChar().getValue()&&u.getRightChar().getValue()===d.getRightChar().getValue()&&u.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class ge extends vn{constructor(t){super(...arguments),this.pairs=new Array(ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,a){this.pairs.length=0,this.startFromEven=!1;try{return ge.constructResult(this.decodeRow2pairs(t,r))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ge.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof se){if(!this.pairs.length)throw new se;a=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(t,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new se}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let a=r;a<this.rows.length;a++){let u=this.rows[a];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(u.getPairs()),!ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(t);c.push(u);try{return this.checkRows(c,a+1)}catch(d){this.verbose&&console.log(d)}}throw new se}static isValidSequence(t){for(let r of ge.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let a=!0;for(let u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!=r[u]){a=!1;break}if(a)return!0}return!1}storeRow(t,r){let a=0,u=!1,c=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>t){c=d.isEquivalent(this.pairs);break}u=d.isEquivalent(this.pairs),a++}c||u||ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new $t(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let a of r)if(a.getPairs().length!==t.length){for(let u of a.getPairs())for(let c of t)if(zn.equals(u,c))break}}static isPartialRow(t,r){for(let a of r){let u=!0;for(let c of t){let d=!1;for(let g of a.getPairs())if(c.equals(g)){d=!0;break}if(!d){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=wo.buildBitArray(t),u=Fi(r).parseInformation(),c=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),g=[c[0],c[1],d[0],d[1]];return new Ae(u,null,null,g,be.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let u=a.getChecksumPortion(),c=2;for(let g=1;g<this.pairs.size();++g){let y=this.pairs.get(g);u+=y.getLeftChar().getChecksumPortion(),c++;let v=y.getRightChar();v!=null&&(u+=v.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==r.getValue()}static getNextSecondBar(t,r){let a;return t.get(r)?(a=t.getNextUnset(r),a=t.getNextSet(a)):(a=t.getNextSet(r),a=t.getNextUnset(a)),a}retrieveNextPair(t,r,a){let u=r.length%2==0;this.startFromEven&&(u=!u);let c,d=!0,g=-1;do this.findNextPair(t,r,g),c=this.parseFoundFinderPattern(t,a,u),c==null?g=ge.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(t,c,u,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new se;let v;try{v=this.decodeDataCharacter(t,c,u,!1)}catch(S){v=null,this.verbose&&console.log(S)}return new zn(y,v,c,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,a){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),d;a>=0?d=a:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let g=r.length%2!=0;this.startFromEven&&(g=!g);let y=!1;for(;d<c&&(y=!t.get(d),!!y);)d++;let v=0,S=d;for(let O=d;O<c;O++)if(t.get(O)!=y)u[v]++;else{if(v==3){if(g&&ge.reverseCounters(u),ge.isFinderPattern(u)){this.startEnd[0]=S,this.startEnd[1]=O;return}g&&ge.reverseCounters(u),S+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,y=!y}throw new se}static reverseCounters(t){let r=t.length;for(let a=0;a<r/2;++a){let u=t[a];t[a]=t[r-a-1],t[r-a-1]=u}}parseFoundFinderPattern(t,r,a){let u,c,d;if(a){let v=this.startEnd[0]-1;for(;v>=0&&!t.get(v);)v--;v++,u=this.startEnd[0]-v,c=v,d=this.startEnd[1]}else c=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),u=d-this.startEnd[1];let g=this.getDecodeFinderCounters();G.arraycopy(g,0,g,1,g.length-1),g[0]=u;let y;try{y=this.parseFinderValue(g,ge.FINDER_PATTERNS)}catch{return null}return new Jr(y,[c,d],c,d,r)}decodeDataCharacter(t,r,a,u){let c=this.getDataCharacterCounters();for(let St=0;St<c.length;St++)c[St]=0;if(u)ge.recordPatternInReverse(t,r.getStartEnd()[0],c);else{ge.recordPattern(t,r.getStartEnd()[1],c);for(let St=0,_n=c.length-1;St<_n;St++,_n--){let Vn=c[St];c[St]=c[_n],c[_n]=Vn}}let d=17,g=et.sum(new Int32Array(c))/d,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new se;let v=this.getOddCounts(),S=this.getEvenCounts(),O=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let St=0;St<c.length;St++){let _n=1*c[St]/g,Vn=_n+.5;if(Vn<1){if(_n<.3)throw new se;Vn=1}else if(Vn>8){if(_n>8.7)throw new se;Vn=8}let Ji=St/2;(St&1)==0?(v[Ji]=Vn,O[Ji]=_n-Vn):(S[Ji]=Vn,I[Ji]=_n-Vn)}this.adjustOddEvenCounts(d);let B=4*r.getValue()+(a?0:2)+(u?0:1)-1,P=0,F=0;for(let St=v.length-1;St>=0;St--){if(ge.isNotA1left(r,a,u)){let _n=ge.WEIGHTS[B][2*St];F+=v[St]*_n}P+=v[St]}let X=0;for(let St=S.length-1;St>=0;St--)if(ge.isNotA1left(r,a,u)){let _n=ge.WEIGHTS[B][2*St+1];X+=S[St]*_n}let ne=F+X;if((P&1)!=0||P>13||P<4)throw new se;let ye=(13-P)/2,xe=ge.SYMBOL_WIDEST[ye],me=9-xe,Qe=Ar.getRSSvalue(v,xe,!0),qe=Ar.getRSSvalue(S,me,!1),en=ge.EVEN_TOTAL_SUBSET[ye],Jn=ge.GSUM[ye],In=Qe*en+qe+Jn;return new Qr(In,ne)}static isNotA1left(t,r,a){return!(t.getValue()==0&&r&&a)}adjustOddEvenCounts(t){let r=et.sum(new Int32Array(this.getOddCounts())),a=et.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;r>13?c=!0:r<4&&(u=!0);let d=!1,g=!1;a>13?g=!0:a<4&&(d=!0);let y=r+a-t,v=(r&1)==1,S=(a&1)==0;if(y==1)if(v){if(S)throw new se;c=!0}else{if(!S)throw new se;g=!0}else if(y==-1)if(v){if(S)throw new se;u=!0}else{if(!S)throw new se;d=!0}else if(y==0){if(v){if(!S)throw new se;r<a?(u=!0,g=!0):(c=!0,d=!0)}else if(S)throw new se}else throw new se;if(u){if(c)throw new se;ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(g)throw new se;ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ge.SYMBOL_WIDEST=[7,5,4,3,1],ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ge.GSUM=[0,348,1388,2948,3988],ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ge.FINDER_PAT_A=0,ge.FINDER_PAT_B=1,ge.FINDER_PAT_C=2,ge.FINDER_PAT_D=3,ge.FINDER_PAT_E=4,ge.FINDER_PAT_F=5,ge.FINDER_PATTERN_SEQUENCES=[[ge.FINDER_PAT_A,ge.FINDER_PAT_A],[ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B],[ge.FINDER_PAT_A,ge.FINDER_PAT_C,ge.FINDER_PAT_B,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_C],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F]],ge.MAX_PAIRS=11;class vo extends Qr{constructor(t,r,a){super(t,r),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class At extends vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,a){const u=this.decodePair(r,!1,t,a);At.addOrTally(this.possibleLeftPairs,u),r.reverse();let c=this.decodePair(r,!0,t,a);At.addOrTally(this.possibleRightPairs,c),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&At.checkChecksum(d,g))return At.constructResult(d,g)}throw new se}static addOrTally(t,r){if(r==null)return;let a=!1;for(let u of t)if(u.getValue()===r.getValue()){u.incrementCount(),a=!0;break}a||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let a=4537077*t.getValue()+r.getValue(),u=new String(a).toString(),c=new at;for(let v=13-u.length;v>0;v--)c.append("0");c.append(u);let d=0;for(let v=0;v<13;v++){let S=c.charAt(v).charCodeAt(0)-48;d+=(v&1)===0?3*S:S}d=10-d%10,d===10&&(d=0),c.append(d.toString());let g=t.getFinderPattern().getResultPoints(),y=r.getFinderPattern().getResultPoints();return new Ae(c.toString(),null,0,[g[0],g[1],y[0],y[1]],be.RSS_14,new Date().getTime())}static checkChecksum(t,r){let a=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,u=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,a===u}decodePair(t,r,a,u){try{let c=this.findFinderPattern(t,r),d=this.parseFoundFinderPattern(t,a,r,c),g=u==null?null:u.get(Ee.NEED_RESULT_POINT_CALLBACK);if(g!=null){let S=(c[0]+c[1])/2;r&&(S=t.getSize()-1-S),g.foundPossibleResultPoint(new Ce(S,a))}let y=this.decodeDataCharacter(t,d,!0),v=this.decodeDataCharacter(t,d,!1);return new vo(1597*y.getValue()+v.getValue(),y.getChecksumPortion()+4*v.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,r,a){let u=this.getDataCharacterCounters();for(let X=0;X<u.length;X++)u[X]=0;if(a)Ft.recordPatternInReverse(t,r.getStartEnd()[0],u);else{Ft.recordPattern(t,r.getStartEnd()[1]+1,u);for(let X=0,ne=u.length-1;X<ne;X++,ne--){let ye=u[X];u[X]=u[ne],u[ne]=ye}}let c=a?16:15,d=et.sum(new Int32Array(u))/c,g=this.getOddCounts(),y=this.getEvenCounts(),v=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let X=0;X<u.length;X++){let ne=u[X]/d,ye=Math.floor(ne+.5);ye<1?ye=1:ye>8&&(ye=8);let xe=Math.floor(X/2);(X&1)===0?(g[xe]=ye,v[xe]=ne-ye):(y[xe]=ye,S[xe]=ne-ye)}this.adjustOddEvenCounts(a,c);let O=0,I=0;for(let X=g.length-1;X>=0;X--)I*=9,I+=g[X],O+=g[X];let B=0,P=0;for(let X=y.length-1;X>=0;X--)B*=9,B+=y[X],P+=y[X];let F=I+3*B;if(a){if((O&1)!==0||O>12||O<4)throw new se;let X=(12-O)/2,ne=At.OUTSIDE_ODD_WIDEST[X],ye=9-ne,xe=Ar.getRSSvalue(g,ne,!1),me=Ar.getRSSvalue(y,ye,!0),Qe=At.OUTSIDE_EVEN_TOTAL_SUBSET[X],qe=At.OUTSIDE_GSUM[X];return new Qr(xe*Qe+me+qe,F)}else{if((P&1)!==0||P>10||P<4)throw new se;let X=(10-P)/2,ne=At.INSIDE_ODD_WIDEST[X],ye=9-ne,xe=Ar.getRSSvalue(g,ne,!0),me=Ar.getRSSvalue(y,ye,!1),Qe=At.INSIDE_ODD_TOTAL_SUBSET[X],qe=At.INSIDE_GSUM[X];return new Qr(me*Qe+xe+qe,F)}}findFinderPattern(t,r){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),c=!1,d=0;for(;d<u&&(c=!t.get(d),r!==c);)d++;let g=0,y=d;for(let v=d;v<u;v++)if(t.get(v)!==c)a[g]++;else{if(g===3){if(vn.isFinderPattern(a))return[y,v];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,c=!c}throw new se}parseFoundFinderPattern(t,r,a,u){let c=t.get(u[0]),d=u[0]-1;for(;d>=0&&c!==t.get(d);)d--;d++;const g=u[0]-d,y=this.getDecodeFinderCounters(),v=new Int32Array(y.length);G.arraycopy(y,0,v,1,y.length-1),v[0]=g;const S=this.parseFinderValue(v,At.FINDER_PATTERNS);let O=d,I=u[1];return a&&(O=t.getSize()-1-O,I=t.getSize()-1-I),new Jr(S,[d,u[1]],O,I,r)}adjustOddEvenCounts(t,r){let a=et.sum(new Int32Array(this.getOddCounts())),u=et.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,g=!1,y=!1;t?(a>12?d=!0:a<4&&(c=!0),u>12?y=!0:u<4&&(g=!0)):(a>11?d=!0:a<5&&(c=!0),u>10?y=!0:u<4&&(g=!0));let v=a+u-r,S=(a&1)===(t?1:0),O=(u&1)===1;if(v===1)if(S){if(O)throw new se;d=!0}else{if(!O)throw new se;y=!0}else if(v===-1)if(S){if(O)throw new se;c=!0}else{if(!O)throw new se;g=!0}else if(v===0){if(S){if(!O)throw new se;a<u?(c=!0,y=!0):(d=!0,g=!0)}else if(O)throw new se}else throw new se;if(c){if(d)throw new se;vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new se;vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}At.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],At.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],At.OUTSIDE_GSUM=[0,161,961,2015,2715],At.INSIDE_GSUM=[0,336,1036,1516],At.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],At.INSIDE_ODD_WIDEST=[2,4,6,8],At.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lr extends Ft{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const a=t?t.get(Ee.POSSIBLE_FORMATS):null,u=t&&t.get(Ee.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(be.EAN_13)||a.includes(be.UPC_A)||a.includes(be.EAN_8)||a.includes(be.UPC_E))&&this.readers.push(new ll(t)),a.includes(be.CODE_39)&&this.readers.push(new It(u)),a.includes(be.CODE_128)&&this.readers.push(new we),a.includes(be.ITF)&&this.readers.push(new We),a.includes(be.RSS_14)&&this.readers.push(new At),a.includes(be.RSS_EXPANDED)&&this.readers.push(new ge(this.verbose))):(this.readers.push(new ll(t)),this.readers.push(new It),this.readers.push(new ll(t)),this.readers.push(new we),this.readers.push(new We),this.readers.push(new At),this.readers.push(new ge(this.verbose)))}decodeRow(t,r,a){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(t,r,a)}catch{}throw new se}reset(){this.readers.forEach(t=>t.reset())}}class oc extends ve{constructor(t=500,r){super(new lr(r),t,r)}}class pt{constructor(t,r,a){this.ecCodewords=t,this.ecBlocks=[r],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class mt{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tt{constructor(t,r,a,u,c,d){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=a,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=d;let g=0;const y=d.getECCodewords(),v=d.getECBlocks();for(let S of v)g+=S.getCount()*(S.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new ee;for(let a of tt.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===r)return a;throw new ee}toString(){return""+this.versionNumber}static buildVersions(){return[new tt(1,10,10,8,8,new pt(5,new mt(1,3))),new tt(2,12,12,10,10,new pt(7,new mt(1,5))),new tt(3,14,14,12,12,new pt(10,new mt(1,8))),new tt(4,16,16,14,14,new pt(12,new mt(1,12))),new tt(5,18,18,16,16,new pt(14,new mt(1,18))),new tt(6,20,20,18,18,new pt(18,new mt(1,22))),new tt(7,22,22,20,20,new pt(20,new mt(1,30))),new tt(8,24,24,22,22,new pt(24,new mt(1,36))),new tt(9,26,26,24,24,new pt(28,new mt(1,44))),new tt(10,32,32,14,14,new pt(36,new mt(1,62))),new tt(11,36,36,16,16,new pt(42,new mt(1,86))),new tt(12,40,40,18,18,new pt(48,new mt(1,114))),new tt(13,44,44,20,20,new pt(56,new mt(1,144))),new tt(14,48,48,22,22,new pt(68,new mt(1,174))),new tt(15,52,52,24,24,new pt(42,new mt(2,102))),new tt(16,64,64,14,14,new pt(56,new mt(2,140))),new tt(17,72,72,16,16,new pt(36,new mt(4,92))),new tt(18,80,80,18,18,new pt(48,new mt(4,114))),new tt(19,88,88,20,20,new pt(56,new mt(4,144))),new tt(20,96,96,22,22,new pt(68,new mt(4,174))),new tt(21,104,104,24,24,new pt(56,new mt(6,136))),new tt(22,120,120,18,18,new pt(68,new mt(6,175))),new tt(23,132,132,20,20,new pt(62,new mt(8,163))),new tt(24,144,144,22,22,new pt(62,new mt(8,156),new mt(2,155))),new tt(25,8,18,6,16,new pt(7,new mt(1,5))),new tt(26,8,32,6,14,new pt(11,new mt(1,10))),new tt(27,12,26,10,24,new pt(14,new mt(1,16))),new tt(28,12,36,10,16,new pt(18,new mt(1,22))),new tt(29,16,36,14,16,new pt(24,new mt(1,32))),new tt(30,16,48,14,22,new pt(28,new mt(1,49)))]}}tt.VERSIONS=tt.buildVersions();class zi{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new ee;this.version=zi.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Nt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),a=t.getWidth();return tt.getVersionForDimensions(r,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,a=4,u=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let g=!1,y=!1,v=!1,S=!1;do if(a===c&&u===0&&!g)t[r++]=this.readCorner1(c,d)&255,a-=2,u+=2,g=!0;else if(a===c-2&&u===0&&(d&3)!==0&&!y)t[r++]=this.readCorner2(c,d)&255,a-=2,u+=2,y=!0;else if(a===c+4&&u===2&&(d&7)===0&&!v)t[r++]=this.readCorner3(c,d)&255,a-=2,u+=2,v=!0;else if(a===c-2&&u===0&&(d&7)===4&&!S)t[r++]=this.readCorner4(c,d)&255,a-=2,u+=2,S=!0;else{do a<c&&u>=0&&!this.readMappingMatrix.get(u,a)&&(t[r++]=this.readUtah(a,u,c,d)&255),a-=2,u+=2;while(a>=0&&u<d);a+=1,u+=3;do a>=0&&u<d&&!this.readMappingMatrix.get(u,a)&&(t[r++]=this.readUtah(a,u,c,d)&255),a+=2,u-=2;while(a<c&&u>=0);a+=3,u+=1}while(a<c||u<d);if(r!==this.version.getTotalCodewords())throw new ee;return t}readModule(t,r,a,u){return t<0&&(t+=a,r+=4-(a+4&7)),r<0&&(r+=u,t+=4-(u+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,a,u){let c=0;return this.readModule(t-2,r-2,a,u)&&(c|=1),c<<=1,this.readModule(t-2,r-1,a,u)&&(c|=1),c<<=1,this.readModule(t-1,r-2,a,u)&&(c|=1),c<<=1,this.readModule(t-1,r-1,a,u)&&(c|=1),c<<=1,this.readModule(t-1,r,a,u)&&(c|=1),c<<=1,this.readModule(t,r-2,a,u)&&(c|=1),c<<=1,this.readModule(t,r-1,a,u)&&(c|=1),c<<=1,this.readModule(t,r,a,u)&&(c|=1),c}readCorner1(t,r){let a=0;return this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,1,t,r)&&(a|=1),a<<=1,this.readModule(t-1,2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(2,r-1,t,r)&&(a|=1),a<<=1,this.readModule(3,r-1,t,r)&&(a|=1),a}readCorner2(t,r){let a=0;return this.readModule(t-3,0,t,r)&&(a|=1),a<<=1,this.readModule(t-2,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(0,r-4,t,r)&&(a|=1),a<<=1,this.readModule(0,r-3,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a}readCorner3(t,r){let a=0;return this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(0,r-3,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-3,t,r)&&(a|=1),a<<=1,this.readModule(1,r-2,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a}readCorner4(t,r){let a=0;return this.readModule(t-3,0,t,r)&&(a|=1),a<<=1,this.readModule(t-2,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(2,r-1,t,r)&&(a|=1),a<<=1,this.readModule(3,r-1,t,r)&&(a|=1),a}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new N("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=r/u|0,g=a/c|0,y=d*u,v=g*c,S=new Nt(v,y);for(let O=0;O<d;++O){const I=O*u;for(let B=0;B<g;++B){const P=B*c;for(let F=0;F<u;++F){const X=O*(u+2)+1+F,ne=I+F;for(let ye=0;ye<c;++ye){const xe=B*(c+2)+1+ye;if(t.get(xe,X)){const me=P+ye;S.set(me,ne)}}}}}return S}}class Hi{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const a=r.getECBlocks();let u=0;const c=a.getECBlocks();for(let F of c)u+=F.getCount();const d=new Array(u);let g=0;for(let F of c)for(let X=0;X<F.getCount();X++){const ne=F.getDataCodewords(),ye=a.getECCodewords()+ne;d[g++]=new Hi(ne,new Uint8Array(ye))}const v=d[0].codewords.length-a.getECCodewords(),S=v-1;let O=0;for(let F=0;F<S;F++)for(let X=0;X<g;X++)d[X].codewords[F]=t[O++];const I=r.getVersionNumber()===24,B=I?8:g;for(let F=0;F<B;F++)d[F].codewords[v-1]=t[O++];const P=d[0].codewords.length;for(let F=v;F<P;F++)for(let X=0;X<g;X++){const ne=I?(X+8)%g:X,ye=I&&ne>7?F-1:F;d[ne].codewords[ye]=t[O++]}if(O!==t.length)throw new N;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class or{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new N(""+t);let r=0,a=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(a>0){const d=8-a,g=t<d?t:d,y=d-g,v=255>>8-g<<y;r=(c[u]&v)>>y,t-=g,a+=g,a===8&&(a=0,u++)}if(t>0){for(;t>=8;)r=r<<8|c[u]&255,u++,t-=8;if(t>0){const d=8-t,g=255>>d<<d;r=r<<t|(c[u]&g)>>d,a+=t}}return this.bitOffset=a,this.byteOffset=u,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xt;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(xt||(xt={}));class Ur{static decode(t){const r=new or(t),a=new at,u=new at,c=new Array;let d=xt.ASCII_ENCODE;do if(d===xt.ASCII_ENCODE)d=this.decodeAsciiSegment(r,a,u);else{switch(d){case xt.C40_ENCODE:this.decodeC40Segment(r,a);break;case xt.TEXT_ENCODE:this.decodeTextSegment(r,a);break;case xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,a);break;case xt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,a);break;case xt.BASE256_ENCODE:this.decodeBase256Segment(r,a,c);break;default:throw new ee}d=xt.ASCII_ENCODE}while(d!==xt.PAD_ENCODE&&r.available()>0);return u.length()>0&&a.append(u.toString()),new kt(t,a.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(t,r,a){let u=!1;do{let c=t.readBits(8);if(c===0)throw new ee;if(c<=128)return u&&(c+=128),r.append(String.fromCharCode(c-1)),xt.ASCII_ENCODE;if(c===129)return xt.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&r.append("0"),r.append(""+d)}else switch(c){case 230:return xt.C40_ENCODE;case 231:return xt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:r.append("[)>05"),a.insert(0,"");break;case 237:r.append("[)>06"),a.insert(0,"");break;case 238:return xt.ANSIX12_ENCODE;case 239:return xt.TEXT_ENCODE;case 240:return xt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||t.available()!==0)throw new ee;break}}while(t.available()>0);return xt.ASCII_ENCODE}static decodeC40Segment(t,r){let a=!1;const u=[];let c=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),u);for(let g=0;g<3;g++){const y=u[g];switch(c){case 0:if(y<3)c=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[y];a?(r.append(String.fromCharCode(v.charCodeAt(0)+128)),a=!1):r.append(v)}else throw new ee;break;case 1:a?(r.append(String.fromCharCode(y+128)),a=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[y];a?(r.append(String.fromCharCode(v.charCodeAt(0)+128)),a=!1):r.append(v)}else switch(y){case 27:r.append("");break;case 30:a=!0;break;default:throw new ee}c=0;break;case 3:a?(r.append(String.fromCharCode(y+224)),a=!1):r.append(String.fromCharCode(y+96)),c=0;break;default:throw new ee}}}while(t.available()>0)}static decodeTextSegment(t,r){let a=!1,u=[],c=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),u);for(let g=0;g<3;g++){const y=u[g];switch(c){case 0:if(y<3)c=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[y];a?(r.append(String.fromCharCode(v.charCodeAt(0)+128)),a=!1):r.append(v)}else throw new ee;break;case 1:a?(r.append(String.fromCharCode(y+128)),a=!1):r.append(String.fromCharCode(y)),c=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[y];a?(r.append(String.fromCharCode(v.charCodeAt(0)+128)),a=!1):r.append(v)}else switch(y){case 27:r.append("");break;case 30:a=!0;break;default:throw new ee}c=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[y];a?(r.append(String.fromCharCode(v.charCodeAt(0)+128)),a=!1):r.append(v),c=0}else throw new ee;break;default:throw new ee}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const a=[];do{if(t.available()===8)return;const u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),a);for(let c=0;c<3;c++){const d=a[c];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new ee;break}}}while(t.available()>0)}static parseTwoBytes(t,r,a){let u=(t<<8)+r-1,c=Math.floor(u/1600);a[0]=c,u-=c*1600,c=Math.floor(u/40),a[1]=c,a[2]=u-c*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let u=t.readBits(6);if(u===31){const c=8-t.getBitOffset();c!==8&&t.readBits(c);return}(u&32)===0&&(u|=64),r.append(String.fromCharCode(u))}}while(t.available()>0)}static decodeBase256Segment(t,r,a){let u=1+t.getByteOffset();const c=this.unrandomize255State(t.readBits(8),u++);let d;if(c===0?d=t.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(t.readBits(8),u++),d<0)throw new ee;const g=new Uint8Array(d);for(let y=0;y<d;y++){if(t.available()<8)throw new ee;g[y]=this.unrandomize255State(t.readBits(8),u++)}a.push(g);try{r.append(it.decode(g,Ne.ISO88591))}catch(y){throw new Yn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,r){const a=149*r%255+1,u=t-a;return u>=0?u:u+256}}Ur.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ur.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ur.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ur.TEXT_SHIFT2_SET_CHARS=Ur.C40_SHIFT2_SET_CHARS,Ur.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class uc{constructor(){this.rsDecoder=new ui(gt.DATA_MATRIX_FIELD_256)}decode(t){const r=new zi(t),a=r.getVersion(),u=r.readCodewords(),c=Hi.getDataBlocks(u,a);let d=0;for(let v of c)d+=v.getNumDataCodewords();const g=new Uint8Array(d),y=c.length;for(let v=0;v<y;v++){const S=c[v],O=S.getCodewords(),I=S.getNumDataCodewords();this.correctErrors(O,I);for(let B=0;B<I;B++)g[B*y+v]=O[B]}return Ur.decode(g)}correctErrors(t,r){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-r)}catch{throw new U}for(let u=0;u<r;u++)t[u]=a[u]}}class Ht{constructor(t){this.image=t,this.rectangleDetector=new Zt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new se;r=this.shiftToModuleCenter(r);const a=r[0],u=r[1],c=r[2],d=r[3];let g=this.transitionsBetween(a,d)+1,y=this.transitionsBetween(c,d)+1;(g&1)===1&&(g+=1),(y&1)===1&&(y+=1),4*g<7*y&&4*y<7*g&&(g=y=Math.max(g,y));let v=Ht.sampleGrid(this.image,a,u,c,d,g,y);return new ts(v,[a,u,c,d])}static shiftPoint(t,r,a){let u=(r.getX()-t.getX())/(a+1),c=(r.getY()-t.getY())/(a+1);return new Ce(t.getX()+u,t.getY()+c)}static moveAway(t,r,a){let u=t.getX(),c=t.getY();return u<r?u-=1:u+=1,c<a?c-=1:c+=1,new Ce(u,c)}detectSolid1(t){let r=t[0],a=t[1],u=t[3],c=t[2],d=this.transitionsBetween(r,a),g=this.transitionsBetween(a,u),y=this.transitionsBetween(u,c),v=this.transitionsBetween(c,r),S=d,O=[c,r,a,u];return S>g&&(S=g,O[0]=r,O[1]=a,O[2]=u,O[3]=c),S>y&&(S=y,O[0]=a,O[1]=u,O[2]=c,O[3]=r),S>v&&(O[0]=u,O[1]=c,O[2]=r,O[3]=a),O}detectSolid2(t){let r=t[0],a=t[1],u=t[2],c=t[3],d=this.transitionsBetween(r,c),g=Ht.shiftPoint(a,u,(d+1)*4),y=Ht.shiftPoint(u,a,(d+1)*4),v=this.transitionsBetween(g,r),S=this.transitionsBetween(y,c);return v<S?(t[0]=r,t[1]=a,t[2]=u,t[3]=c):(t[0]=a,t[1]=u,t[2]=c,t[3]=r),t}correctTopRight(t){let r=t[0],a=t[1],u=t[2],c=t[3],d=this.transitionsBetween(r,c),g=this.transitionsBetween(a,c),y=Ht.shiftPoint(r,a,(g+1)*4),v=Ht.shiftPoint(u,a,(d+1)*4);d=this.transitionsBetween(y,c),g=this.transitionsBetween(v,c);let S=new Ce(c.getX()+(u.getX()-a.getX())/(d+1),c.getY()+(u.getY()-a.getY())/(d+1)),O=new Ce(c.getX()+(r.getX()-a.getX())/(g+1),c.getY()+(r.getY()-a.getY())/(g+1));if(!this.isValid(S))return this.isValid(O)?O:null;if(!this.isValid(O))return S;let I=this.transitionsBetween(y,S)+this.transitionsBetween(v,S),B=this.transitionsBetween(y,O)+this.transitionsBetween(v,O);return I>B?S:O}shiftToModuleCenter(t){let r=t[0],a=t[1],u=t[2],c=t[3],d=this.transitionsBetween(r,c)+1,g=this.transitionsBetween(u,c)+1,y=Ht.shiftPoint(r,a,g*4),v=Ht.shiftPoint(u,a,d*4);d=this.transitionsBetween(y,c)+1,g=this.transitionsBetween(v,c)+1,(d&1)===1&&(d+=1),(g&1)===1&&(g+=1);let S=(r.getX()+a.getX()+u.getX()+c.getX())/4,O=(r.getY()+a.getY()+u.getY()+c.getY())/4;r=Ht.moveAway(r,S,O),a=Ht.moveAway(a,S,O),u=Ht.moveAway(u,S,O),c=Ht.moveAway(c,S,O);let I,B;return y=Ht.shiftPoint(r,a,g*4),y=Ht.shiftPoint(y,c,d*4),I=Ht.shiftPoint(a,r,g*4),I=Ht.shiftPoint(I,u,d*4),v=Ht.shiftPoint(u,c,g*4),v=Ht.shiftPoint(v,a,d*4),B=Ht.shiftPoint(c,u,g*4),B=Ht.shiftPoint(B,r,d*4),[y,I,v,B]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,a,u,c,d,g){return ar.getInstance().sampleGrid(t,d,g,.5,.5,d-.5,.5,d-.5,g-.5,.5,g-.5,r.getX(),r.getY(),c.getX(),c.getY(),u.getX(),u.getY(),a.getX(),a.getY())}transitionsBetween(t,r){let a=Math.trunc(t.getX()),u=Math.trunc(t.getY()),c=Math.trunc(r.getX()),d=Math.trunc(r.getY()),g=Math.abs(d-u)>Math.abs(c-a);if(g){let F=a;a=u,u=F,F=c,c=d,d=F}let y=Math.abs(c-a),v=Math.abs(d-u),S=-y/2,O=u<d?1:-1,I=a<c?1:-1,B=0,P=this.image.get(g?u:a,g?a:u);for(let F=a,X=u;F!==c;F+=I){let ne=this.image.get(g?X:F,g?F:X);if(ne!==P&&(B++,P=ne),S+=v,S>0){if(X===d)break;X+=O,S-=y}}return B}}class jr{constructor(){this.decoder=new uc}decode(t,r=null){let a,u;if(r!=null&&r.has(Ee.PURE_BARCODE)){const v=jr.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(v),u=jr.NO_POINTS}else{const v=new Ht(t.getBlackMatrix()).detect();a=this.decoder.decode(v.getBits()),u=v.getPoints()}const c=a.getRawBytes(),d=new Ae(a.getText(),c,8*c.length,u,be.DATA_MATRIX,G.currentTimeMillis()),g=a.getByteSegments();g!=null&&d.putMetadata(dt.BYTE_SEGMENTS,g);const y=a.getECLevel();return y!=null&&d.putMetadata(dt.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(r==null||a==null)throw new se;const u=this.moduleSize(r,t);let c=r[1];const d=a[1];let g=r[0];const v=(a[0]-g+1)/u,S=(d-c+1)/u;if(v<=0||S<=0)throw new se;const O=u/2;c+=O,g+=O;const I=new Nt(v,S);for(let B=0;B<S;B++){const P=c+B*u;for(let F=0;F<v;F++)t.get(g+F*u,P)&&I.set(F,B)}return I}static moduleSize(t,r){const a=r.getWidth();let u=t[0];const c=t[1];for(;u<a&&r.get(u,c);)u++;if(u===a)throw new se;const d=u-t[0];if(d===0)throw new se;return d}}jr.NO_POINTS=[];class as extends ve{constructor(t=500){super(new jr,t)}}var Gi;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(Gi||(Gi={}));class Je{constructor(t,r,a){this.value=t,this.stringValue=r,this.bits=a,Je.FOR_BITS.set(a,this),Je.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Je.L;case"M":return Je.M;case"Q":return Je.Q;case"H":return Je.H;default:throw new R(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Je))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=Je.FOR_BITS.size)throw new N;return Je.FOR_BITS.get(t)}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.L=new Je(Gi.L,"L",1),Je.M=new Je(Gi.M,"M",0),Je.Q=new Je(Gi.Q,"Q",3),Je.H=new Je(Gi.H,"H",2);class fn{constructor(t){this.errorCorrectionLevel=Je.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return Y.bitCount(t^r)}static decodeFormatInformation(t,r){const a=fn.doDecodeFormatInformation(t,r);return a!==null?a:fn.doDecodeFormatInformation(t^fn.FORMAT_INFO_MASK_QR,r^fn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let a=Number.MAX_SAFE_INTEGER,u=0;for(const c of fn.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===t||d===r)return new fn(c[1]);let g=fn.numBitsDiffering(t,d);g<a&&(u=c[1],a=g),t!==r&&(g=fn.numBitsDiffering(r,d),g<a&&(u=c[1],a=g))}return a<=3?new fn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof fn))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}fn.FORMAT_INFO_MASK_QR=21522,fn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const a of r)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Oe{constructor(t,r,...a){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=a;let u=0;const c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const g of d)u+=g.getCount()*(g.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new ee;try{return this.getVersionForNumber((t-17)/4)}catch{throw new ee}}static getVersionForNumber(t){if(t<1||t>40)throw new N;return Oe.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,a=0;for(let u=0;u<Oe.VERSION_DECODE_INFO.length;u++){const c=Oe.VERSION_DECODE_INFO[u];if(c===t)return Oe.getVersionForNumber(u+7);const d=fn.numBitsDiffering(t,c);d<r&&(a=u+7,r=d)}return r<=3?Oe.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Nt(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let u=0;u<a;u++){const c=this.alignmentPatternCenters[u]-2;for(let d=0;d<a;d++)u===0&&(d===0||d===a-1)||u===a-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}Oe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Oe.VERSIONS=[new Oe(1,new Int32Array(0),new K(7,new M(1,19)),new K(10,new M(1,16)),new K(13,new M(1,13)),new K(17,new M(1,9))),new Oe(2,Int32Array.from([6,18]),new K(10,new M(1,34)),new K(16,new M(1,28)),new K(22,new M(1,22)),new K(28,new M(1,16))),new Oe(3,Int32Array.from([6,22]),new K(15,new M(1,55)),new K(26,new M(1,44)),new K(18,new M(2,17)),new K(22,new M(2,13))),new Oe(4,Int32Array.from([6,26]),new K(20,new M(1,80)),new K(18,new M(2,32)),new K(26,new M(2,24)),new K(16,new M(4,9))),new Oe(5,Int32Array.from([6,30]),new K(26,new M(1,108)),new K(24,new M(2,43)),new K(18,new M(2,15),new M(2,16)),new K(22,new M(2,11),new M(2,12))),new Oe(6,Int32Array.from([6,34]),new K(18,new M(2,68)),new K(16,new M(4,27)),new K(24,new M(4,19)),new K(28,new M(4,15))),new Oe(7,Int32Array.from([6,22,38]),new K(20,new M(2,78)),new K(18,new M(4,31)),new K(18,new M(2,14),new M(4,15)),new K(26,new M(4,13),new M(1,14))),new Oe(8,Int32Array.from([6,24,42]),new K(24,new M(2,97)),new K(22,new M(2,38),new M(2,39)),new K(22,new M(4,18),new M(2,19)),new K(26,new M(4,14),new M(2,15))),new Oe(9,Int32Array.from([6,26,46]),new K(30,new M(2,116)),new K(22,new M(3,36),new M(2,37)),new K(20,new M(4,16),new M(4,17)),new K(24,new M(4,12),new M(4,13))),new Oe(10,Int32Array.from([6,28,50]),new K(18,new M(2,68),new M(2,69)),new K(26,new M(4,43),new M(1,44)),new K(24,new M(6,19),new M(2,20)),new K(28,new M(6,15),new M(2,16))),new Oe(11,Int32Array.from([6,30,54]),new K(20,new M(4,81)),new K(30,new M(1,50),new M(4,51)),new K(28,new M(4,22),new M(4,23)),new K(24,new M(3,12),new M(8,13))),new Oe(12,Int32Array.from([6,32,58]),new K(24,new M(2,92),new M(2,93)),new K(22,new M(6,36),new M(2,37)),new K(26,new M(4,20),new M(6,21)),new K(28,new M(7,14),new M(4,15))),new Oe(13,Int32Array.from([6,34,62]),new K(26,new M(4,107)),new K(22,new M(8,37),new M(1,38)),new K(24,new M(8,20),new M(4,21)),new K(22,new M(12,11),new M(4,12))),new Oe(14,Int32Array.from([6,26,46,66]),new K(30,new M(3,115),new M(1,116)),new K(24,new M(4,40),new M(5,41)),new K(20,new M(11,16),new M(5,17)),new K(24,new M(11,12),new M(5,13))),new Oe(15,Int32Array.from([6,26,48,70]),new K(22,new M(5,87),new M(1,88)),new K(24,new M(5,41),new M(5,42)),new K(30,new M(5,24),new M(7,25)),new K(24,new M(11,12),new M(7,13))),new Oe(16,Int32Array.from([6,26,50,74]),new K(24,new M(5,98),new M(1,99)),new K(28,new M(7,45),new M(3,46)),new K(24,new M(15,19),new M(2,20)),new K(30,new M(3,15),new M(13,16))),new Oe(17,Int32Array.from([6,30,54,78]),new K(28,new M(1,107),new M(5,108)),new K(28,new M(10,46),new M(1,47)),new K(28,new M(1,22),new M(15,23)),new K(28,new M(2,14),new M(17,15))),new Oe(18,Int32Array.from([6,30,56,82]),new K(30,new M(5,120),new M(1,121)),new K(26,new M(9,43),new M(4,44)),new K(28,new M(17,22),new M(1,23)),new K(28,new M(2,14),new M(19,15))),new Oe(19,Int32Array.from([6,30,58,86]),new K(28,new M(3,113),new M(4,114)),new K(26,new M(3,44),new M(11,45)),new K(26,new M(17,21),new M(4,22)),new K(26,new M(9,13),new M(16,14))),new Oe(20,Int32Array.from([6,34,62,90]),new K(28,new M(3,107),new M(5,108)),new K(26,new M(3,41),new M(13,42)),new K(30,new M(15,24),new M(5,25)),new K(28,new M(15,15),new M(10,16))),new Oe(21,Int32Array.from([6,28,50,72,94]),new K(28,new M(4,116),new M(4,117)),new K(26,new M(17,42)),new K(28,new M(17,22),new M(6,23)),new K(30,new M(19,16),new M(6,17))),new Oe(22,Int32Array.from([6,26,50,74,98]),new K(28,new M(2,111),new M(7,112)),new K(28,new M(17,46)),new K(30,new M(7,24),new M(16,25)),new K(24,new M(34,13))),new Oe(23,Int32Array.from([6,30,54,78,102]),new K(30,new M(4,121),new M(5,122)),new K(28,new M(4,47),new M(14,48)),new K(30,new M(11,24),new M(14,25)),new K(30,new M(16,15),new M(14,16))),new Oe(24,Int32Array.from([6,28,54,80,106]),new K(30,new M(6,117),new M(4,118)),new K(28,new M(6,45),new M(14,46)),new K(30,new M(11,24),new M(16,25)),new K(30,new M(30,16),new M(2,17))),new Oe(25,Int32Array.from([6,32,58,84,110]),new K(26,new M(8,106),new M(4,107)),new K(28,new M(8,47),new M(13,48)),new K(30,new M(7,24),new M(22,25)),new K(30,new M(22,15),new M(13,16))),new Oe(26,Int32Array.from([6,30,58,86,114]),new K(28,new M(10,114),new M(2,115)),new K(28,new M(19,46),new M(4,47)),new K(28,new M(28,22),new M(6,23)),new K(30,new M(33,16),new M(4,17))),new Oe(27,Int32Array.from([6,34,62,90,118]),new K(30,new M(8,122),new M(4,123)),new K(28,new M(22,45),new M(3,46)),new K(30,new M(8,23),new M(26,24)),new K(30,new M(12,15),new M(28,16))),new Oe(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new M(3,117),new M(10,118)),new K(28,new M(3,45),new M(23,46)),new K(30,new M(4,24),new M(31,25)),new K(30,new M(11,15),new M(31,16))),new Oe(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new M(7,116),new M(7,117)),new K(28,new M(21,45),new M(7,46)),new K(30,new M(1,23),new M(37,24)),new K(30,new M(19,15),new M(26,16))),new Oe(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new M(5,115),new M(10,116)),new K(28,new M(19,47),new M(10,48)),new K(30,new M(15,24),new M(25,25)),new K(30,new M(23,15),new M(25,16))),new Oe(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new M(13,115),new M(3,116)),new K(28,new M(2,46),new M(29,47)),new K(30,new M(42,24),new M(1,25)),new K(30,new M(23,15),new M(28,16))),new Oe(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new M(17,115)),new K(28,new M(10,46),new M(23,47)),new K(30,new M(10,24),new M(35,25)),new K(30,new M(19,15),new M(35,16))),new Oe(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new M(17,115),new M(1,116)),new K(28,new M(14,46),new M(21,47)),new K(30,new M(29,24),new M(19,25)),new K(30,new M(11,15),new M(46,16))),new Oe(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new M(13,115),new M(6,116)),new K(28,new M(14,46),new M(23,47)),new K(30,new M(44,24),new M(7,25)),new K(30,new M(59,16),new M(1,17))),new Oe(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new M(12,121),new M(7,122)),new K(28,new M(12,47),new M(26,48)),new K(30,new M(39,24),new M(14,25)),new K(30,new M(22,15),new M(41,16))),new Oe(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new M(6,121),new M(14,122)),new K(28,new M(6,47),new M(34,48)),new K(30,new M(46,24),new M(10,25)),new K(30,new M(2,15),new M(64,16))),new Oe(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new M(17,122),new M(4,123)),new K(28,new M(29,46),new M(14,47)),new K(30,new M(49,24),new M(10,25)),new K(30,new M(24,15),new M(46,16))),new Oe(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new M(4,122),new M(18,123)),new K(28,new M(13,46),new M(32,47)),new K(30,new M(48,24),new M(14,25)),new K(30,new M(42,15),new M(32,16))),new Oe(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new M(20,117),new M(4,118)),new K(28,new M(40,47),new M(7,48)),new K(30,new M(43,24),new M(22,25)),new K(30,new M(10,15),new M(67,16))),new Oe(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new M(19,118),new M(6,119)),new K(28,new M(18,47),new M(31,48)),new K(30,new M(34,24),new M(34,25)),new K(30,new M(20,15),new M(61,16)))];var on;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class Hn{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let a=0;a<r;a++)for(let u=0;u<r;u++)this.isMasked(a,u)&&t.flip(u,a)}}Hn.values=new Map([[on.DATA_MASK_000,new Hn(on.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[on.DATA_MASK_001,new Hn(on.DATA_MASK_001,(T,t)=>(T&1)===0)],[on.DATA_MASK_010,new Hn(on.DATA_MASK_010,(T,t)=>t%3===0)],[on.DATA_MASK_011,new Hn(on.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[on.DATA_MASK_100,new Hn(on.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[on.DATA_MASK_101,new Hn(on.DATA_MASK_101,(T,t)=>T*t%6===0)],[on.DATA_MASK_110,new Hn(on.DATA_MASK_110,(T,t)=>T*t%6<3)],[on.DATA_MASK_111,new Hn(on.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class Vi{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new ee;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let c=0;c<6;c++)t=this.copyBit(c,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let c=5;c>=0;c--)t=this.copyBit(8,c,t);const r=this.bitMatrix.getHeight();let a=0;const u=r-7;for(let c=r-1;c>=u;c--)a=this.copyBit(8,c,a);for(let c=r-8;c<r;c++)a=this.copyBit(c,8,a);if(this.parsedFormatInfo=fn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ee}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Oe.getVersionForNumber(r);let a=0;const u=t-11;for(let d=5;d>=0;d--)for(let g=t-9;g>=u;g--)a=this.copyBit(g,d,a);let c=Oe.decodeVersionInformation(a);if(c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;a=0;for(let d=5;d>=0;d--)for(let g=t-9;g>=u;g--)a=this.copyBit(d,g,a);if(c=Oe.decodeVersionInformation(a),c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;throw new ee}copyBit(t,r,a){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),a=Hn.values.get(t.getDataMask()),u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u);const c=r.buildFunctionPattern();let d=!0;const g=new Uint8Array(r.getTotalCodewords());let y=0,v=0,S=0;for(let O=u-1;O>0;O-=2){O===6&&O--;for(let I=0;I<u;I++){const B=d?u-1-I:I;for(let P=0;P<2;P++)c.get(O-P,B)||(S++,v<<=1,this.bitMatrix.get(O-P,B)&&(v|=1),S===8&&(g[y++]=v,S=0,v=0))}d=!d}if(y!==r.getTotalCodewords())throw new ee;return g}remask(){if(this.parsedFormatInfo===null)return;const t=Hn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,a=t.getWidth();r<a;r++)for(let u=r+1,c=t.getHeight();u<c;u++)t.get(r,u)!==t.get(u,r)&&(t.flip(u,r),t.flip(r,u))}}class ol{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,a){if(t.length!==r.getTotalCodewords())throw new N;const u=r.getECBlocksForLevel(a);let c=0;const d=u.getECBlocks();for(const P of d)c+=P.getCount();const g=new Array(c);let y=0;for(const P of d)for(let F=0;F<P.getCount();F++){const X=P.getDataCodewords(),ne=u.getECCodewordsPerBlock()+X;g[y++]=new ol(X,new Uint8Array(ne))}const v=g[0].codewords.length;let S=g.length-1;for(;S>=0&&g[S].codewords.length!==v;)S--;S++;const O=v-u.getECCodewordsPerBlock();let I=0;for(let P=0;P<O;P++)for(let F=0;F<y;F++)g[F].codewords[P]=t[I++];for(let P=S;P<y;P++)g[P].codewords[O]=t[I++];const B=g[0].codewords.length;for(let P=O;P<B;P++)for(let F=0;F<y;F++){const X=F<S?P:P+1;g[F].codewords[X]=t[I++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Gn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Gn||(Gn={}));class Me{constructor(t,r,a,u){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=a,this.bits=u,Me.FOR_BITS.set(u,this),Me.FOR_VALUE.set(t,this)}static forBits(t){const r=Me.FOR_BITS.get(t);if(r===void 0)throw new N;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let a;return r<=9?a=0:r<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Me))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Me.FOR_BITS=new Map,Me.FOR_VALUE=new Map,Me.TERMINATOR=new Me(Gn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Me.NUMERIC=new Me(Gn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Me.ALPHANUMERIC=new Me(Gn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Me.STRUCTURED_APPEND=new Me(Gn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Me.BYTE=new Me(Gn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Me.ECI=new Me(Gn.ECI,"ECI",Int32Array.from([0,0,0]),7),Me.KANJI=new Me(Gn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Me.FNC1_FIRST_POSITION=new Me(Gn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Me.FNC1_SECOND_POSITION=new Me(Gn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Me.HANZI=new Me(Gn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Lt{static decode(t,r,a,u){const c=new or(t);let d=new at;const g=new Array;let y=-1,v=-1;try{let S=null,O=!1,I;do{if(c.available()<4)I=Me.TERMINATOR;else{const B=c.readBits(4);I=Me.forBits(B)}switch(I){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:O=!0;break;case Me.STRUCTURED_APPEND:if(c.available()<16)throw new ee;y=c.readBits(8),v=c.readBits(8);break;case Me.ECI:const B=Lt.parseECIValue(c);if(S=he.getCharacterSetECIByValue(B),S===null)throw new ee;break;case Me.HANZI:const P=c.readBits(4),F=c.readBits(I.getCharacterCountBits(r));P===Lt.GB2312_SUBSET&&Lt.decodeHanziSegment(c,d,F);break;default:const X=c.readBits(I.getCharacterCountBits(r));switch(I){case Me.NUMERIC:Lt.decodeNumericSegment(c,d,X);break;case Me.ALPHANUMERIC:Lt.decodeAlphanumericSegment(c,d,X,O);break;case Me.BYTE:Lt.decodeByteSegment(c,d,X,S,g,u);break;case Me.KANJI:Lt.decodeKanjiSegment(c,d,X);break;default:throw new ee}break}}while(I!==Me.TERMINATOR)}catch{throw new ee}return new kt(t,d.toString(),g.length===0?null:g,a===null?null:a.toString(),y,v)}static decodeHanziSegment(t,r,a){if(a*13>t.available())throw new ee;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const d=t.readBits(13);let g=d/96<<8&4294967295|d%96;g<959?g+=41377:g+=42657,u[c]=g>>8&255,u[c+1]=g&255,c+=2,a--}try{r.append(it.decode(u,Ne.GB2312))}catch(d){throw new ee(d)}}static decodeKanjiSegment(t,r,a){if(a*13>t.available())throw new ee;const u=new Uint8Array(2*a);let c=0;for(;a>0;){const d=t.readBits(13);let g=d/192<<8&4294967295|d%192;g<7936?g+=33088:g+=49472,u[c]=g>>8,u[c+1]=g,c+=2,a--}try{r.append(it.decode(u,Ne.SHIFT_JIS))}catch(d){throw new ee(d)}}static decodeByteSegment(t,r,a,u,c,d){if(8*a>t.available())throw new ee;const g=new Uint8Array(a);for(let v=0;v<a;v++)g[v]=t.readBits(8);let y;u===null?y=Ne.guessEncoding(g,d):y=u.getName();try{r.append(it.decode(g,y))}catch(v){throw new ee(v)}c.push(g)}static toAlphaNumericChar(t){if(t>=Lt.ALPHANUMERIC_CHARS.length)throw new ee;return Lt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,a,u){const c=r.length();for(;a>1;){if(t.available()<11)throw new ee;const d=t.readBits(11);r.append(Lt.toAlphaNumericChar(Math.floor(d/45))),r.append(Lt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(t.available()<6)throw new ee;r.append(Lt.toAlphaNumericChar(t.readBits(6)))}if(u)for(let d=c;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(t,r,a){for(;a>=3;){if(t.available()<10)throw new ee;const u=t.readBits(10);if(u>=1e3)throw new ee;r.append(Lt.toAlphaNumericChar(Math.floor(u/100))),r.append(Lt.toAlphaNumericChar(Math.floor(u/10)%10)),r.append(Lt.toAlphaNumericChar(u%10)),a-=3}if(a===2){if(t.available()<7)throw new ee;const u=t.readBits(7);if(u>=100)throw new ee;r.append(Lt.toAlphaNumericChar(Math.floor(u/10))),r.append(Lt.toAlphaNumericChar(u%10))}else if(a===1){if(t.available()<4)throw new ee;const u=t.readBits(4);if(u>=10)throw new ee;r.append(Lt.toAlphaNumericChar(u))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const a=t.readBits(8);return(r&63)<<8&4294967295|a}if((r&224)===192){const a=t.readBits(16);return(r&31)<<16&4294967295|a}throw new ee}}Lt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Lt.GB2312_SUBSET=1;class Eo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class cc{constructor(){this.rsDecoder=new ui(gt.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Nt.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const a=new Vi(t);let u=null;try{return this.decodeBitMatrixParser(a,r)}catch(c){u=c}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const c=this.decodeBitMatrixParser(a,r);return c.setOther(new Eo(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(t,r){const a=t.readVersion(),u=t.readFormatInformation().getErrorCorrectionLevel(),c=t.readCodewords(),d=ol.getDataBlocks(c,a,u);let g=0;for(const S of d)g+=S.getNumDataCodewords();const y=new Uint8Array(g);let v=0;for(const S of d){const O=S.getCodewords(),I=S.getNumDataCodewords();this.correctErrors(O,I);for(let B=0;B<I;B++)y[v++]=O[B]}return Lt.decode(y,a,u,r)}correctErrors(t,r){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-r)}catch{throw new U}for(let u=0;u<r;u++)t[u]=a[u]}}class qi extends Ce{constructor(t,r,a){super(t,r),this.estimatedModuleSize=a}aboutEquals(t,r,a){if(Math.abs(r-this.getY())<=t&&Math.abs(a-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,r,a){const u=(this.getX()+r)/2,c=(this.getY()+t)/2,d=(this.estimatedModuleSize+a)/2;return new qi(u,c,d)}}class Zn{constructor(t,r,a,u,c,d,g){this.image=t,this.startX=r,this.startY=a,this.width=u,this.height=c,this.moduleSize=d,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,a=this.width,u=t+a,c=this.startY+r/2,d=new Int32Array(3),g=this.image;for(let y=0;y<r;y++){const v=c+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let S=t;for(;S<u&&!g.get(S,v);)S++;let O=0;for(;S<u;){if(g.get(S,v))if(O===1)d[1]++;else if(O===2){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,v,S);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,O=1}else d[++O]++;else O===1&&O++,d[O]++;S++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,v,u);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,a=r/2;for(let u=0;u<3;u++)if(Math.abs(r-t[u])>=a)return!1;return!0}crossCheckVertical(t,r,a,u){const c=this.image,d=c.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let y=t;for(;y>=0&&c.get(r,y)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&!c.get(r,y)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<d&&c.get(r,y)&&g[1]<=a;)g[1]++,y++;if(y===d||g[1]>a)return NaN;for(;y<d&&!c.get(r,y)&&g[2]<=a;)g[2]++,y++;if(g[2]>a)return NaN;const v=g[0]+g[1]+g[2];return 5*Math.abs(v-u)>=2*u?NaN:this.foundPatternCross(g)?Zn.centerFromEnd(g,y):NaN}handlePossibleCenter(t,r,a){const u=t[0]+t[1]+t[2],c=Zn.centerFromEnd(t,a),d=this.crossCheckVertical(r,c,2*t[1],u);if(!isNaN(d)){const g=(t[0]+t[1]+t[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(g,d,c))return v.combineEstimate(d,c,g);const y=new qi(c,d,g);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Oa extends Ce{constructor(t,r,a,u){super(t,r),this.estimatedModuleSize=a,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,a){if(Math.abs(r-this.getY())<=t&&Math.abs(a-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,r,a){const u=this.count+1,c=(this.count*this.getX()+r)/u,d=(this.count*this.getY()+t)/u,g=(this.count*this.estimatedModuleSize+a)/u;return new Oa(c,d,g,u)}}class ul{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Gt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(Ee.TRY_HARDER)!==void 0,a=t!=null&&t.get(Ee.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),d=u.getWidth();let g=Math.floor(3*c/(4*Gt.MAX_MODULES));(g<Gt.MIN_SKIP||r)&&(g=Gt.MIN_SKIP);let y=!1;const v=new Int32Array(5);for(let O=g-1;O<c&&!y;O+=g){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let I=0;for(let B=0;B<d;B++)if(u.get(B,O))(I&1)===1&&I++,v[I]++;else if((I&1)===0)if(I===4)if(Gt.foundPatternCross(v)){if(this.handlePossibleCenter(v,O,B,a)===!0)if(g=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const F=this.findRowSkip();F>v[2]&&(O+=F-v[2]-g,B=d-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,I=3;continue}I=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,I=3;else v[++I]++;else v[I]++;Gt.foundPatternCross(v)&&this.handlePossibleCenter(v,O,d,a)===!0&&(g=v[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return Ce.orderBestPatterns(S),new ul(S)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let c=0;c<5;c++){const d=t[c];if(d===0)return!1;r+=d}if(r<7)return!1;const a=r/7,u=a/2;return Math.abs(a-t[0])<u&&Math.abs(a-t[1])<u&&Math.abs(3*a-t[2])<3*u&&Math.abs(a-t[3])<u&&Math.abs(a-t[4])<u}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,a,u){const c=this.getCrossCheckStateCount();let d=0;const g=this.image;for(;t>=d&&r>=d&&g.get(r-d,t-d);)c[2]++,d++;if(t<d||r<d)return!1;for(;t>=d&&r>=d&&!g.get(r-d,t-d)&&c[1]<=a;)c[1]++,d++;if(t<d||r<d||c[1]>a)return!1;for(;t>=d&&r>=d&&g.get(r-d,t-d)&&c[0]<=a;)c[0]++,d++;if(c[0]>a)return!1;const y=g.getHeight(),v=g.getWidth();for(d=1;t+d<y&&r+d<v&&g.get(r+d,t+d);)c[2]++,d++;if(t+d>=y||r+d>=v)return!1;for(;t+d<y&&r+d<v&&!g.get(r+d,t+d)&&c[3]<a;)c[3]++,d++;if(t+d>=y||r+d>=v||c[3]>=a)return!1;for(;t+d<y&&r+d<v&&g.get(r+d,t+d)&&c[4]<a;)c[4]++,d++;if(c[4]>=a)return!1;const S=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(S-u)<2*u&&Gt.foundPatternCross(c)}crossCheckVertical(t,r,a,u){const c=this.image,d=c.getHeight(),g=this.getCrossCheckStateCount();let y=t;for(;y>=0&&c.get(r,y);)g[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(r,y)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&c.get(r,y)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<d&&c.get(r,y);)g[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(r,y)&&g[3]<a;)g[3]++,y++;if(y===d||g[3]>=a)return NaN;for(;y<d&&c.get(r,y)&&g[4]<a;)g[4]++,y++;if(g[4]>=a)return NaN;const v=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(v-u)>=2*u?NaN:Gt.foundPatternCross(g)?Gt.centerFromEnd(g,y):NaN}crossCheckHorizontal(t,r,a,u){const c=this.image,d=c.getWidth(),g=this.getCrossCheckStateCount();let y=t;for(;y>=0&&c.get(y,r);)g[2]++,y--;if(y<0)return NaN;for(;y>=0&&!c.get(y,r)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&c.get(y,r)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<d&&c.get(y,r);)g[2]++,y++;if(y===d)return NaN;for(;y<d&&!c.get(y,r)&&g[3]<a;)g[3]++,y++;if(y===d||g[3]>=a)return NaN;for(;y<d&&c.get(y,r)&&g[4]<a;)g[4]++,y++;if(g[4]>=a)return NaN;const v=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(v-u)>=u?NaN:Gt.foundPatternCross(g)?Gt.centerFromEnd(g,y):NaN}handlePossibleCenter(t,r,a,u){const c=t[0]+t[1]+t[2]+t[3]+t[4];let d=Gt.centerFromEnd(t,a),g=this.crossCheckVertical(r,Math.floor(d),t[2],c);if(!isNaN(g)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(g),t[2],c),!isNaN(d)&&(!u||this.crossCheckDiagonal(Math.floor(g),Math.floor(d),t[2],c)))){const y=c/7;let v=!1;const S=this.possibleCenters;for(let O=0,I=S.length;O<I;O++){const B=S[O];if(B.aboutEquals(y,g,d)){S[O]=B.combineEstimate(g,d,y),v=!0;break}}if(!v){const O=new Oa(d,g,y);S.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const a of this.possibleCenters)if(a.getCount()>=Gt.CENTER_QUORUM)if(r==null)r=a;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Gt.CENTER_QUORUM&&(t++,r+=d.getEstimatedModuleSize());if(t<3)return!1;const u=r/a;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-u);return c<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new se;const r=this.possibleCenters;let a;if(t>3){let u=0,c=0;for(const y of this.possibleCenters){const v=y.getEstimatedModuleSize();u+=v,c+=v*v}a=u/t;let d=Math.sqrt(c/t-a*a);r.sort((y,v)=>{const S=Math.abs(v.getEstimatedModuleSize()-a),O=Math.abs(y.getEstimatedModuleSize()-a);return S<O?-1:S>O?1:0});const g=Math.max(.2*a,d);for(let y=0;y<r.length&&r.length>3;y++){const v=r[y];Math.abs(v.getEstimatedModuleSize()-a)>g&&(r.splice(y,1),y--)}}if(r.length>3){let u=0;for(const c of r)u+=c.getEstimatedModuleSize();a=u/r.length,r.sort((c,d)=>{if(d.getCount()===c.getCount()){const g=Math.abs(d.getEstimatedModuleSize()-a),y=Math.abs(c.getEstimatedModuleSize()-a);return g<y?1:g>y?-1:0}else return d.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Gt.CENTER_QUORUM=2,Gt.MIN_SKIP=3,Gt.MAX_MODULES=57;class Sr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Ee.NEED_RESULT_POINT_CALLBACK);const a=new Gt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const r=t.getTopLeft(),a=t.getTopRight(),u=t.getBottomLeft(),c=this.calculateModuleSize(r,a,u);if(c<1)throw new se("No pattern found in proccess finder.");const d=Sr.computeDimension(r,a,u,c),g=Oe.getProvisionalVersionForDimension(d),y=g.getDimensionForVersion()-7;let v=null;if(g.getAlignmentPatternCenters().length>0){const B=a.getX()-r.getX()+u.getX(),P=a.getY()-r.getY()+u.getY(),F=1-3/y,X=Math.floor(r.getX()+F*(B-r.getX())),ne=Math.floor(r.getY()+F*(P-r.getY()));for(let ye=4;ye<=16;ye<<=1)try{v=this.findAlignmentInRegion(c,X,ne,ye);break}catch(xe){if(!(xe instanceof se))throw xe}}const S=Sr.createTransform(r,a,u,v,d),O=Sr.sampleGrid(this.image,S,d);let I;return v===null?I=[u,r,a]:I=[u,r,a,v],new ts(O,I)}static createTransform(t,r,a,u,c){const d=c-3.5;let g,y,v,S;return u!==null?(g=u.getX(),y=u.getY(),v=d-3,S=v):(g=r.getX()-t.getX()+a.getX(),y=r.getY()-t.getY()+a.getY(),v=d,S=d),Wn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,v,S,3.5,d,t.getX(),t.getY(),r.getX(),r.getY(),g,y,a.getX(),a.getY())}static sampleGrid(t,r,a){return ar.getInstance().sampleGridWithTransform(t,a,a,r)}static computeDimension(t,r,a,u){const c=et.round(Ce.distance(t,r)/u),d=et.round(Ce.distance(t,a)/u);let g=Math.floor((c+d)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new se("Dimensions could be not found.")}return g}calculateModuleSize(t,r,a){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,r){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?u/7:isNaN(u)?a/7:(a+u)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,a,u){let c=this.sizeOfBlackWhiteBlackRun(t,r,a,u),d=1,g=t-(a-t);g<0?(d=t/(t-g),g=0):g>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(g-t),g=this.image.getWidth()-1);let y=Math.floor(r-(u-r)*d);return d=1,y<0?(d=r/(r-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(y-r),y=this.image.getHeight()-1),g=Math.floor(t+(g-t)*d),c+=this.sizeOfBlackWhiteBlackRun(t,r,g,y),c-1}sizeOfBlackWhiteBlackRun(t,r,a,u){const c=Math.abs(u-r)>Math.abs(a-t);if(c){let B=t;t=r,r=B,B=a,a=u,u=B}const d=Math.abs(a-t),g=Math.abs(u-r);let y=-d/2;const v=t<a?1:-1,S=r<u?1:-1;let O=0;const I=a+v;for(let B=t,P=r;B!==I;B+=v){const F=c?P:B,X=c?B:P;if(O===1===this.image.get(F,X)){if(O===2)return et.distance(B,P,t,r);O++}if(y+=g,y>0){if(P===u)break;P+=S,y-=d}}return O===2?et.distance(a+v,u,t,r):NaN}findAlignmentInRegion(t,r,a,u){const c=Math.floor(u*t),d=Math.max(0,r-c),g=Math.min(this.image.getWidth()-1,r+c);if(g-d<t*3)throw new se("Alignment top exceeds estimated module size.");const y=Math.max(0,a-c),v=Math.min(this.image.getHeight()-1,a+c);if(v-y<t*3)throw new se("Alignment bottom exceeds estimated module size.");return new Zn(this.image,d,y,g-d,v-y,t,this.resultPointCallback).find()}}class Pr{constructor(){this.decoder=new cc}getDecoder(){return this.decoder}decode(t,r){let a,u;if(r!=null&&r.get(Ee.PURE_BARCODE)!==void 0){const y=Pr.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,r),u=Pr.NO_POINTS}else{const y=new Sr(t.getBlackMatrix()).detect(r);a=this.decoder.decodeBitMatrix(y.getBits(),r),u=y.getPoints()}a.getOther()instanceof Eo&&a.getOther().applyMirroredCorrection(u);const c=new Ae(a.getText(),a.getRawBytes(),void 0,u,be.QR_CODE,void 0),d=a.getByteSegments();d!==null&&c.putMetadata(dt.BYTE_SEGMENTS,d);const g=a.getECLevel();return g!==null&&c.putMetadata(dt.ERROR_CORRECTION_LEVEL,g),a.hasStructuredAppend()&&(c.putMetadata(dt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),c.putMetadata(dt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),c}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(r===null||a===null)throw new se;const u=this.moduleSize(r,t);let c=r[1],d=a[1],g=r[0],y=a[0];if(g>=y||c>=d)throw new se;if(d-c!==y-g&&(y=g+(d-c),y>=t.getWidth()))throw new se;const v=Math.round((y-g+1)/u),S=Math.round((d-c+1)/u);if(v<=0||S<=0)throw new se;if(S!==v)throw new se;const O=Math.floor(u/2);c+=O,g+=O;const I=g+Math.floor((v-1)*u)-y;if(I>0){if(I>O)throw new se;g-=I}const B=c+Math.floor((S-1)*u)-d;if(B>0){if(B>O)throw new se;c-=B}const P=new Nt(v,S);for(let F=0;F<S;F++){const X=c+Math.floor(F*u);for(let ne=0;ne<v;ne++)t.get(g+Math.floor(ne*u),X)&&P.set(ne,F)}return P}static moduleSize(t,r){const a=r.getHeight(),u=r.getWidth();let c=t[0],d=t[1],g=!0,y=0;for(;c<u&&d<a;){if(g!==r.get(c,d)){if(++y===5)break;g=!g}c++,d++}if(c===u||d===a)throw new se;return(c-t[0])/7}}Pr.NO_POINTS=new Array;class je{PDF417Common(){}static getBitCountSum(t){return et.sum(t)}static toIntArray(t){if(t==null||!t.length)return je.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let a=0;for(const u of t)r[a++]=u;return r}static getCodeword(t){const r=$.binarySearch(je.SYMBOL_TABLE,t&262143);return r<0?-1:(je.CODEWORD_TABLE[r]-1)%je.NUMBER_OF_CODEWORDS}}je.NUMBER_OF_CODEWORDS=929,je.MAX_CODEWORDS_IN_BARCODE=je.NUMBER_OF_CODEWORDS-1,je.MIN_ROWS_IN_BARCODE=3,je.MAX_ROWS_IN_BARCODE=90,je.MODULES_IN_CODEWORD=17,je.MODULES_IN_STOP_PATTERN=18,je.BARS_IN_MODULE=8,je.EMPTY_INT_ARRAY=new Int32Array([]),je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ao{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ve{static detectMultiple(t,r,a){let u=t.getBlackMatrix(),c=Ve.detect(a,u);return c.length||(u=u.clone(),u.rotate180(),c=Ve.detect(a,u)),new Ao(u,c)}static detect(t,r){const a=new Array;let u=0,c=0,d=!1;for(;u<r.getHeight();){const g=Ve.findVertices(r,u,c);if(g[0]==null&&g[3]==null){if(!d)break;d=!1,c=0;for(const y of a)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Ve.ROW_STEP;continue}if(d=!0,a.push(g),!t)break;g[2]!=null?(c=Math.trunc(g[2].getX()),u=Math.trunc(g[2].getY())):(c=Math.trunc(g[4].getX()),u=Math.trunc(g[4].getY()))}return a}static findVertices(t,r,a){const u=t.getHeight(),c=t.getWidth(),d=new Array(8);return Ve.copyToResult(d,Ve.findRowsWithPattern(t,u,c,r,a,Ve.START_PATTERN),Ve.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),Ve.copyToResult(d,Ve.findRowsWithPattern(t,u,c,r,a,Ve.STOP_PATTERN),Ve.INDEXES_STOP_PATTERN),d}static copyToResult(t,r,a){for(let u=0;u<a.length;u++)t[a[u]]=r[u]}static findRowsWithPattern(t,r,a,u,c,d){const g=new Array(4);let y=!1;const v=new Int32Array(d.length);for(;u<r;u+=Ve.ROW_STEP){let O=Ve.findGuardPattern(t,c,u,a,!1,d,v);if(O!=null){for(;u>0;){const I=Ve.findGuardPattern(t,c,--u,a,!1,d,v);if(I!=null)O=I;else{u++;break}}g[0]=new Ce(O[0],u),g[1]=new Ce(O[1],u),y=!0;break}}let S=u+1;if(y){let O=0,I=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;S<r;S++){const B=Ve.findGuardPattern(t,I[0],S,a,!1,d,v);if(B!=null&&Math.abs(I[0]-B[0])<Ve.MAX_PATTERN_DRIFT&&Math.abs(I[1]-B[1])<Ve.MAX_PATTERN_DRIFT)I=B,O=0;else{if(O>Ve.SKIPPED_ROW_COUNT_MAX)break;O++}}S-=O+1,g[2]=new Ce(I[0],S),g[3]=new Ce(I[1],S)}return S-u<Ve.BARCODE_MIN_HEIGHT&&$.fill(g,null),g}static findGuardPattern(t,r,a,u,c,d,g){$.fillWithin(g,0,g.length,0);let y=r,v=0;for(;t.get(y,a)&&y>0&&v++<Ve.MAX_PIXEL_DRIFT;)y--;let S=y,O=0,I=d.length;for(let B=c;S<u;S++)if(t.get(S,a)!==B)g[O]++;else{if(O===I-1){if(Ve.patternMatchVariance(g,d,Ve.MAX_INDIVIDUAL_VARIANCE)<Ve.MAX_AVG_VARIANCE)return new Int32Array([y,S]);y+=g[0]+g[1],G.arraycopy(g,2,g,0,O-1),g[O-1]=0,g[O]=0,O--}else O++;g[O]=1,B=!B}return O===I-1&&Ve.patternMatchVariance(g,d,Ve.MAX_INDIVIDUAL_VARIANCE)<Ve.MAX_AVG_VARIANCE?new Int32Array([y,S-1]):null}static patternMatchVariance(t,r,a){let u=t.length,c=0,d=0;for(let v=0;v<u;v++)c+=t[v],d+=r[v];if(c<d)return 1/0;let g=c/d;a*=g;let y=0;for(let v=0;v<u;v++){let S=t[v],O=r[v]*g,I=S>O?S-O:O-S;if(I>a)return 1/0;y+=I}return y/c}}Ve.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ve.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ve.MAX_AVG_VARIANCE=.42,Ve.MAX_INDIVIDUAL_VARIANCE=.8,Ve.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ve.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ve.MAX_PIXEL_DRIFT=3,Ve.MAX_PATTERN_DRIFT=5,Ve.SKIPPED_ROW_COUNT_MAX=25,Ve.ROW_STEP=5,Ve.BARCODE_MIN_HEIGHT=10;class Ut{constructor(t,r){if(r.length===0)throw new N;this.field=t;let a=r.length;if(a>1&&r[0]===0){let u=1;for(;u<a&&r[u]===0;)u++;u===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-u),G.arraycopy(r,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let r=this.coefficients[0],a=this.coefficients.length;for(let u=1;u<a;u++)r=this.field.add(this.field.multiply(t,r),this.coefficients[u]);return r}add(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,a=t.coefficients;if(r.length>a.length){let d=r;r=a,a=d}let u=new Int32Array(a.length),c=a.length-r.length;G.arraycopy(a,0,u,0,c);for(let d=c;d<a.length;d++)u[d]=this.field.add(r[d-c],a[d]);return new Ut(this.field,u)}subtract(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Ut?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Ut(this.field,new Int32Array([0]));let r=this.coefficients,a=r.length,u=t.coefficients,c=u.length,d=new Int32Array(a+c-1);for(let g=0;g<a;g++){let y=r[g];for(let v=0;v<c;v++)d[g+v]=this.field.add(d[g+v],this.field.multiply(y,u[v]))}return new Ut(this.field,d)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let a=0;a<t;a++)r[a]=this.field.subtract(0,this.coefficients[a]);return new Ut(this.field,r)}multiplyScalar(t){if(t===0)return new Ut(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,a=new Int32Array(r);for(let u=0;u<r;u++)a[u]=this.field.multiply(this.coefficients[u],t);return new Ut(this.field,a)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return new Ut(this.field,new Int32Array([0]));let a=this.coefficients.length,u=new Int32Array(a+t);for(let c=0;c<a;c++)u[c]=this.field.multiply(this.coefficients[c],r);return new Ut(this.field,u)}toString(){let t=new at;for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(r===0||a!==1)&&t.append(a),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class cl{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}inverse(t){if(t===0)throw new Ui;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class ci extends cl{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let u=0;u<t;u++)this.expTable[u]=a,a=a*r%t;for(let u=0;u<t-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Ut(this,new Int32Array([0])),this.one=new Ut(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;let a=new Int32Array(t+1);return a[0]=r,new Ut(this,a)}}ci.PDF417_GF=new ci(je.NUMBER_OF_CODEWORDS,3);class Fr{constructor(){this.field=ci.PDF417_GF}decode(t,r,a){let u=new Ut(this.field,t),c=new Int32Array(r),d=!1;for(let P=r;P>0;P--){let F=u.evaluateAt(this.field.exp(P));c[r-P]=F,F!==0&&(d=!0)}if(!d)return 0;let g=this.field.getOne();if(a!=null)for(const P of a){let F=this.field.exp(t.length-1-P),X=new Ut(this.field,new Int32Array([this.field.subtract(0,F),1]));g=g.multiply(X)}let y=new Ut(this.field,c),v=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),S=v[0],O=v[1],I=this.findErrorLocations(S),B=this.findErrorMagnitudes(O,S,I);for(let P=0;P<I.length;P++){let F=t.length-1-this.field.log(I[P]);if(F<0)throw U.getChecksumInstance();t[F]=this.field.subtract(t[F],B[P])}return I.length}runEuclideanAlgorithm(t,r,a){if(t.getDegree()<r.getDegree()){let I=t;t=r,r=I}let u=t,c=r,d=this.field.getZero(),g=this.field.getOne();for(;c.getDegree()>=Math.round(a/2);){let I=u,B=d;if(u=c,d=g,u.isZero())throw U.getChecksumInstance();c=I;let P=this.field.getZero(),F=u.getCoefficient(u.getDegree()),X=this.field.inverse(F);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let ne=c.getDegree()-u.getDegree(),ye=this.field.multiply(c.getCoefficient(c.getDegree()),X);P=P.add(this.field.buildMonomial(ne,ye)),c=c.subtract(u.multiplyByMonomial(ne,ye))}g=P.multiply(d).subtract(B).negative()}let y=g.getCoefficient(0);if(y===0)throw U.getChecksumInstance();let v=this.field.inverse(y),S=g.multiply(v),O=c.multiply(v);return[S,O]}findErrorLocations(t){let r=t.getDegree(),a=new Int32Array(r),u=0;for(let c=1;c<this.field.getSize()&&u<r;c++)t.evaluateAt(c)===0&&(a[u]=this.field.inverse(c),u++);if(u!==r)throw U.getChecksumInstance();return a}findErrorMagnitudes(t,r,a){let u=r.getDegree(),c=new Int32Array(u);for(let v=1;v<=u;v++)c[u-v]=this.field.multiply(v,r.getCoefficient(v));let d=new Ut(this.field,c),g=a.length,y=new Int32Array(g);for(let v=0;v<g;v++){let S=this.field.inverse(a[v]),O=this.field.subtract(0,t.evaluateAt(S)),I=this.field.inverse(d.evaluateAt(S));y[v]=this.field.multiply(O,I)}return y}}class zr{constructor(t,r,a,u,c){t instanceof zr?this.constructor_2(t):this.constructor_1(t,r,a,u,c)}constructor_1(t,r,a,u,c){const d=r==null||a==null,g=u==null||c==null;if(d&&g)throw new se;d?(r=new Ce(0,u.getY()),a=new Ce(0,c.getY())):g&&(u=new Ce(t.getWidth()-1,r.getY()),c=new Ce(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=r,this.bottomLeft=a,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),a.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),u.getY())),this.maxY=Math.trunc(Math.max(a.getY(),c.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new zr(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,a){let u=this.topLeft,c=this.bottomLeft,d=this.topRight,g=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,v=Math.trunc(y.getY()-t);v<0&&(v=0);let S=new Ce(y.getX(),v);a?u=S:d=S}if(r>0){let y=a?this.bottomLeft:this.bottomRight,v=Math.trunc(y.getY()+r);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let S=new Ce(y.getX(),v);a?c=S:g=S}return new zr(this.image,u,c,d,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ss{constructor(t,r,a,u){this.columnCount=t,this.errorCorrectionLevel=u,this.rowCountUpperPart=r,this.rowCountLowerPart=a,this.rowCount=r+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xi{constructor(){this.buffer=""}static form(t,r){let a=-1;function u(d,g,y,v,S,O){if(d==="%%")return"%";if(r[++a]===void 0)return;d=v?parseInt(v.substr(1)):void 0;let I=S?parseInt(S.substr(1)):void 0,B;switch(O){case"s":B=r[a];break;case"c":B=r[a][0];break;case"f":B=parseFloat(r[a]).toFixed(d);break;case"p":B=parseFloat(r[a]).toPrecision(d);break;case"e":B=parseFloat(r[a]).toExponential(d);break;case"x":B=parseInt(r[a]).toString(I||16);break;case"d":B=parseFloat(parseInt(r[a],I||10).toPrecision(d)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(I);let P=parseInt(y),F=y&&y[0]+""=="0"?"0":" ";for(;B.length<P;)B=g!==void 0?B+F:F+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,u)}format(t,...r){this.buffer+=Xi.form(t,r)}toString(){return this.buffer}}class ei{constructor(t){this.boundingBox=new zr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let a=1;a<ei.MAX_NEARBY_DISTANCE;a++){let u=this.imageRowToCodewordIndex(t)-a;if(u>=0&&(r=this.codewords[u],r!=null)||(u=this.imageRowToCodewordIndex(t)+a,u<this.codewords.length&&(r=this.codewords[u],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Xi;let r=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue())}return t.toString()}}ei.MAX_NEARBY_DISTANCE=5;class ti{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[a,u]of this.values.entries()){const c={getKey:()=>a,getValue:()=>u};c.getValue()>t?(t=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===t&&r.push(c.getKey())}return je.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class hl extends ei{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let a=this.getBoundingBox(),u=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=-1,v=1,S=0;for(let O=d;O<g;O++){if(r[O]==null)continue;let I=r[O],B=I.getRowNumber()-y;if(B===0)S++;else if(B===1)v=Math.max(v,S),S=1,y=I.getRowNumber();else if(B<0||I.getRowNumber()>=t.getRowCount()||B>O)r[O]=null;else{let P;v>2?P=(v-2)*B:P=B;let F=P>=O;for(let X=1;X<=P&&!F;X++)F=r[O-X]!=null;F?r[O]=null:(y=I.getRowNumber(),S=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=r.length)continue;r[u]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),u=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=this.getCodewords(),y=-1;for(let v=c;v<d;v++){if(g[v]==null)continue;let S=g[v];S.setRowNumberAsRowIndicatorColumn();let O=S.getRowNumber()-y;O===0||(O===1?y=S.getRowNumber():S.getRowNumber()>=t.getRowCount()?g[v]=null:y=S.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new ti,a=new ti,u=new ti,c=new ti;for(let g of t){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let y=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:a.setValue(y*3+1);break;case 1:c.setValue(y/3),u.setValue(y%3);break;case 2:r.setValue(y+1);break}}if(r.getValue().length===0||a.getValue().length===0||u.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||a.getValue()[0]+u.getValue()[0]<je.MIN_ROWS_IN_BARCODE||a.getValue()[0]+u.getValue()[0]>je.MAX_ROWS_IN_BARCODE)return null;let d=new ss(r.getValue()[0],a.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,r){for(let a=0;a<t.length;a++){let u=t[a];if(t[a]==null)continue;let c=u.getValue()%30,d=u.getRowNumber();if(d>r.getRowCount()){t[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(t[a]=null);break;case 2:c+1!==r.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class dn{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=je.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let a=this.detectionResultColumns[r].getCodewords();for(let u=0;u<a.length;u++)a[u]!=null&&(a[u].hasValidRowNumber()||this.adjustRowNumbers(r,u,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&r[a]!=null&&t[a].getRowNumber()===r[a].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[a];c!=null&&(c.setRowNumber(t[a].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let u=r[a].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let g=this.detectionResultColumns[d].getCodewords()[a];g!=null&&(c=dn.adjustRowNumberIfValid(u,c,g),g.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let u=r[a].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let g=this.detectionResultColumns[d].getCodewords()[a];g!=null&&(c=dn.adjustRowNumberIfValid(u,c,g),g.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,a){if(!this.detectionResultColumns[t-1])return;let u=a[r],c=this.detectionResultColumns[t-1].getCodewords(),d=c;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let g=new Array(14);g[2]=c[r],g[3]=d[r],r>0&&(g[0]=a[r-1],g[4]=c[r-1],g[5]=d[r-1]),r>1&&(g[8]=a[r-2],g[10]=c[r-2],g[11]=d[r-2]),r<a.length-1&&(g[1]=a[r+1],g[6]=c[r+1],g[7]=d[r+1]),r<a.length-2&&(g[9]=a[r+2],g[12]=c[r+2],g[13]=d[r+2]);for(let y of g)if(dn.adjustRowNumber(u,y))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Xi;for(let a=0;a<t.getCodewords().length;a++){r.format("CW %3d:",a);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[a];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class ur{constructor(t,r,a,u){this.rowNumber=ur.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(a),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==ur.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}ur.BARCODE_ROW_UNKNOWN=-1;class En{static initialize(){for(let t=0;t<je.SYMBOL_TABLE.length;t++){let r=je.SYMBOL_TABLE[t],a=r&1;for(let u=0;u<je.BARS_IN_MODULE;u++){let c=0;for(;(r&1)===a;)c+=1,r>>=1;a=r&1,En.RATIOS_TABLE[t]||(En.RATIOS_TABLE[t]=new Array(je.BARS_IN_MODULE)),En.RATIOS_TABLE[t][je.BARS_IN_MODULE-u-1]=Math.fround(c/je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=En.getDecodedCodewordValue(En.sampleBitCounts(t));return r!==-1?r:En.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=et.sum(t),a=new Int32Array(je.BARS_IN_MODULE),u=0,c=0;for(let d=0;d<je.MODULES_IN_CODEWORD;d++){let g=r/(2*je.MODULES_IN_CODEWORD)+d*r/je.MODULES_IN_CODEWORD;c+t[u]<=g&&(c+=t[u],u++),a[u]++}return a}static getDecodedCodewordValue(t){let r=En.getBitValue(t);return je.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let a=0;a<t.length;a++)for(let u=0;u<t[a];u++)r=r<<1|(a%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=et.sum(t),a=new Array(je.BARS_IN_MODULE);if(r>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(t[d]/r);let u=ji.MAX_VALUE,c=-1;this.bSymbolTableReady||En.initialize();for(let d=0;d<En.RATIOS_TABLE.length;d++){let g=0,y=En.RATIOS_TABLE[d];for(let v=0;v<je.BARS_IN_MODULE;v++){let S=Math.fround(y[v]-a[v]);if(g+=Math.fround(S*S),g>=u)break}g<u&&(u=g,c=je.SYMBOL_TABLE[d])}return c}}En.bSymbolTableReady=!1,En.RATIOS_TABLE=new Array(je.SYMBOL_TABLE.length).map(T=>new Array(je.BARS_IN_MODULE));class Yi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class _o{static parseLong(t,r=void 0){return parseInt(t,r)}}class ls extends E{}ls.kind="NullPointerException";class fl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,a){if(t==null)throw new ls;if(r<0||r>t.length||a<0||r+a>t.length||r+a<0)throw new te;if(a===0)return;for(let u=0;u<a;u++)this.write(t[r+u])}flush(){}close(){}}class Ra extends E{}class os extends fl{constructor(t=32){if(super(),this.count=0,t<0)throw new N("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ra;a=Y.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,a){if(r<0||r>t.length||a<0||r+a-t.length>0)throw new te;this.ensureCapacity(this.count+a),G.arraycopy(t,r,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var vt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(vt||(vt={}));function So(){if(typeof window<"u")return window.BigInt||null;if(typeof Lu<"u")return Lu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let us;function ni(T){if(typeof us>"u"&&(us=So()),us===null)throw new Error("BigInt is not supported!");return us(T)}function dl(){let T=[];T[0]=ni(1);let t=ni(900);T[1]=t;for(let r=2;r<16;r++)T[r]=T[r-1]*t;return T}class re{static decode(t,r){let a=new at(""),u=he.ISO8859_1;a.enableDecoding(u);let c=1,d=t[c++],g=new Yi;for(;c<t[0];){switch(d){case re.TEXT_COMPACTION_MODE_LATCH:c=re.textCompaction(t,c,a);break;case re.BYTE_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH_6:c=re.byteCompaction(d,t,u,c,a);break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[c++]);break;case re.NUMERIC_COMPACTION_MODE_LATCH:c=re.numericCompaction(t,c,a);break;case re.ECI_CHARSET:he.getCharacterSetECIByValue(t[c++]);break;case re.ECI_GENERAL_PURPOSE:c+=2;break;case re.ECI_USER_DEFINED:c++;break;case re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=re.decodeMacroBlock(t,c,g);break;case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case re.MACRO_PDF417_TERMINATOR:throw new ee;default:c--,c=re.textCompaction(t,c,a);break}if(c<t.length)d=t[c++];else throw ee.getFormatInstance()}if(a.length()===0)throw ee.getFormatInstance();let y=new kt(null,a.toString(),null,r);return y.setOther(g),y}static decodeMacroBlock(t,r,a){if(r+re.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw ee.getFormatInstance();let u=new Int32Array(re.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<re.NUMBER_OF_SEQUENCE_CODEWORDS;g++,r++)u[g]=t[r];a.setSegmentIndex(Y.parseInt(re.decodeBase900toBase10(u,re.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new at;r=re.textCompaction(t,r,c),a.setFileId(c.toString());let d=-1;for(t[r]===re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<t[0];)switch(t[r]){case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new at;r=re.textCompaction(t,r+1,g),a.setFileName(g.toString());break;case re.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new at;r=re.textCompaction(t,r+1,y),a.setSender(y.toString());break;case re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new at;r=re.textCompaction(t,r+1,v),a.setAddressee(v.toString());break;case re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new at;r=re.numericCompaction(t,r+1,S),a.setSegmentCount(Y.parseInt(S.toString()));break;case re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new at;r=re.numericCompaction(t,r+1,O),a.setTimestamp(_o.parseLong(O.toString()));break;case re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new at;r=re.numericCompaction(t,r+1,I),a.setChecksum(Y.parseInt(I.toString()));break;case re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let B=new at;r=re.numericCompaction(t,r+1,B),a.setFileSize(_o.parseLong(B.toString()));break;default:throw ee.getFormatInstance()}break;case re.MACRO_PDF417_TERMINATOR:r++,a.setLastSegment(!0);break;default:throw ee.getFormatInstance()}if(d!==-1){let g=r-d;a.isLastSegment()&&g--,a.setOptionalData($.copyOfRange(t,d,d+g))}return r}static textCompaction(t,r,a){let u=new Int32Array((t[0]-r)*2),c=new Int32Array((t[0]-r)*2),d=0,g=!1;for(;r<t[0]&&!g;){let y=t[r++];if(y<re.TEXT_COMPACTION_MODE_LATCH)u[d]=y/30,u[d+1]=y%30,d+=2;else switch(y){case re.TEXT_COMPACTION_MODE_LATCH:u[d++]=re.TEXT_COMPACTION_MODE_LATCH;break;case re.BYTE_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH_6:case re.NUMERIC_COMPACTION_MODE_LATCH:case re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case re.MACRO_PDF417_TERMINATOR:r--,g=!0;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[d]=re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[r++],c[d]=y,d++;break}}return re.decodeTextCompaction(u,c,d,a),r}static decodeTextCompaction(t,r,a,u){let c=vt.ALPHA,d=vt.ALPHA,g=0;for(;g<a;){let y=t[g],v="";switch(c){case vt.ALPHA:if(y<26)v=String.fromCharCode(65+y);else switch(y){case 26:v=" ";break;case re.LL:c=vt.LOWER;break;case re.ML:c=vt.MIXED;break;case re.PS:d=c,c=vt.PUNCT_SHIFT;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[g]);break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break;case vt.LOWER:if(y<26)v=String.fromCharCode(97+y);else switch(y){case 26:v=" ";break;case re.AS:d=c,c=vt.ALPHA_SHIFT;break;case re.ML:c=vt.MIXED;break;case re.PS:d=c,c=vt.PUNCT_SHIFT;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[g]);break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break;case vt.MIXED:if(y<re.PL)v=re.MIXED_CHARS[y];else switch(y){case re.PL:c=vt.PUNCT;break;case 26:v=" ";break;case re.LL:c=vt.LOWER;break;case re.AL:c=vt.ALPHA;break;case re.PS:d=c,c=vt.PUNCT_SHIFT;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[g]);break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break;case vt.PUNCT:if(y<re.PAL)v=re.PUNCT_CHARS[y];else switch(y){case re.PAL:c=vt.ALPHA;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[g]);break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break;case vt.ALPHA_SHIFT:if(c=d,y<26)v=String.fromCharCode(65+y);else switch(y){case 26:v=" ";break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break;case vt.PUNCT_SHIFT:if(c=d,y<re.PAL)v=re.PUNCT_CHARS[y];else switch(y){case re.PAL:c=vt.ALPHA;break;case re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[g]);break;case re.TEXT_COMPACTION_MODE_LATCH:c=vt.ALPHA;break}break}v!==""&&u.append(v),g++}}static byteCompaction(t,r,a,u,c){let d=new os,g=0,y=0,v=!1;switch(t){case re.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),O=r[u++];for(;u<r[0]&&!v;)switch(S[g++]=O,y=900*y+O,O=r[u++],O){case re.TEXT_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH:case re.NUMERIC_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH_6:case re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case re.MACRO_PDF417_TERMINATOR:u--,v=!0;break;default:if(g%5===0&&g>0){for(let I=0;I<6;++I)d.write(Number(ni(y)>>ni(8*(5-I))));y=0,g=0}break}u===r[0]&&O<re.TEXT_COMPACTION_MODE_LATCH&&(S[g++]=O);for(let I=0;I<g;I++)d.write(S[I]);break;case re.BYTE_COMPACTION_MODE_LATCH_6:for(;u<r[0]&&!v;){let I=r[u++];if(I<re.TEXT_COMPACTION_MODE_LATCH)g++,y=900*y+I;else switch(I){case re.TEXT_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH:case re.NUMERIC_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH_6:case re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case re.MACRO_PDF417_TERMINATOR:u--,v=!0;break}if(g%5===0&&g>0){for(let B=0;B<6;++B)d.write(Number(ni(y)>>ni(8*(5-B))));y=0,g=0}}break}return c.append(it.decode(d.toByteArray(),a)),u}static numericCompaction(t,r,a){let u=0,c=!1,d=new Int32Array(re.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!c;){let g=t[r++];if(r===t[0]&&(c=!0),g<re.TEXT_COMPACTION_MODE_LATCH)d[u]=g,u++;else switch(g){case re.TEXT_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH:case re.BYTE_COMPACTION_MODE_LATCH_6:case re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case re.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(u%re.MAX_NUMERIC_CODEWORDS===0||g===re.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(a.append(re.decodeBase900toBase10(d,u)),u=0)}return r}static decodeBase900toBase10(t,r){let a=ni(0);for(let c=0;c<r;c++)a+=re.EXP900[r-c-1]*ni(t[c]);let u=a.toString();if(u.charAt(0)!=="1")throw new ee;return u.substring(1)}}re.TEXT_COMPACTION_MODE_LATCH=900,re.BYTE_COMPACTION_MODE_LATCH=901,re.NUMERIC_COMPACTION_MODE_LATCH=902,re.BYTE_COMPACTION_MODE_LATCH_6=924,re.ECI_USER_DEFINED=925,re.ECI_GENERAL_PURPOSE=926,re.ECI_CHARSET=927,re.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,re.MACRO_PDF417_TERMINATOR=922,re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,re.MAX_NUMERIC_CODEWORDS=15,re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,re.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,re.PL=25,re.LL=27,re.AS=27,re.ML=28,re.AL=28,re.PS=29,re.PAL=29,re.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,re.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",re.EXP900=So()?dl():[],re.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ke{constructor(){}static decode(t,r,a,u,c,d,g){let y=new zr(t,r,a,u,c),v=null,S=null,O;for(let P=!0;;P=!1){if(r!=null&&(v=Ke.getRowIndicatorColumn(t,y,r,!0,d,g)),u!=null&&(S=Ke.getRowIndicatorColumn(t,y,u,!1,d,g)),O=Ke.merge(v,S),O==null)throw se.getNotFoundInstance();let F=O.getBoundingBox();if(P&&F!=null&&(F.getMinY()<y.getMinY()||F.getMaxY()>y.getMaxY()))y=F;else break}O.setBoundingBox(y);let I=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,v),O.setDetectionResultColumn(I,S);let B=v!=null;for(let P=1;P<=I;P++){let F=B?P:I-P;if(O.getDetectionResultColumn(F)!==void 0)continue;let X;F===0||F===I?X=new hl(y,F===0):X=new ei(y),O.setDetectionResultColumn(F,X);let ne=-1,ye=ne;for(let xe=y.getMinY();xe<=y.getMaxY();xe++){if(ne=Ke.getStartColumn(O,F,xe,B),ne<0||ne>y.getMaxX()){if(ye===-1)continue;ne=ye}let me=Ke.detectCodeword(t,y.getMinX(),y.getMaxX(),B,ne,xe,d,g);me!=null&&(X.setCodeword(xe,me),ye=ne,d=Math.min(d,me.getWidth()),g=Math.max(g,me.getWidth()))}}return Ke.createDecoderResult(O)}static merge(t,r){if(t==null&&r==null)return null;let a=Ke.getBarcodeMetadata(t,r);if(a==null)return null;let u=zr.merge(Ke.adjustBoundingBox(t),Ke.adjustBoundingBox(r));return new dn(a,u)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let a=Ke.getMax(r),u=0;for(let g of r)if(u+=a-g,g>0)break;let c=t.getCodewords();for(let g=0;u>0&&c[g]==null;g++)u--;let d=0;for(let g=r.length-1;g>=0&&(d+=a-r[g],!(r[g]>0));g--);for(let g=c.length-1;d>0&&c[g]==null;g--)d--;return t.getBoundingBox().addMissingRows(u,d,t.isLeft())}static getMax(t){let r=-1;for(let a of t)r=Math.max(r,a);return r}static getBarcodeMetadata(t,r){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let u;return r==null||(u=r.getBarcodeMetadata())==null?a:a.getColumnCount()!==u.getColumnCount()&&a.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&a.getRowCount()!==u.getRowCount()?null:a}static getRowIndicatorColumn(t,r,a,u,c,d){let g=new hl(r,u);for(let y=0;y<2;y++){let v=y===0?1:-1,S=Math.trunc(Math.trunc(a.getX()));for(let O=Math.trunc(Math.trunc(a.getY()));O<=r.getMaxY()&&O>=r.getMinY();O+=v){let I=Ke.detectCodeword(t,0,t.getWidth(),u,S,O,c,d);I!=null&&(g.setCodeword(O,I),u?S=I.getStartX():S=I.getEndX())}}return g}static adjustCodewordCount(t,r){let a=r[0][1],u=a.getValue(),c=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ke.getNumberOfECCodeWords(t.getBarcodeECLevel());if(u.length===0){if(c<1||c>je.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();a.setValue(c)}else u[0]!==c&&a.setValue(c)}static createDecoderResult(t){let r=Ke.createBarcodeMatrix(t);Ke.adjustCodewordCount(t,r);let a=new Array,u=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),c=[],d=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let v=0;v<t.getBarcodeColumnCount();v++){let S=r[y][v+1].getValue(),O=y*t.getBarcodeColumnCount()+v;S.length===0?a.push(O):S.length===1?u[O]=S[0]:(d.push(O),c.push(S))}let g=new Array(c.length);for(let y=0;y<g.length;y++)g[y]=c[y];return Ke.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),u,je.toIntArray(a),je.toIntArray(d),g)}static createDecoderResultFromAmbiguousValues(t,r,a,u,c){let d=new Int32Array(u.length),g=100;for(;g-- >0;){for(let y=0;y<d.length;y++)r[u[y]]=c[y][d[y]];try{return Ke.decodeCodewords(r,t,a)}catch(y){if(!(y instanceof U))throw y}if(d.length===0)throw U.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<c[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let u=0;u<r.length;u++)for(let c=0;c<r[u].length;c++)r[u][c]=new ti;let a=0;for(let u of t.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][a].setValue(c.getValue())}}}a++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,a,u){let c=u?1:-1,d=null;if(Ke.isValidBarcodeColumn(t,r-c)&&(d=t.getDetectionResultColumn(r-c).getCodeword(a)),d!=null)return u?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(r).getCodewordNearby(a),d!=null)return u?d.getStartX():d.getEndX();if(Ke.isValidBarcodeColumn(t,r-c)&&(d=t.getDetectionResultColumn(r-c).getCodewordNearby(a)),d!=null)return u?d.getEndX():d.getStartX();let g=0;for(;Ke.isValidBarcodeColumn(t,r-c);){r-=c;for(let y of t.getDetectionResultColumn(r).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+c*g*(y.getEndX()-y.getStartX());g++}return u?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,a,u,c,d,g,y){c=Ke.adjustCodewordStartColumn(t,r,a,u,c,d);let v=Ke.getModuleBitCount(t,r,a,u,c,d);if(v==null)return null;let S,O=et.sum(v);if(u)S=c+O;else{for(let P=0;P<v.length/2;P++){let F=v[P];v[P]=v[v.length-1-P],v[v.length-1-P]=F}S=c,c=S-O}if(!Ke.checkCodewordSkew(O,g,y))return null;let I=En.getDecodedValue(v),B=je.getCodeword(I);return B===-1?null:new ur(c,S,Ke.getCodewordBucketNumber(I),B)}static getModuleBitCount(t,r,a,u,c,d){let g=c,y=new Int32Array(8),v=0,S=u?1:-1,O=u;for(;(u?g<a:g>=r)&&v<y.length;)t.get(g,d)===O?(y[v]++,g+=S):(v++,O=!O);return v===y.length||g===(u?a:r)&&v===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,a,u,c,d){let g=c,y=u?-1:1;for(let v=0;v<2;v++){for(;(u?g>=r:g<a)&&u===t.get(g,d);){if(Math.abs(c-g)>Ke.CODEWORD_SKEW_SIZE)return c;g+=y}y=-y,u=!u}return g}static checkCodewordSkew(t,r,a){return r-Ke.CODEWORD_SKEW_SIZE<=t&&t<=a+Ke.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,a){if(t.length===0)throw ee.getFormatInstance();let u=1<<r+1,c=Ke.correctErrors(t,a,u);Ke.verifyCodewordCount(t,u);let d=re.decode(t,""+r);return d.setErrorsCorrected(c),d.setErasures(a.length),d}static correctErrors(t,r,a){if(r!=null&&r.length>a/2+Ke.MAX_ERRORS||a<0||a>Ke.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return Ke.errorCorrection.decode(t,a,r)}static verifyCodewordCount(t,r){if(t.length<4)throw ee.getFormatInstance();let a=t[0];if(a>t.length)throw ee.getFormatInstance();if(a===0)if(r<t.length)t[0]=t.length-r;else throw ee.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),a=0,u=r.length-1;for(;!((t&1)!==a&&(a=t&1,u--,u<0));)r[u]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ke.getCodewordBucketNumber(Ke.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Xi;for(let a=0;a<t.length;a++){r.format("Row %2d: ",a);for(let u=0;u<t[a].length;u++){let c=t[a][u];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Ke.CODEWORD_SKEW_SIZE=2,Ke.MAX_ERRORS=3,Ke.MAX_EC_CODEWORDS=512,Ke.errorCorrection=new Fr;class An{decode(t,r=null){let a=An.decode(t,r,!1);if(a==null||a.length===0||a[0]==null)throw se.getNotFoundInstance();return a[0]}decodeMultiple(t,r=null){try{return An.decode(t,r,!0)}catch(a){throw a instanceof ee||a instanceof U?se.getNotFoundInstance():a}}static decode(t,r,a){const u=new Array,c=Ve.detectMultiple(t,r,a);for(const d of c.getPoints()){const g=Ke.decode(c.getBits(),d[4],d[5],d[6],d[7],An.getMinCodewordWidth(d),An.getMaxCodewordWidth(d)),y=new Ae(g.getText(),g.getRawBytes(),void 0,d,be.PDF_417);y.putMetadata(dt.ERROR_CORRECTION_LEVEL,g.getECLevel());const v=g.getOther();v!=null&&y.putMetadata(dt.PDF417_EXTRA_METADATA,v),u.push(y)}return u.map(d=>d)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?Y.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(An.getMaxWidth(t[0],t[4]),An.getMaxWidth(t[6],t[2])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN),Math.max(An.getMaxWidth(t[1],t[5]),An.getMaxWidth(t[7],t[3])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(An.getMinWidth(t[0],t[4]),An.getMinWidth(t[6],t[2])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN),Math.min(An.getMinWidth(t[1],t[5]),An.getMinWidth(t[7],t[3])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN)))}reset(){}}class cs extends E{}cs.kind="ReaderException";class Co{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!f(t)&&t.get(Ee.TRY_HARDER)===!0,a=f(t)?null:t.get(Ee.POSSIBLE_FORMATS),u=new Array;if(!f(a)){const c=a.some(d=>d===be.UPC_A||d===be.UPC_E||d===be.EAN_13||d===be.EAN_8||d===be.CODABAR||d===be.CODE_39||d===be.CODE_93||d===be.CODE_128||d===be.ITF||d===be.RSS_14||d===be.RSS_EXPANDED);c&&!r&&u.push(new lr(t,this.verbose)),a.includes(be.QR_CODE)&&u.push(new Pr),a.includes(be.DATA_MATRIX)&&u.push(new jr),a.includes(be.AZTEC)&&u.push(new ns),a.includes(be.PDF_417)&&u.push(new An),c&&r&&u.push(new lr(t,this.verbose))}u.length===0&&(r||u.push(new lr(t,this.verbose)),u.push(new Pr),u.push(new jr),u.push(new ns),u.push(new An),r&&u.push(new lr(t,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new cs("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(a){if(a instanceof cs)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class To extends ve{constructor(t=null,r=500){const a=new Co;a.setHints(t),super(a,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class hc extends ve{constructor(t=500){super(new An,t)}}class fc extends ve{constructor(t=500){super(new Pr,t)}}var gl;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(gl||(gl={}));var un=gl;class Na{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new wn(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let a=r[r.length-1];const u=this.field;for(let c=r.length;c<=t;c++){const d=a.multiply(new wn(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));r.push(d),a=d}}return r[t]}encode(t,r){if(r===0)throw new N("No error correction bytes");const a=t.length-r;if(a<=0)throw new N("No data bytes provided");const u=this.buildGenerator(r),c=new Int32Array(a);G.arraycopy(t,0,c,0,a);let d=new wn(this.field,c);d=d.multiplyByMonomial(r,1);const y=d.divide(u)[1].getCoefficients(),v=r-y.length;for(let S=0;S<v;S++)t[a+S]=0;G.arraycopy(y,0,t,a+v,y.length)}}class Yt{constructor(){}static applyMaskPenaltyRule1(t){return Yt.applyMaskPenaltyRule1Internal(t,!0)+Yt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const a=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let d=0;d<c-1;d++){const g=a[d];for(let y=0;y<u-1;y++){const v=g[y];v===g[y+1]&&v===a[d+1][y]&&v===a[d+1][y+1]&&r++}}return Yt.N2*r}static applyMaskPenaltyRule3(t){let r=0;const a=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let d=0;d<c;d++)for(let g=0;g<u;g++){const y=a[d];g+6<u&&y[g]===1&&y[g+1]===0&&y[g+2]===1&&y[g+3]===1&&y[g+4]===1&&y[g+5]===0&&y[g+6]===1&&(Yt.isWhiteHorizontal(y,g-4,g)||Yt.isWhiteHorizontal(y,g+7,g+11))&&r++,d+6<c&&a[d][g]===1&&a[d+1][g]===0&&a[d+2][g]===1&&a[d+3][g]===1&&a[d+4][g]===1&&a[d+5][g]===0&&a[d+6][g]===1&&(Yt.isWhiteVertical(a,g,d-4,d)||Yt.isWhiteVertical(a,g,d+7,d+11))&&r++}return r*Yt.N3}static isWhiteHorizontal(t,r,a){r=Math.max(r,0),a=Math.min(a,t.length);for(let u=r;u<a;u++)if(t[u]===1)return!1;return!0}static isWhiteVertical(t,r,a,u){a=Math.max(a,0),u=Math.min(u,t.length);for(let c=a;c<u;c++)if(t[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const a=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let y=0;y<c;y++){const v=a[y];for(let S=0;S<u;S++)v[S]===1&&r++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*Yt.N4}static getDataMaskBit(t,r,a){let u,c;switch(t){case 0:u=a+r&1;break;case 1:u=a&1;break;case 2:u=r%3;break;case 3:u=(a+r)%3;break;case 4:u=Math.floor(a/2)+Math.floor(r/3)&1;break;case 5:c=a*r,u=(c&1)+c%3;break;case 6:c=a*r,u=(c&1)+c%3&1;break;case 7:c=a*r,u=c%3+(a+r&1)&1;break;default:throw new N("Invalid mask pattern: "+t)}return u===0}static applyMaskPenaltyRule1Internal(t,r){let a=0;const u=r?t.getHeight():t.getWidth(),c=r?t.getWidth():t.getHeight(),d=t.getArray();for(let g=0;g<u;g++){let y=0,v=-1;for(let S=0;S<c;S++){const O=r?d[g][S]:d[S][g];O===v?y++:(y>=5&&(a+=Yt.N1+(y-5)),y=1,v=O)}y>=5&&(a+=Yt.N1+(y-5))}return a}}Yt.N1=3,Yt.N2=3,Yt.N3=40,Yt.N4=10;class hs{constructor(t,r){this.width=t,this.height=r;const a=new Array(r);for(let u=0;u!==r;u++)a[u]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,a){this.bytes[r][t]=a}setBoolean(t,r,a){this.bytes[r][t]=a?1:0}clear(t){for(const r of this.bytes)$.fill(r,t)}equals(t){if(!(t instanceof hs))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let a=0,u=this.height;a<u;++a){const c=this.bytes[a],d=r.bytes[a];for(let g=0,y=this.width;g<y;++g)if(c[g]!==d[g])return!1}return!0}toString(){const t=new at;for(let r=0,a=this.height;r<a;++r){const u=this.bytes[r];for(let c=0,d=this.width;c<d;++c)switch(u[c]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class hi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new at;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<hi.NUM_MASK_PATTERNS}}hi.NUM_MASK_PATTERNS=8;class _t extends E{}_t.kind="WriterException";class Pe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,a,u,c){Pe.clearMatrix(c),Pe.embedBasicPatterns(a,c),Pe.embedTypeInfo(r,u,c),Pe.maybeEmbedVersionInfo(a,c),Pe.embedDataBits(t,u,c)}static embedBasicPatterns(t,r){Pe.embedPositionDetectionPatternsAndSeparators(r),Pe.embedDarkDotAtLeftBottomCorner(r),Pe.maybeEmbedPositionAdjustmentPatterns(t,r),Pe.embedTimingPatterns(r)}static embedTypeInfo(t,r,a){const u=new pe;Pe.makeTypeInfoBits(t,r,u);for(let c=0,d=u.getSize();c<d;++c){const g=u.get(u.getSize()-1-c),y=Pe.TYPE_INFO_COORDINATES[c],v=y[0],S=y[1];if(a.setBoolean(v,S,g),c<8){const O=a.getWidth()-c-1;a.setBoolean(O,8,g)}else{const I=a.getHeight()-7+(c-8);a.setBoolean(8,I,g)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const a=new pe;Pe.makeVersionInfoBits(t,a);let u=17;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const g=a.get(u);u--,r.setBoolean(c,r.getHeight()-11+d,g),r.setBoolean(r.getHeight()-11+d,c,g)}}static embedDataBits(t,r,a){let u=0,c=-1,d=a.getWidth()-1,g=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);g>=0&&g<a.getHeight();){for(let y=0;y<2;++y){const v=d-y;if(!Pe.isEmpty(a.get(v,g)))continue;let S;u<t.getSize()?(S=t.get(u),++u):S=!1,r!==255&&Yt.getDataMaskBit(r,v,g)&&(S=!S),a.setBoolean(v,g,S)}g+=c}c=-c,g+=c,d-=2}if(u!==t.getSize())throw new _t("Not all bits consumed: "+u+"/"+t.getSize())}static findMSBSet(t){return 32-Y.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new N("0 polynomial");const a=Pe.findMSBSet(r);for(t<<=a-1;Pe.findMSBSet(t)>=a;)t^=r<<Pe.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,r,a){if(!hi.isValidMaskPattern(r))throw new _t("Invalid mask pattern");const u=t.getBits()<<3|r;a.appendBits(u,5);const c=Pe.calculateBCHCode(u,Pe.TYPE_INFO_POLY);a.appendBits(c,10);const d=new pe;if(d.appendBits(Pe.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new _t("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const a=Pe.calculateBCHCode(t.getVersionNumber(),Pe.VERSION_INFO_POLY);if(r.appendBits(a,12),r.getSize()!==18)throw new _t("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const a=(r+1)%2;Pe.isEmpty(t.get(r,6))&&t.setNumber(r,6,a),Pe.isEmpty(t.get(6,r))&&t.setNumber(6,r,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new _t;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,a){for(let u=0;u<8;++u){if(!Pe.isEmpty(a.get(t+u,r)))throw new _t;a.setNumber(t+u,r,0)}}static embedVerticalSeparationPattern(t,r,a){for(let u=0;u<7;++u){if(!Pe.isEmpty(a.get(t,r+u)))throw new _t;a.setNumber(t,r+u,0)}}static embedPositionAdjustmentPattern(t,r,a){for(let u=0;u<5;++u){const c=Pe.POSITION_ADJUSTMENT_PATTERN[u];for(let d=0;d<5;++d)a.setNumber(t+d,r+u,c[d])}}static embedPositionDetectionPattern(t,r,a){for(let u=0;u<7;++u){const c=Pe.POSITION_DETECTION_PATTERN[u];for(let d=0;d<7;++d)a.setNumber(t+d,r+u,c[d])}}static embedPositionDetectionPatternsAndSeparators(t){const r=Pe.POSITION_DETECTION_PATTERN[0].length;Pe.embedPositionDetectionPattern(0,0,t),Pe.embedPositionDetectionPattern(t.getWidth()-r,0,t),Pe.embedPositionDetectionPattern(0,t.getWidth()-r,t);const a=8;Pe.embedHorizontalSeparationPattern(0,a-1,t),Pe.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Pe.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const u=7;Pe.embedVerticalSeparationPattern(u,0,t),Pe.embedVerticalSeparationPattern(t.getHeight()-u-1,0,t),Pe.embedVerticalSeparationPattern(u,t.getHeight()-u,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,u=Pe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let c=0,d=u.length;c!==d;c++){const g=u[c];if(g>=0)for(let y=0;y!==d;y++){const v=u[y];v>=0&&Pe.isEmpty(r.get(v,g))&&Pe.embedPositionAdjustmentPattern(v-2,g-2,r)}}}}Pe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Pe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Pe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Pe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Pe.VERSION_INFO_POLY=7973,Pe.TYPE_INFO_POLY=1335,Pe.TYPE_INFO_MASK_PATTERN=21522;class dc{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(t){return Yt.applyMaskPenaltyRule1(t)+Yt.applyMaskPenaltyRule2(t)+Yt.applyMaskPenaltyRule3(t)+Yt.applyMaskPenaltyRule4(t)}static encode(t,r,a=null){let u=jt.DEFAULT_BYTE_MODE_ENCODING;const c=a!==null&&a.get(un.CHARACTER_SET)!==void 0;c&&(u=a.get(un.CHARACTER_SET).toString());const d=this.chooseMode(t,u),g=new pe;if(d===Me.BYTE&&(c||jt.DEFAULT_BYTE_MODE_ENCODING!==u)){const xe=he.getCharacterSetECIByName(u);xe!==void 0&&this.appendECI(xe,g)}this.appendModeInfo(d,g);const y=new pe;this.appendBytes(t,d,y,u);let v;if(a!==null&&a.get(un.QR_VERSION)!==void 0){const xe=Number.parseInt(a.get(un.QR_VERSION).toString(),10);v=Oe.getVersionForNumber(xe);const me=this.calculateBitsNeeded(d,g,y,v);if(!this.willFit(me,v,r))throw new _t("Data too big for requested version")}else v=this.recommendVersion(r,d,g,y);const S=new pe;S.appendBitArray(g);const O=d===Me.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(O,v,d,S),S.appendBitArray(y);const I=v.getECBlocksForLevel(r),B=v.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(B,S);const P=this.interleaveWithECBytes(S,v.getTotalCodewords(),B,I.getNumBlocks()),F=new hi;F.setECLevel(r),F.setMode(d),F.setVersion(v);const X=v.getDimensionForVersion(),ne=new hs(X,X),ye=this.chooseMaskPattern(P,r,v,ne);return F.setMaskPattern(ye),Pe.buildMatrix(P,r,v,ye,ne),F.setMatrix(ne),F}static recommendVersion(t,r,a,u){const c=this.calculateBitsNeeded(r,a,u,Oe.getVersionForNumber(1)),d=this.chooseVersion(c,t),g=this.calculateBitsNeeded(r,a,u,d);return this.chooseVersion(g,t)}static calculateBitsNeeded(t,r,a,u){return r.getSize()+t.getCharacterCountBits(u)+a.getSize()}static getAlphanumericCode(t){return t<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(he.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Me.KANJI;let a=!1,u=!1;for(let c=0,d=t.length;c<d;++c){const g=t.charAt(c);if(jt.isDigit(g))a=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)u=!0;else return Me.BYTE}return u?Me.ALPHANUMERIC:a?Me.NUMERIC:Me.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=it.encode(t,he.SJIS)}catch{return!1}const a=r.length;if(a%2!==0)return!1;for(let u=0;u<a;u+=2){const c=r[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(t,r,a,u){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let g=0;g<hi.NUM_MASK_PATTERNS;g++){Pe.buildMatrix(t,r,a,g,u);let y=this.calculateMaskPenalty(u);y<c&&(c=y,d=g)}return d}static chooseVersion(t,r){for(let a=1;a<=40;a++){const u=Oe.getVersionForNumber(a);if(jt.willFit(t,u,r))return u}throw new _t("Data too big")}static willFit(t,r,a){const u=r.getTotalCodewords(),d=r.getECBlocksForLevel(a).getTotalECCodewords(),g=u-d,y=(t+7)/8;return g>=y}static terminateBits(t,r){const a=t*8;if(r.getSize()>a)throw new _t("data bits cannot fit in the QR Code"+r.getSize()+" > "+a);for(let d=0;d<4&&r.getSize()<a;++d)r.appendBit(!1);const u=r.getSize()&7;if(u>0)for(let d=u;d<8;d++)r.appendBit(!1);const c=t-r.getSizeInBytes();for(let d=0;d<c;++d)r.appendBits((d&1)===0?236:17,8);if(r.getSize()!==a)throw new _t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,a,u,c,d){if(u>=a)throw new _t("Block ID too large");const g=t%a,y=a-g,v=Math.floor(t/a),S=v+1,O=Math.floor(r/a),I=O+1,B=v-O,P=S-I;if(B!==P)throw new _t("EC bytes mismatch");if(a!==y+g)throw new _t("RS blocks mismatch");if(t!==(O+B)*y+(I+P)*g)throw new _t("Total bytes mismatch");u<y?(c[0]=O,d[0]=B):(c[0]=I,d[0]=P)}static interleaveWithECBytes(t,r,a,u){if(t.getSizeInBytes()!==a)throw new _t("Number of bits and data bytes does not match");let c=0,d=0,g=0;const y=new Array;for(let S=0;S<u;++S){const O=new Int32Array(1),I=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(r,a,u,S,O,I);const B=O[0],P=new Uint8Array(B);t.toBytes(8*c,P,0,B);const F=jt.generateECBytes(P,I[0]);y.push(new dc(P,F)),d=Math.max(d,B),g=Math.max(g,F.length),c+=O[0]}if(a!==c)throw new _t("Data bytes does not match offset");const v=new pe;for(let S=0;S<d;++S)for(const O of y){const I=O.getDataBytes();S<I.length&&v.appendBits(I[S],8)}for(let S=0;S<g;++S)for(const O of y){const I=O.getErrorCorrectionBytes();S<I.length&&v.appendBits(I[S],8)}if(r!==v.getSizeInBytes())throw new _t("Interleaving error: "+r+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(t,r){const a=t.length,u=new Int32Array(a+r);for(let d=0;d<a;d++)u[d]=t[d]&255;new Na(gt.QR_CODE_FIELD_256).encode(u,r);const c=new Uint8Array(r);for(let d=0;d<r;d++)c[d]=u[a+d];return c}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,a,u){const c=a.getCharacterCountBits(r);if(t>=1<<c)throw new _t(t+" is bigger than "+((1<<c)-1));u.appendBits(t,c)}static appendBytes(t,r,a,u){switch(r){case Me.NUMERIC:jt.appendNumericBytes(t,a);break;case Me.ALPHANUMERIC:jt.appendAlphanumericBytes(t,a);break;case Me.BYTE:jt.append8BitBytes(t,a,u);break;case Me.KANJI:jt.appendKanjiBytes(t,a);break;default:throw new _t("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=jt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const a=t.length;let u=0;for(;u<a;){const c=jt.getDigit(t.charAt(u));if(u+2<a){const d=jt.getDigit(t.charAt(u+1)),g=jt.getDigit(t.charAt(u+2));r.appendBits(c*100+d*10+g,10),u+=3}else if(u+1<a){const d=jt.getDigit(t.charAt(u+1));r.appendBits(c*10+d,7),u+=2}else r.appendBits(c,4),u++}}static appendAlphanumericBytes(t,r){const a=t.length;let u=0;for(;u<a;){const c=jt.getAlphanumericCode(t.charCodeAt(u));if(c===-1)throw new _t;if(u+1<a){const d=jt.getAlphanumericCode(t.charCodeAt(u+1));if(d===-1)throw new _t;r.appendBits(c*45+d,11),u+=2}else r.appendBits(c,6),u++}}static append8BitBytes(t,r,a){let u;try{u=it.encode(t,a)}catch(c){throw new _t(c)}for(let c=0,d=u.length;c!==d;c++){const g=u[c];r.appendBits(g,8)}}static appendKanjiBytes(t,r){let a;try{a=it.encode(t,he.SJIS)}catch(c){throw new _t(c)}const u=a.length;for(let c=0;c<u;c+=2){const d=a[c]&255,g=a[c+1]&255,y=d<<8&4294967295|g;let v=-1;if(y>=33088&&y<=40956?v=y-33088:y>=57408&&y<=60351&&(v=y-49472),v===-1)throw new _t("Invalid byte sequence");const S=(v>>8)*192+(v&255);r.appendBits(S,13)}}static appendECI(t,r){r.appendBits(Me.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=he.UTF8.getName();class fi{write(t,r,a,u=null){if(t.length===0)throw new N("Found empty contents");if(r<0||a<0)throw new N("Requested dimensions are too small: "+r+"x"+a);let c=Je.L,d=fi.QUIET_ZONE_SIZE;u!==null&&(u.get(un.ERROR_CORRECTION)!==void 0&&(c=Je.fromString(u.get(un.ERROR_CORRECTION).toString())),u.get(un.MARGIN)!==void 0&&(d=Number.parseInt(u.get(un.MARGIN).toString(),10)));const g=jt.encode(t,c,u);return this.renderResult(g,r,a,d)}writeToDom(t,r,a,u,c=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(r,a,u,c);t&&t.appendChild(d)}renderResult(t,r,a,u){const c=t.getMatrix();if(c===null)throw new Yn;const d=c.getWidth(),g=c.getHeight(),y=d+u*2,v=g+u*2,S=Math.max(r,y),O=Math.max(a,v),I=Math.min(Math.floor(S/y),Math.floor(O/v)),B=Math.floor((S-d*I)/2),P=Math.floor((O-g*I)/2),F=this.createSVGElement(S,O);for(let X=0,ne=P;X<g;X++,ne+=I)for(let ye=0,xe=B;ye<d;ye++,xe+=I)if(c.get(ye,X)===1){const me=this.createSvgRectElement(xe,ne,I,I);F.appendChild(me)}return F}createSVGElement(t,r){const a=document.createElementNS(fi.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",r.toString()),a}createSvgRectElement(t,r,a,u){const c=document.createElementNS(fi.SVG_NS,"rect");return c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}fi.QUIET_ZONE_SIZE=4,fi.SVG_NS="http://www.w3.org/2000/svg";class Wi{encode(t,r,a,u,c){if(t.length===0)throw new N("Found empty contents");if(r!==be.QR_CODE)throw new N("Can only encode QR_CODE, but got "+r);if(a<0||u<0)throw new N(`Requested dimensions are too small: ${a}x${u}`);let d=Je.L,g=Wi.QUIET_ZONE_SIZE;c!==null&&(c.get(un.ERROR_CORRECTION)!==void 0&&(d=Je.fromString(c.get(un.ERROR_CORRECTION).toString())),c.get(un.MARGIN)!==void 0&&(g=Number.parseInt(c.get(un.MARGIN).toString(),10)));const y=jt.encode(t,d,c);return Wi.renderResult(y,a,u,g)}static renderResult(t,r,a,u){const c=t.getMatrix();if(c===null)throw new Yn;const d=c.getWidth(),g=c.getHeight(),y=d+u*2,v=g+u*2,S=Math.max(r,y),O=Math.max(a,v),I=Math.min(Math.floor(S/y),Math.floor(O/v)),B=Math.floor((S-d*I)/2),P=Math.floor((O-g*I)/2),F=new Nt(S,O);for(let X=0,ne=P;X<g;X++,ne+=I)for(let ye=0,xe=B;ye<d;ye++,xe+=I)c.get(ye,X)===1&&F.setRegion(xe,ne,I,I);return F}}Wi.QUIET_ZONE_SIZE=4;class gc{encode(t,r,a,u,c){let d;if(r===be.QR_CODE)d=new Wi;else throw new N("No encoder available for format "+r);return d.encode(t,r,a,u,c)}}class Cr extends Ue{constructor(t,r,a,u,c,d,g,y){if(super(d,g),this.yuvData=t,this.dataWidth=r,this.dataHeight=a,this.left=u,this.top=c,u+d>r||c+g>a)throw new N("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,g)}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const u=(t+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,u,r,0,a),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const a=t*r,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return G.arraycopy(this.yuvData,c,u,0,a),u;for(let d=0;d<r;d++){const g=d*t;G.arraycopy(this.yuvData,c,u,g,t),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,r,a,u){return new Cr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,a,u,!1)}renderThumbnail(){const t=this.getWidth()/Cr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Cr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*r),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const g=d*t;for(let y=0;y<t;y++){const v=u[c+y*Cr.THUMBNAIL_SCALE_FACTOR]&255;a[g+y]=4278190080|v*65793}c+=this.dataWidth*Cr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Cr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Cr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const a=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<r;u++,c+=this.dataWidth){const d=c+t/2;for(let g=c,y=c+t-1;g<d;g++,y--){const v=a[g];a[g]=a[y],a[y]=v}}}invert(){return new $e(this)}}Cr.THUMBNAIL_SCALE_FACTOR=2;class ml extends Ue{constructor(t,r,a,u,c,d,g){if(super(r,a),this.dataWidth=u,this.dataHeight=c,this.left=d,this.top=g,t.BYTES_PER_ELEMENT===4){const y=r*a,v=new Uint8ClampedArray(y);for(let S=0;S<y;S++){const O=t[S],I=O>>16&255,B=O>>7&510,P=O&255;v[S]=(I+B+P)/4&255}this.luminances=v}else this.luminances=t;if(u===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+a>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const u=(t+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,u,r,0,a),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const a=t*r,u=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return G.arraycopy(this.luminances,c,u,0,a),u;for(let d=0;d<r;d++){const g=d*t;G.arraycopy(this.luminances,c,u,g,t),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,r,a,u){return new ml(this.luminances,a,u,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new $e(this)}}class Oo extends he{static forName(t){return this.getCharacterSetECIByName(t)}}class Ia{}Ia.ISO_8859_1=he.ISO8859_1;class Ki{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Ro{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class No{constructor(t){this.previous=t}getPrevious(){return this.previous}}class di extends No{constructor(t,r,a){super(t),this.value=r,this.bitCount=a}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new di(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Y.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class fs extends di{constructor(t,r,a){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=a}appendTo(t,r){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+a],8)}addBinaryShift(t,r){return new fs(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Io(T,t,r){return new fs(T,t,r)}function Zi(T,t,r){return new di(T,t,r)}const Qi=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ri=0,ds=1,Qn=2,pl=3,cr=4,Da=new di(null,0,0),gi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function mc(T){for(let t of T)$.fill(t,-1);return T[ri][cr]=0,T[ds][cr]=0,T[ds][ri]=28,T[pl][cr]=0,T[Qn][cr]=0,T[Qn][ri]=15,T}const Ma=mc($.createInt32Array(6,6));class hr{constructor(t,r,a,u){this.token=t,this.mode=r,this.binaryShiftByteCount=a,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let a=this.bitCount,u=this.token;if(t!==this.mode){let d=gi[this.mode][t];u=Zi(u,d&65535,d>>16),a+=d>>16}let c=t===Qn?4:5;return u=Zi(u,r,c),new hr(u,t,0,a+c)}shiftAndAppend(t,r){let a=this.token,u=this.mode===Qn?4:5;return a=Zi(a,Ma[this.mode][t],u),a=Zi(a,r,5),new hr(a,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(t){let r=this.token,a=this.mode,u=this.bitCount;if(this.mode===cr||this.mode===Qn){let g=gi[a][ri];r=Zi(r,g&65535,g>>16),u+=g>>16,a=ri}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new hr(r,a,this.binaryShiftByteCount+1,u+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Io(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new hr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(gi[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=hr.calculateBinaryShiftCost(t)-hr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let u=this.endBinaryShift(t.length).token;u!==null;u=u.getPrevious())r.unshift(u);let a=new pe;for(const u of r)u.appendTo(a,t);return a}toString(){return Ne.format("%s bits=%d bytes=%d",Qi[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}hr.INITIAL_STATE=new hr(Da,ri,0,0);function Do(T){const t=Ne.getCharCode(" "),r=Ne.getCharCode("."),a=Ne.getCharCode(",");T[ri][t]=1;const u=Ne.getCharCode("Z"),c=Ne.getCharCode("A");for(let I=c;I<=u;I++)T[ri][I]=I-c+2;T[ds][t]=1;const d=Ne.getCharCode("z"),g=Ne.getCharCode("a");for(let I=g;I<=d;I++)T[ds][I]=I-g+2;T[Qn][t]=1;const y=Ne.getCharCode("9"),v=Ne.getCharCode("0");for(let I=v;I<=y;I++)T[Qn][I]=I-v+2;T[Qn][a]=12,T[Qn][r]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<S.length;I++)T[pl][Ne.getCharCode(S[I])]=I;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<O.length;I++)Ne.getCharCode(O[I])>0&&(T[cr][Ne.getCharCode(O[I])]=I);return T}const Ba=Do($.createInt32Array(5,256));class mi{constructor(t){this.text=t}encode(){const t=Ne.getCharCode(" "),r=Ne.getCharCode(`
`);let a=Ro.singletonList(hr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ne.getCharCode("\r"):d=g===r?2:0;break;case Ne.getCharCode("."):d=g===t?3:0;break;case Ne.getCharCode(","):d=g===t?4:0;break;case Ne.getCharCode(":"):d=g===t?5:0;break;default:d=0}d>0?(a=mi.updateStateListForPair(a,c,d),c++):a=this.updateStateListForChar(a,c)}return Ro.min(a,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const a=[];for(let u of t)this.updateStateForChar(u,r,a);return mi.simplifyStates(a)}updateStateForChar(t,r,a){let u=this.text[r]&255,c=Ba[t.getMode()][u]>0,d=null;for(let g=0;g<=cr;g++){let y=Ba[g][u];if(y>0){if(d==null&&(d=t.endBinaryShift(r)),!c||g===t.getMode()||g===Qn){const v=d.latchAndAppend(g,y);a.push(v)}if(!c&&Ma[t.getMode()][g]>=0){const v=d.shiftAndAppend(g,y);a.push(v)}}}if(t.getBinaryShiftByteCount()>0||Ba[t.getMode()][u]===0){let g=t.addBinaryShiftChar(r);a.push(g)}}static updateStateListForPair(t,r,a){const u=[];for(let c of t)this.updateStateForPair(c,r,a,u);return this.simplifyStates(u)}static updateStateForPair(t,r,a,u){let c=t.endBinaryShift(r);if(u.push(c.latchAndAppend(cr,a)),t.getMode()!==cr&&u.push(c.shiftAndAppend(cr,a)),a===3||a===4){let d=c.latchAndAppend(Qn,16-a).latchAndAppend(Qn,1);u.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);u.push(d)}}static simplifyStates(t){let r=[];for(const a of t){let u=!0;for(const c of r){if(c.isBetterThanOrEqualTo(a)){u=!1;break}a.isBetterThanOrEqualTo(c)&&(r=r.filter(d=>d!==c))}u&&r.push(a)}return r}}class ot{constructor(){}static encodeBytes(t){return ot.encode(t,ot.DEFAULT_EC_PERCENT,ot.DEFAULT_AZTEC_LAYERS)}static encode(t,r,a){let u=new mi(t).encode(),c=Y.truncDivision(u.getSize()*r,100)+11,d=u.getSize()+c,g,y,v,S,O;if(a!==ot.DEFAULT_AZTEC_LAYERS){if(g=a<0,y=Math.abs(a),y>(g?ot.MAX_NB_BITS_COMPACT:ot.MAX_NB_BITS))throw new N(Ne.format("Illegal value %s for layers",a));v=ot.totalBitsInLayer(y,g),S=ot.WORD_SIZE[y];let me=v-v%S;if(O=ot.stuffBits(u,S),O.getSize()+c>me)throw new N("Data to large for user specified layer");if(g&&O.getSize()>S*64)throw new N("Data to large for user specified layer")}else{S=0,O=null;for(let me=0;;me++){if(me>ot.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(g=me<=3,y=g?me+1:me,v=ot.totalBitsInLayer(y,g),d>v)continue;(O==null||S!==ot.WORD_SIZE[y])&&(S=ot.WORD_SIZE[y],O=ot.stuffBits(u,S));let Qe=v-v%S;if(!(g&&O.getSize()>S*64)&&O.getSize()+c<=Qe)break}}let I=ot.generateCheckWords(O,v,S),B=O.getSize()/S,P=ot.generateModeMessage(g,y,B),F=(g?11:14)+y*4,X=new Int32Array(F),ne;if(g){ne=F;for(let me=0;me<X.length;me++)X[me]=me}else{ne=F+1+2*Y.truncDivision(Y.truncDivision(F,2)-1,15);let me=Y.truncDivision(F,2),Qe=Y.truncDivision(ne,2);for(let qe=0;qe<me;qe++){let en=qe+Y.truncDivision(qe,15);X[me-qe-1]=Qe-en-1,X[me+qe]=Qe+en+1}}let ye=new Nt(ne);for(let me=0,Qe=0;me<y;me++){let qe=(y-me)*4+(g?9:12);for(let en=0;en<qe;en++){let Jn=en*2;for(let In=0;In<2;In++)I.get(Qe+Jn+In)&&ye.set(X[me*2+In],X[me*2+en]),I.get(Qe+qe*2+Jn+In)&&ye.set(X[me*2+en],X[F-1-me*2-In]),I.get(Qe+qe*4+Jn+In)&&ye.set(X[F-1-me*2-In],X[F-1-me*2-en]),I.get(Qe+qe*6+Jn+In)&&ye.set(X[F-1-me*2-en],X[me*2+In])}Qe+=qe*8}if(ot.drawModeMessage(ye,g,ne,P),g)ot.drawBullsEye(ye,Y.truncDivision(ne,2),5);else{ot.drawBullsEye(ye,Y.truncDivision(ne,2),7);for(let me=0,Qe=0;me<Y.truncDivision(F,2)-1;me+=15,Qe+=16)for(let qe=Y.truncDivision(ne,2)&1;qe<ne;qe+=2)ye.set(Y.truncDivision(ne,2)-Qe,qe),ye.set(Y.truncDivision(ne,2)+Qe,qe),ye.set(qe,Y.truncDivision(ne,2)-Qe),ye.set(qe,Y.truncDivision(ne,2)+Qe)}let xe=new Ki;return xe.setCompact(g),xe.setSize(ne),xe.setLayers(y),xe.setCodeWords(B),xe.setMatrix(ye),xe}static drawBullsEye(t,r,a){for(let u=0;u<a;u+=2)for(let c=r-u;c<=r+u;c++)t.set(c,r-u),t.set(c,r+u),t.set(r-u,c),t.set(r+u,c);t.set(r-a,r-a),t.set(r-a+1,r-a),t.set(r-a,r-a+1),t.set(r+a,r-a),t.set(r+a,r-a+1),t.set(r+a,r+a-1)}static generateModeMessage(t,r,a){let u=new pe;return t?(u.appendBits(r-1,2),u.appendBits(a-1,6),u=ot.generateCheckWords(u,28,4)):(u.appendBits(r-1,5),u.appendBits(a-1,11),u=ot.generateCheckWords(u,40,4)),u}static drawModeMessage(t,r,a,u){let c=Y.truncDivision(a,2);if(r)for(let d=0;d<7;d++){let g=c-3+d;u.get(d)&&t.set(g,c-5),u.get(d+7)&&t.set(c+5,g),u.get(20-d)&&t.set(g,c+5),u.get(27-d)&&t.set(c-5,g)}else for(let d=0;d<10;d++){let g=c-5+d+Y.truncDivision(d,5);u.get(d)&&t.set(g,c-7),u.get(d+10)&&t.set(c+7,g),u.get(29-d)&&t.set(g,c+7),u.get(39-d)&&t.set(c-7,g)}}static generateCheckWords(t,r,a){let u=t.getSize()/a,c=new Na(ot.getGF(a)),d=Y.truncDivision(r,a),g=ot.bitsToWords(t,a,d);c.encode(g,d-u);let y=r%a,v=new pe;v.appendBits(0,y);for(const S of Array.from(g))v.appendBits(S,a);return v}static bitsToWords(t,r,a){let u=new Int32Array(a),c,d;for(c=0,d=t.getSize()/r;c<d;c++){let g=0;for(let y=0;y<r;y++)g|=t.get(c*r+y)?1<<r-y-1:0;u[c]=g}return u}static getGF(t){switch(t){case 4:return gt.AZTEC_PARAM;case 6:return gt.AZTEC_DATA_6;case 8:return gt.AZTEC_DATA_8;case 10:return gt.AZTEC_DATA_10;case 12:return gt.AZTEC_DATA_12;default:throw new N("Unsupported word size "+t)}}static stuffBits(t,r){let a=new pe,u=t.getSize(),c=(1<<r)-2;for(let d=0;d<u;d+=r){let g=0;for(let y=0;y<r;y++)(d+y>=u||t.get(d+y))&&(g|=1<<r-1-y);(g&c)===c?(a.appendBits(g&c,r),d--):(g&c)===0?(a.appendBits(g|1,r),d--):a.appendBits(g,r)}return a}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}ot.DEFAULT_EC_PERCENT=33,ot.DEFAULT_AZTEC_LAYERS=0,ot.MAX_NB_BITS=32,ot.MAX_NB_BITS_COMPACT=4,ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ka{encode(t,r,a,u){return this.encodeWithHints(t,r,a,u,null)}encodeWithHints(t,r,a,u,c){let d=Ia.ISO_8859_1,g=ot.DEFAULT_EC_PERCENT,y=ot.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(un.CHARACTER_SET)&&(d=Oo.forName(c.get(un.CHARACTER_SET).toString())),c.has(un.ERROR_CORRECTION)&&(g=Y.parseInt(c.get(un.ERROR_CORRECTION).toString())),c.has(un.AZTEC_LAYERS)&&(y=Y.parseInt(c.get(un.AZTEC_LAYERS).toString()))),ka.encodeLayers(t,r,a,u,d,g,y)}static encodeLayers(t,r,a,u,c,d,g){if(r!==be.AZTEC)throw new N("Can only encode AZTEC, but got "+r);let y=ot.encode(Ne.getBytes(t,c),d,g);return ka.renderResult(y,a,u)}static renderResult(t,r,a){let u=t.getMatrix();if(u==null)throw new Yn;let c=u.getWidth(),d=u.getHeight(),g=Math.max(r,c),y=Math.max(a,d),v=Math.min(g/c,y/d),S=(g-c*v)/2,O=(y-d*v)/2,I=new Nt(g,y);for(let B=0,P=O;B<d;B++,P+=v)for(let F=0,X=S;F<c;F++,X+=v)u.get(F,B)&&I.setRegion(X,P,v,v);return I}}o.AbstractExpandedDecoder=ln,o.ArgumentException=R,o.ArithmeticException=Ui,o.AztecCode=Ki,o.AztecCodeReader=ns,o.AztecCodeWriter=ka,o.AztecDecoder=Ct,o.AztecDetector=al,o.AztecDetectorResult=yo,o.AztecEncoder=ot,o.AztecHighLevelEncoder=mi,o.AztecPoint=Rn,o.BarcodeFormat=be,o.Binarizer=V,o.BinaryBitmap=L,o.BitArray=pe,o.BitMatrix=Nt,o.BitSource=or,o.BrowserAztecCodeReader=lc,o.BrowserBarcodeReader=oc,o.BrowserCodeReader=ve,o.BrowserDatamatrixCodeReader=as,o.BrowserMultiFormatReader=To,o.BrowserPDF417Reader=hc,o.BrowserQRCodeReader=fc,o.BrowserQRCodeSvgWriter=fi,o.CharacterSetECI=he,o.ChecksumException=U,o.Code128Reader=we,o.Code39Reader=It,o.DataMatrixDecodedBitStreamParser=Ur,o.DataMatrixReader=jr,o.DecodeHintType=Ee,o.DecoderResult=kt,o.DefaultGridSampler=il,o.DetectorResult=ts,o.EAN13Reader=Er,o.EncodeHintType=un,o.Exception=E,o.FormatException=ee,o.GenericGF=gt,o.GenericGFPoly=wn,o.GlobalHistogramBinarizer=ie,o.GridSampler=rl,o.GridSamplerInstance=ar,o.HTMLCanvasElementLuminanceSource=st,o.HybridBinarizer=fe,o.ITFReader=We,o.IllegalArgumentException=N,o.IllegalStateException=Yn,o.InvertedLuminanceSource=$e,o.LuminanceSource=Ue,o.MathUtils=et,o.MultiFormatOneDReader=lr,o.MultiFormatReader=Co,o.MultiFormatWriter=gc,o.NotFoundException=se,o.OneDReader=Ft,o.PDF417DecodedBitStreamParser=re,o.PDF417DecoderErrorCorrection=Fr,o.PDF417Reader=An,o.PDF417ResultMetadata=Yi,o.PerspectiveTransform=Wn,o.PlanarYUVLuminanceSource=Cr,o.QRCodeByteMatrix=hs,o.QRCodeDataMask=Hn,o.QRCodeDecodedBitStreamParser=Lt,o.QRCodeDecoderErrorCorrectionLevel=Je,o.QRCodeDecoderFormatInformation=fn,o.QRCodeEncoder=jt,o.QRCodeEncoderQRCode=hi,o.QRCodeMaskUtil=Yt,o.QRCodeMatrixUtil=Pe,o.QRCodeMode=Me,o.QRCodeReader=Pr,o.QRCodeVersion=Oe,o.QRCodeWriter=Wi,o.RGBLuminanceSource=ml,o.RSS14Reader=At,o.RSSExpandedReader=ge,o.ReaderException=cs,o.ReedSolomonDecoder=ui,o.ReedSolomonEncoder=Na,o.ReedSolomonException=Xn,o.Result=Ae,o.ResultMetadataType=dt,o.ResultPoint=Ce,o.StringUtils=Ne,o.UnsupportedOperationException=ke,o.VideoInputDevice=H,o.WhiteRectangleDetector=Zt,o.WriterException=_t,o.ZXingArrays=$,o.ZXingCharset=Oo,o.ZXingInteger=Y,o.ZXingStandardCharsets=Ia,o.ZXingStringBuilder=at,o.ZXingStringEncoding=it,o.ZXingSystem=G,o.createAbstractExpandedDecoder=Fi,Object.defineProperty(o,"__esModule",{value:!0})}))})(no,no.exports)),no.exports}var Qt=sv();const lv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Gg=(function(){function l(i,o,f){if(this.formatMap=new Map([[Se.QR_CODE,Qt.BarcodeFormat.QR_CODE],[Se.AZTEC,Qt.BarcodeFormat.AZTEC],[Se.CODABAR,Qt.BarcodeFormat.CODABAR],[Se.CODE_39,Qt.BarcodeFormat.CODE_39],[Se.CODE_93,Qt.BarcodeFormat.CODE_93],[Se.CODE_128,Qt.BarcodeFormat.CODE_128],[Se.DATA_MATRIX,Qt.BarcodeFormat.DATA_MATRIX],[Se.MAXICODE,Qt.BarcodeFormat.MAXICODE],[Se.ITF,Qt.BarcodeFormat.ITF],[Se.EAN_13,Qt.BarcodeFormat.EAN_13],[Se.EAN_8,Qt.BarcodeFormat.EAN_8],[Se.PDF_417,Qt.BarcodeFormat.PDF_417],[Se.RSS_14,Qt.BarcodeFormat.RSS_14],[Se.RSS_EXPANDED,Qt.BarcodeFormat.RSS_EXPANDED],[Se.UPC_A,Qt.BarcodeFormat.UPC_A],[Se.UPC_E,Qt.BarcodeFormat.UPC_E],[Se.UPC_EAN_EXTENSION,Qt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!lv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=o,this.logger=f;var p=this.createZXingFormats(i),m=new Map;m.set(Qt.DecodeHintType.POSSIBLE_FORMATS,p),m.set(Qt.DecodeHintType.TRY_HARDER,!1),this.hints=m}return l.prototype.decodeAsync=function(i){var o=this;return new Promise(function(f,p){try{f(o.decode(i))}catch(m){p(m)}})},l.prototype.decode=function(i){var o=new Qt.MultiFormatReader(this.verbose,this.hints),f=new Qt.HTMLCanvasElementLuminanceSource(i),p=new Qt.BinaryBitmap(new Qt.HybridBinarizer(f)),m=o.decode(p);return{text:m.text,format:L2.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},l.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(o,f,p){i.set(o,f)}),i},l.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},l.prototype.createZXingFormats=function(i){for(var o=[],f=0,p=i;f<p.length;f++){var m=p[f];this.formatMap.has(m)?o.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return o},l.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},l})(),ov=function(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})},uv=function(l,i){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(E){return function(R){return _([E,R])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(o=0)),o;)try{if(f=1,p&&(m=E[0]&2?p.return:E[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,E[1])).done)return m;switch(p=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,p=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){o.label=E[1];break}if(E[0]===6&&o.label<m[1]){o.label=m[1],m=E;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(E);break}m[2]&&o.ops.pop(),o.trys.pop();continue}E=i.call(l,o)}catch(R){E=[6,R],p=0}finally{f=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Vg=(function(){function l(i,o,f){if(this.formatMap=new Map([[Se.QR_CODE,"qr_code"],[Se.AZTEC,"aztec"],[Se.CODABAR,"codabar"],[Se.CODE_39,"code_39"],[Se.CODE_93,"code_93"],[Se.CODE_128,"code_128"],[Se.DATA_MATRIX,"data_matrix"],[Se.ITF,"itf"],[Se.EAN_13,"ean_13"],[Se.EAN_8,"ean_8"],[Se.PDF_417,"pdf417"],[Se.UPC_A,"upc_a"],[Se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!l.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=o,this.logger=f;var p=this.createBarcodeDetectorFormats(i);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return l.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var i=new BarcodeDetector({formats:["qr_code"]});return typeof i<"u"},l.prototype.decodeAsync=function(i){return ov(this,void 0,void 0,function(){var o,f;return uv(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(i)];case 1:if(o=p.sent(),!o||o.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(o),[2,{text:f.rawValue,format:L2.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},l.prototype.selectLargestBarcode=function(i){for(var o=null,f=0,p=0,m=i;p<m.length;p++){var b=m[p],A=b.boundingBox.width*b.boundingBox.height;A>f&&(f=A,o=b)}if(!o)throw"No largest barcode found";return o},l.prototype.createBarcodeDetectorFormats=function(i){for(var o=[],f=0,p=i;f<p.length;f++){var m=p[f];this.formatMap.has(m)?o.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:o}},l.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},l.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(o,f,p){i.set(o,f)}),i},l.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},l})(),qg=function(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})},Xg=function(l,i){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(E){return function(R){return _([E,R])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(o=0)),o;)try{if(f=1,p&&(m=E[0]&2?p.return:E[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,E[1])).done)return m;switch(p=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,p=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){o.label=E[1];break}if(E[0]===6&&o.label<m[1]){o.label=m[1],m=E;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(E);break}m[2]&&o.ops.pop(),o.trys.pop();continue}E=i.call(l,o)}catch(R){E=[6,R],p=0}finally{f=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},cv=(function(){function l(i,o,f,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,o&&Vg.isSupported()?(this.primaryDecoder=new Vg(i,f,p),this.secondaryDecoder=new Gg(i,f,p)):this.primaryDecoder=new Gg(i,f,p)}return l.prototype.decodeAsync=function(i){return qg(this,void 0,void 0,function(){var o;return Xg(this,function(f){switch(f.label){case 0:o=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(i)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(o),[7];case 4:return[2]}})})},l.prototype.decodeRobustlyAsync=function(i){return qg(this,void 0,void 0,function(){var o,f;return Xg(this,function(p){switch(p.label){case 0:o=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(i)];case 2:return[2,p.sent()];case 3:if(f=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(i)];throw f;case 4:return this.possiblyLogPerformance(o),[7];case 5:return[2]}})})},l.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},l.prototype.possiblyLogPerformance=function(i){if(this.verbose){var o=performance.now()-i;this.executionResults.push(o),this.executions++,this.possiblyFlushPerformanceReport()}},l.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var i=0,o=0,f=this.executionResults;o<f.length;o++){var p=f[o];i+=p}var m=i/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},l})(),Vf=(function(){var l=function(i,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(f[m]=p[m])},l(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(i,o);function f(){this.constructor=i}i.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)}})(),Ju=function(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})},$u=function(l,i){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(E){return function(R){return _([E,R])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(o=0)),o;)try{if(f=1,p&&(m=E[0]&2?p.return:E[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,E[1])).done)return m;switch(p=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,p=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){o.label=E[1];break}if(E[0]===6&&o.label<m[1]){o.label=m[1],m=E;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(E);break}m[2]&&o.ops.pop(),o.trys.pop();continue}E=i.call(l,o)}catch(R){E=[6,R],p=0}finally{f=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},j2=(function(){function l(i,o){this.name=i,this.track=o}return l.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},l.prototype.apply=function(i){var o={};o[this.name]=i;var f={advanced:[o]};return this.track.applyConstraints(f)},l.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var o=i[this.name];return o}return null},l})(),hv=(function(l){Vf(i,l);function i(o,f){return l.call(this,o,f)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(o){var f={};f[this.name]=o;var p={advanced:[f]};return this.track.applyConstraints(p)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var o=this.track.getCapabilities(),f=o[this.name];return{min:f.min,max:f.max,step:f.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i})(j2),fv=(function(l){Vf(i,l);function i(o){return l.call(this,"zoom",o)||this}return i})(hv),dv=(function(l){Vf(i,l);function i(o){return l.call(this,"torch",o)||this}return i})(j2),gv=(function(){function l(i){this.track=i}return l.prototype.zoomFeature=function(){return new fv(this.track)},l.prototype.torchFeature=function(){return new dv(this.track)},l})(),mv=(function(){function l(i,o,f){this.isClosed=!1,this.parentElement=i,this.mediaStream=o,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),i.append(this.surface)}return l.prototype.createVideoElement=function(i){var o=document.createElement("video");return o.style.width="".concat(i,"px"),o.style.display="block",o.muted=!0,o.setAttribute("muted","true"),o.playsInline=!0,o},l.prototype.setupSurface=function(){var i=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var o=function(){var f=i.surface.clientWidth,p=i.surface.clientHeight;i.callbacks.onRenderSurfaceReady(f,p),i.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.srcObject=this.mediaStream,this.surface.play()},l.create=function(i,o,f,p){return Ju(this,void 0,void 0,function(){var m,b;return $u(this,function(A){switch(A.label){case 0:return m=new l(i,o,p),f.aspectRatio?(b={aspectRatio:f.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(b)]):[3,2];case 1:A.sent(),A.label=2;case 2:return m.setupSurface(),[2,m]}})})},l.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},l.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},l.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},l.prototype.resume=function(i){this.failIfClosed();var o=this,f=function(){setTimeout(i,200),o.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},l.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},l.prototype.getSurface=function(){return this.failIfClosed(),this.surface},l.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},l.prototype.applyVideoConstraints=function(i){return Ju(this,void 0,void 0,function(){return $u(this,function(o){if("aspectRatio"in i)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(i)]})})},l.prototype.close=function(){if(this.isClosed)return Promise.resolve();var i=this;return new Promise(function(o,f){var p=i.mediaStream.getVideoTracks(),m=p.length,b=0;i.mediaStream.getVideoTracks().forEach(function(A){i.mediaStream.removeTrack(A),A.stop(),++b,b>=m&&(i.isClosed=!0,i.parentElement.removeChild(i.surface),o())})})},l.prototype.getCapabilities=function(){return new gv(this.getFirstTrackOrFail())},l})(),pv=(function(){function l(i){this.mediaStream=i}return l.prototype.render=function(i,o,f){return Ju(this,void 0,void 0,function(){return $u(this,function(p){return[2,mv.create(i,this.mediaStream,o,f)]})})},l.create=function(i){return Ju(this,void 0,void 0,function(){var o,f;return $u(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return o={audio:!1,video:i},[4,navigator.mediaDevices.getUserMedia(o)];case 1:return f=p.sent(),[2,new l(f)]}})})},l})(),Yg=function(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})},Wg=function(l,i){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(E){return function(R){return _([E,R])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(o=0)),o;)try{if(f=1,p&&(m=E[0]&2?p.return:E[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,E[1])).done)return m;switch(p=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,p=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){o.label=E[1];break}if(E[0]===6&&o.label<m[1]){o.label=m[1],m=E;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(E);break}m[2]&&o.ops.pop(),o.trys.pop();continue}E=i.call(l,o)}catch(R){E=[6,R],p=0}finally{f=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},xv=(function(){function l(){}return l.failIfNotSupported=function(){return Yg(this,void 0,void 0,function(){return Wg(this,function(i){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new l]})})},l.prototype.create=function(i){return Yg(this,void 0,void 0,function(){return Wg(this,function(o){return[2,pv.create(i)]})})},l})(),yv=function(l,i,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(R){try{E(f.next(R))}catch(N){b(N)}}function _(R){try{E(f.throw(R))}catch(N){b(N)}}function E(R){R.done?m(R.value):p(R.value).then(A,_)}E((f=f.apply(l,i||[])).next())})},wv=function(l,i){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(E){return function(R){return _([E,R])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(o=0)),o;)try{if(f=1,p&&(m=E[0]&2?p.return:E[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,E[1])).done)return m;switch(p=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,p=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){o.label=E[1];break}if(E[0]===6&&o.label<m[1]){o.label=m[1],m=E;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(E);break}m[2]&&o.ops.pop(),o.trys.pop();continue}E=i.call(l,o)}catch(R){E=[6,R],p=0}finally{f=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},bv=(function(){function l(){}return l.retrieve=function(){if(navigator.mediaDevices)return l.getCamerasFromMediaDevices();var i=MediaStreamTrack;return MediaStreamTrack&&i.getSources?l.getCamerasFromMediaStreamTrack():l.rejectWithError()},l.rejectWithError=function(){var i=Qs.unableToQuerySupportedDevices();return l.isHttpsOrLocalhost()||(i=Qs.insecureContextCameraQueryError()),Promise.reject(i)},l.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var i=location.host.split(":")[0];return i==="127.0.0.1"||i==="localhost"},l.getCamerasFromMediaDevices=function(){return yv(this,void 0,void 0,function(){var i,o,f,p,m,b,A;return wv(this,function(_){switch(_.label){case 0:return i=function(E){for(var R=E.getVideoTracks(),N=0,L=R;N<L.length;N++){var U=L[N];U.enabled=!1,U.stop(),E.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return o=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=_.sent(),p=[],m=0,b=f;m<b.length;m++)A=b[m],A.kind==="videoinput"&&p.push({id:A.deviceId,label:A.label});return i(o),[2,p]}})})},l.getCamerasFromMediaStreamTrack=function(){return new Promise(function(i,o){var f=function(m){for(var b=[],A=0,_=m;A<_.length;A++){var E=_[A];E.kind==="video"&&b.push({id:E.id,label:E.label})}i(b)},p=MediaStreamTrack;p.getSources(f)})},l})(),rn;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.NOT_STARTED=1]="NOT_STARTED",l[l.SCANNING=2]="SCANNING",l[l.PAUSED=3]="PAUSED"})(rn||(rn={}));var vv=(function(){function l(){this.state=rn.NOT_STARTED,this.onGoingTransactionNewState=rn.UNKNOWN}return l.prototype.directTransition=function(i){this.failIfTransitionOngoing(),this.validateTransition(i),this.state=i},l.prototype.startTransition=function(i){return this.failIfTransitionOngoing(),this.validateTransition(i),this.onGoingTransactionNewState=i,this},l.prototype.execute=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var i=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rn.UNKNOWN,this.directTransition(i)},l.prototype.cancel=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rn.UNKNOWN},l.prototype.getState=function(){return this.state},l.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},l.prototype.validateTransition=function(i){switch(this.state){case rn.UNKNOWN:throw"Transition from unknown is not allowed";case rn.NOT_STARTED:this.failIfNewStateIs(i,[rn.PAUSED]);break;case rn.SCANNING:break;case rn.PAUSED:break}},l.prototype.failIfNewStateIs=function(i,o){for(var f=0,p=o;f<p.length;f++){var m=p[f];if(i===m)throw"Cannot transition from ".concat(this.state," to ").concat(i)}},l})(),Ev=(function(){function l(i){this.stateManager=i}return l.prototype.startTransition=function(i){return this.stateManager.startTransition(i)},l.prototype.directTransition=function(i){this.stateManager.directTransition(i)},l.prototype.getState=function(){return this.stateManager.getState()},l.prototype.canScanFile=function(){return this.stateManager.getState()===rn.NOT_STARTED},l.prototype.isScanning=function(){return this.stateManager.getState()!==rn.NOT_STARTED},l.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rn.SCANNING},l.prototype.isPaused=function(){return this.stateManager.getState()===rn.PAUSED},l})(),Av=(function(){function l(){}return l.create=function(){return new Ev(new vv)},l})(),_v=(function(){var l=function(i,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(f[m]=p[m])},l(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(i,o);function f(){this.constructor=i}i.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)}})(),wr=(function(l){_v(i,l);function i(){return l!==null&&l.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(nv),Sv=(function(){function l(i,o){this.logger=o,this.fps=wr.SCAN_DEFAULT_FPS,i?(i.fps&&(this.fps=i.fps),this.disableFlip=i.disableFlip===!0,this.qrbox=i.qrbox,this.aspectRatio=i.aspectRatio,this.videoConstraints=i.videoConstraints):this.disableFlip=wr.DEFAULT_DISABLE_FLIP}return l.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?U2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},l.prototype.isShadedBoxEnabled=function(){return!Di(this.qrbox)},l.create=function(i,o){return new l(i,o)},l})(),Cv=(function(){function l(i,o){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.elementId=i,this.verbose=!1;var f;typeof o=="boolean"?this.verbose=o===!0:o&&(f=o,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new iv(this.verbose),this.qrcode=new cv(this.getSupportedFormats(o),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Av.create()}return l.prototype.start=function(i,o,f,p){var m=this;if(!i)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var b;p?b=p:b=this.verbose?this.logger.log:function(){};var A=Sv.create(o,this.logger);this.clearElement();var _=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=_,R=document.getElementById(this.elementId);R.clientWidth?R.clientWidth:wr.DEFAULT_WIDTH,R.style.position="relative",this.shouldScan=!0,this.element=R;var N=this,L=this.stateManagerProxy.startTransition(rn.SCANNING);return new Promise(function(U,V){var G=E?A.videoConstraints:N.createVideoConstraints(i);if(!G){L.cancel(),V("videoConstraints should be defined");return}var te={};(!E||A.aspectRatio)&&(te.aspectRatio=A.aspectRatio);var le={onRenderSurfaceReady:function($,Y){N.setupUi($,Y,A),N.isScanning=!0,N.foreverScan(A,f,b)}};xv.failIfNotSupported().then(function($){$.create(G).then(function(Y){return Y.render(m.element,te,le).then(function(pe){N.renderedCamera=pe,L.execute(),U(null)}).catch(function(pe){L.cancel(),V(pe)})}).catch(function(Y){L.cancel(),V(Qs.errorGettingUserMedia(Y))})}).catch(function($){L.cancel(),V(Qs.cameraStreamingNotSupported())})})},l.prototype.pause=function(i){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rn.PAUSED),this.showPausedState(),(Di(i)||i!==!0)&&(i=!1),i&&this.renderedCamera&&this.renderedCamera.pause()},l.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var i=this,o=function(){i.stateManagerProxy.directTransition(rn.SCANNING),i.hidePausedState()};if(!this.renderedCamera.isPaused()){o();return}this.renderedCamera.resume(function(){o()})},l.prototype.getState=function(){return this.stateManagerProxy.getState()},l.prototype.stop=function(){var i=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var o=this.stateManagerProxy.startTransition(rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(i.element){var m=document.getElementById(wr.SHADED_REGION_ELEMENT_ID);m&&i.element.removeChild(m)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),f(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),o.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},l.prototype.scanFile=function(i,o){return this.scanFileV2(i,o).then(function(f){return f.decodedText})},l.prototype.scanFileV2=function(i,o){var f=this;if(!i||!(i instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Di(o)&&(o=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,m){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(i);var b=new Image;b.onload=function(){var A=b.width,_=b.height,E=document.getElementById(f.elementId),R=E.clientWidth?E.clientWidth:wr.DEFAULT_WIDTH,N=Math.max(E.clientHeight?E.clientHeight:_,wr.FILE_SCAN_MIN_HEIGHT),L=f.computeCanvasDrawConfig(A,_,R,N);if(o){var U=f.createCanvasElement(R,N,"qr-canvas-visible");U.style.display="inline-block",E.appendChild(U);var V=U.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=R,V.canvas.height=N,V.drawImage(b,0,0,A,_,L.x,L.y,L.width,L.height)}var G=wr.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(b.width,L.width),le=Math.max(b.height,L.height),$=te+2*G,Y=le+2*G,pe=f.createCanvasElement($,Y);E.appendChild(pe);var Be=pe.getContext("2d");if(!Be)throw"Unable to get 2d context from canvas";Be.canvas.width=$,Be.canvas.height=Y,Be.drawImage(b,0,0,A,_,G,G,te,le);try{f.qrcode.decodeRobustlyAsync(pe).then(function(Ee){p(zg.createFromQrcodeResult(Ee))}).catch(m)}catch(Ee){m("QR code parse error, error = ".concat(Ee))}},b.onerror=m,b.onabort=m,b.onstalled=m,b.onsuspend=m,b.src=URL.createObjectURL(i)})},l.prototype.clear=function(){this.clearElement()},l.getCameras=function(){return bv.retrieve()},l.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},l.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},l.prototype.applyVideoConstraints=function(i){if(i){if(!U2.isMediaStreamConstraintsValid(i,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(i)},l.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},l.prototype.getSupportedFormats=function(i){var o=[Se.QR_CODE,Se.AZTEC,Se.CODABAR,Se.CODE_39,Se.CODE_93,Se.CODE_128,Se.DATA_MATRIX,Se.MAXICODE,Se.ITF,Se.EAN_13,Se.EAN_8,Se.PDF_417,Se.RSS_14,Se.RSS_EXPANDED,Se.UPC_A,Se.UPC_E,Se.UPC_EAN_EXTENSION];if(!i||typeof i=="boolean"||!i.formatsToSupport)return o;if(!Array.isArray(i.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(i.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],p=0,m=i.formatsToSupport;p<m.length;p++){var b=m[p];tv(b)?f.push(b):this.logger.warn("Invalid format: ".concat(b," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},l.prototype.getUseBarCodeDetectorIfSupported=function(i){if(Di(i))return!0;if(!Di(i.useBarCodeDetectorIfSupported))return i.useBarCodeDetectorIfSupported!==!1;if(Di(i.experimentalFeatures))return!0;var o=i.experimentalFeatures;return Di(o.useBarCodeDetectorIfSupported)?!0:o.useBarCodeDetectorIfSupported!==!1},l.prototype.validateQrboxSize=function(i,o,f){var p=this,m=f.qrbox;this.validateQrboxConfig(m);var b=this.toQrdimensions(i,o,m),A=function(E){if(E<wr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(wr.MIN_QR_BOX_SIZE,"px.")},_=function(E){return E>i&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=i),E};A(b.width),A(b.height),b.width=_(b.width)},l.prototype.validateQrboxConfig=function(i){if(typeof i!="number"&&typeof i!="function"&&(i.width===void 0||i.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},l.prototype.toQrdimensions=function(i,o,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(i,o)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return f},l.prototype.setupUi=function(i,o,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(i,o,f);var p=Di(f.qrbox)?{width:i,height:o}:f.qrbox;this.validateQrboxConfig(p);var m=this.toQrdimensions(i,o,p);m.height>o&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var b=f.isShadedBoxEnabled()&&m.height<=o,A={x:0,y:0,width:i,height:o},_=b?this.getShadedRegionBounds(i,o,m):A,E=this.createCanvasElement(_.width,_.height),R={willReadFrequently:!0},N=E.getContext("2d",R);N.canvas.width=_.width,N.canvas.height=_.height,this.element.append(E),b&&this.possiblyInsertShadingElement(this.element,i,o,m),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=N,this.canvasElement=E},l.prototype.createScannerPausedUiElement=function(i){var o=document.createElement("div");o.innerText=Qs.scannerPaused(),o.style.display="none",o.style.position="absolute",o.style.top="0px",o.style.zIndex="1",o.style.background="rgba(9, 9, 9, 0.46)",o.style.color="#FFECEC",o.style.textAlign="center",o.style.width="100%",i.appendChild(o),this.scannerPausedUiElement=o},l.prototype.scanContext=function(i,o){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return i(p.text,zg.createFromQrcodeResult(p)),f.possiblyUpdateShaders(!0),!0}).catch(function(p){f.possiblyUpdateShaders(!1);var m=Qs.codeParseError(p);return o(m,rv.createFrom(m)),!1})},l.prototype.foreverScan=function(i,o,f){var p=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),b=m.videoWidth/m.clientWidth,A=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*b,E=this.qrRegion.height*A,R=this.qrRegion.x*b,N=this.qrRegion.y*A;this.context.drawImage(m,R,N,_,E,0,0,this.qrRegion.width,this.qrRegion.height);var L=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(i,o,f)},p.getTimeoutFps(i.fps))};this.scanContext(o,f).then(function(U){!U&&i.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(o,f).finally(function(){L()})):L()}).catch(function(U){p.logger.logError("Error happend while scanning context",U),L()})}},l.prototype.createVideoConstraints=function(i){if(typeof i=="string")return{deviceId:{exact:i}};if(typeof i=="object"){var o="facingMode",f="deviceId",p={user:!0,environment:!0},m="exact",b=function(V){if(V in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(V,"'")},A=Object.keys(i);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var _=Object.keys(i)[0];if(_!==o&&_!==f)throw"Only '".concat(o,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(_===o){var E=i.facingMode;if(typeof E=="string"){if(b(E))return{facingMode:E}}else if(typeof E=="object")if(m in E){if(b(E["".concat(m)]))return{facingMode:{exact:E["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var R=typeof E;throw"Invalid type of 'facingMode' = ".concat(R)}}else{var N=i.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(m in N)return{deviceId:{exact:N["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var L=typeof N;throw"Invalid type of 'deviceId' = ".concat(L)}}}var U=typeof i;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},l.prototype.computeCanvasDrawConfig=function(i,o,f,p){if(i<=f&&o<=p){var m=(f-i)/2,b=(p-o)/2;return{x:m,y:b,width:i,height:o}}else{var A=i,_=o;return i>f&&(o=f/i*o,i=f),o>p&&(i=p/o*i,o=p),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(_)+" to ".concat(i,"X").concat(o,".")),this.computeCanvasDrawConfig(i,o,f,p)}},l.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var i=document.getElementById(this.elementId);i&&(i.innerHTML="")},l.prototype.possiblyUpdateShaders=function(i){this.qrMatch!==i&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(o){o.style.backgroundColor=i?wr.BORDER_SHADER_MATCH_COLOR:wr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=i)},l.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},l.prototype.createCanvasElement=function(i,o,f){var p=i,m=o,b=document.createElement("canvas");return b.style.width="".concat(p,"px"),b.style.height="".concat(m,"px"),b.style.display="none",b.id=Di(f)?"qr-canvas":f,b},l.prototype.getShadedRegionBounds=function(i,o,f){if(f.width>i||f.height>o)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(i-f.width)/2,y:(o-f.height)/2,width:f.width,height:f.height}},l.prototype.possiblyInsertShadingElement=function(i,o,f,p){if(!(o-p.width<1||f-p.height<1)){var m=document.createElement("div");m.style.position="absolute";var b=(o-p.width)/2,A=(f-p.height)/2;if(m.style.borderLeft="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(wr.SHADED_REGION_ELEMENT_ID),o-p.width<11||f-p.height<11)this.hasBorderShaders=!1;else{var _=5,E=40;this.insertShaderBorders(m,E,_,-_,null,0,!0),this.insertShaderBorders(m,E,_,-_,null,0,!1),this.insertShaderBorders(m,E,_,null,-_,0,!0),this.insertShaderBorders(m,E,_,null,-_,0,!1),this.insertShaderBorders(m,_,E+_,-_,null,-_,!0),this.insertShaderBorders(m,_,E+_,null,-_,-_,!0),this.insertShaderBorders(m,_,E+_,-_,null,-_,!1),this.insertShaderBorders(m,_,E+_,null,-_,-_,!1),this.hasBorderShaders=!0}i.append(m)}},l.prototype.insertShaderBorders=function(i,o,f,p,m,b,A){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=wr.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(o,"px"),_.style.height="".concat(f,"px"),p!==null&&(_.style.top="".concat(p,"px")),m!==null&&(_.style.bottom="".concat(m,"px")),A?_.style.left="".concat(b,"px"):_.style.right="".concat(b,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),i.appendChild(_)},l.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},l.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},l.prototype.getTimeoutFps=function(i){return 1e3/i},l})(),Kg;(function(l){l[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Kg||(Kg={}));const Tv=({onScanSuccess:l})=>{const i=W.useRef(null),[o,f]=W.useState(""),p=W.useRef(!1);return W.useEffect(()=>{p.current=!0;const m="reader-custom";return setTimeout(async()=>{try{if(i.current)return;const A=new Cv(m);i.current=A,await A.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},_=>{p.current&&l(_)},()=>{})}catch(A){console.error("Erreur start scanner",A),p.current&&f("Impossible d'accder  la camra. Vrifiez les permissions.")}},100),()=>{p.current=!1,i.current&&i.current.isScanning&&i.current.stop().then(()=>{i.current?.clear(),i.current=null}).catch(A=>{console.error("Erreur stop scanner",A)})}},[]),k.jsxs("div",{className:"w-full max-w-md mx-auto relative rounded-lg overflow-hidden bg-black",children:[k.jsx("div",{id:"reader-custom",style:{width:"100%",minHeight:"300px"}}),o&&k.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-80 text-white p-4 text-center",children:o}),!o&&k.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-white text-sm opacity-70",children:"Camra active"})]})},Ov=()=>{const{user:l,role:i}=sc(),[o,f]=W.useState("list"),[p,m]=W.useState(null),[b,A]=W.useState([]),[_,E]=W.useState({nom:"",service_perimetre:"",date_debut:new Date().toISOString().split("T")[0]}),[R,N]=W.useState([]),[L,U]=W.useState(null),[V,G]=W.useState(null),[te,le]=W.useState(0);W.useEffect(()=>{$()},[]),W.useEffect(()=>{p&&l&&Y()},[p,l]);const $=async()=>{try{const ke=await eo.getAll();A(ke||[])}catch(ke){console.error("Erreur chargement campagnes",ke)}},Y=async()=>{if(!(!p||!l))try{const ke=await eo.getStats(p,l.id);le(ke.scannedCount)}catch(ke){console.error("Erreur stats",ke)}},pe=async ke=>{ke.preventDefault();try{const it=await eo.create(_);alert(`Campagne "${it.nom}" cre!`),m(it.id),f("scan"),$()}catch(it){alert("Erreur cration campagne"),console.error(it)}},Be=ke=>{m(ke),f("scan"),N([]),U(null)},Ee=async ke=>{if(!(!p||!l)&&!V)try{const it=await eo.getMaterielByCode(ke);G(it),new Audio("/beep.mp3").play().catch(()=>{})}catch(it){console.error(it),U({status:"error",msg:"Matriel non trouv ou erreur"})}},ee=async()=>{if(!(!V||!p||!l))try{await eo.confirmScan({inventaire_id:p,materiel_id:V.id,user_id:l.id}),U({status:"success",msg:`Confirm: ${V.nom} `,item:V}),N(ke=>[V,...ke]),G(null),le(ke=>ke+1)}catch(ke){console.error(ke),U({status:"error",msg:ke.message||"Erreur confirmation"}),G(null)}},Re=()=>{G(null),U({status:"error",msg:"Scan annul"})},he=()=>{confirm("Quitter le mode scan ?")&&(m(null),f("list"),$())};return k.jsxs("div",{className:"relative min-h-screen bg-gray-50 pb-20",children:[k.jsxs("div",{className:"flex items-center justify-between mb-6",children:[k.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:o==="scan"?"Mode Scan":"Campagnes d'Inventaire"}),o==="scan"&&k.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-bold shadow-sm",children:[k.jsx(yy,{className:"w-5 h-5 mr-2 text-blue-600"}),k.jsxs("span",{children:[te," Scans"]})]})]}),o==="list"&&k.jsxs("div",{className:"space-y-6",children:[i==="admin"&&k.jsxs("button",{onClick:()=>f("create"),className:"w-full sm:w-auto bg-blue-600 text-white px-6 py-3 rounded-lg font-bold shadow hover:bg-blue-700 flex items-center justify-center",children:[k.jsx(ey,{className:"mr-2"})," Nouvelle Campagne"]}),k.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.map(ke=>k.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border hover:border-blue-300 transition-colors",children:[k.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-800",children:ke.nom}),k.jsxs("div",{className:"text-gray-500 text-sm mb-4 space-y-1",children:[k.jsxs("p",{children:[" Dbut: ",new Date(ke.date_debut).toLocaleDateString()]}),k.jsxs("p",{children:[" ",ke.service_perimetre||"Non spcifi"]})]}),k.jsxs("button",{onClick:()=>Be(ke.id),className:"w-full bg-green-50 text-green-700 border border-green-200 py-2 rounded-lg font-bold hover:bg-green-100 flex items-center justify-center",children:[k.jsx(fy,{className:"w-4 h-4 mr-2"})," Rejoindre"]})]},ke.id))}),b.length===0&&k.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Aucune campagne active."})]}),o==="create"&&k.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg mx-auto",children:[k.jsxs("button",{onClick:()=>f("list"),className:"text-gray-500 mb-4 flex items-center hover:text-gray-700",children:[k.jsx(cg,{className:"w-4 h-4 mr-1"})," Retour liste"]}),k.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nouvelle Campagne"}),k.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Nom de la campagne"}),k.jsx("input",{type:"text",className:"w-full border p-3 rounded-lg",required:!0,value:_.nom,onChange:ke=>E({..._,nom:ke.target.value}),placeholder:"ex: Inventaire 2026 - Ple A"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Service / Primtre"}),k.jsx("input",{type:"text",className:"w-full border p-3 rounded-lg",value:_.service_perimetre,onChange:ke=>E({..._,service_perimetre:ke.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Date Dbut"}),k.jsx("input",{type:"date",className:"w-full border p-3 rounded-lg",required:!0,value:_.date_debut,onChange:ke=>E({..._,date_debut:ke.target.value})})]}),k.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 shadow",children:"Crer et Commencer"})]})]}),o==="scan"&&k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 relative",children:[k.jsxs("button",{onClick:he,className:"lg:col-span-2 text-gray-500 flex items-center hover:text-red-600 mb-2",children:[k.jsx(cg,{className:"w-4 h-4 mr-2"})," Changer de campagne (Quitter)"]}),V&&k.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:k.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in fade-in zoom-in duration-300",children:[k.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-4",children:"Vrification"}),k.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden mb-4 border-2 border-gray-200 relative",children:V.photo_url?k.jsx("img",{src:V.photo_url,alt:"Materiel",className:"w-full h-full object-cover"}):k.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Pas de photo"})}),k.jsxs("div",{className:"text-center mb-6 space-y-1",children:[k.jsx("p",{className:"text-xl font-black text-gray-800 leading-tight",children:V.nom}),k.jsx("p",{className:"text-sm font-mono text-gray-500 bg-gray-100 inline-block px-2 py-1 rounded",children:V.numero_inventaire})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsx("button",{onClick:Re,className:"py-4 rounded-xl font-bold text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 transition-colors",children:"Refuser"}),k.jsx("button",{onClick:ee,className:"py-4 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 shadow-lg shadow-green-200 transition-all transform active:scale-95",children:"Valider"})]})]})}),k.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border-t-4 border-blue-500",children:[k.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-gray-700",children:"Scanner le code-barres"}),k.jsx("div",{className:V?"invisible h-0 overflow-hidden":"",children:k.jsx(Tv,{onScanSuccess:Ee})}),V&&k.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-100 rounded text-gray-400",children:"Scan en pause..."}),L&&!V&&k.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center font-bold flex items-center justify-center ${L.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[L.status==="success"?k.jsx(hg,{className:"w-6 h-6 mr-2"}):k.jsx(py,{className:"w-6 h-6 mr-2"}),L.msg]})]}),k.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[k.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-700",children:"Session en cours"}),k.jsxs("ul",{className:"divide-y divide-gray-100 max-h-[500px] overflow-y-auto",children:[R.map((ke,it)=>k.jsxs("li",{className:"py-3 flex justify-between items-center group hover:bg-gray-50 px-2 rounded",children:[k.jsxs("div",{children:[k.jsx("span",{className:"font-bold block text-gray-800",children:ke.nom}),k.jsx("span",{className:"text-xs text-gray-500 font-mono",children:ke.numero_inventaire})]}),k.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full flex items-center",children:[k.jsx(hg,{className:"w-3 h-3 mr-1"})," OK"]})]},it)),R.length===0&&k.jsxs("div",{className:"text-center py-10 text-gray-400 flex flex-col items-center",children:[k.jsx(sy,{className:"w-10 h-10 mb-2 opacity-20"}),k.jsx("p",{children:"Vos scans apparatront ici"})]})]})]})]})]})},Rv=()=>{const[l,i]=W.useState([]),[o,f]=W.useState(!0),[p,m]=W.useState(!1),[b,A]=W.useState({email:"",password:"",name:""}),[_,E]=W.useState("");W.useEffect(()=>{R()},[]);const R=async()=>{try{const L=await Ug.getAgents();i(L||[])}catch(L){console.error(L)}finally{f(!1)}},N=async L=>{L.preventDefault(),E("");try{await Ug.createAgent(b.email,b.password,b.name),E("Agent cr avec succs !"),A({email:"",password:"",name:""}),m(!1),R()}catch(U){console.error(U),E("Erreur: "+U.message)}};return k.jsxs("div",{className:"container mx-auto p-6",children:[k.jsxs("h1",{className:"text-2xl font-bold mb-6 flex items-center",children:[k.jsx(m2,{className:"mr-2"})," Gestion des Agents"]}),_&&k.jsx("div",{className:"bg-blue-100 p-3 rounded mb-4 text-blue-800",children:_}),k.jsx("div",{className:"mb-6",children:p?k.jsxs("div",{className:"bg-white p-6 rounded shadow max-w-md border border-gray-200",children:[k.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un Agent"}),k.jsxs("form",{onSubmit:N,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Nom complet"}),k.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded",value:b.name,onChange:L=>A({...b,name:L.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Email"}),k.jsx("input",{type:"email",required:!0,className:"w-full border p-2 rounded",value:b.email,onChange:L=>A({...b,email:L.target.value})})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium",children:"Mot de passe provisoire"}),k.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded",minLength:6,value:b.password,onChange:L=>A({...b,password:L.target.value})})]}),k.jsxs("div",{className:"flex justify-end space-x-3",children:[k.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Annuler"}),k.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Crer le compte"})]})]})]}):k.jsxs("button",{onClick:()=>m(!0),className:"bg-green-600 text-white px-4 py-2 rounded flex items-center hover:bg-green-700",children:[k.jsx(by,{className:"mr-2 w-4 h-4"})," Nouvel Agent"]})}),k.jsx("div",{className:"bg-white rounded shadow overflow-hidden",children:k.jsxs("table",{className:"w-full text-left border-collapse",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsxs("tr",{children:[k.jsx("th",{className:"p-4 border-b",children:"Email"}),k.jsx("th",{className:"p-4 border-b",children:"Rle"}),k.jsx("th",{className:"p-4 border-b",children:"ID"})]})}),k.jsx("tbody",{children:o?k.jsx("tr",{children:k.jsx("td",{className:"p-4",children:"Chargement..."})}):l.length===0?k.jsx("tr",{children:k.jsx("td",{className:"p-4 text-gray-500",children:"Aucun agent trouv."})}):l.map(L=>k.jsxs("tr",{className:"hover:bg-gray-50",children:[k.jsx("td",{className:"p-4 border-b font-medium",children:L.email}),k.jsx("td",{className:"p-4 border-b",children:k.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-bold uppercase",children:L.role})}),k.jsx("td",{className:"p-4 border-b text-sm text-gray-400 font-mono",children:L.id})]},L.id))})]})})]})},Nv=()=>{const[l,i]=W.useState(""),[o,f]=W.useState(""),[p,m]=W.useState(!1),b=Uf(),A=async _=>{_.preventDefault(),m(!0);const{error:E}=await sn.auth.signInWithPassword({email:l,password:o});E?alert(E.message):b("/"),m(!1)};return k.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:k.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded shadow-lg",children:[k.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-blue-600",children:"Hpital Inventaire"}),k.jsx("h2",{className:"text-xl mb-4 text-center",children:"Connexion"}),k.jsxs("form",{onSubmit:A,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-gray-700",children:"Email"}),k.jsx("input",{type:"email",className:"w-full border p-2 rounded focus:outline-none focus:border-blue-500",value:l,onChange:_=>i(_.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-gray-700",children:"Mot de passe"}),k.jsx("input",{type:"password",className:"w-full border p-2 rounded focus:outline-none focus:border-blue-500",value:o,onChange:_=>f(_.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:p,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Chargement...":"Se connecter"})]})]})})},Iv=({allowedRoles:l})=>{const{user:i,role:o,loading:f}=sc();return f?k.jsx("div",{children:"Chargement..."}):i?l&&o&&!l.includes(o)?k.jsx(bf,{to:"/unauthorized",replace:!0}):k.jsx(u2,{}):k.jsx(bf,{to:"/login",replace:!0})};function Dv(){return console.log("App.tsx full rendering"),k.jsx(Lx,{children:k.jsx(Zb,{children:k.jsxs(fx,{children:[k.jsx(oi,{path:"/login",element:k.jsx(Nv,{})}),k.jsx(oi,{element:k.jsx(Iv,{}),children:k.jsxs(oi,{path:"/",element:k.jsx(Qb,{}),children:[k.jsx(oi,{index:!0,element:k.jsx($b,{})}),k.jsx(oi,{path:"materiels",element:k.jsx(jg,{})}),k.jsx(oi,{path:"materiels",element:k.jsx(jg,{})}),k.jsx(oi,{path:"inventaire",element:k.jsx(Ov,{})}),k.jsx(oi,{path:"users",element:k.jsx(Rv,{})})]})}),k.jsx(oi,{path:"*",element:k.jsx(bf,{to:"/",replace:!0})})]})})})}window.onerror=function(l,i,o,f,p){const m=`
    <div style="background:red; color:white; padding:20px; font-size:16px; position:fixed; top:0; left:0; width:100%; z-index:9999;">
      <h1>CRITICAL ERROR</h1>
      <p><strong>Message:</strong> ${l}</p>
      <p><strong>Location:</strong> ${i}:${o}:${f}</p>
      <p><strong>Stack:</strong> ${p?.stack}</p>
    </div>
  `;return document.body.innerHTML+=m,console.error("Global error caught:",p),!1};window.onunhandledrejection=function(l){const i=`
    <div style="background:darkred; color:white; padding:20px; font-size:16px; position:fixed; bottom:0; left:0; width:100%; z-index:9999;">
      <h1>UNHANDLED PROMISE REJECTION</h1>
      <p><strong>Reason:</strong> ${l.reason}</p>
    </div>
  `;document.body.innerHTML+=i,console.error("Unhandled rejection:",l.reason)};class Mv extends W.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,o){console.error("Uncaught error:",i,o)}render(){return this.state.hasError?k.jsxs("div",{style:{padding:"20px",color:"red",fontFamily:"monospace"},children:[k.jsx("h1",{children:"React Info: Something went wrong."}),k.jsx("pre",{children:this.state.error?.toString()}),k.jsx("pre",{children:this.state.error?.stack})]}):this.props.children}}dp.createRoot(document.getElementById("root")).render(k.jsx(W.StrictMode,{children:k.jsx(Mv,{children:k.jsx(Dv,{})})}));

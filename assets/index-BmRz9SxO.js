const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.plugin.autotable-Czd7wD0t.js","assets/jspdf.es.min-BLZI33ud.js"])))=>i.map(i=>d[i]);
(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))h(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&h(v)}).observe(document,{childList:!0,subtree:!0});function o(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(p){if(p.ep)return;p.ep=!0;const g=o(p);fetch(p.href,g)}})();var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rp(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function O3(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var i=l.default;if(typeof i=="function"){var o=function h(){var p=!1;try{p=this instanceof h}catch{}return p?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};o.prototype=i.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(l).forEach(function(h){var p=Object.getOwnPropertyDescriptor(l,h);Object.defineProperty(o,h,p.get?p:{enumerable:!0,get:function(){return l[h]}})}),o}var hf={exports:{}},to={};var ag;function Np(){if(ag)return to;ag=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(h,p,g){var v=null;if(g!==void 0&&(v=""+g),p.key!==void 0&&(v=""+p.key),"key"in p){g={};for(var _ in p)_!=="key"&&(g[_]=p[_])}else g=p;return p=g.ref,{$$typeof:l,type:h,key:v,ref:p!==void 0?p:null,props:g}}return to.Fragment=i,to.jsx=o,to.jsxs=o,to}var sg;function Op(){return sg||(sg=1,hf.exports=Np()),hf.exports}var I=Op(),ff={exports:{}},Ye={};var lg;function Ip(){if(lg)return Ye;lg=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.iterator;function k(Y){return Y===null||typeof Y!="object"?null:(Y=M&&Y[M]||Y["@@iterator"],typeof Y=="function"?Y:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,H={};function ie(Y,oe,Ae){this.props=Y,this.context=oe,this.refs=H,this.updater=Ae||j}ie.prototype.isReactComponent={},ie.prototype.setState=function(Y,oe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,oe,"setState")},ie.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function X(){}X.prototype=ie.prototype;function P(Y,oe,Ae){this.props=Y,this.context=oe,this.refs=H,this.updater=Ae||j}var ce=P.prototype=new X;ce.constructor=P,F(ce,ie.prototype),ce.isPureReactComponent=!0;var Re=Array.isArray;function be(){}var J={H:null,A:null,T:null,S:null},Se=Object.prototype.hasOwnProperty;function he(Y,oe,Ae){var _e=Ae.ref;return{$$typeof:l,type:Y,key:oe,ref:_e!==void 0?_e:null,props:Ae}}function ot(Y,oe){return he(Y.type,oe,Y.props)}function ve(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===l}function Ce(Y){var oe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Ae){return oe[Ae]})}var We=/\/+/g;function Te(Y,oe){return typeof Y=="object"&&Y!==null&&Y.key!=null?Ce(""+Y.key):oe.toString(36)}function ee(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(be,be):(Y.status="pending",Y.then(function(oe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=oe)},function(oe){Y.status==="pending"&&(Y.status="rejected",Y.reason=oe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ne(Y,oe,Ae,_e,Ve){var Ee=typeof Y;(Ee==="undefined"||Ee==="boolean")&&(Y=null);var gt=!1;if(Y===null)gt=!0;else switch(Ee){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(Y.$$typeof){case l:case i:gt=!0;break;case C:return gt=Y._init,ne(gt(Y._payload),oe,Ae,_e,Ve)}}if(gt)return Ve=Ve(Y),gt=_e===""?"."+Te(Y,0):_e,Re(Ve)?(Ae="",gt!=null&&(Ae=gt.replace(We,"$&/")+"/"),ne(Ve,oe,Ae,"",function(Pr){return Pr})):Ve!=null&&(ve(Ve)&&(Ve=ot(Ve,Ae+(Ve.key==null||Y&&Y.key===Ve.key?"":(""+Ve.key).replace(We,"$&/")+"/")+gt)),oe.push(Ve)),1;gt=0;var mt=_e===""?".":_e+":";if(Re(Y))for(var Lt=0;Lt<Y.length;Lt++)_e=Y[Lt],Ee=mt+Te(_e,Lt),gt+=ne(_e,oe,Ae,Ee,Ve);else if(Lt=k(Y),typeof Lt=="function")for(Y=Lt.call(Y),Lt=0;!(_e=Y.next()).done;)_e=_e.value,Ee=mt+Te(_e,Lt++),gt+=ne(_e,oe,Ae,Ee,Ve);else if(Ee==="object"){if(typeof Y.then=="function")return ne(ee(Y),oe,Ae,_e,Ve);throw oe=String(Y),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return gt}function fe(Y,oe,Ae){if(Y==null)return Y;var _e=[],Ve=0;return ne(Y,_e,"","",function(Ee){return oe.call(Ae,Ee,Ve++)}),_e}function Le(Y){if(Y._status===-1){var oe=Y._result;oe=oe(),oe.then(function(Ae){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Ae)},function(Ae){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Ae)}),Y._status===-1&&(Y._status=0,Y._result=oe)}if(Y._status===1)return Y._result.default;throw Y._result}var $e=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},tt={map:fe,forEach:function(Y,oe,Ae){fe(Y,function(){oe.apply(this,arguments)},Ae)},count:function(Y){var oe=0;return fe(Y,function(){oe++}),oe},toArray:function(Y){return fe(Y,function(oe){return oe})||[]},only:function(Y){if(!ve(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return Ye.Activity=R,Ye.Children=tt,Ye.Component=ie,Ye.Fragment=o,Ye.Profiler=p,Ye.PureComponent=P,Ye.StrictMode=h,Ye.Suspense=E,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return J.H.useMemoCache(Y)}},Ye.cache=function(Y){return function(){return Y.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(Y,oe,Ae){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var _e=F({},Y.props),Ve=Y.key;if(oe!=null)for(Ee in oe.key!==void 0&&(Ve=""+oe.key),oe)!Se.call(oe,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&oe.ref===void 0||(_e[Ee]=oe[Ee]);var Ee=arguments.length-2;if(Ee===1)_e.children=Ae;else if(1<Ee){for(var gt=Array(Ee),mt=0;mt<Ee;mt++)gt[mt]=arguments[mt+2];_e.children=gt}return he(Y.type,Ve,_e)},Ye.createContext=function(Y){return Y={$$typeof:v,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:g,_context:Y},Y},Ye.createElement=function(Y,oe,Ae){var _e,Ve={},Ee=null;if(oe!=null)for(_e in oe.key!==void 0&&(Ee=""+oe.key),oe)Se.call(oe,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(Ve[_e]=oe[_e]);var gt=arguments.length-2;if(gt===1)Ve.children=Ae;else if(1<gt){for(var mt=Array(gt),Lt=0;Lt<gt;Lt++)mt[Lt]=arguments[Lt+2];Ve.children=mt}if(Y&&Y.defaultProps)for(_e in gt=Y.defaultProps,gt)Ve[_e]===void 0&&(Ve[_e]=gt[_e]);return he(Y,Ee,Ve)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(Y){return{$$typeof:_,render:Y}},Ye.isValidElement=ve,Ye.lazy=function(Y){return{$$typeof:C,_payload:{_status:-1,_result:Y},_init:Le}},Ye.memo=function(Y,oe){return{$$typeof:w,type:Y,compare:oe===void 0?null:oe}},Ye.startTransition=function(Y){var oe=J.T,Ae={};J.T=Ae;try{var _e=Y(),Ve=J.S;Ve!==null&&Ve(Ae,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(be,$e)}catch(Ee){$e(Ee)}finally{oe!==null&&Ae.types!==null&&(oe.types=Ae.types),J.T=oe}},Ye.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Ye.use=function(Y){return J.H.use(Y)},Ye.useActionState=function(Y,oe,Ae){return J.H.useActionState(Y,oe,Ae)},Ye.useCallback=function(Y,oe){return J.H.useCallback(Y,oe)},Ye.useContext=function(Y){return J.H.useContext(Y)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(Y,oe){return J.H.useDeferredValue(Y,oe)},Ye.useEffect=function(Y,oe){return J.H.useEffect(Y,oe)},Ye.useEffectEvent=function(Y){return J.H.useEffectEvent(Y)},Ye.useId=function(){return J.H.useId()},Ye.useImperativeHandle=function(Y,oe,Ae){return J.H.useImperativeHandle(Y,oe,Ae)},Ye.useInsertionEffect=function(Y,oe){return J.H.useInsertionEffect(Y,oe)},Ye.useLayoutEffect=function(Y,oe){return J.H.useLayoutEffect(Y,oe)},Ye.useMemo=function(Y,oe){return J.H.useMemo(Y,oe)},Ye.useOptimistic=function(Y,oe){return J.H.useOptimistic(Y,oe)},Ye.useReducer=function(Y,oe,Ae){return J.H.useReducer(Y,oe,Ae)},Ye.useRef=function(Y){return J.H.useRef(Y)},Ye.useState=function(Y){return J.H.useState(Y)},Ye.useSyncExternalStore=function(Y,oe,Ae){return J.H.useSyncExternalStore(Y,oe,Ae)},Ye.useTransition=function(){return J.H.useTransition()},Ye.version="19.2.4",Ye}var og;function Xf(){return og||(og=1,ff.exports=Ip()),ff.exports}var W=Xf();const vn=Rp(W);var df={exports:{}},no={},gf={exports:{}},mf={};var cg;function Dp(){return cg||(cg=1,(function(l){function i(ne,fe){var Le=ne.length;ne.push(fe);e:for(;0<Le;){var $e=Le-1>>>1,tt=ne[$e];if(0<p(tt,fe))ne[$e]=fe,ne[Le]=tt,Le=$e;else break e}}function o(ne){return ne.length===0?null:ne[0]}function h(ne){if(ne.length===0)return null;var fe=ne[0],Le=ne.pop();if(Le!==fe){ne[0]=Le;e:for(var $e=0,tt=ne.length,Y=tt>>>1;$e<Y;){var oe=2*($e+1)-1,Ae=ne[oe],_e=oe+1,Ve=ne[_e];if(0>p(Ae,Le))_e<tt&&0>p(Ve,Ae)?(ne[$e]=Ve,ne[_e]=Le,$e=_e):(ne[$e]=Ae,ne[oe]=Le,$e=oe);else if(_e<tt&&0>p(Ve,Le))ne[$e]=Ve,ne[_e]=Le,$e=_e;else break e}}return fe}function p(ne,fe){var Le=ne.sortIndex-fe.sortIndex;return Le!==0?Le:ne.id-fe.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;l.unstable_now=function(){return g.now()}}else{var v=Date,_=v.now();l.unstable_now=function(){return v.now()-_}}var E=[],w=[],C=1,R=null,M=3,k=!1,j=!1,F=!1,H=!1,ie=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function ce(ne){for(var fe=o(w);fe!==null;){if(fe.callback===null)h(w);else if(fe.startTime<=ne)h(w),fe.sortIndex=fe.expirationTime,i(E,fe);else break;fe=o(w)}}function Re(ne){if(F=!1,ce(ne),!j)if(o(E)!==null)j=!0,be||(be=!0,Ce());else{var fe=o(w);fe!==null&&ee(Re,fe.startTime-ne)}}var be=!1,J=-1,Se=5,he=-1;function ot(){return H?!0:!(l.unstable_now()-he<Se)}function ve(){if(H=!1,be){var ne=l.unstable_now();he=ne;var fe=!0;try{e:{j=!1,F&&(F=!1,X(J),J=-1),k=!0;var Le=M;try{t:{for(ce(ne),R=o(E);R!==null&&!(R.expirationTime>ne&&ot());){var $e=R.callback;if(typeof $e=="function"){R.callback=null,M=R.priorityLevel;var tt=$e(R.expirationTime<=ne);if(ne=l.unstable_now(),typeof tt=="function"){R.callback=tt,ce(ne),fe=!0;break t}R===o(E)&&h(E),ce(ne)}else h(E);R=o(E)}if(R!==null)fe=!0;else{var Y=o(w);Y!==null&&ee(Re,Y.startTime-ne),fe=!1}}break e}finally{R=null,M=Le,k=!1}fe=void 0}}finally{fe?Ce():be=!1}}}var Ce;if(typeof P=="function")Ce=function(){P(ve)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,Te=We.port2;We.port1.onmessage=ve,Ce=function(){Te.postMessage(null)}}else Ce=function(){ie(ve,0)};function ee(ne,fe){J=ie(function(){ne(l.unstable_now())},fe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(ne){ne.callback=null},l.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<ne?Math.floor(1e3/ne):5},l.unstable_getCurrentPriorityLevel=function(){return M},l.unstable_next=function(ne){switch(M){case 1:case 2:case 3:var fe=3;break;default:fe=M}var Le=M;M=fe;try{return ne()}finally{M=Le}},l.unstable_requestPaint=function(){H=!0},l.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Le=M;M=ne;try{return fe()}finally{M=Le}},l.unstable_scheduleCallback=function(ne,fe,Le){var $e=l.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?$e+Le:$e):Le=$e,ne){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=Le+tt,ne={id:C++,callback:fe,priorityLevel:ne,startTime:Le,expirationTime:tt,sortIndex:-1},Le>$e?(ne.sortIndex=Le,i(w,ne),o(E)===null&&ne===o(w)&&(F?(X(J),J=-1):F=!0,ee(Re,Le-$e))):(ne.sortIndex=tt,i(E,ne),j||k||(j=!0,be||(be=!0,Ce()))),ne},l.unstable_shouldYield=ot,l.unstable_wrapCallback=function(ne){var fe=M;return function(){var Le=M;M=fe;try{return ne.apply(this,arguments)}finally{M=Le}}}})(mf)),mf}var ug;function Mp(){return ug||(ug=1,gf.exports=Dp()),gf.exports}var pf={exports:{}},Hn={};var hg;function Bp(){if(hg)return Hn;hg=1;var l=Xf();function i(E){var w="https://react.dev/errors/"+E;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)w+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+E+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var h={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},p=Symbol.for("react.portal");function g(E,w,C){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:R==null?null:""+R,children:E,containerInfo:w,implementation:C}}var v=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(E,w){if(E==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,Hn.createPortal=function(E,w){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(i(299));return g(E,w,null,C)},Hn.flushSync=function(E){var w=v.T,C=h.p;try{if(v.T=null,h.p=2,E)return E()}finally{v.T=w,h.p=C,h.d.f()}},Hn.preconnect=function(E,w){typeof E=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,h.d.C(E,w))},Hn.prefetchDNS=function(E){typeof E=="string"&&h.d.D(E)},Hn.preinit=function(E,w){if(typeof E=="string"&&w&&typeof w.as=="string"){var C=w.as,R=_(C,w.crossOrigin),M=typeof w.integrity=="string"?w.integrity:void 0,k=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;C==="style"?h.d.S(E,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:R,integrity:M,fetchPriority:k}):C==="script"&&h.d.X(E,{crossOrigin:R,integrity:M,fetchPriority:k,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Hn.preinitModule=function(E,w){if(typeof E=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var C=_(w.as,w.crossOrigin);h.d.M(E,{crossOrigin:C,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&h.d.M(E)},Hn.preload=function(E,w){if(typeof E=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var C=w.as,R=_(C,w.crossOrigin);h.d.L(E,C,{crossOrigin:R,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Hn.preloadModule=function(E,w){if(typeof E=="string")if(w){var C=_(w.as,w.crossOrigin);h.d.m(E,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:C,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else h.d.m(E)},Hn.requestFormReset=function(E){h.d.r(E)},Hn.unstable_batchedUpdates=function(E,w){return E(w)},Hn.useFormState=function(E,w,C){return v.H.useFormState(E,w,C)},Hn.useFormStatus=function(){return v.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var fg;function kp(){if(fg)return pf.exports;fg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),pf.exports=Bp(),pf.exports}var dg;function Lp(){if(dg)return no;dg=1;var l=Mp(),i=Xf(),o=kp();function h(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function v(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function E(e){if(g(e)!==e)throw Error(h(188))}function w(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(h(188));return n!==e?null:e}for(var s=e,f=n;;){var x=s.return;if(x===null)break;var b=x.alternate;if(b===null){if(f=x.return,f!==null){s=f;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===s)return E(x),e;if(b===f)return E(x),n;b=b.sibling}throw Error(h(188))}if(s.return!==f.return)s=x,f=b;else{for(var T=!1,B=x.child;B;){if(B===s){T=!0,s=x,f=b;break}if(B===f){T=!0,f=x,s=b;break}B=B.sibling}if(!T){for(B=b.child;B;){if(B===s){T=!0,s=b,f=x;break}if(B===f){T=!0,f=b,s=x;break}B=B.sibling}if(!T)throw Error(h(189))}}if(s.alternate!==f)throw Error(h(190))}if(s.tag!==3)throw Error(h(188));return s.stateNode.current===s?e:n}function C(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=C(e),n!==null)return n;e=e.sibling}return null}var R=Object.assign,M=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),P=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),ot=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=ve&&e[ve]||e["@@iterator"],typeof e=="function"?e:null)}var We=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===We?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case ie:return"Profiler";case H:return"StrictMode";case Re:return"Suspense";case be:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case P:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case ce:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return n=e.displayName||null,n!==null?n:Te(e.type)||"Memo";case Se:n=e._payload,e=e._init;try{return Te(e(n))}catch{}}return null}var ee=Array.isArray,ne=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},$e=[],tt=-1;function Y(e){return{current:e}}function oe(e){0>tt||(e.current=$e[tt],$e[tt]=null,tt--)}function Ae(e,n){tt++,$e[tt]=e.current,e.current=n}var _e=Y(null),Ve=Y(null),Ee=Y(null),gt=Y(null);function mt(e,n){switch(Ae(Ee,n),Ae(Ve,e),Ae(_e,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?R1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=R1(n),e=N1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}oe(_e),Ae(_e,e)}function Lt(){oe(_e),oe(Ve),oe(Ee)}function Pr(e){e.memoizedState!==null&&Ae(gt,e);var n=_e.current,s=N1(n,e.type);n!==s&&(Ae(Ve,e),Ae(_e,s))}function An(e){Ve.current===e&&(oe(_e),oe(Ve)),gt.current===e&&(oe(gt),Ql._currentValue=Le)}var Fi,pt;function Zn(e){if(Fi===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Fi=n&&n[1]||"",pt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+e+pt}var Qn=!1;function fi(e,n){if(!e||Qn)return"";Qn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(n){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(le){var re=le}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(le){re=le}e.call(ge.prototype)}}else{try{throw Error()}catch(le){re=le}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(le){if(le&&re&&typeof le.stack=="string")return[le.stack,re.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),T=b[0],B=b[1];if(T&&B){var z=T.split(`
`),te=B.split(`
`);for(x=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;x<te.length&&!te[x].includes("DetermineComponentFrameRoot");)x++;if(f===z.length||x===te.length)for(f=z.length-1,x=te.length-1;1<=f&&0<=x&&z[f]!==te[x];)x--;for(;1<=f&&0<=x;f--,x--)if(z[f]!==te[x]){if(f!==1||x!==1)do if(f--,x--,0>x||z[f]!==te[x]){var ue=`
`+z[f].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=f&&0<=x);break}}}finally{Qn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Zn(s):""}function _n(e,n){switch(e.tag){case 26:case 27:case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return e.child!==n&&n!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return fi(e.type,!1);case 11:return fi(e.type.render,!1);case 1:return fi(e.type,!0);case 31:return Zn("Activity");default:return""}}function Rt(e){try{var n="",s=null;do n+=_n(e,s),s=e,e=e.return;while(e);return n}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var rt=Object.prototype.hasOwnProperty,zi=l.unstable_scheduleCallback,Ie=l.unstable_cancelCallback,ss=l.unstable_shouldYield,Eo=l.unstable_requestPaint,Jt=l.unstable_now,ol=l.unstable_getCurrentPriorityLevel,Jn=l.unstable_ImmediatePriority,cl=l.unstable_UserBlockingPriority,or=l.unstable_NormalPriority,Mn=l.unstable_LowPriority,ul=l.unstable_IdlePriority,ls=l.log,mu=l.unstable_setDisableYieldValue,zt=null,we=null;function Dt(e){if(typeof ls=="function"&&mu(e),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(zt,e)}catch{}}var Ze=Math.clz32?Math.clz32:hl,Wt=Math.log,Ra=Math.LN2;function hl(e){return e>>>=0,e===0?32:31-(Wt(e)/Ra|0)|0}var Na=256,ct=262144,Cr=4194304;function ei(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oa(e,n,s){var f=e.pendingLanes;if(f===0)return 0;var x=0,b=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var B=f&134217727;return B!==0?(f=B&~b,f!==0?x=ei(f):(T&=B,T!==0?x=ei(T):s||(s=B&~e,s!==0&&(x=ei(s))))):(B=f&~b,B!==0?x=ei(B):T!==0?x=ei(T):s||(s=f&~e,s!==0&&(x=ei(s)))),x===0?0:n!==0&&n!==x&&(n&b)===0&&(b=x&-x,s=n&-n,b>=s||b===32&&(s&4194048)!==0)?n:x}function Bn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function fl(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cn(){var e=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),e}function ti(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ni(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sr(e,n,s,f,x,b){var T=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var B=e.entanglements,z=e.expirationTimes,te=e.hiddenUpdates;for(s=T&~s;0<s;){var ue=31-Ze(s),ge=1<<ue;B[ue]=0,z[ue]=-1;var re=te[ue];if(re!==null)for(te[ue]=null,ue=0;ue<re.length;ue++){var le=re[ue];le!==null&&(le.lane&=-536870913)}s&=~ge}f!==0&&Ao(e,f,0),b!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=b&~(T&~n))}function Ao(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var f=31-Ze(n);e.entangledLanes|=n,e.entanglements[f]=e.entanglements[f]|1073741824|s&261930}function ri(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var f=31-Ze(s),x=1<<f;x&n|e[f]&n&&(e[f]|=n),s&=~x}}function os(e,n){var s=n&-n;return s=(s&42)!==0?1:In(s),(s&(e.suspendedLanes|n))!==0?0:s}function In(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:J1(e.type))}function Ne(e,n){var s=fe.p;try{return fe.p=e,n()}finally{fe.p=s}}var Vn=Math.random().toString(36).slice(2),cn="__reactFiber$"+Vn,Nt="__reactProps$"+Vn,cr="__reactContainer$"+Vn,Hi="__reactEvents$"+Vn,cs="__reactListeners$"+Vn,Tr="__reactHandles$"+Vn,_o="__reactResources$"+Vn,Ia="__reactMarker$"+Vn;function $n(e){delete e[cn],delete e[Nt],delete e[Hi],delete e[cs],delete e[Tr]}function en(e){var n=e[cn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[cr]||s[cn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=L1(e);e!==null;){if(s=e[cn])return s;e=L1(e)}return n}e=s,s=e.parentNode}return null}function Et(e){if(e=e[cn]||e[cr]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Gi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(h(33))}function qn(e){var n=e[_o];return n||(n=e[_o]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function tn(e){e[Ia]=!0}var me=new Set,Co={};function Ct(e,n){ur(e,n),ur(e+"Capture",n)}function ur(e,n){for(Co[e]=n,e=0;e<n.length;e++)me.add(n[e])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},xt={};function it(e){return rt.call(xt,e)?!0:rt.call(yt,e)?!1:pu.test(e)?xt[e]=!0:(yt[e]=!0,!1)}function Vi(e,n,s){if(it(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var f=n.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function qi(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function hr(e,n,s,f){if(f===null)e.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+f)}}function wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function xu(e,n,s){var f=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,b=f.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(T){s=""+T,b.call(this,T)}}),Object.defineProperty(e,n,{enumerable:f.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Gt(e){if(!e._valueTracker){var n=zr(e)?"checked":"value";e._valueTracker=xu(e,n,""+e[n])}}function Hr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),f="";return e&&(f=zr(e)?e.checked?"true":"false":e.value),e=f,e!==s?(n.setValue(e),!0):!1}function us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xi=/[\n"\\]/g;function nt(e){return e.replace(Xi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gn(e,n,s,f,x,b,T,B){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+wt(n)):e.value!==""+wt(n)&&(e.value=""+wt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?L(e,T,wt(n)):s!=null?L(e,T,wt(s)):f!=null&&e.removeAttribute("value"),x==null&&b!=null&&(e.defaultChecked=!!b),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.name=""+wt(B):e.removeAttribute("name")}function Q(e,n,s,f,x,b,T,B){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.type=b),n!=null||s!=null){if(!(b!=="submit"&&b!=="reset"||n!=null)){Gt(e);return}s=s!=null?""+wt(s):"",n=n!=null?""+wt(n):s,B||n===e.value||(e.value=n),e.defaultValue=n}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,e.checked=B?e.checked:!!f,e.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),Gt(e)}function L(e,n,s){n==="number"&&us(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Me(e,n,s,f){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&f&&(e[s].defaultSelected=!0)}else{for(s=""+wt(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,f&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function un(e,n,s){if(n!=null&&(n=""+wt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+wt(s):""}function Xn(e,n,s,f){if(n==null){if(f!=null){if(s!=null)throw Error(h(92));if(ee(f)){if(1<f.length)throw Error(h(93));f=f[0]}s=f}s==null&&(s=""),n=s}s=wt(n),e.defaultValue=s,f=e.textContent,f===s&&f!==""&&f!==null&&(e.value=f),Gt(e)}function Yi(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var dl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yn(e,n,s){var f=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?f?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":f?e.setProperty(n,s):typeof s!="number"||s===0||dl.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Ue(e,n,s){if(n!=null&&typeof n!="object")throw Error(h(62));if(e=e.style,s!=null){for(var f in s)!s.hasOwnProperty(f)||n!=null&&n.hasOwnProperty(f)||(f.indexOf("--")===0?e.setProperty(f,""):f==="float"?e.cssFloat="":e[f]="");for(var x in n)f=n[x],n.hasOwnProperty(x)&&s[x]!==f&&Yn(e,x,f)}else for(var b in n)n.hasOwnProperty(b)&&Yn(e,b,n[b])}function Ut(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wi(e){return yu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function er(){}var Da=null;function gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vt=null,Rr=null;function Gr(e){var n=Et(e);if(n&&(e=n.stateNode)){var s=e[Nt]||null;e:switch(e=n.stateNode,n.type){case"input":if(gn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+nt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var f=s[n];if(f!==e&&f.form===e.form){var x=f[Nt]||null;if(!x)throw Error(h(90));gn(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<s.length;n++)f=s[n],f.form===e.form&&Hr(f)}break e;case"textarea":un(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Me(e,!!s.multiple,n,!1)}}}var Pe=!1;function To(e,n,s){if(Pe)return e(n,s);Pe=!0;try{var f=e(n);return f}finally{if(Pe=!1,(Vt!==null||Rr!==null)&&(yc(),Vt&&(n=Vt,e=Rr,Rr=Vt=null,Gr(n),e)))for(n=0;n<e.length;n++)Gr(e[n])}}function qe(e,n){var s=e.stateNode;if(s===null)return null;var f=s[Nt]||null;if(f===null)return null;s=f[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(h(231,n,typeof s));return s}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ml=!1;if(jt)try{var di={};Object.defineProperty(di,"passive",{get:function(){ml=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{ml=!1}var Vr=null,qr=null,hs=null;function Ki(){if(hs)return hs;var e,n=qr,s=n.length,f,x="value"in Vr?Vr.value:Vr.textContent,b=x.length;for(e=0;e<s&&n[e]===x[e];e++);var T=s-e;for(f=1;f<=T&&n[s-f]===x[b-f];f++);return hs=x.slice(e,1<f?1-f:void 0)}function ii(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function pl(){return!1}function mn(e){function n(s,f,x,b,T){this._reactName=s,this._targetInst=x,this.type=f,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(s=e[B],this[B]=s?s(b):b[B]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ai:pl,this.isPropagationStopped=pl,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),n}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sn=mn(fr),Zi=R({},fr,{view:0,detail:0}),Ro=mn(Zi),fs,xl,Ma,ds=R({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ma&&(Ma&&e.type==="mousemove"?(fs=e.screenX-Ma.screenX,xl=e.screenY-Ma.screenY):xl=fs=0,Ma=e),fs)},movementY:function(e){return"movementY"in e?e.movementY:xl}}),At=mn(ds),No=R({},ds,{dataTransfer:0}),gs=mn(No),si=R({},Zi,{relatedTarget:0}),yl=mn(si),se=R({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qe=mn(se),Tn=R({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ms=mn(Tn),Oo=R({},fr,{data:0}),Io=mn(Oo),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=wl[e])?!!n[e]:!1}function Ba(){return hn}var Kt=R({},Zi,{key:function(e){if(e.key){var n=wu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ps=mn(Kt),gi=R({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),St=mn(gi),Fe=R({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),vu=mn(Fe),Pt=R({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mi=mn(Pt),Qi=R({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eu=mn(Qi),Nr=R({},fr,{newState:0,oldState:0}),bl=mn(Nr),Do=[9,13,27,32],ka=jt&&"CompositionEvent"in window,Ji=null;jt&&"documentMode"in document&&(Ji=document.documentMode);var Mo=jt&&"TextEvent"in window&&!Ji,Bo=jt&&(!ka||Ji&&8<Ji&&11>=Ji),pi=" ",xs=!1;function ko(e,n){switch(e){case"keyup":return Do.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $i(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ea=!1;function li(e,n){switch(e){case"compositionend":return $i(n);case"keypress":return n.which!==32?null:(xs=!0,pi);case"textInput":return e=n.data,e===pi&&xs?null:e;default:return null}}function ys(e,n){if(ea)return e==="compositionend"||!ka&&ko(e,n)?(e=Ki(),hs=qr=Vr=null,ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Bo&&n.locale!=="ko"?null:n.data;default:return null}}var tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!tr[e.type]:n==="textarea"}function dr(e,n,s,f){Vt?Rr?Rr.push(f):Rr=[f]:Vt=f,n=Cc(n,"onChange"),0<n.length&&(s=new Sn("onChange","change",null,s,f),e.push({event:s,listeners:n}))}var La=null,xi=null;function Au(e){E1(e,0)}function Ua(e){var n=Gi(e);if(Hr(n))return e}function gr(e,n){if(e==="change")return n}var Lo=!1;if(jt){var ja;if(jt){var yi="oninput"in document;if(!yi){var ut=document.createElement("div");ut.setAttribute("oninput","return;"),yi=typeof ut.oninput=="function"}ja=yi}else ja=!1;Lo=ja&&(!document.documentMode||9<document.documentMode)}function Pa(){La&&(La.detachEvent("onpropertychange",N),xi=La=null)}function N(e){if(e.propertyName==="value"&&Ua(xi)){var n=[];dr(n,xi,e,gl(e)),To(Au,n)}}function t(e,n,s){e==="focusin"?(Pa(),La=n,xi=s,La.attachEvent("onpropertychange",N)):e==="focusout"&&Pa()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ua(xi)}function a(e,n){if(e==="click")return Ua(n)}function c(e,n){if(e==="input"||e==="change")return Ua(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var d=typeof Object.is=="function"?Object.is:u;function m(e,n){if(d(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),f=Object.keys(n);if(s.length!==f.length)return!1;for(f=0;f<s.length;f++){var x=s[f];if(!rt.call(n,x)||!d(e[x],n[x]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,n){var s=y(e);e=0;for(var f;s;){if(s.nodeType===3){if(f=e+s.textContent.length,e<=n&&f>=n)return{node:s,offset:n-e};e=f}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function S(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?S(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function O(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=us(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=us(e.document)}return n}function D(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var U=jt&&"documentMode"in document&&11>=document.documentMode,G=null,V=null,Z=null,ae=!1;function ye(e,n,s){var f=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ae||G==null||G!==us(f)||(f=G,"selectionStart"in f&&D(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Z&&m(Z,f)||(Z=f,f=Cc(V,"onSelect"),0<f.length&&(n=new Sn("onSelect","select",null,n,s),e.push({event:n,listeners:f}),n.target=G)))}function xe(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var pe={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},et={},Xe={};jt&&(Xe=document.createElement("div").style,"AnimationEvent"in window||(delete pe.animationend.animation,delete pe.animationiteration.animation,delete pe.animationstart.animation),"TransitionEvent"in window||delete pe.transitionend.transition);function nn(e){if(et[e])return et[e];if(!pe[e])return e;var n=pe[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Xe)return et[e]=n[s];return e}var nr=nn("animationend"),kn=nn("animationiteration"),Tt=nn("animationstart"),Rn=nn("transitionrun"),Wn=nn("transitionstart"),ta=nn("transitioncancel"),wi=nn("transitionend"),Uo=new Map,El="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");El.push("scrollEnd");function Xr(e,n){Uo.set(e,n),Ct(n,[e])}var jo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Or=[],ws=0,_u=0;function Po(){for(var e=ws,n=_u=ws=0;n<e;){var s=Or[n];Or[n++]=null;var f=Or[n];Or[n++]=null;var x=Or[n];Or[n++]=null;var b=Or[n];if(Or[n++]=null,f!==null&&x!==null){var T=f.pending;T===null?x.next=x:(x.next=T.next,T.next=x),f.pending=x}b!==0&&rd(s,x,b)}}function Fo(e,n,s,f){Or[ws++]=e,Or[ws++]=n,Or[ws++]=s,Or[ws++]=f,_u|=f,e.lanes|=f,e=e.alternate,e!==null&&(e.lanes|=f)}function Cu(e,n,s,f){return Fo(e,n,s,f),zo(e)}function Fa(e,n){return Fo(e,null,null,n),zo(e)}function rd(e,n,s){e.lanes|=s;var f=e.alternate;f!==null&&(f.lanes|=s);for(var x=!1,b=e.return;b!==null;)b.childLanes|=s,f=b.alternate,f!==null&&(f.childLanes|=s),b.tag===22&&(e=b.stateNode,e===null||e._visibility&1||(x=!0)),e=b,b=b.return;return e.tag===3?(b=e.stateNode,x&&n!==null&&(x=31-Ze(s),e=b.hiddenUpdates,f=e[x],f===null?e[x]=[n]:f.push(n),n.lane=s|536870912),b):null}function zo(e){if(50<Vl)throw Vl=0,Bh=null,Error(h(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var bs={};function h2(e,n,s,f){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(e,n,s,f){return new h2(e,n,s,f)}function Su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bi(e,n){var s=e.alternate;return s===null?(s=mr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function id(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ho(e,n,s,f,x,b){var T=0;if(f=e,typeof e=="function")Su(e)&&(T=1);else if(typeof e=="string")T=pp(e,s,_e.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=mr(31,s,n,x),e.elementType=he,e.lanes=b,e;case F:return za(s.children,x,b,n);case H:T=8,x|=24;break;case ie:return e=mr(12,s,n,x|2),e.elementType=ie,e.lanes=b,e;case Re:return e=mr(13,s,n,x),e.elementType=Re,e.lanes=b,e;case be:return e=mr(19,s,n,x),e.elementType=be,e.lanes=b,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:T=10;break e;case X:T=9;break e;case ce:T=11;break e;case J:T=14;break e;case Se:T=16,f=null;break e}T=29,s=Error(h(130,e===null?"null":typeof e,"")),f=null}return n=mr(T,s,n,x),n.elementType=e,n.type=f,n.lanes=b,n}function za(e,n,s,f){return e=mr(7,e,f,n),e.lanes=s,e}function Tu(e,n,s){return e=mr(6,e,null,n),e.lanes=s,e}function ad(e){var n=mr(18,null,null,0);return n.stateNode=e,n}function Ru(e,n,s){return n=mr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var sd=new WeakMap;function Ir(e,n){if(typeof e=="object"&&e!==null){var s=sd.get(e);return s!==void 0?s:(n={value:e,source:n,stack:Rt(n)},sd.set(e,n),n)}return{value:e,source:n,stack:Rt(n)}}var vs=[],Es=0,Go=null,Al=0,Dr=[],Mr=0,na=null,oi=1,ci="";function vi(e,n){vs[Es++]=Al,vs[Es++]=Go,Go=e,Al=n}function ld(e,n,s){Dr[Mr++]=oi,Dr[Mr++]=ci,Dr[Mr++]=na,na=e;var f=oi;e=ci;var x=32-Ze(f)-1;f&=~(1<<x),s+=1;var b=32-Ze(n)+x;if(30<b){var T=x-x%5;b=(f&(1<<T)-1).toString(32),f>>=T,x-=T,oi=1<<32-Ze(n)+x|s<<x|f,ci=b+e}else oi=1<<b|s<<x|f,ci=e}function Nu(e){e.return!==null&&(vi(e,1),ld(e,1,0))}function Ou(e){for(;e===Go;)Go=vs[--Es],vs[Es]=null,Al=vs[--Es],vs[Es]=null;for(;e===na;)na=Dr[--Mr],Dr[Mr]=null,ci=Dr[--Mr],Dr[Mr]=null,oi=Dr[--Mr],Dr[Mr]=null}function od(e,n){Dr[Mr++]=oi,Dr[Mr++]=ci,Dr[Mr++]=na,oi=n.id,ci=n.overflow,na=e}var Ln=null,qt=null,dt=!1,ra=null,Br=!1,Iu=Error(h(519));function ia(e){var n=Error(h(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Ir(n,e)),Iu}function cd(e){var n=e.stateNode,s=e.type,f=e.memoizedProps;switch(n[cn]=e,n[Nt]=f,s){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(s=0;s<Xl.length;s++)st(Xl[s],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":st("invalid",n),Q(n,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":st("invalid",n);break;case"textarea":st("invalid",n),Xn(n,f.value,f.defaultValue,f.children)}s=f.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||f.suppressHydrationWarning===!0||S1(n.textContent,s)?(f.popover!=null&&(st("beforetoggle",n),st("toggle",n)),f.onScroll!=null&&st("scroll",n),f.onScrollEnd!=null&&st("scrollend",n),f.onClick!=null&&(n.onclick=er),n=!0):n=!1,n||ia(e,!0)}function ud(e){for(Ln=e.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Ln=Ln.return}}function As(e){if(e!==Ln)return!1;if(!dt)return ud(e),dt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Kh(e.type,e.memoizedProps)),s=!s),s&&qt&&ia(e),ud(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));qt=k1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));qt=k1(e)}else n===27?(n=qt,ya(e.type)?(e=ef,ef=null,qt=e):qt=n):qt=Ln?Lr(e.stateNode.nextSibling):null;return!0}function Ha(){qt=Ln=null,dt=!1}function Du(){var e=ra;return e!==null&&(sr===null?sr=e:sr.push.apply(sr,e),ra=null),e}function _l(e){ra===null?ra=[e]:ra.push(e)}var Mu=Y(null),Ga=null,Ei=null;function aa(e,n,s){Ae(Mu,n._currentValue),n._currentValue=s}function Ai(e){e._currentValue=Mu.current,oe(Mu)}function Bu(e,n,s){for(;e!==null;){var f=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,f!==null&&(f.childLanes|=n)):f!==null&&(f.childLanes&n)!==n&&(f.childLanes|=n),e===s)break;e=e.return}}function ku(e,n,s,f){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var b=x.dependencies;if(b!==null){var T=x.child;b=b.firstContext;e:for(;b!==null;){var B=b;b=x;for(var z=0;z<n.length;z++)if(B.context===n[z]){b.lanes|=s,B=b.alternate,B!==null&&(B.lanes|=s),Bu(b.return,s,e),f||(T=null);break e}b=B.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(h(341));T.lanes|=s,b=T.alternate,b!==null&&(b.lanes|=s),Bu(T,s,e),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===e){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function _s(e,n,s,f){e=null;for(var x=n,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(h(387));if(T=T.memoizedProps,T!==null){var B=x.type;d(x.pendingProps.value,T.value)||(e!==null?e.push(B):e=[B])}}else if(x===gt.current){if(T=x.alternate,T===null)throw Error(h(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(Ql):e=[Ql])}x=x.return}e!==null&&ku(n,e,s,f),n.flags|=262144}function Vo(e){for(e=e.firstContext;e!==null;){if(!d(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Va(e){Ga=e,Ei=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Un(e){return hd(Ga,e)}function qo(e,n){return Ga===null&&Va(e),hd(e,n)}function hd(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ei===null){if(e===null)throw Error(h(308));Ei=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ei=Ei.next=n;return s}var f2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,f){e.push(f)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},d2=l.unstable_scheduleCallback,g2=l.unstable_NormalPriority,pn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lu(){return{controller:new f2,data:new Map,refCount:0}}function Cl(e){e.refCount--,e.refCount===0&&d2(g2,function(){e.controller.abort()})}var Sl=null,Uu=0,Cs=0,Ss=null;function m2(e,n){if(Sl===null){var s=Sl=[];Uu=0,Cs=Fh(),Ss={status:"pending",value:void 0,then:function(f){s.push(f)}}}return Uu++,n.then(fd,fd),n}function fd(){if(--Uu===0&&Sl!==null){Ss!==null&&(Ss.status="fulfilled");var e=Sl;Sl=null,Cs=0,Ss=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function p2(e,n){var s=[],f={status:"pending",value:null,reason:null,then:function(x){s.push(x)}};return e.then(function(){f.status="fulfilled",f.value=n;for(var x=0;x<s.length;x++)(0,s[x])(n)},function(x){for(f.status="rejected",f.reason=x,x=0;x<s.length;x++)(0,s[x])(void 0)}),f}var dd=ne.S;ne.S=function(e,n){Z0=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&m2(e,n),dd!==null&&dd(e,n)};var qa=Y(null);function ju(){var e=qa.current;return e!==null?e:Ft.pooledCache}function Xo(e,n){n===null?Ae(qa,qa.current):Ae(qa,n.pool)}function gd(){var e=ju();return e===null?null:{parent:pn._currentValue,pool:e}}var Ts=Error(h(460)),Pu=Error(h(474)),Yo=Error(h(542)),Wo={then:function(){}};function md(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pd(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(er,er),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,yd(e),e;default:if(typeof n.status=="string")n.then(er,er);else{if(e=Ft,e!==null&&100<e.shellSuspendCounter)throw Error(h(482));e=n,e.status="pending",e.then(function(f){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=f}},function(f){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=f}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,yd(e),e}throw Ya=n,Ts}}function Xa(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ya=s,Ts):s}}var Ya=null;function xd(){if(Ya===null)throw Error(h(459));var e=Ya;return Ya=null,e}function yd(e){if(e===Ts||e===Yo)throw Error(h(483))}var Rs=null,Tl=0;function Ko(e){var n=Tl;return Tl+=1,Rs===null&&(Rs=[]),pd(Rs,e,n)}function Rl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Zo(e,n){throw n.$$typeof===M?Error(h(525)):(e=Object.prototype.toString.call(n),Error(h(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function wd(e){function n(K,q){if(e){var $=K.deletions;$===null?(K.deletions=[q],K.flags|=16):$.push(q)}}function s(K,q){if(!e)return null;for(;q!==null;)n(K,q),q=q.sibling;return null}function f(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function x(K,q){return K=bi(K,q),K.index=0,K.sibling=null,K}function b(K,q,$){return K.index=$,e?($=K.alternate,$!==null?($=$.index,$<q?(K.flags|=67108866,q):$):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function T(K){return e&&K.alternate===null&&(K.flags|=67108866),K}function B(K,q,$,de){return q===null||q.tag!==6?(q=Tu($,K.mode,de),q.return=K,q):(q=x(q,$),q.return=K,q)}function z(K,q,$,de){var je=$.type;return je===F?ue(K,q,$.props.children,de,$.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Se&&Xa(je)===q.type)?(q=x(q,$.props),Rl(q,$),q.return=K,q):(q=Ho($.type,$.key,$.props,null,K.mode,de),Rl(q,$),q.return=K,q)}function te(K,q,$,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==$.containerInfo||q.stateNode.implementation!==$.implementation?(q=Ru($,K.mode,de),q.return=K,q):(q=x(q,$.children||[]),q.return=K,q)}function ue(K,q,$,de,je){return q===null||q.tag!==7?(q=za($,K.mode,de,je),q.return=K,q):(q=x(q,$),q.return=K,q)}function ge(K,q,$){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Tu(""+q,K.mode,$),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return $=Ho(q.type,q.key,q.props,null,K.mode,$),Rl($,q),$.return=K,$;case j:return q=Ru(q,K.mode,$),q.return=K,q;case Se:return q=Xa(q),ge(K,q,$)}if(ee(q)||Ce(q))return q=za(q,K.mode,$,null),q.return=K,q;if(typeof q.then=="function")return ge(K,Ko(q),$);if(q.$$typeof===P)return ge(K,qo(K,q),$);Zo(K,q)}return null}function re(K,q,$,de){var je=q!==null?q.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return je!==null?null:B(K,q,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case k:return $.key===je?z(K,q,$,de):null;case j:return $.key===je?te(K,q,$,de):null;case Se:return $=Xa($),re(K,q,$,de)}if(ee($)||Ce($))return je!==null?null:ue(K,q,$,de,null);if(typeof $.then=="function")return re(K,q,Ko($),de);if($.$$typeof===P)return re(K,q,qo(K,$),de);Zo(K,$)}return null}function le(K,q,$,de,je){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return K=K.get($)||null,B(q,K,""+de,je);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case k:return K=K.get(de.key===null?$:de.key)||null,z(q,K,de,je);case j:return K=K.get(de.key===null?$:de.key)||null,te(q,K,de,je);case Se:return de=Xa(de),le(K,q,$,de,je)}if(ee(de)||Ce(de))return K=K.get($)||null,ue(q,K,de,je,null);if(typeof de.then=="function")return le(K,q,$,Ko(de),je);if(de.$$typeof===P)return le(K,q,$,qo(q,de),je);Zo(q,de)}return null}function De(K,q,$,de){for(var je=null,bt=null,Be=q,Je=q=0,ft=null;Be!==null&&Je<$.length;Je++){Be.index>Je?(ft=Be,Be=null):ft=Be.sibling;var vt=re(K,Be,$[Je],de);if(vt===null){Be===null&&(Be=ft);break}e&&Be&&vt.alternate===null&&n(K,Be),q=b(vt,q,Je),bt===null?je=vt:bt.sibling=vt,bt=vt,Be=ft}if(Je===$.length)return s(K,Be),dt&&vi(K,Je),je;if(Be===null){for(;Je<$.length;Je++)Be=ge(K,$[Je],de),Be!==null&&(q=b(Be,q,Je),bt===null?je=Be:bt.sibling=Be,bt=Be);return dt&&vi(K,Je),je}for(Be=f(Be);Je<$.length;Je++)ft=le(Be,K,Je,$[Je],de),ft!==null&&(e&&ft.alternate!==null&&Be.delete(ft.key===null?Je:ft.key),q=b(ft,q,Je),bt===null?je=ft:bt.sibling=ft,bt=ft);return e&&Be.forEach(function(Aa){return n(K,Aa)}),dt&&vi(K,Je),je}function ze(K,q,$,de){if($==null)throw Error(h(151));for(var je=null,bt=null,Be=q,Je=q=0,ft=null,vt=$.next();Be!==null&&!vt.done;Je++,vt=$.next()){Be.index>Je?(ft=Be,Be=null):ft=Be.sibling;var Aa=re(K,Be,vt.value,de);if(Aa===null){Be===null&&(Be=ft);break}e&&Be&&Aa.alternate===null&&n(K,Be),q=b(Aa,q,Je),bt===null?je=Aa:bt.sibling=Aa,bt=Aa,Be=ft}if(vt.done)return s(K,Be),dt&&vi(K,Je),je;if(Be===null){for(;!vt.done;Je++,vt=$.next())vt=ge(K,vt.value,de),vt!==null&&(q=b(vt,q,Je),bt===null?je=vt:bt.sibling=vt,bt=vt);return dt&&vi(K,Je),je}for(Be=f(Be);!vt.done;Je++,vt=$.next())vt=le(Be,K,Je,vt.value,de),vt!==null&&(e&&vt.alternate!==null&&Be.delete(vt.key===null?Je:vt.key),q=b(vt,q,Je),bt===null?je=vt:bt.sibling=vt,bt=vt);return e&&Be.forEach(function(Tp){return n(K,Tp)}),dt&&vi(K,Je),je}function kt(K,q,$,de){if(typeof $=="object"&&$!==null&&$.type===F&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case k:e:{for(var je=$.key;q!==null;){if(q.key===je){if(je=$.type,je===F){if(q.tag===7){s(K,q.sibling),de=x(q,$.props.children),de.return=K,K=de;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Se&&Xa(je)===q.type){s(K,q.sibling),de=x(q,$.props),Rl(de,$),de.return=K,K=de;break e}s(K,q);break}else n(K,q);q=q.sibling}$.type===F?(de=za($.props.children,K.mode,de,$.key),de.return=K,K=de):(de=Ho($.type,$.key,$.props,null,K.mode,de),Rl(de,$),de.return=K,K=de)}return T(K);case j:e:{for(je=$.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===$.containerInfo&&q.stateNode.implementation===$.implementation){s(K,q.sibling),de=x(q,$.children||[]),de.return=K,K=de;break e}else{s(K,q);break}else n(K,q);q=q.sibling}de=Ru($,K.mode,de),de.return=K,K=de}return T(K);case Se:return $=Xa($),kt(K,q,$,de)}if(ee($))return De(K,q,$,de);if(Ce($)){if(je=Ce($),typeof je!="function")throw Error(h(150));return $=je.call($),ze(K,q,$,de)}if(typeof $.then=="function")return kt(K,q,Ko($),de);if($.$$typeof===P)return kt(K,q,qo(K,$),de);Zo(K,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,q!==null&&q.tag===6?(s(K,q.sibling),de=x(q,$),de.return=K,K=de):(s(K,q),de=Tu($,K.mode,de),de.return=K,K=de),T(K)):s(K,q)}return function(K,q,$,de){try{Tl=0;var je=kt(K,q,$,de);return Rs=null,je}catch(Be){if(Be===Ts||Be===Yo)throw Be;var bt=mr(29,Be,null,K.mode);return bt.lanes=de,bt.return=K,bt}}}var Wa=wd(!0),bd=wd(!1),sa=!1;function Fu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function la(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oa(e,n,s){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(_t&2)!==0){var x=f.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),f.pending=n,n=zo(e),rd(e,null,s),n}return Fo(e,f,n,s),zo(e)}function Nl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,ri(e,s)}}function Hu(e,n){var s=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,s===f)){var x=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};b===null?x=b=T:b=b.next=T,s=s.next}while(s!==null);b===null?x=b=n:b=b.next=n}else x=b=n;s={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Gu=!1;function Ol(){if(Gu){var e=Ss;if(e!==null)throw e}}function Il(e,n,s,f){Gu=!1;var x=e.updateQueue;sa=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var z=B,te=z.next;z.next=null,T===null?b=te:T.next=te,T=z;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,B=ue.lastBaseUpdate,B!==T&&(B===null?ue.firstBaseUpdate=te:B.next=te,ue.lastBaseUpdate=z))}if(b!==null){var ge=x.baseState;T=0,ue=te=z=null,B=b;do{var re=B.lane&-536870913,le=re!==B.lane;if(le?(ht&re)===re:(f&re)===re){re!==0&&re===Cs&&(Gu=!0),ue!==null&&(ue=ue.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var De=e,ze=B;re=n;var kt=s;switch(ze.tag){case 1:if(De=ze.payload,typeof De=="function"){ge=De.call(kt,ge,re);break e}ge=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=ze.payload,re=typeof De=="function"?De.call(kt,ge,re):De,re==null)break e;ge=R({},ge,re);break e;case 2:sa=!0}}re=B.callback,re!==null&&(e.flags|=64,le&&(e.flags|=8192),le=x.callbacks,le===null?x.callbacks=[re]:le.push(re))}else le={lane:re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ue===null?(te=ue=le,z=ge):ue=ue.next=le,T|=re;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;le=B,B=le.next,le.next=null,x.lastBaseUpdate=le,x.shared.pending=null}}while(!0);ue===null&&(z=ge),x.baseState=z,x.firstBaseUpdate=te,x.lastBaseUpdate=ue,b===null&&(x.shared.lanes=0),da|=T,e.lanes=T,e.memoizedState=ge}}function vd(e,n){if(typeof e!="function")throw Error(h(191,e));e.call(n)}function Ed(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)vd(s[e],n)}var Ns=Y(null),Qo=Y(0);function Ad(e,n){e=Di,Ae(Qo,e),Ae(Ns,n),Di=e|n.baseLanes}function Vu(){Ae(Qo,Di),Ae(Ns,Ns.current)}function qu(){Di=Qo.current,oe(Ns),oe(Qo)}var pr=Y(null),kr=null;function ca(e){var n=e.alternate;Ae(fn,fn.current&1),Ae(pr,e),kr===null&&(n===null||Ns.current!==null||n.memoizedState!==null)&&(kr=e)}function Xu(e){Ae(fn,fn.current),Ae(pr,e),kr===null&&(kr=e)}function _d(e){e.tag===22?(Ae(fn,fn.current),Ae(pr,e),kr===null&&(kr=e)):ua()}function ua(){Ae(fn,fn.current),Ae(pr,pr.current)}function xr(e){oe(pr),kr===e&&(kr=null),oe(fn)}var fn=Y(0);function Jo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Jh(s)||$h(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _i=0,Ke=null,Mt=null,xn=null,$o=!1,Os=!1,Ka=!1,ec=0,Dl=0,Is=null,x2=0;function rn(){throw Error(h(321))}function Yu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!d(e[s],n[s]))return!1;return!0}function Wu(e,n,s,f,x,b){return _i=b,Ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ne.H=e===null||e.memoizedState===null?l0:ch,Ka=!1,b=s(f,x),Ka=!1,Os&&(b=Sd(n,s,f,x)),Cd(e),b}function Cd(e){ne.H=kl;var n=Mt!==null&&Mt.next!==null;if(_i=0,xn=Mt=Ke=null,$o=!1,Dl=0,Is=null,n)throw Error(h(300));e===null||yn||(e=e.dependencies,e!==null&&Vo(e)&&(yn=!0))}function Sd(e,n,s,f){Ke=e;var x=0;do{if(Os&&(Is=null),Dl=0,Os=!1,25<=x)throw Error(h(301));if(x+=1,xn=Mt=null,e.updateQueue!=null){var b=e.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ne.H=o0,b=n(s,f)}while(Os);return b}function y2(){var e=ne.H,n=e.useState()[0];return n=typeof n.then=="function"?Ml(n):n,e=e.useState()[0],(Mt!==null?Mt.memoizedState:null)!==e&&(Ke.flags|=1024),n}function Ku(){var e=ec!==0;return ec=0,e}function Zu(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Qu(e){if($o){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}$o=!1}_i=0,xn=Mt=Ke=null,Os=!1,Dl=ec=0,Is=null}function Kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Ke.memoizedState=xn=e:xn=xn.next=e,xn}function dn(){if(Mt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var n=xn===null?Ke.memoizedState:xn.next;if(n!==null)xn=n,Mt=e;else{if(e===null)throw Ke.alternate===null?Error(h(467)):Error(h(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},xn===null?Ke.memoizedState=xn=e:xn=xn.next=e}return xn}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(e){var n=Dl;return Dl+=1,Is===null&&(Is=[]),e=pd(Is,e,n),n=Ke,(xn===null?n.memoizedState:xn.next)===null&&(n=n.alternate,ne.H=n===null||n.memoizedState===null?l0:ch),e}function nc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ml(e);if(e.$$typeof===P)return Un(e)}throw Error(h(438,String(e)))}function Ju(e){var n=null,s=Ke.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var f=Ke.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(n={data:f.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=tc(),Ke.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),f=0;f<e;f++)s[f]=ot;return n.index++,s}function Ci(e,n){return typeof n=="function"?n(e):n}function rc(e){var n=dn();return $u(n,Mt,e)}function $u(e,n,s){var f=e.queue;if(f===null)throw Error(h(311));f.lastRenderedReducer=s;var x=e.baseQueue,b=f.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}n.baseQueue=x=b,f.pending=null}if(b=e.baseState,x===null)e.memoizedState=b;else{n=x.next;var B=T=null,z=null,te=n,ue=!1;do{var ge=te.lane&-536870913;if(ge!==te.lane?(ht&ge)===ge:(_i&ge)===ge){var re=te.revertLane;if(re===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),ge===Cs&&(ue=!0);else if((_i&re)===re){te=te.next,re===Cs&&(ue=!0);continue}else ge={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(B=z=ge,T=b):z=z.next=ge,Ke.lanes|=re,da|=re;ge=te.action,Ka&&s(b,ge),b=te.hasEagerState?te.eagerState:s(b,ge)}else re={lane:ge,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(B=z=re,T=b):z=z.next=re,Ke.lanes|=ge,da|=ge;te=te.next}while(te!==null&&te!==n);if(z===null?T=b:z.next=B,!d(b,e.memoizedState)&&(yn=!0,ue&&(s=Ss,s!==null)))throw s;e.memoizedState=b,e.baseState=T,e.baseQueue=z,f.lastRenderedState=b}return x===null&&(f.lanes=0),[e.memoizedState,f.dispatch]}function eh(e){var n=dn(),s=n.queue;if(s===null)throw Error(h(311));s.lastRenderedReducer=e;var f=s.dispatch,x=s.pending,b=n.memoizedState;if(x!==null){s.pending=null;var T=x=x.next;do b=e(b,T.action),T=T.next;while(T!==x);d(b,n.memoizedState)||(yn=!0),n.memoizedState=b,n.baseQueue===null&&(n.baseState=b),s.lastRenderedState=b}return[b,f]}function Td(e,n,s){var f=Ke,x=dn(),b=dt;if(b){if(s===void 0)throw Error(h(407));s=s()}else s=n();var T=!d((Mt||x).memoizedState,s);if(T&&(x.memoizedState=s,yn=!0),x=x.queue,rh(Od.bind(null,f,x,e),[e]),x.getSnapshot!==n||T||xn!==null&&xn.memoizedState.tag&1){if(f.flags|=2048,Ds(9,{destroy:void 0},Nd.bind(null,f,x,s,n),null),Ft===null)throw Error(h(349));b||(_i&127)!==0||Rd(f,n,s)}return s}function Rd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ke.updateQueue,n===null?(n=tc(),Ke.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Nd(e,n,s,f){n.value=s,n.getSnapshot=f,Id(n)&&Dd(e)}function Od(e,n,s){return s(function(){Id(n)&&Dd(e)})}function Id(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!d(e,s)}catch{return!0}}function Dd(e){var n=Fa(e,2);n!==null&&lr(n,e,2)}function th(e){var n=Kn();if(typeof e=="function"){var s=e;if(e=s(),Ka){Dt(!0);try{s()}finally{Dt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},n}function Md(e,n,s,f){return e.baseState=s,$u(e,Mt,typeof f=="function"?f:Ci)}function w2(e,n,s,f,x){if(sc(e))throw Error(h(485));if(e=n.action,e!==null){var b={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};ne.T!==null?s(!0):b.isTransition=!1,f(b),s=n.pending,s===null?(b.next=n.pending=b,Bd(n,b)):(b.next=s.next,n.pending=s.next=b)}}function Bd(e,n){var s=n.action,f=n.payload,x=e.state;if(n.isTransition){var b=ne.T,T={};ne.T=T;try{var B=s(x,f),z=ne.S;z!==null&&z(T,B),kd(e,n,B)}catch(te){nh(e,n,te)}finally{b!==null&&T.types!==null&&(b.types=T.types),ne.T=b}}else try{b=s(x,f),kd(e,n,b)}catch(te){nh(e,n,te)}}function kd(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(f){Ld(e,n,f)},function(f){return nh(e,n,f)}):Ld(e,n,s)}function Ld(e,n,s){n.status="fulfilled",n.value=s,Ud(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Bd(e,s)))}function nh(e,n,s){var f=e.pending;if(e.pending=null,f!==null){f=f.next;do n.status="rejected",n.reason=s,Ud(n),n=n.next;while(n!==f)}e.action=null}function Ud(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function jd(e,n){return n}function Pd(e,n){if(dt){var s=Ft.formState;if(s!==null){e:{var f=Ke;if(dt){if(qt){t:{for(var x=qt,b=Br;x.nodeType!==8;){if(!b){x=null;break t}if(x=Lr(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){qt=Lr(x.nextSibling),f=x.data==="F!";break e}}ia(f)}f=!1}f&&(n=s[0])}}return s=Kn(),s.memoizedState=s.baseState=n,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:n},s.queue=f,s=i0.bind(null,Ke,f),f.dispatch=s,f=th(!1),b=oh.bind(null,Ke,!1,f.queue),f=Kn(),x={state:n,dispatch:null,action:e,pending:null},f.queue=x,s=w2.bind(null,Ke,x,b,s),x.dispatch=s,f.memoizedState=e,[n,s,!1]}function Fd(e){var n=dn();return zd(n,Mt,e)}function zd(e,n,s){if(n=$u(e,n,jd)[0],e=rc(Ci)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var f=Ml(n)}catch(T){throw T===Ts?Yo:T}else f=n;n=dn();var x=n.queue,b=x.dispatch;return s!==n.memoizedState&&(Ke.flags|=2048,Ds(9,{destroy:void 0},b2.bind(null,x,s),null)),[f,b,e]}function b2(e,n){e.action=n}function Hd(e){var n=dn(),s=Mt;if(s!==null)return zd(n,s,e);dn(),n=n.memoizedState,s=dn();var f=s.queue.dispatch;return s.memoizedState=e,[n,f,!1]}function Ds(e,n,s,f){return e={tag:e,create:s,deps:f,inst:n,next:null},n=Ke.updateQueue,n===null&&(n=tc(),Ke.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(f=s.next,s.next=e,e.next=f,n.lastEffect=e),e}function Gd(){return dn().memoizedState}function ic(e,n,s,f){var x=Kn();Ke.flags|=e,x.memoizedState=Ds(1|n,{destroy:void 0},s,f===void 0?null:f)}function ac(e,n,s,f){var x=dn();f=f===void 0?null:f;var b=x.memoizedState.inst;Mt!==null&&f!==null&&Yu(f,Mt.memoizedState.deps)?x.memoizedState=Ds(n,b,s,f):(Ke.flags|=e,x.memoizedState=Ds(1|n,b,s,f))}function Vd(e,n){ic(8390656,8,e,n)}function rh(e,n){ac(2048,8,e,n)}function v2(e){Ke.flags|=4;var n=Ke.updateQueue;if(n===null)n=tc(),Ke.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function qd(e){var n=dn().memoizedState;return v2({ref:n,nextImpl:e}),function(){if((_t&2)!==0)throw Error(h(440));return n.impl.apply(void 0,arguments)}}function Xd(e,n){return ac(4,2,e,n)}function Yd(e,n){return ac(4,4,e,n)}function Wd(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Kd(e,n,s){s=s!=null?s.concat([e]):null,ac(4,4,Wd.bind(null,n,e),s)}function ih(){}function Zd(e,n){var s=dn();n=n===void 0?null:n;var f=s.memoizedState;return n!==null&&Yu(n,f[1])?f[0]:(s.memoizedState=[e,n],e)}function Qd(e,n){var s=dn();n=n===void 0?null:n;var f=s.memoizedState;if(n!==null&&Yu(n,f[1]))return f[0];if(f=e(),Ka){Dt(!0);try{e()}finally{Dt(!1)}}return s.memoizedState=[f,n],f}function ah(e,n,s){return s===void 0||(_i&1073741824)!==0&&(ht&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=J0(),Ke.lanes|=e,da|=e,s)}function Jd(e,n,s,f){return d(s,n)?s:Ns.current!==null?(e=ah(e,s,f),d(e,n)||(yn=!0),e):(_i&42)===0||(_i&1073741824)!==0&&(ht&261930)===0?(yn=!0,e.memoizedState=s):(e=J0(),Ke.lanes|=e,da|=e,n)}function $d(e,n,s,f,x){var b=fe.p;fe.p=b!==0&&8>b?b:8;var T=ne.T,B={};ne.T=B,oh(e,!1,n,s);try{var z=x(),te=ne.S;if(te!==null&&te(B,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=p2(z,f);Bl(e,n,ue,br(e))}else Bl(e,n,f,br(e))}catch(ge){Bl(e,n,{then:function(){},status:"rejected",reason:ge},br())}finally{fe.p=b,T!==null&&B.types!==null&&(T.types=B.types),ne.T=T}}function E2(){}function sh(e,n,s,f){if(e.tag!==5)throw Error(h(476));var x=e0(e).queue;$d(e,x,n,Le,s===null?E2:function(){return t0(e),s(f)})}function e0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:Le},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function t0(e){var n=e0(e);n.next===null&&(n=e.alternate.memoizedState),Bl(e,n.next.queue,{},br())}function lh(){return Un(Ql)}function n0(){return dn().memoizedState}function r0(){return dn().memoizedState}function A2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=br();e=la(s);var f=oa(n,e,s);f!==null&&(lr(f,n,s),Nl(f,n,s)),n={cache:Lu()},e.payload=n;return}n=n.return}}function _2(e,n,s){var f=br();s={lane:f,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},sc(e)?a0(n,s):(s=Cu(e,n,s,f),s!==null&&(lr(s,e,f),s0(s,n,f)))}function i0(e,n,s){var f=br();Bl(e,n,s,f)}function Bl(e,n,s,f){var x={lane:f,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(sc(e))a0(n,x);else{var b=e.alternate;if(e.lanes===0&&(b===null||b.lanes===0)&&(b=n.lastRenderedReducer,b!==null))try{var T=n.lastRenderedState,B=b(T,s);if(x.hasEagerState=!0,x.eagerState=B,d(B,T))return Fo(e,n,x,0),Ft===null&&Po(),!1}catch{}if(s=Cu(e,n,x,f),s!==null)return lr(s,e,f),s0(s,n,f),!0}return!1}function oh(e,n,s,f){if(f={lane:2,revertLane:Fh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},sc(e)){if(n)throw Error(h(479))}else n=Cu(e,s,f,2),n!==null&&lr(n,e,2)}function sc(e){var n=e.alternate;return e===Ke||n!==null&&n===Ke}function a0(e,n){Os=$o=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function s0(e,n,s){if((s&4194048)!==0){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,ri(e,s)}}var kl={readContext:Un,use:nc,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};kl.useEffectEvent=rn;var l0={readContext:Un,use:nc,useCallback:function(e,n){return Kn().memoizedState=[e,n===void 0?null:n],e},useContext:Un,useEffect:Vd,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,ic(4194308,4,Wd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ic(4194308,4,e,n)},useInsertionEffect:function(e,n){ic(4,2,e,n)},useMemo:function(e,n){var s=Kn();n=n===void 0?null:n;var f=e();if(Ka){Dt(!0);try{e()}finally{Dt(!1)}}return s.memoizedState=[f,n],f},useReducer:function(e,n,s){var f=Kn();if(s!==void 0){var x=s(n);if(Ka){Dt(!0);try{s(n)}finally{Dt(!1)}}}else x=n;return f.memoizedState=f.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},f.queue=e,e=e.dispatch=_2.bind(null,Ke,e),[f.memoizedState,e]},useRef:function(e){var n=Kn();return e={current:e},n.memoizedState=e},useState:function(e){e=th(e);var n=e.queue,s=i0.bind(null,Ke,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:ih,useDeferredValue:function(e,n){var s=Kn();return ah(s,e,n)},useTransition:function(){var e=th(!1);return e=$d.bind(null,Ke,e.queue,!0,!1),Kn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var f=Ke,x=Kn();if(dt){if(s===void 0)throw Error(h(407));s=s()}else{if(s=n(),Ft===null)throw Error(h(349));(ht&127)!==0||Rd(f,n,s)}x.memoizedState=s;var b={value:s,getSnapshot:n};return x.queue=b,Vd(Od.bind(null,f,b,e),[e]),f.flags|=2048,Ds(9,{destroy:void 0},Nd.bind(null,f,b,s,n),null),s},useId:function(){var e=Kn(),n=Ft.identifierPrefix;if(dt){var s=ci,f=oi;s=(f&~(1<<32-Ze(f)-1)).toString(32)+s,n="_"+n+"R_"+s,s=ec++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=x2++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:lh,useFormState:Pd,useActionState:Pd,useOptimistic:function(e){var n=Kn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=oh.bind(null,Ke,!0,s),s.dispatch=n,[e,n]},useMemoCache:Ju,useCacheRefresh:function(){return Kn().memoizedState=A2.bind(null,Ke)},useEffectEvent:function(e){var n=Kn(),s={impl:e};return n.memoizedState=s,function(){if((_t&2)!==0)throw Error(h(440));return s.impl.apply(void 0,arguments)}}},ch={readContext:Un,use:nc,useCallback:Zd,useContext:Un,useEffect:rh,useImperativeHandle:Kd,useInsertionEffect:Xd,useLayoutEffect:Yd,useMemo:Qd,useReducer:rc,useRef:Gd,useState:function(){return rc(Ci)},useDebugValue:ih,useDeferredValue:function(e,n){var s=dn();return Jd(s,Mt.memoizedState,e,n)},useTransition:function(){var e=rc(Ci)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:Td,useId:n0,useHostTransitionStatus:lh,useFormState:Fd,useActionState:Fd,useOptimistic:function(e,n){var s=dn();return Md(s,Mt,e,n)},useMemoCache:Ju,useCacheRefresh:r0};ch.useEffectEvent=qd;var o0={readContext:Un,use:nc,useCallback:Zd,useContext:Un,useEffect:rh,useImperativeHandle:Kd,useInsertionEffect:Xd,useLayoutEffect:Yd,useMemo:Qd,useReducer:eh,useRef:Gd,useState:function(){return eh(Ci)},useDebugValue:ih,useDeferredValue:function(e,n){var s=dn();return Mt===null?ah(s,e,n):Jd(s,Mt.memoizedState,e,n)},useTransition:function(){var e=eh(Ci)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:Td,useId:n0,useHostTransitionStatus:lh,useFormState:Hd,useActionState:Hd,useOptimistic:function(e,n){var s=dn();return Mt!==null?Md(s,Mt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ju,useCacheRefresh:r0};o0.useEffectEvent=qd;function uh(e,n,s,f){n=e.memoizedState,s=s(f,n),s=s==null?n:R({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var hh={enqueueSetState:function(e,n,s){e=e._reactInternals;var f=br(),x=la(f);x.payload=n,s!=null&&(x.callback=s),n=oa(e,x,f),n!==null&&(lr(n,e,f),Nl(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var f=br(),x=la(f);x.tag=1,x.payload=n,s!=null&&(x.callback=s),n=oa(e,x,f),n!==null&&(lr(n,e,f),Nl(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=br(),f=la(s);f.tag=2,n!=null&&(f.callback=n),n=oa(e,f,s),n!==null&&(lr(n,e,s),Nl(n,e,s))}};function c0(e,n,s,f,x,b,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,b,T):n.prototype&&n.prototype.isPureReactComponent?!m(s,f)||!m(x,b):!0}function u0(e,n,s,f){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,f),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,f),n.state!==e&&hh.enqueueReplaceState(n,n.state,null)}function Za(e,n){var s=n;if("ref"in n){s={};for(var f in n)f!=="ref"&&(s[f]=n[f])}if(e=e.defaultProps){s===n&&(s=R({},s));for(var x in e)s[x]===void 0&&(s[x]=e[x])}return s}function h0(e){jo(e)}function f0(e){console.error(e)}function d0(e){jo(e)}function lc(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(f){setTimeout(function(){throw f})}}function g0(e,n,s){try{var f=e.onCaughtError;f(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function fh(e,n,s){return s=la(s),s.tag=3,s.payload={element:null},s.callback=function(){lc(e,n)},s}function m0(e){return e=la(e),e.tag=3,e}function p0(e,n,s,f){var x=s.type.getDerivedStateFromError;if(typeof x=="function"){var b=f.value;e.payload=function(){return x(b)},e.callback=function(){g0(n,s,f)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){g0(n,s,f),typeof x!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})})}function C2(e,n,s,f,x){if(s.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(n=s.alternate,n!==null&&_s(n,s,x,!0),s=pr.current,s!==null){switch(s.tag){case 31:case 13:return kr===null?wc():s.alternate===null&&an===0&&(an=3),s.flags&=-257,s.flags|=65536,s.lanes=x,f===Wo?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([f]):n.add(f),Uh(e,f,x)),!1;case 22:return s.flags|=65536,f===Wo?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([f])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([f]):s.add(f)),Uh(e,f,x)),!1}throw Error(h(435,s.tag))}return Uh(e,f,x),wc(),!1}if(dt)return n=pr.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,f!==Iu&&(e=Error(h(422),{cause:f}),_l(Ir(e,s)))):(f!==Iu&&(n=Error(h(423),{cause:f}),_l(Ir(n,s))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,f=Ir(f,s),x=fh(e.stateNode,f,x),Hu(e,x),an!==4&&(an=2)),!1;var b=Error(h(520),{cause:f});if(b=Ir(b,s),Gl===null?Gl=[b]:Gl.push(b),an!==4&&(an=2),n===null)return!0;f=Ir(f,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=x&-x,s.lanes|=e,e=fh(s.stateNode,f,e),Hu(s,e),!1;case 1:if(n=s.type,b=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ga===null||!ga.has(b))))return s.flags|=65536,x&=-x,s.lanes|=x,x=m0(x),p0(x,e,s,f),Hu(s,x),!1}s=s.return}while(s!==null);return!1}var dh=Error(h(461)),yn=!1;function jn(e,n,s,f){n.child=e===null?bd(n,null,s,f):Wa(n,e.child,s,f)}function x0(e,n,s,f,x){s=s.render;var b=n.ref;if("ref"in f){var T={};for(var B in f)B!=="ref"&&(T[B]=f[B])}else T=f;return Va(n),f=Wu(e,n,s,T,b,x),B=Ku(),e!==null&&!yn?(Zu(e,n,x),Si(e,n,x)):(dt&&B&&Nu(n),n.flags|=1,jn(e,n,f,x),n.child)}function y0(e,n,s,f,x){if(e===null){var b=s.type;return typeof b=="function"&&!Su(b)&&b.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=b,w0(e,n,b,f,x)):(e=Ho(s.type,null,f,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(b=e.child,!vh(e,x)){var T=b.memoizedProps;if(s=s.compare,s=s!==null?s:m,s(T,f)&&e.ref===n.ref)return Si(e,n,x)}return n.flags|=1,e=bi(b,f),e.ref=n.ref,e.return=n,n.child=e}function w0(e,n,s,f,x){if(e!==null){var b=e.memoizedProps;if(m(b,f)&&e.ref===n.ref)if(yn=!1,n.pendingProps=f=b,vh(e,x))(e.flags&131072)!==0&&(yn=!0);else return n.lanes=e.lanes,Si(e,n,x)}return gh(e,n,s,f,x)}function b0(e,n,s,f){var x=f.children,b=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((n.flags&128)!==0){if(b=b!==null?b.baseLanes|s:s,e!==null){for(f=n.child=e.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~b}else f=0,n.child=null;return v0(e,n,b,s,f)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xo(n,b!==null?b.cachePool:null),b!==null?Ad(n,b):Vu(),_d(n);else return f=n.lanes=536870912,v0(e,n,b!==null?b.baseLanes|s:s,s,f)}else b!==null?(Xo(n,b.cachePool),Ad(n,b),ua(),n.memoizedState=null):(e!==null&&Xo(n,null),Vu(),ua());return jn(e,n,x,s),n.child}function Ll(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function v0(e,n,s,f,x){var b=ju();return b=b===null?null:{parent:pn._currentValue,pool:b},n.memoizedState={baseLanes:s,cachePool:b},e!==null&&Xo(n,null),Vu(),_d(n),e!==null&&_s(e,n,f,!0),n.childLanes=x,null}function oc(e,n){return n=uc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function E0(e,n,s){return Wa(n,e.child,null,s),e=oc(n,n.pendingProps),e.flags|=2,xr(n),n.memoizedState=null,e}function S2(e,n,s){var f=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(dt){if(f.mode==="hidden")return e=oc(n,f),n.lanes=536870912,Ll(null,e);if(Xu(n),(e=qt)?(e=B1(e,Br),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:na!==null?{id:oi,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},s=ad(e),s.return=n,n.child=s,Ln=n,qt=null)):e=null,e===null)throw ia(n);return n.lanes=536870912,null}return oc(n,f)}var b=e.memoizedState;if(b!==null){var T=b.dehydrated;if(Xu(n),x)if(n.flags&256)n.flags&=-257,n=E0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(h(558));else if(yn||_s(e,n,s,!1),x=(s&e.childLanes)!==0,yn||x){if(f=Ft,f!==null&&(T=os(f,s),T!==0&&T!==b.retryLane))throw b.retryLane=T,Fa(e,T),lr(f,e,T),dh;wc(),n=E0(e,n,s)}else e=b.treeContext,qt=Lr(T.nextSibling),Ln=n,dt=!0,ra=null,Br=!1,e!==null&&od(n,e),n=oc(n,f),n.flags|=4096;return n}return e=bi(e.child,{mode:f.mode,children:f.children}),e.ref=n.ref,n.child=e,e.return=n,e}function cc(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(h(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function gh(e,n,s,f,x){return Va(n),s=Wu(e,n,s,f,void 0,x),f=Ku(),e!==null&&!yn?(Zu(e,n,x),Si(e,n,x)):(dt&&f&&Nu(n),n.flags|=1,jn(e,n,s,x),n.child)}function A0(e,n,s,f,x,b){return Va(n),n.updateQueue=null,s=Sd(n,f,s,x),Cd(e),f=Ku(),e!==null&&!yn?(Zu(e,n,b),Si(e,n,b)):(dt&&f&&Nu(n),n.flags|=1,jn(e,n,s,b),n.child)}function _0(e,n,s,f,x){if(Va(n),n.stateNode===null){var b=bs,T=s.contextType;typeof T=="object"&&T!==null&&(b=Un(T)),b=new s(f,b),n.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=hh,n.stateNode=b,b._reactInternals=n,b=n.stateNode,b.props=f,b.state=n.memoizedState,b.refs={},Fu(n),T=s.contextType,b.context=typeof T=="object"&&T!==null?Un(T):bs,b.state=n.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(uh(n,s,T,f),b.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&hh.enqueueReplaceState(b,b.state,null),Il(n,f,b,x),Ol(),b.state=n.memoizedState),typeof b.componentDidMount=="function"&&(n.flags|=4194308),f=!0}else if(e===null){b=n.stateNode;var B=n.memoizedProps,z=Za(s,B);b.props=z;var te=b.context,ue=s.contextType;T=bs,typeof ue=="object"&&ue!==null&&(T=Un(ue));var ge=s.getDerivedStateFromProps;ue=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function",B=n.pendingProps!==B,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(B||te!==T)&&u0(n,b,f,T),sa=!1;var re=n.memoizedState;b.state=re,Il(n,f,b,x),Ol(),te=n.memoizedState,B||re!==te||sa?(typeof ge=="function"&&(uh(n,s,ge,f),te=n.memoizedState),(z=sa||c0(n,s,z,f,re,te,T))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(n.flags|=4194308)):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=f,n.memoizedState=te),b.props=f,b.state=te,b.context=T,f=z):(typeof b.componentDidMount=="function"&&(n.flags|=4194308),f=!1)}else{b=n.stateNode,zu(e,n),T=n.memoizedProps,ue=Za(s,T),b.props=ue,ge=n.pendingProps,re=b.context,te=s.contextType,z=bs,typeof te=="object"&&te!==null&&(z=Un(te)),B=s.getDerivedStateFromProps,(te=typeof B=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ge||re!==z)&&u0(n,b,f,z),sa=!1,re=n.memoizedState,b.state=re,Il(n,f,b,x),Ol();var le=n.memoizedState;T!==ge||re!==le||sa||e!==null&&e.dependencies!==null&&Vo(e.dependencies)?(typeof B=="function"&&(uh(n,s,B,f),le=n.memoizedState),(ue=sa||c0(n,s,ue,f,re,le,z)||e!==null&&e.dependencies!==null&&Vo(e.dependencies))?(te||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,le,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,le,z)),typeof b.componentDidUpdate=="function"&&(n.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),n.memoizedProps=f,n.memoizedState=le),b.props=f,b.state=le,b.context=z,f=ue):(typeof b.componentDidUpdate!="function"||T===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),f=!1)}return b=f,cc(e,n),f=(n.flags&128)!==0,b||f?(b=n.stateNode,s=f&&typeof s.getDerivedStateFromError!="function"?null:b.render(),n.flags|=1,e!==null&&f?(n.child=Wa(n,e.child,null,x),n.child=Wa(n,null,s,x)):jn(e,n,s,x),n.memoizedState=b.state,e=n.child):e=Si(e,n,x),e}function C0(e,n,s,f){return Ha(),n.flags|=256,jn(e,n,s,f),n.child}var mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ph(e){return{baseLanes:e,cachePool:gd()}}function xh(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=wr),e}function S0(e,n,s){var f=n.pendingProps,x=!1,b=(n.flags&128)!==0,T;if((T=b)||(T=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),T&&(x=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(dt){if(x?ca(n):ua(),(e=qt)?(e=B1(e,Br),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:na!==null?{id:oi,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},s=ad(e),s.return=n,n.child=s,Ln=n,qt=null)):e=null,e===null)throw ia(n);return $h(e)?n.lanes=32:n.lanes=536870912,null}var B=f.children;return f=f.fallback,x?(ua(),x=n.mode,B=uc({mode:"hidden",children:B},x),f=za(f,x,s,null),B.return=n,f.return=n,B.sibling=f,n.child=B,f=n.child,f.memoizedState=ph(s),f.childLanes=xh(e,T,s),n.memoizedState=mh,Ll(null,f)):(ca(n),yh(n,B))}var z=e.memoizedState;if(z!==null&&(B=z.dehydrated,B!==null)){if(b)n.flags&256?(ca(n),n.flags&=-257,n=wh(e,n,s)):n.memoizedState!==null?(ua(),n.child=e.child,n.flags|=128,n=null):(ua(),B=f.fallback,x=n.mode,f=uc({mode:"visible",children:f.children},x),B=za(B,x,s,null),B.flags|=2,f.return=n,B.return=n,f.sibling=B,n.child=f,Wa(n,e.child,null,s),f=n.child,f.memoizedState=ph(s),f.childLanes=xh(e,T,s),n.memoizedState=mh,n=Ll(null,f));else if(ca(n),$h(B)){if(T=B.nextSibling&&B.nextSibling.dataset,T)var te=T.dgst;T=te,f=Error(h(419)),f.stack="",f.digest=T,_l({value:f,source:null,stack:null}),n=wh(e,n,s)}else if(yn||_s(e,n,s,!1),T=(s&e.childLanes)!==0,yn||T){if(T=Ft,T!==null&&(f=os(T,s),f!==0&&f!==z.retryLane))throw z.retryLane=f,Fa(e,f),lr(T,e,f),dh;Jh(B)||wc(),n=wh(e,n,s)}else Jh(B)?(n.flags|=192,n.child=e.child,n=null):(e=z.treeContext,qt=Lr(B.nextSibling),Ln=n,dt=!0,ra=null,Br=!1,e!==null&&od(n,e),n=yh(n,f.children),n.flags|=4096);return n}return x?(ua(),B=f.fallback,x=n.mode,z=e.child,te=z.sibling,f=bi(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,te!==null?B=bi(te,B):(B=za(B,x,s,null),B.flags|=2),B.return=n,f.return=n,f.sibling=B,n.child=f,Ll(null,f),f=n.child,B=e.child.memoizedState,B===null?B=ph(s):(x=B.cachePool,x!==null?(z=pn._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=gd(),B={baseLanes:B.baseLanes|s,cachePool:x}),f.memoizedState=B,f.childLanes=xh(e,T,s),n.memoizedState=mh,Ll(e.child,f)):(ca(n),s=e.child,e=s.sibling,s=bi(s,{mode:"visible",children:f.children}),s.return=n,s.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=s,n.memoizedState=null,s)}function yh(e,n){return n=uc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function uc(e,n){return e=mr(22,e,null,n),e.lanes=0,e}function wh(e,n,s){return Wa(n,e.child,null,s),e=yh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function T0(e,n,s){e.lanes|=n;var f=e.alternate;f!==null&&(f.lanes|=n),Bu(e.return,n,s)}function bh(e,n,s,f,x,b){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:f,tail:s,tailMode:x,treeForkCount:b}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=s,T.tailMode=x,T.treeForkCount=b)}function R0(e,n,s){var f=n.pendingProps,x=f.revealOrder,b=f.tail;f=f.children;var T=fn.current,B=(T&2)!==0;if(B?(T=T&1|2,n.flags|=128):T&=1,Ae(fn,T),jn(e,n,f,s),f=dt?Al:0,!B&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&T0(e,s,n);else if(e.tag===19)T0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&Jo(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),bh(n,!1,x,s,b,f);break;case"backwards":case"unstable_legacy-backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&Jo(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}bh(n,!0,s,null,b,f);break;case"together":bh(n,!1,null,null,void 0,f);break;default:n.memoizedState=null}return n.child}function Si(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),da|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(_s(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(h(153));if(n.child!==null){for(e=n.child,s=bi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=bi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function vh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Vo(e)))}function T2(e,n,s){switch(n.tag){case 3:mt(n,n.stateNode.containerInfo),aa(n,pn,e.memoizedState.cache),Ha();break;case 27:case 5:Pr(n);break;case 4:mt(n,n.stateNode.containerInfo);break;case 10:aa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Xu(n),null;break;case 13:var f=n.memoizedState;if(f!==null)return f.dehydrated!==null?(ca(n),n.flags|=128,null):(s&n.child.childLanes)!==0?S0(e,n,s):(ca(n),e=Si(e,n,s),e!==null?e.sibling:null);ca(n);break;case 19:var x=(e.flags&128)!==0;if(f=(s&n.childLanes)!==0,f||(_s(e,n,s,!1),f=(s&n.childLanes)!==0),x){if(f)return R0(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ae(fn,fn.current),f)break;return null;case 22:return n.lanes=0,b0(e,n,s,n.pendingProps);case 24:aa(n,pn,e.memoizedState.cache)}return Si(e,n,s)}function N0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)yn=!0;else{if(!vh(e,s)&&(n.flags&128)===0)return yn=!1,T2(e,n,s);yn=(e.flags&131072)!==0}else yn=!1,dt&&(n.flags&1048576)!==0&&ld(n,Al,n.index);switch(n.lanes=0,n.tag){case 16:e:{var f=n.pendingProps;if(e=Xa(n.elementType),n.type=e,typeof e=="function")Su(e)?(f=Za(e,f),n.tag=1,n=_0(null,n,e,f,s)):(n.tag=0,n=gh(null,n,e,f,s));else{if(e!=null){var x=e.$$typeof;if(x===ce){n.tag=11,n=x0(null,n,e,f,s);break e}else if(x===J){n.tag=14,n=y0(null,n,e,f,s);break e}}throw n=Te(e)||e,Error(h(306,n,""))}}return n;case 0:return gh(e,n,n.type,n.pendingProps,s);case 1:return f=n.type,x=Za(f,n.pendingProps),_0(e,n,f,x,s);case 3:e:{if(mt(n,n.stateNode.containerInfo),e===null)throw Error(h(387));f=n.pendingProps;var b=n.memoizedState;x=b.element,zu(e,n),Il(n,f,null,s);var T=n.memoizedState;if(f=T.cache,aa(n,pn,f),f!==b.cache&&ku(n,[pn],s,!0),Ol(),f=T.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=b,n.memoizedState=b,n.flags&256){n=C0(e,n,f,s);break e}else if(f!==x){x=Ir(Error(h(424)),n),_l(x),n=C0(e,n,f,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,qt=Lr(e.firstChild),Ln=n,dt=!0,ra=null,Br=!0,s=bd(n,null,f,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ha(),f===x){n=Si(e,n,s);break e}jn(e,n,f,s)}n=n.child}return n;case 26:return cc(e,n),e===null?(s=F1(n.type,null,n.pendingProps,null))?n.memoizedState=s:dt||(s=n.type,e=n.pendingProps,f=Sc(Ee.current).createElement(s),f[cn]=n,f[Nt]=e,Pn(f,s,e),tn(f),n.stateNode=f):n.memoizedState=F1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Pr(n),e===null&&dt&&(f=n.stateNode=U1(n.type,n.pendingProps,Ee.current),Ln=n,Br=!0,x=qt,ya(n.type)?(ef=x,qt=Lr(f.firstChild)):qt=x),jn(e,n,n.pendingProps.children,s),cc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&dt&&((x=f=qt)&&(f=rp(f,n.type,n.pendingProps,Br),f!==null?(n.stateNode=f,Ln=n,qt=Lr(f.firstChild),Br=!1,x=!0):x=!1),x||ia(n)),Pr(n),x=n.type,b=n.pendingProps,T=e!==null?e.memoizedProps:null,f=b.children,Kh(x,b)?f=null:T!==null&&Kh(x,T)&&(n.flags|=32),n.memoizedState!==null&&(x=Wu(e,n,y2,null,null,s),Ql._currentValue=x),cc(e,n),jn(e,n,f,s),n.child;case 6:return e===null&&dt&&((e=s=qt)&&(s=ip(s,n.pendingProps,Br),s!==null?(n.stateNode=s,Ln=n,qt=null,e=!0):e=!1),e||ia(n)),null;case 13:return S0(e,n,s);case 4:return mt(n,n.stateNode.containerInfo),f=n.pendingProps,e===null?n.child=Wa(n,null,f,s):jn(e,n,f,s),n.child;case 11:return x0(e,n,n.type,n.pendingProps,s);case 7:return jn(e,n,n.pendingProps,s),n.child;case 8:return jn(e,n,n.pendingProps.children,s),n.child;case 12:return jn(e,n,n.pendingProps.children,s),n.child;case 10:return f=n.pendingProps,aa(n,n.type,f.value),jn(e,n,f.children,s),n.child;case 9:return x=n.type._context,f=n.pendingProps.children,Va(n),x=Un(x),f=f(x),n.flags|=1,jn(e,n,f,s),n.child;case 14:return y0(e,n,n.type,n.pendingProps,s);case 15:return w0(e,n,n.type,n.pendingProps,s);case 19:return R0(e,n,s);case 31:return S2(e,n,s);case 22:return b0(e,n,s,n.pendingProps);case 24:return Va(n),f=Un(pn),e===null?(x=ju(),x===null&&(x=Ft,b=Lu(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=s),x=b),n.memoizedState={parent:f,cache:x},Fu(n),aa(n,pn,x)):((e.lanes&s)!==0&&(zu(e,n),Il(n,null,null,s),Ol()),x=e.memoizedState,b=n.memoizedState,x.parent!==f?(x={parent:f,cache:f},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),aa(n,pn,f)):(f=b.cache,aa(n,pn,f),f!==x.cache&&ku(n,[pn],s,!0))),jn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(h(156,n.tag))}function Ti(e){e.flags|=4}function Eh(e,n,s,f,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(n1())e.flags|=8192;else throw Ya=Wo,Pu}else e.flags&=-16777217}function O0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!q1(n))if(n1())e.flags|=8192;else throw Ya=Wo,Pu}function hc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Cn():536870912,e.lanes|=n,Ls|=n)}function Ul(e,n){if(!dt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,f=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=f,e.childLanes=s,n}function R2(e,n,s){var f=n.pendingProps;switch(Ou(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(n),null;case 1:return Xt(n),null;case 3:return s=n.stateNode,f=null,e!==null&&(f=e.memoizedState.cache),n.memoizedState.cache!==f&&(n.flags|=2048),Ai(pn),Lt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(As(n)?Ti(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Du())),Xt(n),null;case 26:var x=n.type,b=n.memoizedState;return e===null?(Ti(n),b!==null?(Xt(n),O0(n,b)):(Xt(n),Eh(n,x,null,f,s))):b?b!==e.memoizedState?(Ti(n),Xt(n),O0(n,b)):(Xt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==f&&Ti(n),Xt(n),Eh(n,x,e,f,s)),null;case 27:if(An(n),s=Ee.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==f&&Ti(n);else{if(!f){if(n.stateNode===null)throw Error(h(166));return Xt(n),null}e=_e.current,As(n)?cd(n):(e=U1(x,f,s),n.stateNode=e,Ti(n))}return Xt(n),null;case 5:if(An(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==f&&Ti(n);else{if(!f){if(n.stateNode===null)throw Error(h(166));return Xt(n),null}if(b=_e.current,As(n))cd(n);else{var T=Sc(Ee.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?T.createElement(x,{is:f.is}):T.createElement(x)}}b[cn]=n,b[Nt]=f;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=b;e:switch(Pn(b,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ti(n)}}return Xt(n),Eh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==f&&Ti(n);else{if(typeof f!="string"&&n.stateNode===null)throw Error(h(166));if(e=Ee.current,As(n)){if(e=n.stateNode,s=n.memoizedProps,f=null,x=Ln,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}e[cn]=n,e=!!(e.nodeValue===s||f!==null&&f.suppressHydrationWarning===!0||S1(e.nodeValue,s)),e||ia(n,!0)}else e=Sc(e).createTextNode(f),e[cn]=n,n.stateNode=e}return Xt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(f=As(n),s!==null){if(e===null){if(!f)throw Error(h(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(557));e[cn]=n}else Ha(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),e=!1}else s=Du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(xr(n),n):(xr(n),null);if((n.flags&128)!==0)throw Error(h(558))}return Xt(n),null;case 13:if(f=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=As(n),f!==null&&f.dehydrated!==null){if(e===null){if(!x)throw Error(h(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(h(317));x[cn]=n}else Ha(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),x=!1}else x=Du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(xr(n),n):(xr(n),null)}return xr(n),(n.flags&128)!==0?(n.lanes=s,n):(s=f!==null,e=e!==null&&e.memoizedState!==null,s&&(f=n.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==x&&(f.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),hc(n,n.updateQueue),Xt(n),null);case 4:return Lt(),e===null&&Vh(n.stateNode.containerInfo),Xt(n),null;case 10:return Ai(n.type),Xt(n),null;case 19:if(oe(fn),f=n.memoizedState,f===null)return Xt(n),null;if(x=(n.flags&128)!==0,b=f.rendering,b===null)if(x)Ul(f,!1);else{if(an!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(b=Jo(e),b!==null){for(n.flags|=128,Ul(f,!1),e=b.updateQueue,n.updateQueue=e,hc(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)id(s,e),s=s.sibling;return Ae(fn,fn.current&1|2),dt&&vi(n,f.treeForkCount),n.child}e=e.sibling}f.tail!==null&&Jt()>pc&&(n.flags|=128,x=!0,Ul(f,!1),n.lanes=4194304)}else{if(!x)if(e=Jo(b),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,hc(n,e),Ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!dt)return Xt(n),null}else 2*Jt()-f.renderingStartTime>pc&&s!==536870912&&(n.flags|=128,x=!0,Ul(f,!1),n.lanes=4194304);f.isBackwards?(b.sibling=n.child,n.child=b):(e=f.last,e!==null?e.sibling=b:n.child=b,f.last=b)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=Jt(),e.sibling=null,s=fn.current,Ae(fn,x?s&1|2:s&1),dt&&vi(n,f.treeForkCount),e):(Xt(n),null);case 22:case 23:return xr(n),qu(),f=n.memoizedState!==null,e!==null?e.memoizedState!==null!==f&&(n.flags|=8192):f&&(n.flags|=8192),f?(s&536870912)!==0&&(n.flags&128)===0&&(Xt(n),n.subtreeFlags&6&&(n.flags|=8192)):Xt(n),s=n.updateQueue,s!==null&&hc(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),f=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(f=n.memoizedState.cachePool.pool),f!==s&&(n.flags|=2048),e!==null&&oe(qa),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Ai(pn),Xt(n),null;case 25:return null;case 30:return null}throw Error(h(156,n.tag))}function N2(e,n){switch(Ou(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ai(pn),Lt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return An(n),null;case 31:if(n.memoizedState!==null){if(xr(n),n.alternate===null)throw Error(h(340));Ha()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(xr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(h(340));Ha()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return oe(fn),null;case 4:return Lt(),null;case 10:return Ai(n.type),null;case 22:case 23:return xr(n),qu(),e!==null&&oe(qa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ai(pn),null;case 25:return null;default:return null}}function I0(e,n){switch(Ou(n),n.tag){case 3:Ai(pn),Lt();break;case 26:case 27:case 5:An(n);break;case 4:Lt();break;case 31:n.memoizedState!==null&&xr(n);break;case 13:xr(n);break;case 19:oe(fn);break;case 10:Ai(n.type);break;case 22:case 23:xr(n),qu(),e!==null&&oe(qa);break;case 24:Ai(pn)}}function jl(e,n){try{var s=n.updateQueue,f=s!==null?s.lastEffect:null;if(f!==null){var x=f.next;s=x;do{if((s.tag&e)===e){f=void 0;var b=s.create,T=s.inst;f=b(),T.destroy=f}s=s.next}while(s!==x)}}catch(B){It(n,n.return,B)}}function ha(e,n,s){try{var f=n.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var b=x.next;f=b;do{if((f.tag&e)===e){var T=f.inst,B=T.destroy;if(B!==void 0){T.destroy=void 0,x=n;var z=s,te=B;try{te()}catch(ue){It(x,z,ue)}}}f=f.next}while(f!==b)}}catch(ue){It(n,n.return,ue)}}function D0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Ed(n,s)}catch(f){It(e,e.return,f)}}}function M0(e,n,s){s.props=Za(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(f){It(e,n,f)}}function Pl(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var f=e.stateNode;break;case 30:f=e.stateNode;break;default:f=e.stateNode}typeof s=="function"?e.refCleanup=s(f):s.current=f}}catch(x){It(e,n,x)}}function ui(e,n){var s=e.ref,f=e.refCleanup;if(s!==null)if(typeof f=="function")try{f()}catch(x){It(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(x){It(e,n,x)}else s.current=null}function B0(e){var n=e.type,s=e.memoizedProps,f=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&f.focus();break e;case"img":s.src?f.src=s.src:s.srcSet&&(f.srcset=s.srcSet)}}catch(x){It(e,e.return,x)}}function Ah(e,n,s){try{var f=e.stateNode;Q2(f,e.type,s,n),f[Nt]=n}catch(x){It(e,e.return,x)}}function k0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ya(e.type)||e.tag===4}function _h(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||k0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ch(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=er));else if(f!==4&&(f===27&&ya(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Ch(e,n,s),e=e.sibling;e!==null;)Ch(e,n,s),e=e.sibling}function fc(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(f!==4&&(f===27&&ya(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(fc(e,n,s),e=e.sibling;e!==null;)fc(e,n,s),e=e.sibling}function L0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var f=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);Pn(n,f,s),n[cn]=e,n[Nt]=s}catch(b){It(e,e.return,b)}}var Ri=!1,wn=!1,Sh=!1,U0=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function O2(e,n){if(e=e.containerInfo,Yh=Mc,e=O(e),D(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var f=s.getSelection&&s.getSelection();if(f&&f.rangeCount!==0){s=f.anchorNode;var x=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{s.nodeType,b.nodeType}catch{s=null;break e}var T=0,B=-1,z=-1,te=0,ue=0,ge=e,re=null;t:for(;;){for(var le;ge!==s||x!==0&&ge.nodeType!==3||(B=T+x),ge!==b||f!==0&&ge.nodeType!==3||(z=T+f),ge.nodeType===3&&(T+=ge.nodeValue.length),(le=ge.firstChild)!==null;)re=ge,ge=le;for(;;){if(ge===e)break t;if(re===s&&++te===x&&(B=T),re===b&&++ue===f&&(z=T),(le=ge.nextSibling)!==null)break;ge=re,re=ge.parentNode}ge=le}s=B===-1||z===-1?null:{start:B,end:z}}else s=null}s=s||{start:0,end:0}}else s=null;for(Wh={focusedElem:e,selectionRange:s},Mc=!1,Dn=n;Dn!==null;)if(n=Dn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Dn=e;else for(;Dn!==null;){switch(n=Dn,b=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)x=e[s],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&b!==null){e=void 0,s=n,x=b.memoizedProps,b=b.memoizedState,f=s.stateNode;try{var De=Za(s.type,x);e=f.getSnapshotBeforeUpdate(De,b),f.__reactInternalSnapshotBeforeUpdate=e}catch(ze){It(s,s.return,ze)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Qh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(h(163))}if(e=n.sibling,e!==null){e.return=n.return,Dn=e;break}Dn=n.return}}function j0(e,n,s){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Oi(e,s),f&4&&jl(5,s);break;case 1:if(Oi(e,s),f&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){It(s,s.return,T)}else{var x=Za(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){It(s,s.return,T)}}f&64&&D0(s),f&512&&Pl(s,s.return);break;case 3:if(Oi(e,s),f&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Ed(e,n)}catch(T){It(s,s.return,T)}}break;case 27:n===null&&f&4&&L0(s);case 26:case 5:Oi(e,s),n===null&&f&4&&B0(s),f&512&&Pl(s,s.return);break;case 12:Oi(e,s);break;case 31:Oi(e,s),f&4&&z0(e,s);break;case 13:Oi(e,s),f&4&&H0(e,s),f&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=P2.bind(null,s),ap(e,s))));break;case 22:if(f=s.memoizedState!==null||Ri,!f){n=n!==null&&n.memoizedState!==null||wn,x=Ri;var b=wn;Ri=f,(wn=n)&&!b?Ii(e,s,(s.subtreeFlags&8772)!==0):Oi(e,s),Ri=x,wn=b}break;case 30:break;default:Oi(e,s)}}function P0(e){var n=e.alternate;n!==null&&(e.alternate=null,P0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$n(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zt=null,rr=!1;function Ni(e,n,s){for(s=s.child;s!==null;)F0(e,n,s),s=s.sibling}function F0(e,n,s){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(zt,s)}catch{}switch(s.tag){case 26:wn||ui(s,n),Ni(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:wn||ui(s,n);var f=Zt,x=rr;ya(s.type)&&(Zt=s.stateNode,rr=!1),Ni(e,n,s),Wl(s.stateNode),Zt=f,rr=x;break;case 5:wn||ui(s,n);case 6:if(f=Zt,x=rr,Zt=null,Ni(e,n,s),Zt=f,rr=x,Zt!==null)if(rr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(s.stateNode)}catch(b){It(s,n,b)}else try{Zt.removeChild(s.stateNode)}catch(b){It(s,n,b)}break;case 18:Zt!==null&&(rr?(e=Zt,D1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Vs(e)):D1(Zt,s.stateNode));break;case 4:f=Zt,x=rr,Zt=s.stateNode.containerInfo,rr=!0,Ni(e,n,s),Zt=f,rr=x;break;case 0:case 11:case 14:case 15:ha(2,s,n),wn||ha(4,s,n),Ni(e,n,s);break;case 1:wn||(ui(s,n),f=s.stateNode,typeof f.componentWillUnmount=="function"&&M0(s,n,f)),Ni(e,n,s);break;case 21:Ni(e,n,s);break;case 22:wn=(f=wn)||s.memoizedState!==null,Ni(e,n,s),wn=f;break;default:Ni(e,n,s)}}function z0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(s){It(n,n.return,s)}}}function H0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(s){It(n,n.return,s)}}function I2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new U0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new U0),n;default:throw Error(h(435,e.tag))}}function dc(e,n){var s=I2(e);n.forEach(function(f){if(!s.has(f)){s.add(f);var x=F2.bind(null,e,f);f.then(x,x)}})}function ir(e,n){var s=n.deletions;if(s!==null)for(var f=0;f<s.length;f++){var x=s[f],b=e,T=n,B=T;e:for(;B!==null;){switch(B.tag){case 27:if(ya(B.type)){Zt=B.stateNode,rr=!1;break e}break;case 5:Zt=B.stateNode,rr=!1;break e;case 3:case 4:Zt=B.stateNode.containerInfo,rr=!0;break e}B=B.return}if(Zt===null)throw Error(h(160));F0(b,T,x),Zt=null,rr=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)G0(n,e),n=n.sibling}var Yr=null;function G0(e,n){var s=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ir(n,e),ar(e),f&4&&(ha(3,e,e.return),jl(3,e),ha(5,e,e.return));break;case 1:ir(n,e),ar(e),f&512&&(wn||s===null||ui(s,s.return)),f&64&&Ri&&(e=e.updateQueue,e!==null&&(f=e.callbacks,f!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?f:s.concat(f))));break;case 26:var x=Yr;if(ir(n,e),ar(e),f&512&&(wn||s===null||ui(s,s.return)),f&4){var b=s!==null?s.memoizedState:null;if(f=e.memoizedState,s===null)if(f===null)if(e.stateNode===null){e:{f=e.type,s=e.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":b=x.getElementsByTagName("title")[0],(!b||b[Ia]||b[cn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(f),x.head.insertBefore(b,x.querySelector("head > title"))),Pn(b,f,s),b[cn]=e,tn(b),f=b;break e;case"link":var T=G1("link","href",x).get(f+(s.href||""));if(T){for(var B=0;B<T.length;B++)if(b=T[B],b.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&b.getAttribute("rel")===(s.rel==null?null:s.rel)&&b.getAttribute("title")===(s.title==null?null:s.title)&&b.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(B,1);break t}}b=x.createElement(f),Pn(b,f,s),x.head.appendChild(b);break;case"meta":if(T=G1("meta","content",x).get(f+(s.content||""))){for(B=0;B<T.length;B++)if(b=T[B],b.getAttribute("content")===(s.content==null?null:""+s.content)&&b.getAttribute("name")===(s.name==null?null:s.name)&&b.getAttribute("property")===(s.property==null?null:s.property)&&b.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&b.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(B,1);break t}}b=x.createElement(f),Pn(b,f,s),x.head.appendChild(b);break;default:throw Error(h(468,f))}b[cn]=e,tn(b),f=b}e.stateNode=f}else V1(x,e.type,e.stateNode);else e.stateNode=H1(x,f,e.memoizedProps);else b!==f?(b===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):b.count--,f===null?V1(x,e.type,e.stateNode):H1(x,f,e.memoizedProps)):f===null&&e.stateNode!==null&&Ah(e,e.memoizedProps,s.memoizedProps)}break;case 27:ir(n,e),ar(e),f&512&&(wn||s===null||ui(s,s.return)),s!==null&&f&4&&Ah(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ir(n,e),ar(e),f&512&&(wn||s===null||ui(s,s.return)),e.flags&32){x=e.stateNode;try{Yi(x,"")}catch(De){It(e,e.return,De)}}f&4&&e.stateNode!=null&&(x=e.memoizedProps,Ah(e,x,s!==null?s.memoizedProps:x)),f&1024&&(Sh=!0);break;case 6:if(ir(n,e),ar(e),f&4){if(e.stateNode===null)throw Error(h(162));f=e.memoizedProps,s=e.stateNode;try{s.nodeValue=f}catch(De){It(e,e.return,De)}}break;case 3:if(Nc=null,x=Yr,Yr=Tc(n.containerInfo),ir(n,e),Yr=x,ar(e),f&4&&s!==null&&s.memoizedState.isDehydrated)try{Vs(n.containerInfo)}catch(De){It(e,e.return,De)}Sh&&(Sh=!1,V0(e));break;case 4:f=Yr,Yr=Tc(e.stateNode.containerInfo),ir(n,e),ar(e),Yr=f;break;case 12:ir(n,e),ar(e);break;case 31:ir(n,e),ar(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,dc(e,f)));break;case 13:ir(n,e),ar(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(mc=Jt()),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,dc(e,f)));break;case 22:x=e.memoizedState!==null;var z=s!==null&&s.memoizedState!==null,te=Ri,ue=wn;if(Ri=te||x,wn=ue||z,ir(n,e),wn=ue,Ri=te,ar(e),f&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(s===null||z||Ri||wn||Qa(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){z=s=n;try{if(b=z.stateNode,x)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{B=z.stateNode;var ge=z.memoizedProps.style,re=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;B.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(De){It(z,z.return,De)}}}else if(n.tag===6){if(s===null){z=n;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(De){It(z,z.return,De)}}}else if(n.tag===18){if(s===null){z=n;try{var le=z.stateNode;x?M1(le,!0):M1(z.stateNode,!1)}catch(De){It(z,z.return,De)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}f&4&&(f=e.updateQueue,f!==null&&(s=f.retryQueue,s!==null&&(f.retryQueue=null,dc(e,s))));break;case 19:ir(n,e),ar(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,dc(e,f)));break;case 30:break;case 21:break;default:ir(n,e),ar(e)}}function ar(e){var n=e.flags;if(n&2){try{for(var s,f=e.return;f!==null;){if(k0(f)){s=f;break}f=f.return}if(s==null)throw Error(h(160));switch(s.tag){case 27:var x=s.stateNode,b=_h(e);fc(e,b,x);break;case 5:var T=s.stateNode;s.flags&32&&(Yi(T,""),s.flags&=-33);var B=_h(e);fc(e,B,T);break;case 3:case 4:var z=s.stateNode.containerInfo,te=_h(e);Ch(e,te,z);break;default:throw Error(h(161))}}catch(ue){It(e,e.return,ue)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function V0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;V0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Oi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)j0(e,n.alternate,n),n=n.sibling}function Qa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ha(4,n,n.return),Qa(n);break;case 1:ui(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&M0(n,n.return,s),Qa(n);break;case 27:Wl(n.stateNode);case 26:case 5:ui(n,n.return),Qa(n);break;case 22:n.memoizedState===null&&Qa(n);break;case 30:Qa(n);break;default:Qa(n)}e=e.sibling}}function Ii(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var f=n.alternate,x=e,b=n,T=b.flags;switch(b.tag){case 0:case 11:case 15:Ii(x,b,s),jl(4,b);break;case 1:if(Ii(x,b,s),f=b,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(te){It(f,f.return,te)}if(f=b,x=f.updateQueue,x!==null){var B=f.stateNode;try{var z=x.shared.hiddenCallbacks;if(z!==null)for(x.shared.hiddenCallbacks=null,x=0;x<z.length;x++)vd(z[x],B)}catch(te){It(f,f.return,te)}}s&&T&64&&D0(b),Pl(b,b.return);break;case 27:L0(b);case 26:case 5:Ii(x,b,s),s&&f===null&&T&4&&B0(b),Pl(b,b.return);break;case 12:Ii(x,b,s);break;case 31:Ii(x,b,s),s&&T&4&&z0(x,b);break;case 13:Ii(x,b,s),s&&T&4&&H0(x,b);break;case 22:b.memoizedState===null&&Ii(x,b,s),Pl(b,b.return);break;case 30:break;default:Ii(x,b,s)}n=n.sibling}}function Th(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Cl(s))}function Rh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Cl(e))}function Wr(e,n,s,f){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)q0(e,n,s,f),n=n.sibling}function q0(e,n,s,f){var x=n.flags;switch(n.tag){case 0:case 11:case 15:Wr(e,n,s,f),x&2048&&jl(9,n);break;case 1:Wr(e,n,s,f);break;case 3:Wr(e,n,s,f),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Cl(e)));break;case 12:if(x&2048){Wr(e,n,s,f),e=n.stateNode;try{var b=n.memoizedProps,T=b.id,B=b.onPostCommit;typeof B=="function"&&B(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){It(n,n.return,z)}}else Wr(e,n,s,f);break;case 31:Wr(e,n,s,f);break;case 13:Wr(e,n,s,f);break;case 23:break;case 22:b=n.stateNode,T=n.alternate,n.memoizedState!==null?b._visibility&2?Wr(e,n,s,f):Fl(e,n):b._visibility&2?Wr(e,n,s,f):(b._visibility|=2,Ms(e,n,s,f,(n.subtreeFlags&10256)!==0||!1)),x&2048&&Th(T,n);break;case 24:Wr(e,n,s,f),x&2048&&Rh(n.alternate,n);break;default:Wr(e,n,s,f)}}function Ms(e,n,s,f,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var b=e,T=n,B=s,z=f,te=T.flags;switch(T.tag){case 0:case 11:case 15:Ms(b,T,B,z,x),jl(8,T);break;case 23:break;case 22:var ue=T.stateNode;T.memoizedState!==null?ue._visibility&2?Ms(b,T,B,z,x):Fl(b,T):(ue._visibility|=2,Ms(b,T,B,z,x)),x&&te&2048&&Th(T.alternate,T);break;case 24:Ms(b,T,B,z,x),x&&te&2048&&Rh(T.alternate,T);break;default:Ms(b,T,B,z,x)}n=n.sibling}}function Fl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,f=n,x=f.flags;switch(f.tag){case 22:Fl(s,f),x&2048&&Th(f.alternate,f);break;case 24:Fl(s,f),x&2048&&Rh(f.alternate,f);break;default:Fl(s,f)}n=n.sibling}}var zl=8192;function Bs(e,n,s){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)X0(e,n,s),e=e.sibling}function X0(e,n,s){switch(e.tag){case 26:Bs(e,n,s),e.flags&zl&&e.memoizedState!==null&&xp(s,Yr,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,n,s);break;case 3:case 4:var f=Yr;Yr=Tc(e.stateNode.containerInfo),Bs(e,n,s),Yr=f;break;case 22:e.memoizedState===null&&(f=e.alternate,f!==null&&f.memoizedState!==null?(f=zl,zl=16777216,Bs(e,n,s),zl=f):Bs(e,n,s));break;default:Bs(e,n,s)}}function Y0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Hl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var f=n[s];Dn=f,K0(f,e)}Y0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)W0(e),e=e.sibling}function W0(e){switch(e.tag){case 0:case 11:case 15:Hl(e),e.flags&2048&&ha(9,e,e.return);break;case 3:Hl(e);break;case 12:Hl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,gc(e)):Hl(e);break;default:Hl(e)}}function gc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var f=n[s];Dn=f,K0(f,e)}Y0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ha(8,n,n.return),gc(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,gc(n));break;default:gc(n)}e=e.sibling}}function K0(e,n){for(;Dn!==null;){var s=Dn;switch(s.tag){case 0:case 11:case 15:ha(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var f=s.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Cl(s.memoizedState.cache)}if(f=s.child,f!==null)f.return=s,Dn=f;else e:for(s=e;Dn!==null;){f=Dn;var x=f.sibling,b=f.return;if(P0(f),f===s){Dn=null;break e}if(x!==null){x.return=b,Dn=x;break e}Dn=b}}}var D2={getCacheForType:function(e){var n=Un(pn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Un(pn).controller.signal}},M2=typeof WeakMap=="function"?WeakMap:Map,_t=0,Ft=null,at=null,ht=0,Ot=0,yr=null,fa=!1,ks=!1,Nh=!1,Di=0,an=0,da=0,Ja=0,Oh=0,wr=0,Ls=0,Gl=null,sr=null,Ih=!1,mc=0,Z0=0,pc=1/0,xc=null,ga=null,Nn=0,ma=null,Us=null,Mi=0,Dh=0,Mh=null,Q0=null,Vl=0,Bh=null;function br(){return(_t&2)!==0&&ht!==0?ht&-ht:ne.T!==null?Fh():Gn()}function J0(){if(wr===0)if((ht&536870912)===0||dt){var e=ct;ct<<=1,(ct&3932160)===0&&(ct=262144),wr=e}else wr=536870912;return e=pr.current,e!==null&&(e.flags|=32),wr}function lr(e,n,s){(e===Ft&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(js(e,0),pa(e,ht,wr,!1)),ni(e,s),((_t&2)===0||e!==Ft)&&(e===Ft&&((_t&2)===0&&(Ja|=s),an===4&&pa(e,ht,wr,!1)),hi(e))}function $0(e,n,s){if((_t&6)!==0)throw Error(h(327));var f=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Bn(e,n),x=f?L2(e,n):Lh(e,n,!0),b=f;do{if(x===0){ks&&!f&&pa(e,n,0,!1);break}else{if(s=e.current.alternate,b&&!B2(s)){x=Lh(e,n,!1),b=!1;continue}if(x===2){if(b=n,e.errorRecoveryDisabledLanes&b)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var B=e;x=Gl;var z=B.current.memoizedState.isDehydrated;if(z&&(js(B,T).flags|=256),T=Lh(B,T,!1),T!==2){if(Nh&&!z){B.errorRecoveryDisabledLanes|=b,Ja|=b,x=4;break e}b=sr,sr=x,b!==null&&(sr===null?sr=b:sr.push.apply(sr,b))}x=T}if(b=!1,x!==2)continue}}if(x===1){js(e,0),pa(e,n,0,!0);break}e:{switch(f=e,b=x,b){case 0:case 1:throw Error(h(345));case 4:if((n&4194048)!==n)break;case 6:pa(f,n,wr,!fa);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(h(329))}if((n&62914560)===n&&(x=mc+300-Jt(),10<x)){if(pa(f,n,wr,!fa),Oa(f,0,!0)!==0)break e;Mi=n,f.timeoutHandle=O1(e1.bind(null,f,s,sr,xc,Ih,n,wr,Ja,Ls,fa,b,"Throttled",-0,0),x);break e}e1(f,s,sr,xc,Ih,n,wr,Ja,Ls,fa,b,null,-0,0)}}break}while(!0);hi(e)}function e1(e,n,s,f,x,b,T,B,z,te,ue,ge,re,le){if(e.timeoutHandle=-1,ge=n.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},X0(n,b,ge);var De=(b&62914560)===b?mc-Jt():(b&4194048)===b?Z0-Jt():0;if(De=yp(ge,De),De!==null){Mi=b,e.cancelPendingCommit=De(o1.bind(null,e,n,b,s,f,x,T,B,z,ue,ge,null,re,le)),pa(e,b,T,!te);return}}o1(e,n,b,s,f,x,T,B,z)}function B2(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var f=0;f<s.length;f++){var x=s[f],b=x.getSnapshot;x=x.value;try{if(!d(b(),x))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function pa(e,n,s,f){n&=~Oh,n&=~Ja,e.suspendedLanes|=n,e.pingedLanes&=~n,f&&(e.warmLanes|=n),f=e.expirationTimes;for(var x=n;0<x;){var b=31-Ze(x),T=1<<b;f[b]=-1,x&=~T}s!==0&&Ao(e,s,n)}function yc(){return(_t&6)===0?(ql(0),!1):!0}function kh(){if(at!==null){if(Ot===0)var e=at.return;else e=at,Ei=Ga=null,Qu(e),Rs=null,Tl=0,e=at;for(;e!==null;)I0(e.alternate,e),e=e.return;at=null}}function js(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,ep(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Mi=0,kh(),Ft=e,at=s=bi(e.current,null),ht=n,Ot=0,yr=null,fa=!1,ks=Bn(e,n),Nh=!1,Ls=wr=Oh=Ja=da=an=0,sr=Gl=null,Ih=!1,(n&8)!==0&&(n|=n&32);var f=e.entangledLanes;if(f!==0)for(e=e.entanglements,f&=n;0<f;){var x=31-Ze(f),b=1<<x;n|=e[x],f&=~b}return Di=n,Po(),s}function t1(e,n){Ke=null,ne.H=kl,n===Ts||n===Yo?(n=xd(),Ot=3):n===Pu?(n=xd(),Ot=4):Ot=n===dh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yr=n,at===null&&(an=1,lc(e,Ir(n,e.current)))}function n1(){var e=pr.current;return e===null?!0:(ht&4194048)===ht?kr===null:(ht&62914560)===ht||(ht&536870912)!==0?e===kr:!1}function r1(){var e=ne.H;return ne.H=kl,e===null?kl:e}function i1(){var e=ne.A;return ne.A=D2,e}function wc(){an=4,fa||(ht&4194048)!==ht&&pr.current!==null||(ks=!0),(da&134217727)===0&&(Ja&134217727)===0||Ft===null||pa(Ft,ht,wr,!1)}function Lh(e,n,s){var f=_t;_t|=2;var x=r1(),b=i1();(Ft!==e||ht!==n)&&(xc=null,js(e,n)),n=!1;var T=an;e:do try{if(Ot!==0&&at!==null){var B=at,z=yr;switch(Ot){case 8:kh(),T=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(n=!0);var te=Ot;if(Ot=0,yr=null,Ps(e,B,z,te),s&&ks){T=0;break e}break;default:te=Ot,Ot=0,yr=null,Ps(e,B,z,te)}}k2(),T=an;break}catch(ue){t1(e,ue)}while(!0);return n&&e.shellSuspendCounter++,Ei=Ga=null,_t=f,ne.H=x,ne.A=b,at===null&&(Ft=null,ht=0,Po()),T}function k2(){for(;at!==null;)a1(at)}function L2(e,n){var s=_t;_t|=2;var f=r1(),x=i1();Ft!==e||ht!==n?(xc=null,pc=Jt()+500,js(e,n)):ks=Bn(e,n);e:do try{if(Ot!==0&&at!==null){n=at;var b=yr;t:switch(Ot){case 1:Ot=0,yr=null,Ps(e,n,b,1);break;case 2:case 9:if(md(b)){Ot=0,yr=null,s1(n);break}n=function(){Ot!==2&&Ot!==9||Ft!==e||(Ot=7),hi(e)},b.then(n,n);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:md(b)?(Ot=0,yr=null,s1(n)):(Ot=0,yr=null,Ps(e,n,b,7));break;case 5:var T=null;switch(at.tag){case 26:T=at.memoizedState;case 5:case 27:var B=at;if(T?q1(T):B.stateNode.complete){Ot=0,yr=null;var z=B.sibling;if(z!==null)at=z;else{var te=B.return;te!==null?(at=te,bc(te)):at=null}break t}}Ot=0,yr=null,Ps(e,n,b,5);break;case 6:Ot=0,yr=null,Ps(e,n,b,6);break;case 8:kh(),an=6;break e;default:throw Error(h(462))}}U2();break}catch(ue){t1(e,ue)}while(!0);return Ei=Ga=null,ne.H=f,ne.A=x,_t=s,at!==null?0:(Ft=null,ht=0,Po(),an)}function U2(){for(;at!==null&&!ss();)a1(at)}function a1(e){var n=N0(e.alternate,e,Di);e.memoizedProps=e.pendingProps,n===null?bc(e):at=n}function s1(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=A0(s,n,n.pendingProps,n.type,void 0,ht);break;case 11:n=A0(s,n,n.pendingProps,n.type.render,n.ref,ht);break;case 5:Qu(n);default:I0(s,n),n=at=id(n,Di),n=N0(s,n,Di)}e.memoizedProps=e.pendingProps,n===null?bc(e):at=n}function Ps(e,n,s,f){Ei=Ga=null,Qu(n),Rs=null,Tl=0;var x=n.return;try{if(C2(e,x,n,s,ht)){an=1,lc(e,Ir(s,e.current)),at=null;return}}catch(b){if(x!==null)throw at=x,b;an=1,lc(e,Ir(s,e.current)),at=null;return}n.flags&32768?(dt||f===1?e=!0:ks||(ht&536870912)!==0?e=!1:(fa=e=!0,(f===2||f===9||f===3||f===6)&&(f=pr.current,f!==null&&f.tag===13&&(f.flags|=16384))),l1(n,e)):bc(n)}function bc(e){var n=e;do{if((n.flags&32768)!==0){l1(n,fa);return}e=n.return;var s=R2(n.alternate,n,Di);if(s!==null){at=s;return}if(n=n.sibling,n!==null){at=n;return}at=n=e}while(n!==null);an===0&&(an=5)}function l1(e,n){do{var s=N2(e.alternate,e);if(s!==null){s.flags&=32767,at=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){at=e;return}at=e=s}while(e!==null);an=6,at=null}function o1(e,n,s,f,x,b,T,B,z){e.cancelPendingCommit=null;do vc();while(Nn!==0);if((_t&6)!==0)throw Error(h(327));if(n!==null){if(n===e.current)throw Error(h(177));if(b=n.lanes|n.childLanes,b|=_u,Sr(e,s,b,T,B,z),e===Ft&&(at=Ft=null,ht=0),Us=n,ma=e,Mi=s,Dh=b,Mh=x,Q0=f,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,z2(or,function(){return d1(),null})):(e.callbackNode=null,e.callbackPriority=0),f=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||f){f=ne.T,ne.T=null,x=fe.p,fe.p=2,T=_t,_t|=4;try{O2(e,n,s)}finally{_t=T,fe.p=x,ne.T=f}}Nn=1,c1(),u1(),h1()}}function c1(){if(Nn===1){Nn=0;var e=ma,n=Us,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=ne.T,ne.T=null;var f=fe.p;fe.p=2;var x=_t;_t|=4;try{G0(n,e);var b=Wh,T=O(e.containerInfo),B=b.focusedElem,z=b.selectionRange;if(T!==B&&B&&B.ownerDocument&&S(B.ownerDocument.documentElement,B)){if(z!==null&&D(B)){var te=z.start,ue=z.end;if(ue===void 0&&(ue=te),"selectionStart"in B)B.selectionStart=te,B.selectionEnd=Math.min(ue,B.value.length);else{var ge=B.ownerDocument||document,re=ge&&ge.defaultView||window;if(re.getSelection){var le=re.getSelection(),De=B.textContent.length,ze=Math.min(z.start,De),kt=z.end===void 0?ze:Math.min(z.end,De);!le.extend&&ze>kt&&(T=kt,kt=ze,ze=T);var K=A(B,ze),q=A(B,kt);if(K&&q&&(le.rangeCount!==1||le.anchorNode!==K.node||le.anchorOffset!==K.offset||le.focusNode!==q.node||le.focusOffset!==q.offset)){var $=ge.createRange();$.setStart(K.node,K.offset),le.removeAllRanges(),ze>kt?(le.addRange($),le.extend(q.node,q.offset)):($.setEnd(q.node,q.offset),le.addRange($))}}}}for(ge=[],le=B;le=le.parentNode;)le.nodeType===1&&ge.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<ge.length;B++){var de=ge[B];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Mc=!!Yh,Wh=Yh=null}finally{_t=x,fe.p=f,ne.T=s}}e.current=n,Nn=2}}function u1(){if(Nn===2){Nn=0;var e=ma,n=Us,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=ne.T,ne.T=null;var f=fe.p;fe.p=2;var x=_t;_t|=4;try{j0(e,n.alternate,n)}finally{_t=x,fe.p=f,ne.T=s}}Nn=3}}function h1(){if(Nn===4||Nn===3){Nn=0,Eo();var e=ma,n=Us,s=Mi,f=Q0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Nn=5:(Nn=0,Us=ma=null,f1(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(ga=null),Fr(s),n=n.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(zt,n,void 0,(n.current.flags&128)===128)}catch{}if(f!==null){n=ne.T,x=fe.p,fe.p=2,ne.T=null;try{for(var b=e.onRecoverableError,T=0;T<f.length;T++){var B=f[T];b(B.value,{componentStack:B.stack})}}finally{ne.T=n,fe.p=x}}(Mi&3)!==0&&vc(),hi(e),x=e.pendingLanes,(s&261930)!==0&&(x&42)!==0?e===Bh?Vl++:(Vl=0,Bh=e):Vl=0,ql(0)}}function f1(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Cl(n)))}function vc(){return c1(),u1(),h1(),d1()}function d1(){if(Nn!==5)return!1;var e=ma,n=Dh;Dh=0;var s=Fr(Mi),f=ne.T,x=fe.p;try{fe.p=32>s?32:s,ne.T=null,s=Mh,Mh=null;var b=ma,T=Mi;if(Nn=0,Us=ma=null,Mi=0,(_t&6)!==0)throw Error(h(331));var B=_t;if(_t|=4,W0(b.current),q0(b,b.current,T,s),_t=B,ql(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(zt,b)}catch{}return!0}finally{fe.p=x,ne.T=f,f1(e,n)}}function g1(e,n,s){n=Ir(s,n),n=fh(e.stateNode,n,2),e=oa(e,n,2),e!==null&&(ni(e,2),hi(e))}function It(e,n,s){if(e.tag===3)g1(e,e,s);else for(;n!==null;){if(n.tag===3){g1(n,e,s);break}else if(n.tag===1){var f=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ga===null||!ga.has(f))){e=Ir(s,e),s=m0(2),f=oa(n,s,2),f!==null&&(p0(s,f,n,e),ni(f,2),hi(f));break}}n=n.return}}function Uh(e,n,s){var f=e.pingCache;if(f===null){f=e.pingCache=new M2;var x=new Set;f.set(n,x)}else x=f.get(n),x===void 0&&(x=new Set,f.set(n,x));x.has(s)||(Nh=!0,x.add(s),e=j2.bind(null,e,n,s),n.then(e,e))}function j2(e,n,s){var f=e.pingCache;f!==null&&f.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ft===e&&(ht&s)===s&&(an===4||an===3&&(ht&62914560)===ht&&300>Jt()-mc?(_t&2)===0&&js(e,0):Oh|=s,Ls===ht&&(Ls=0)),hi(e)}function m1(e,n){n===0&&(n=Cn()),e=Fa(e,n),e!==null&&(ni(e,n),hi(e))}function P2(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),m1(e,s)}function F2(e,n){var s=0;switch(e.tag){case 31:case 13:var f=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:f=e.stateNode;break;case 22:f=e.stateNode._retryCache;break;default:throw Error(h(314))}f!==null&&f.delete(n),m1(e,s)}function z2(e,n){return zi(e,n)}var Ec=null,Fs=null,jh=!1,Ac=!1,Ph=!1,xa=0;function hi(e){e!==Fs&&e.next===null&&(Fs===null?Ec=Fs=e:Fs=Fs.next=e),Ac=!0,jh||(jh=!0,G2())}function ql(e,n){if(!Ph&&Ac){Ph=!0;do for(var s=!1,f=Ec;f!==null;){if(e!==0){var x=f.pendingLanes;if(x===0)var b=0;else{var T=f.suspendedLanes,B=f.pingedLanes;b=(1<<31-Ze(42|e)+1)-1,b&=x&~(T&~B),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(s=!0,w1(f,b))}else b=ht,b=Oa(f,f===Ft?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Bn(f,b)||(s=!0,w1(f,b));f=f.next}while(s);Ph=!1}}function H2(){p1()}function p1(){Ac=jh=!1;var e=0;xa!==0&&$2()&&(e=xa);for(var n=Jt(),s=null,f=Ec;f!==null;){var x=f.next,b=x1(f,n);b===0?(f.next=null,s===null?Ec=x:s.next=x,x===null&&(Fs=s)):(s=f,(e!==0||(b&3)!==0)&&(Ac=!0)),f=x}Nn!==0&&Nn!==5||ql(e),xa!==0&&(xa=0)}function x1(e,n){for(var s=e.suspendedLanes,f=e.pingedLanes,x=e.expirationTimes,b=e.pendingLanes&-62914561;0<b;){var T=31-Ze(b),B=1<<T,z=x[T];z===-1?((B&s)===0||(B&f)!==0)&&(x[T]=fl(B,n)):z<=n&&(e.expiredLanes|=B),b&=~B}if(n=Ft,s=ht,s=Oa(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f=e.callbackNode,s===0||e===n&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return f!==null&&f!==null&&Ie(f),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Bn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(f!==null&&Ie(f),Fr(s)){case 2:case 8:s=cl;break;case 32:s=or;break;case 268435456:s=ul;break;default:s=or}return f=y1.bind(null,e),s=zi(s,f),e.callbackPriority=n,e.callbackNode=s,n}return f!==null&&f!==null&&Ie(f),e.callbackPriority=2,e.callbackNode=null,2}function y1(e,n){if(Nn!==0&&Nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(vc()&&e.callbackNode!==s)return null;var f=ht;return f=Oa(e,e===Ft?f:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f===0?null:($0(e,f,n),x1(e,Jt()),e.callbackNode!=null&&e.callbackNode===s?y1.bind(null,e):null)}function w1(e,n){if(vc())return null;$0(e,n,!0)}function G2(){tp(function(){(_t&6)!==0?zi(Jn,H2):p1()})}function Fh(){if(xa===0){var e=Cs;e===0&&(e=Na,Na<<=1,(Na&261888)===0&&(Na=256)),xa=e}return xa}function b1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wi(""+e)}function v1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function V2(e,n,s,f,x){if(n==="submit"&&s&&s.stateNode===x){var b=b1((x[Nt]||null).action),T=f.submitter;T&&(n=(n=T[Nt]||null)?b1(n.formAction):T.getAttribute("formAction"),n!==null&&(b=n,T=null));var B=new Sn("action","action",null,f,x);e.push({event:B,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(xa!==0){var z=T?v1(x,T):new FormData(x);sh(s,{pending:!0,data:z,method:x.method,action:b},null,z)}}else typeof b=="function"&&(B.preventDefault(),z=T?v1(x,T):new FormData(x),sh(s,{pending:!0,data:z,method:x.method,action:b},b,z))},currentTarget:x}]})}}for(var zh=0;zh<El.length;zh++){var Hh=El[zh],q2=Hh.toLowerCase(),X2=Hh[0].toUpperCase()+Hh.slice(1);Xr(q2,"on"+X2)}Xr(nr,"onAnimationEnd"),Xr(kn,"onAnimationIteration"),Xr(Tt,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(Rn,"onTransitionRun"),Xr(Wn,"onTransitionStart"),Xr(ta,"onTransitionCancel"),Xr(wi,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),Ct("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ct("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ct("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function E1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var f=e[s],x=f.event;f=f.listeners;e:{var b=void 0;if(n)for(var T=f.length-1;0<=T;T--){var B=f[T],z=B.instance,te=B.currentTarget;if(B=B.listener,z!==b&&x.isPropagationStopped())break e;b=B,x.currentTarget=te;try{b(x)}catch(ue){jo(ue)}x.currentTarget=null,b=z}else for(T=0;T<f.length;T++){if(B=f[T],z=B.instance,te=B.currentTarget,B=B.listener,z!==b&&x.isPropagationStopped())break e;b=B,x.currentTarget=te;try{b(x)}catch(ue){jo(ue)}x.currentTarget=null,b=z}}}}function st(e,n){var s=n[Hi];s===void 0&&(s=n[Hi]=new Set);var f=e+"__bubble";s.has(f)||(A1(n,e,2,!1),s.add(f))}function Gh(e,n,s){var f=0;n&&(f|=4),A1(s,e,f,n)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Vh(e){if(!e[_c]){e[_c]=!0,me.forEach(function(s){s!=="selectionchange"&&(Y2.has(s)||Gh(s,!1,e),Gh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_c]||(n[_c]=!0,Gh("selectionchange",!1,n))}}function A1(e,n,s,f){switch(J1(n)){case 2:var x=vp;break;case 8:x=Ep;break;default:x=sf}s=x.bind(null,n,s,e),x=void 0,!ml||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),f?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function qh(e,n,s,f,x){var b=f;if((n&1)===0&&(n&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var B=f.stateNode.containerInfo;if(B===x)break;if(T===4)for(T=f.return;T!==null;){var z=T.tag;if((z===3||z===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;B!==null;){if(T=en(B),T===null)return;if(z=T.tag,z===5||z===6||z===26||z===27){f=b=T;continue e}B=B.parentNode}}f=f.return}To(function(){var te=b,ue=gl(s),ge=[];e:{var re=Uo.get(e);if(re!==void 0){var le=Sn,De=e;switch(e){case"keypress":if(ii(s)===0)break e;case"keydown":case"keyup":le=ps;break;case"focusin":De="focus",le=yl;break;case"focusout":De="blur",le=yl;break;case"beforeblur":case"afterblur":le=yl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=At;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=gs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=vu;break;case nr:case kn:case Tt:le=Qe;break;case wi:le=mi;break;case"scroll":case"scrollend":le=Ro;break;case"wheel":le=Eu;break;case"copy":case"cut":case"paste":le=ms;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=St;break;case"toggle":case"beforetoggle":le=bl}var ze=(n&4)!==0,kt=!ze&&(e==="scroll"||e==="scrollend"),K=ze?re!==null?re+"Capture":null:re;ze=[];for(var q=te,$;q!==null;){var de=q;if($=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||$===null||K===null||(de=qe(q,K),de!=null&&ze.push(Yl(q,de,$))),kt)break;q=q.return}0<ze.length&&(re=new le(re,De,null,s,ue),ge.push({event:re,listeners:ze}))}}if((n&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",le=e==="mouseout"||e==="pointerout",re&&s!==Da&&(De=s.relatedTarget||s.fromElement)&&(en(De)||De[cr]))break e;if((le||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,le?(De=s.relatedTarget||s.toElement,le=te,De=De?en(De):null,De!==null&&(kt=g(De),ze=De.tag,De!==kt||ze!==5&&ze!==27&&ze!==6)&&(De=null)):(le=null,De=te),le!==De)){if(ze=At,de="onMouseLeave",K="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(ze=St,de="onPointerLeave",K="onPointerEnter",q="pointer"),kt=le==null?re:Gi(le),$=De==null?re:Gi(De),re=new ze(de,q+"leave",le,s,ue),re.target=kt,re.relatedTarget=$,de=null,en(ue)===te&&(ze=new ze(K,q+"enter",De,s,ue),ze.target=$,ze.relatedTarget=kt,de=ze),kt=de,le&&De)t:{for(ze=W2,K=le,q=De,$=0,de=K;de;de=ze(de))$++;de=0;for(var je=q;je;je=ze(je))de++;for(;0<$-de;)K=ze(K),$--;for(;0<de-$;)q=ze(q),de--;for(;$--;){if(K===q||q!==null&&K===q.alternate){ze=K;break t}K=ze(K),q=ze(q)}ze=null}else ze=null;le!==null&&_1(ge,re,le,ze,!1),De!==null&&kt!==null&&_1(ge,kt,De,ze,!0)}}e:{if(re=te?Gi(te):window,le=re.nodeName&&re.nodeName.toLowerCase(),le==="select"||le==="input"&&re.type==="file")var bt=gr;else if(vl(re))if(Lo)bt=c;else{bt=r;var Be=t}else le=re.nodeName,!le||le.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&Ut(te.elementType)&&(bt=gr):bt=a;if(bt&&(bt=bt(e,te))){dr(ge,bt,s,ue);break e}Be&&Be(e,re,te),e==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&L(re,"number",re.value)}switch(Be=te?Gi(te):window,e){case"focusin":(vl(Be)||Be.contentEditable==="true")&&(G=Be,V=te,Z=null);break;case"focusout":Z=V=G=null;break;case"mousedown":ae=!0;break;case"contextmenu":case"mouseup":case"dragend":ae=!1,ye(ge,s,ue);break;case"selectionchange":if(U)break;case"keydown":case"keyup":ye(ge,s,ue)}var Je;if(ka)e:{switch(e){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else ea?ko(e,s)&&(ft="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ft="onCompositionStart");ft&&(Bo&&s.locale!=="ko"&&(ea||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&ea&&(Je=Ki()):(Vr=ue,qr="value"in Vr?Vr.value:Vr.textContent,ea=!0)),Be=Cc(te,ft),0<Be.length&&(ft=new Io(ft,e,null,s,ue),ge.push({event:ft,listeners:Be}),Je?ft.data=Je:(Je=$i(s),Je!==null&&(ft.data=Je)))),(Je=Mo?li(e,s):ys(e,s))&&(ft=Cc(te,"onBeforeInput"),0<ft.length&&(Be=new Io("onBeforeInput","beforeinput",null,s,ue),ge.push({event:Be,listeners:ft}),Be.data=Je)),V2(ge,e,te,s,ue)}E1(ge,n)})}function Yl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Cc(e,n){for(var s=n+"Capture",f=[];e!==null;){var x=e,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=qe(e,s),x!=null&&f.unshift(Yl(e,x,b)),x=qe(e,n),x!=null&&f.push(Yl(e,x,b))),e.tag===3)return f;e=e.return}return[]}function W2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _1(e,n,s,f,x){for(var b=n._reactName,T=[];s!==null&&s!==f;){var B=s,z=B.alternate,te=B.stateNode;if(B=B.tag,z!==null&&z===f)break;B!==5&&B!==26&&B!==27||te===null||(z=te,x?(te=qe(s,b),te!=null&&T.unshift(Yl(s,te,z))):x||(te=qe(s,b),te!=null&&T.push(Yl(s,te,z)))),s=s.return}T.length!==0&&e.push({event:n,listeners:T})}var K2=/\r\n?/g,Z2=/\u0000|\uFFFD/g;function C1(e){return(typeof e=="string"?e:""+e).replace(K2,`
`).replace(Z2,"")}function S1(e,n){return n=C1(n),C1(e)===n}function Bt(e,n,s,f,x,b){switch(s){case"children":typeof f=="string"?n==="body"||n==="textarea"&&f===""||Yi(e,f):(typeof f=="number"||typeof f=="bigint")&&n!=="body"&&Yi(e,""+f);break;case"className":qi(e,"class",f);break;case"tabIndex":qi(e,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":qi(e,s,f);break;case"style":Ue(e,f,b);break;case"data":if(n!=="object"){qi(e,"data",f);break}case"src":case"href":if(f===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(s);break}f=Wi(""+f),e.setAttribute(s,f);break;case"action":case"formAction":if(typeof f=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(s==="formAction"?(n!=="input"&&Bt(e,n,"name",x.name,x,null),Bt(e,n,"formEncType",x.formEncType,x,null),Bt(e,n,"formMethod",x.formMethod,x,null),Bt(e,n,"formTarget",x.formTarget,x,null)):(Bt(e,n,"encType",x.encType,x,null),Bt(e,n,"method",x.method,x,null),Bt(e,n,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(s);break}f=Wi(""+f),e.setAttribute(s,f);break;case"onClick":f!=null&&(e.onclick=er);break;case"onScroll":f!=null&&st("scroll",e);break;case"onScrollEnd":f!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(h(61));if(s=f.__html,s!=null){if(x.children!=null)throw Error(h(60));e.innerHTML=s}}break;case"multiple":e.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":e.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){e.removeAttribute("xlink:href");break}s=Wi(""+f),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(s,""+f):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":f===!0?e.setAttribute(s,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(s,f):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?e.setAttribute(s,f):e.removeAttribute(s);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?e.removeAttribute(s):e.setAttribute(s,f);break;case"popover":st("beforetoggle",e),st("toggle",e),Vi(e,"popover",f);break;case"xlinkActuate":hr(e,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":hr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":hr(e,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":hr(e,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":hr(e,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":hr(e,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":hr(e,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":hr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":hr(e,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vi(e,"is",f);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=So.get(s)||s,Vi(e,s,f))}}function Xh(e,n,s,f,x,b){switch(s){case"style":Ue(e,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(h(61));if(s=f.__html,s!=null){if(x.children!=null)throw Error(h(60));e.innerHTML=s}}break;case"children":typeof f=="string"?Yi(e,f):(typeof f=="number"||typeof f=="bigint")&&Yi(e,""+f);break;case"onScroll":f!=null&&st("scroll",e);break;case"onScrollEnd":f!=null&&st("scrollend",e);break;case"onClick":f!=null&&(e.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(x=s.endsWith("Capture"),n=s.slice(2,x?s.length-7:void 0),b=e[Nt]||null,b=b!=null?b[s]:null,typeof b=="function"&&e.removeEventListener(n,b,x),typeof f=="function")){typeof b!="function"&&b!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,f,x);break e}s in e?e[s]=f:f===!0?e.setAttribute(s,""):Vi(e,s,f)}}}function Pn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var f=!1,x=!1,b;for(b in s)if(s.hasOwnProperty(b)){var T=s[b];if(T!=null)switch(b){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:Bt(e,n,b,T,s,null)}}x&&Bt(e,n,"srcSet",s.srcSet,s,null),f&&Bt(e,n,"src",s.src,s,null);return;case"input":st("invalid",e);var B=b=T=x=null,z=null,te=null;for(f in s)if(s.hasOwnProperty(f)){var ue=s[f];if(ue!=null)switch(f){case"name":x=ue;break;case"type":T=ue;break;case"checked":z=ue;break;case"defaultChecked":te=ue;break;case"value":b=ue;break;case"defaultValue":B=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(h(137,n));break;default:Bt(e,n,f,ue,s,null)}}Q(e,b,B,z,te,T,x,!1);return;case"select":st("invalid",e),f=T=b=null;for(x in s)if(s.hasOwnProperty(x)&&(B=s[x],B!=null))switch(x){case"value":b=B;break;case"defaultValue":T=B;break;case"multiple":f=B;default:Bt(e,n,x,B,s,null)}n=b,s=T,e.multiple=!!f,n!=null?Me(e,!!f,n,!1):s!=null&&Me(e,!!f,s,!0);return;case"textarea":st("invalid",e),b=x=f=null;for(T in s)if(s.hasOwnProperty(T)&&(B=s[T],B!=null))switch(T){case"value":f=B;break;case"defaultValue":x=B;break;case"children":b=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(h(91));break;default:Bt(e,n,T,B,s,null)}Xn(e,f,x,b);return;case"option":for(z in s)s.hasOwnProperty(z)&&(f=s[z],f!=null)&&(z==="selected"?e.selected=f&&typeof f!="function"&&typeof f!="symbol":Bt(e,n,z,f,s,null));return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(f=0;f<Xl.length;f++)st(Xl[f],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in s)if(s.hasOwnProperty(te)&&(f=s[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:Bt(e,n,te,f,s,null)}return;default:if(Ut(n)){for(ue in s)s.hasOwnProperty(ue)&&(f=s[ue],f!==void 0&&Xh(e,n,ue,f,s,void 0));return}}for(B in s)s.hasOwnProperty(B)&&(f=s[B],f!=null&&Bt(e,n,B,f,s,null))}function Q2(e,n,s,f){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,T=null,B=null,z=null,te=null,ue=null;for(le in s){var ge=s[le];if(s.hasOwnProperty(le)&&ge!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=ge;default:f.hasOwnProperty(le)||Bt(e,n,le,null,f,ge)}}for(var re in f){var le=f[re];if(ge=s[re],f.hasOwnProperty(re)&&(le!=null||ge!=null))switch(re){case"type":b=le;break;case"name":x=le;break;case"checked":te=le;break;case"defaultChecked":ue=le;break;case"value":T=le;break;case"defaultValue":B=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(h(137,n));break;default:le!==ge&&Bt(e,n,re,le,f,ge)}}gn(e,T,B,z,te,ue,b,x);return;case"select":le=T=B=re=null;for(b in s)if(z=s[b],s.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":le=z;default:f.hasOwnProperty(b)||Bt(e,n,b,null,f,z)}for(x in f)if(b=f[x],z=s[x],f.hasOwnProperty(x)&&(b!=null||z!=null))switch(x){case"value":re=b;break;case"defaultValue":B=b;break;case"multiple":T=b;default:b!==z&&Bt(e,n,x,b,f,z)}n=B,s=T,f=le,re!=null?Me(e,!!s,re,!1):!!f!=!!s&&(n!=null?Me(e,!!s,n,!0):Me(e,!!s,s?[]:"",!1));return;case"textarea":le=re=null;for(B in s)if(x=s[B],s.hasOwnProperty(B)&&x!=null&&!f.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Bt(e,n,B,null,f,x)}for(T in f)if(x=f[T],b=s[T],f.hasOwnProperty(T)&&(x!=null||b!=null))switch(T){case"value":re=x;break;case"defaultValue":le=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(h(91));break;default:x!==b&&Bt(e,n,T,x,f,b)}un(e,re,le);return;case"option":for(var De in s)re=s[De],s.hasOwnProperty(De)&&re!=null&&!f.hasOwnProperty(De)&&(De==="selected"?e.selected=!1:Bt(e,n,De,null,f,re));for(z in f)re=f[z],le=s[z],f.hasOwnProperty(z)&&re!==le&&(re!=null||le!=null)&&(z==="selected"?e.selected=re&&typeof re!="function"&&typeof re!="symbol":Bt(e,n,z,re,f,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in s)re=s[ze],s.hasOwnProperty(ze)&&re!=null&&!f.hasOwnProperty(ze)&&Bt(e,n,ze,null,f,re);for(te in f)if(re=f[te],le=s[te],f.hasOwnProperty(te)&&re!==le&&(re!=null||le!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(h(137,n));break;default:Bt(e,n,te,re,f,le)}return;default:if(Ut(n)){for(var kt in s)re=s[kt],s.hasOwnProperty(kt)&&re!==void 0&&!f.hasOwnProperty(kt)&&Xh(e,n,kt,void 0,f,re);for(ue in f)re=f[ue],le=s[ue],!f.hasOwnProperty(ue)||re===le||re===void 0&&le===void 0||Xh(e,n,ue,re,f,le);return}}for(var K in s)re=s[K],s.hasOwnProperty(K)&&re!=null&&!f.hasOwnProperty(K)&&Bt(e,n,K,null,f,re);for(ge in f)re=f[ge],le=s[ge],!f.hasOwnProperty(ge)||re===le||re==null&&le==null||Bt(e,n,ge,re,f,le)}function T1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),f=0;f<s.length;f++){var x=s[f],b=x.transferSize,T=x.initiatorType,B=x.duration;if(b&&B&&T1(T)){for(T=0,B=x.responseEnd,f+=1;f<s.length;f++){var z=s[f],te=z.startTime;if(te>B)break;var ue=z.transferSize,ge=z.initiatorType;ue&&T1(ge)&&(z=z.responseEnd,T+=ue*(z<B?1:(B-te)/(z-te)))}if(--f,n+=8*(b+T)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Yh=null,Wh=null;function Sc(e){return e.nodeType===9?e:e.ownerDocument}function R1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Kh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Zh=null;function $2(){var e=window.event;return e&&e.type==="popstate"?e===Zh?!1:(Zh=e,!0):(Zh=null,!1)}var O1=typeof setTimeout=="function"?setTimeout:void 0,ep=typeof clearTimeout=="function"?clearTimeout:void 0,I1=typeof Promise=="function"?Promise:void 0,tp=typeof queueMicrotask=="function"?queueMicrotask:typeof I1<"u"?function(e){return I1.resolve(null).then(e).catch(np)}:O1;function np(e){setTimeout(function(){throw e})}function ya(e){return e==="head"}function D1(e,n){var s=n,f=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"||s==="/&"){if(f===0){e.removeChild(x),Vs(n);return}f--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")f++;else if(s==="html")Wl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Wl(s);for(var b=s.firstChild;b;){var T=b.nextSibling,B=b.nodeName;b[Ia]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=T}}else s==="body"&&Wl(e.ownerDocument.body);s=x}while(s);Vs(n)}function M1(e,n){var s=e;e=0;do{var f=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=f}while(s)}function Qh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Qh(s),$n(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function rp(e,n,s,f){for(;e.nodeType===1;){var x=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!f&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(f){if(!e[Ia])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(b=e.getAttribute("rel"),b==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(b!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(b=e.getAttribute("src"),(b!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===b)return e}else return e;if(e=Lr(e.nextSibling),e===null)break}return null}function ip(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Lr(e.nextSibling),e===null))return null;return e}function B1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Lr(e.nextSibling),e===null))return null;return e}function Jh(e){return e.data==="$?"||e.data==="$~"}function $h(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ap(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var f=function(){n(),s.removeEventListener("DOMContentLoaded",f)};s.addEventListener("DOMContentLoaded",f),e._reactRetry=f}}function Lr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var ef=null;function k1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Lr(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function L1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function U1(e,n,s){switch(n=Sc(s),e){case"html":if(e=n.documentElement,!e)throw Error(h(452));return e;case"head":if(e=n.head,!e)throw Error(h(453));return e;case"body":if(e=n.body,!e)throw Error(h(454));return e;default:throw Error(h(451))}}function Wl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$n(e)}var Ur=new Map,j1=new Set;function Tc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bi=fe.d;fe.d={f:sp,r:lp,D:op,C:cp,L:up,m:hp,X:dp,S:fp,M:gp};function sp(){var e=Bi.f(),n=yc();return e||n}function lp(e){var n=Et(e);n!==null&&n.tag===5&&n.type==="form"?t0(n):Bi.r(e)}var zs=typeof document>"u"?null:document;function P1(e,n,s){var f=zs;if(f&&typeof n=="string"&&n){var x=nt(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof s=="string"&&(x+='[crossorigin="'+s+'"]'),j1.has(x)||(j1.add(x),e={rel:e,crossOrigin:s,href:n},f.querySelector(x)===null&&(n=f.createElement("link"),Pn(n,"link",e),tn(n),f.head.appendChild(n)))}}function op(e){Bi.D(e),P1("dns-prefetch",e,null)}function cp(e,n){Bi.C(e,n),P1("preconnect",e,n)}function up(e,n,s){Bi.L(e,n,s);var f=zs;if(f&&e&&n){var x='link[rel="preload"][as="'+nt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(x+='[imagesrcset="'+nt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(x+='[imagesizes="'+nt(s.imageSizes)+'"]')):x+='[href="'+nt(e)+'"]';var b=x;switch(n){case"style":b=Hs(e);break;case"script":b=Gs(e)}Ur.has(b)||(e=R({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Ur.set(b,e),f.querySelector(x)!==null||n==="style"&&f.querySelector(Kl(b))||n==="script"&&f.querySelector(Zl(b))||(n=f.createElement("link"),Pn(n,"link",e),tn(n),f.head.appendChild(n)))}}function hp(e,n){Bi.m(e,n);var s=zs;if(s&&e){var f=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+nt(f)+'"][href="'+nt(e)+'"]',b=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Gs(e)}if(!Ur.has(b)&&(e=R({rel:"modulepreload",href:e},n),Ur.set(b,e),s.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Zl(b)))return}f=s.createElement("link"),Pn(f,"link",e),tn(f),s.head.appendChild(f)}}}function fp(e,n,s){Bi.S(e,n,s);var f=zs;if(f&&e){var x=qn(f).hoistableStyles,b=Hs(e);n=n||"default";var T=x.get(b);if(!T){var B={loading:0,preload:null};if(T=f.querySelector(Kl(b)))B.loading=5;else{e=R({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Ur.get(b))&&tf(e,s);var z=T=f.createElement("link");tn(z),Pn(z,"link",e),z._p=new Promise(function(te,ue){z.onload=te,z.onerror=ue}),z.addEventListener("load",function(){B.loading|=1}),z.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Rc(T,n,f)}T={type:"stylesheet",instance:T,count:1,state:B},x.set(b,T)}}}function dp(e,n){Bi.X(e,n);var s=zs;if(s&&e){var f=qn(s).hoistableScripts,x=Gs(e),b=f.get(x);b||(b=s.querySelector(Zl(x)),b||(e=R({src:e,async:!0},n),(n=Ur.get(x))&&nf(e,n),b=s.createElement("script"),tn(b),Pn(b,"link",e),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(x,b))}}function gp(e,n){Bi.M(e,n);var s=zs;if(s&&e){var f=qn(s).hoistableScripts,x=Gs(e),b=f.get(x);b||(b=s.querySelector(Zl(x)),b||(e=R({src:e,async:!0,type:"module"},n),(n=Ur.get(x))&&nf(e,n),b=s.createElement("script"),tn(b),Pn(b,"link",e),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(x,b))}}function F1(e,n,s,f){var x=(x=Ee.current)?Tc(x):null;if(!x)throw Error(h(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Hs(s.href),s=qn(x).hoistableStyles,f=s.get(n),f||(f={type:"style",instance:null,count:0,state:null},s.set(n,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Hs(s.href);var b=qn(x).hoistableStyles,T=b.get(e);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(e,T),(b=x.querySelector(Kl(e)))&&!b._p&&(T.instance=b,T.state.loading=5),Ur.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ur.set(e,s),b||mp(x,e,s,T.state))),n&&f===null)throw Error(h(528,""));return T}if(n&&f!==null)throw Error(h(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Gs(s),s=qn(x).hoistableScripts,f=s.get(n),f||(f={type:"script",instance:null,count:0,state:null},s.set(n,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,e))}}function Hs(e){return'href="'+nt(e)+'"'}function Kl(e){return'link[rel="stylesheet"]['+e+"]"}function z1(e){return R({},e,{"data-precedence":e.precedence,precedence:null})}function mp(e,n,s,f){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?f.loading=1:(n=e.createElement("link"),f.preload=n,n.addEventListener("load",function(){return f.loading|=1}),n.addEventListener("error",function(){return f.loading|=2}),Pn(n,"link",s),tn(n),e.head.appendChild(n))}function Gs(e){return'[src="'+nt(e)+'"]'}function Zl(e){return"script[async]"+e}function H1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var f=e.querySelector('style[data-href~="'+nt(s.href)+'"]');if(f)return n.instance=f,tn(f),f;var x=R({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return f=(e.ownerDocument||e).createElement("style"),tn(f),Pn(f,"style",x),Rc(f,s.precedence,e),n.instance=f;case"stylesheet":x=Hs(s.href);var b=e.querySelector(Kl(x));if(b)return n.state.loading|=4,n.instance=b,tn(b),b;f=z1(s),(x=Ur.get(x))&&tf(f,x),b=(e.ownerDocument||e).createElement("link"),tn(b);var T=b;return T._p=new Promise(function(B,z){T.onload=B,T.onerror=z}),Pn(b,"link",f),n.state.loading|=4,Rc(b,s.precedence,e),n.instance=b;case"script":return b=Gs(s.src),(x=e.querySelector(Zl(b)))?(n.instance=x,tn(x),x):(f=s,(x=Ur.get(b))&&(f=R({},s),nf(f,x)),e=e.ownerDocument||e,x=e.createElement("script"),tn(x),Pn(x,"link",f),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(h(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(f=n.instance,n.state.loading|=4,Rc(f,s.precedence,e));return n.instance}function Rc(e,n,s){for(var f=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,b=x,T=0;T<f.length;T++){var B=f[T];if(B.dataset.precedence===n)b=B;else if(b!==x)break}b?b.parentNode.insertBefore(e,b.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function tf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function nf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Nc=null;function G1(e,n,s){if(Nc===null){var f=new Map,x=Nc=new Map;x.set(s,f)}else x=Nc,f=x.get(s),f||(f=new Map,x.set(s,f));if(f.has(e))return f;for(f.set(e,null),s=s.getElementsByTagName(e),x=0;x<s.length;x++){var b=s[x];if(!(b[Ia]||b[cn]||e==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(n)||"";T=e+T;var B=f.get(T);B?B.push(b):f.set(T,[b])}}return f}function V1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function pp(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function q1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xp(e,n,s,f){if(s.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Hs(f.href),b=n.querySelector(Kl(x));if(b){n=b._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Oc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=b,tn(b);return}b=n.ownerDocument||n,f=z1(f),(x=Ur.get(x))&&tf(f,x),b=b.createElement("link"),tn(b);var T=b;T._p=new Promise(function(B,z){T.onload=B,T.onerror=z}),Pn(b,"link",f),s.instance=b}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Oc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var rf=0;function yp(e,n){return e.stylesheets&&e.count===0&&Dc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var f=setTimeout(function(){if(e.stylesheets&&Dc(e,e.stylesheets),e.unsuspend){var b=e.unsuspend;e.unsuspend=null,b()}},6e4+n);0<e.imgBytes&&rf===0&&(rf=62500*J2());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Dc(e,e.stylesheets),e.unsuspend)){var b=e.unsuspend;e.unsuspend=null,b()}},(e.imgBytes>rf?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ic=null;function Dc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ic=new Map,n.forEach(wp,e),Ic=null,Oc.call(e))}function wp(e,n){if(!(n.state.loading&4)){var s=Ic.get(e);if(s)var f=s.get(null);else{s=new Map,Ic.set(e,s);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var T=x[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),f=T)}f&&s.set(null,f)}x=n.instance,T=x.getAttribute("data-precedence"),b=s.get(T)||f,b===f&&s.set(null,x),s.set(T,x),this.count++,f=Oc.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),b?b.parentNode.insertBefore(x,b.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var Ql={$$typeof:P,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function bp(e,n,s,f,x,b,T,B,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function X1(e,n,s,f,x,b,T,B,z,te,ue,ge){return e=new bp(e,n,s,T,z,te,ue,ge,B),n=1,b===!0&&(n|=24),b=mr(3,null,null,n),e.current=b,b.stateNode=e,n=Lu(),n.refCount++,e.pooledCache=n,n.refCount++,b.memoizedState={element:f,isDehydrated:s,cache:n},Fu(b),e}function Y1(e){return e?(e=bs,e):bs}function W1(e,n,s,f,x,b){x=Y1(x),f.context===null?f.context=x:f.pendingContext=x,f=la(n),f.payload={element:s},b=b===void 0?null:b,b!==null&&(f.callback=b),s=oa(e,f,n),s!==null&&(lr(s,e,n),Nl(s,e,n))}function K1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function af(e,n){K1(e,n),(e=e.alternate)&&K1(e,n)}function Z1(e){if(e.tag===13||e.tag===31){var n=Fa(e,67108864);n!==null&&lr(n,e,67108864),af(e,67108864)}}function Q1(e){if(e.tag===13||e.tag===31){var n=br();n=In(n);var s=Fa(e,n);s!==null&&lr(s,e,n),af(e,n)}}var Mc=!0;function vp(e,n,s,f){var x=ne.T;ne.T=null;var b=fe.p;try{fe.p=2,sf(e,n,s,f)}finally{fe.p=b,ne.T=x}}function Ep(e,n,s,f){var x=ne.T;ne.T=null;var b=fe.p;try{fe.p=8,sf(e,n,s,f)}finally{fe.p=b,ne.T=x}}function sf(e,n,s,f){if(Mc){var x=lf(f);if(x===null)qh(e,n,f,Bc,s),$1(e,f);else if(_p(x,e,n,s,f))f.stopPropagation();else if($1(e,f),n&4&&-1<Ap.indexOf(e)){for(;x!==null;){var b=Et(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=ei(b.pendingLanes);if(T!==0){var B=b;for(B.pendingLanes|=2,B.entangledLanes|=2;T;){var z=1<<31-Ze(T);B.entanglements[1]|=z,T&=~z}hi(b),(_t&6)===0&&(pc=Jt()+500,ql(0))}}break;case 31:case 13:B=Fa(b,2),B!==null&&lr(B,b,2),yc(),af(b,2)}if(b=lf(f),b===null&&qh(e,n,f,Bc,s),b===x)break;x=b}x!==null&&f.stopPropagation()}else qh(e,n,f,null,s)}}function lf(e){return e=gl(e),of(e)}var Bc=null;function of(e){if(Bc=null,e=en(e),e!==null){var n=g(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=v(n),e!==null)return e;e=null}else if(s===31){if(e=_(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Bc=e,null}function J1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ol()){case Jn:return 2;case cl:return 8;case or:case Mn:return 32;case ul:return 268435456;default:return 32}default:return 32}}var cf=!1,wa=null,ba=null,va=null,Jl=new Map,$l=new Map,Ea=[],Ap="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(e,n){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":Jl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(n.pointerId)}}function eo(e,n,s,f,x,b){return e===null||e.nativeEvent!==b?(e={blockedOn:n,domEventName:s,eventSystemFlags:f,nativeEvent:b,targetContainers:[x]},n!==null&&(n=Et(n),n!==null&&Z1(n)),e):(e.eventSystemFlags|=f,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function _p(e,n,s,f,x){switch(n){case"focusin":return wa=eo(wa,e,n,s,f,x),!0;case"dragenter":return ba=eo(ba,e,n,s,f,x),!0;case"mouseover":return va=eo(va,e,n,s,f,x),!0;case"pointerover":var b=x.pointerId;return Jl.set(b,eo(Jl.get(b)||null,e,n,s,f,x)),!0;case"gotpointercapture":return b=x.pointerId,$l.set(b,eo($l.get(b)||null,e,n,s,f,x)),!0}return!1}function eg(e){var n=en(e.target);if(n!==null){var s=g(n);if(s!==null){if(n=s.tag,n===13){if(n=v(s),n!==null){e.blockedOn=n,Ne(e.priority,function(){Q1(s)});return}}else if(n===31){if(n=_(s),n!==null){e.blockedOn=n,Ne(e.priority,function(){Q1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=lf(e.nativeEvent);if(s===null){s=e.nativeEvent;var f=new s.constructor(s.type,s);Da=f,s.target.dispatchEvent(f),Da=null}else return n=Et(s),n!==null&&Z1(n),e.blockedOn=s,!1;n.shift()}return!0}function tg(e,n,s){kc(e)&&s.delete(n)}function Cp(){cf=!1,wa!==null&&kc(wa)&&(wa=null),ba!==null&&kc(ba)&&(ba=null),va!==null&&kc(va)&&(va=null),Jl.forEach(tg),$l.forEach(tg)}function Lc(e,n){e.blockedOn===n&&(e.blockedOn=null,cf||(cf=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Cp)))}var Uc=null;function ng(e){Uc!==e&&(Uc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Uc===e&&(Uc=null);for(var n=0;n<e.length;n+=3){var s=e[n],f=e[n+1],x=e[n+2];if(typeof f!="function"){if(of(f||s)===null)continue;break}var b=Et(s);b!==null&&(e.splice(n,3),n-=3,sh(b,{pending:!0,data:x,method:s.method,action:f},f,x))}}))}function Vs(e){function n(z){return Lc(z,e)}wa!==null&&Lc(wa,e),ba!==null&&Lc(ba,e),va!==null&&Lc(va,e),Jl.forEach(n),$l.forEach(n);for(var s=0;s<Ea.length;s++){var f=Ea[s];f.blockedOn===e&&(f.blockedOn=null)}for(;0<Ea.length&&(s=Ea[0],s.blockedOn===null);)eg(s),s.blockedOn===null&&Ea.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(f=0;f<s.length;f+=3){var x=s[f],b=s[f+1],T=x[Nt]||null;if(typeof b=="function")T||ng(s);else if(T){var B=null;if(b&&b.hasAttribute("formAction")){if(x=b,T=b[Nt]||null)B=T.formAction;else if(of(x)!==null)continue}else B=T.action;typeof B=="function"?s[f+1]=B:(s.splice(f,3),f-=3),ng(s)}}}function rg(){function e(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),f||setTimeout(s,20)}function s(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){f=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function uf(e){this._internalRoot=e}jc.prototype.render=uf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(h(409));var s=n.current,f=br();W1(s,f,e,n,null,null)},jc.prototype.unmount=uf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;W1(e.current,2,null,e,null,null),yc(),n[cr]=null}};function jc(e){this._internalRoot=e}jc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Gn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ea.length&&n!==0&&n<Ea[s].priority;s++);Ea.splice(s,0,e),s===0&&eg(e)}};var ig=i.version;if(ig!=="19.2.4")throw Error(h(527,ig,"19.2.4"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(h(188)):(e=Object.keys(e).join(","),Error(h(268,e)));return e=w(n),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var Sp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{zt=Pc.inject(Sp),we=Pc}catch{}}return no.createRoot=function(e,n){if(!p(e))throw Error(h(299));var s=!1,f="",x=h0,b=f0,T=d0;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(b=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=X1(e,1,!1,null,null,s,f,null,x,b,T,rg),e[cr]=n.current,Vh(e),new uf(n)},no.hydrateRoot=function(e,n,s){if(!p(e))throw Error(h(299));var f=!1,x="",b=h0,T=f0,B=d0,z=null;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(x=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(B=s.onRecoverableError),s.formState!==void 0&&(z=s.formState)),n=X1(e,1,!0,n,s??null,f,x,z,b,T,B,rg),n.context=Y1(null),s=n.current,f=br(),f=In(f),x=la(f),x.callback=null,oa(s,x,f),s=f,n.current.lanes=s,ni(n,s),hi(n),e[cr]=n.current,Vh(e),new jc(n)},no.version="19.2.4",no}var gg;function Up(){if(gg)return df.exports;gg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),df.exports=Lp(),df.exports}var jp=Up();var mg="popstate";function Pp(l={}){function i(h,p){let{pathname:g,search:v,hash:_}=h.location;return Rf("",{pathname:g,search:v,hash:_},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function o(h,p){return typeof p=="string"?p:uo(p)}return zp(i,o,null,l)}function Qt(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function $r(l,i){if(!l){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Fp(){return Math.random().toString(36).substring(2,10)}function pg(l,i){return{usr:l.state,key:l.key,idx:i}}function Rf(l,i,o=null,h){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof i=="string"?il(i):i,state:o,key:i&&i.key||h||Fp()}}function uo({pathname:l="/",search:i="",hash:o=""}){return i&&i!=="?"&&(l+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function il(l){let i={};if(l){let o=l.indexOf("#");o>=0&&(i.hash=l.substring(o),l=l.substring(0,o));let h=l.indexOf("?");h>=0&&(i.search=l.substring(h),l=l.substring(0,h)),l&&(i.pathname=l)}return i}function zp(l,i,o,h={}){let{window:p=document.defaultView,v5Compat:g=!1}=h,v=p.history,_="POP",E=null,w=C();w==null&&(w=0,v.replaceState({...v.state,idx:w},""));function C(){return(v.state||{idx:null}).idx}function R(){_="POP";let H=C(),ie=H==null?null:H-w;w=H,E&&E({action:_,location:F.location,delta:ie})}function M(H,ie){_="PUSH";let X=Rf(F.location,H,ie);w=C()+1;let P=pg(X,w),ce=F.createHref(X);try{v.pushState(P,"",ce)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;p.location.assign(ce)}g&&E&&E({action:_,location:F.location,delta:1})}function k(H,ie){_="REPLACE";let X=Rf(F.location,H,ie);w=C();let P=pg(X,w),ce=F.createHref(X);v.replaceState(P,"",ce),g&&E&&E({action:_,location:F.location,delta:0})}function j(H){return Hp(H)}let F={get action(){return _},get location(){return l(p,v)},listen(H){if(E)throw new Error("A history only accepts one active listener");return p.addEventListener(mg,R),E=H,()=>{p.removeEventListener(mg,R),E=null}},createHref(H){return i(p,H)},createURL:j,encodeLocation(H){let ie=j(H);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:M,replace:k,go(H){return v.go(H)}};return F}function Hp(l,i=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(o,"No window.location.(origin|href) available to create URL");let h=typeof l=="string"?l:uo(l);return h=h.replace(/ $/,"%20"),!i&&h.startsWith("//")&&(h=o+h),new URL(h,o)}function om(l,i,o="/"){return Gp(l,i,o,!1)}function Gp(l,i,o,h){let p=typeof i=="string"?il(i):i,g=ji(p.pathname||"/",o);if(g==null)return null;let v=cm(l);Vp(v);let _=null;for(let E=0;_==null&&E<v.length;++E){let w=tx(g);_=$p(v[E],w,h)}return _}function cm(l,i=[],o=[],h="",p=!1){let g=(v,_,E=p,w)=>{let C={relativePath:w===void 0?v.path||"":w,caseSensitive:v.caseSensitive===!0,childrenIndex:_,route:v};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(h)&&E)return;Qt(C.relativePath.startsWith(h),`Absolute route path "${C.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(h.length)}let R=Ui([h,C.relativePath]),M=o.concat(C);v.children&&v.children.length>0&&(Qt(v.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),cm(v.children,i,M,R,E)),!(v.path==null&&!v.index)&&i.push({path:R,score:Qp(R,v.index),routesMeta:M})};return l.forEach((v,_)=>{if(v.path===""||!v.path?.includes("?"))g(v,_);else for(let E of um(v.path))g(v,_,!0,E)}),i}function um(l){let i=l.split("/");if(i.length===0)return[];let[o,...h]=i,p=o.endsWith("?"),g=o.replace(/\?$/,"");if(h.length===0)return p?[g,""]:[g];let v=um(h.join("/")),_=[];return _.push(...v.map(E=>E===""?g:[g,E].join("/"))),p&&_.push(...v),_.map(E=>l.startsWith("/")&&E===""?"/":E)}function Vp(l){l.sort((i,o)=>i.score!==o.score?o.score-i.score:Jp(i.routesMeta.map(h=>h.childrenIndex),o.routesMeta.map(h=>h.childrenIndex)))}var qp=/^:[\w-]+$/,Xp=3,Yp=2,Wp=1,Kp=10,Zp=-2,xg=l=>l==="*";function Qp(l,i){let o=l.split("/"),h=o.length;return o.some(xg)&&(h+=Zp),i&&(h+=Yp),o.filter(p=>!xg(p)).reduce((p,g)=>p+(qp.test(g)?Xp:g===""?Wp:Kp),h)}function Jp(l,i){return l.length===i.length&&l.slice(0,-1).every((h,p)=>h===i[p])?l[l.length-1]-i[i.length-1]:0}function $p(l,i,o=!1){let{routesMeta:h}=l,p={},g="/",v=[];for(let _=0;_<h.length;++_){let E=h[_],w=_===h.length-1,C=g==="/"?i:i.slice(g.length)||"/",R=Jc({path:E.relativePath,caseSensitive:E.caseSensitive,end:w},C),M=E.route;if(!R&&w&&o&&!h[h.length-1].route.index&&(R=Jc({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},C)),!R)return null;Object.assign(p,R.params),v.push({params:p,pathname:Ui([g,R.pathname]),pathnameBase:ax(Ui([g,R.pathnameBase])),route:M}),R.pathnameBase!=="/"&&(g=Ui([g,R.pathnameBase]))}return v}function Jc(l,i){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,h]=ex(l.path,l.caseSensitive,l.end),p=i.match(o);if(!p)return null;let g=p[0],v=g.replace(/(.)\/+$/,"$1"),_=p.slice(1);return{params:h.reduce((w,{paramName:C,isOptional:R},M)=>{if(C==="*"){let j=_[M]||"";v=g.slice(0,g.length-j.length).replace(/(.)\/+$/,"$1")}const k=_[M];return R&&!k?w[C]=void 0:w[C]=(k||"").replace(/%2F/g,"/"),w},{}),pathname:g,pathnameBase:v,pattern:l}}function ex(l,i=!1,o=!0){$r(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let h=[],p="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,_,E)=>(h.push({paramName:_,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(h.push({paramName:"*"}),p+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?p+="\\/*$":l!==""&&l!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,i?void 0:"i"),h]}function tx(l){try{return l.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return $r(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),l}}function ji(l,i){if(i==="/")return l;if(!l.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,h=l.charAt(o);return h&&h!=="/"?null:l.slice(o)||"/"}var nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function rx(l,i="/"){let{pathname:o,search:h="",hash:p=""}=typeof l=="string"?il(l):l,g;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?g=yg(o.substring(1),"/"):g=yg(o,i)):g=i,{pathname:g,search:sx(h),hash:lx(p)}}function yg(l,i){let o=i.replace(/\/+$/,"").split("/");return l.split("/").forEach(p=>{p===".."?o.length>1&&o.pop():p!=="."&&o.push(p)}),o.length>1?o.join("/"):"/"}function xf(l,i,o,h){return`Cannot include a '${l}' character in a manually specified \`to.${i}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ix(l){return l.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function Yf(l){let i=ix(l);return i.map((o,h)=>h===i.length-1?o.pathname:o.pathnameBase)}function Wf(l,i,o,h=!1){let p;typeof l=="string"?p=il(l):(p={...l},Qt(!p.pathname||!p.pathname.includes("?"),xf("?","pathname","search",p)),Qt(!p.pathname||!p.pathname.includes("#"),xf("#","pathname","hash",p)),Qt(!p.search||!p.search.includes("#"),xf("#","search","hash",p)));let g=l===""||p.pathname==="",v=g?"/":p.pathname,_;if(v==null)_=o;else{let R=i.length-1;if(!h&&v.startsWith("..")){let M=v.split("/");for(;M[0]==="..";)M.shift(),R-=1;p.pathname=M.join("/")}_=R>=0?i[R]:"/"}let E=rx(p,_),w=v&&v!=="/"&&v.endsWith("/"),C=(g||v===".")&&o.endsWith("/");return!E.pathname.endsWith("/")&&(w||C)&&(E.pathname+="/"),E}var Ui=l=>l.join("/").replace(/\/\/+/g,"/"),ax=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),sx=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,lx=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,ox=class{constructor(l,i,o,h=!1){this.status=l,this.statusText=i||"",this.internal=h,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function cx(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function ux(l){return l.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fm(l,i){let o=l;if(typeof o!="string"||!nx.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let h=o,p=!1;if(hm)try{let g=new URL(window.location.href),v=o.startsWith("//")?new URL(g.protocol+o):new URL(o),_=ji(v.pathname,i);v.origin===g.origin&&_!=null?o=_+v.search+v.hash:p=!0}catch{$r(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:h,isExternal:p,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dm=["POST","PUT","PATCH","DELETE"];new Set(dm);var hx=["GET",...dm];new Set(hx);var al=W.createContext(null);al.displayName="DataRouter";var lu=W.createContext(null);lu.displayName="DataRouterState";var fx=W.createContext(!1),gm=W.createContext({isTransitioning:!1});gm.displayName="ViewTransition";var dx=W.createContext(new Map);dx.displayName="Fetchers";var gx=W.createContext(null);gx.displayName="Await";var _r=W.createContext(null);_r.displayName="Navigation";var wo=W.createContext(null);wo.displayName="Location";var jr=W.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var Kf=W.createContext(null);Kf.displayName="RouteError";var mm="REACT_ROUTER_ERROR",mx="REDIRECT",px="ROUTE_ERROR_RESPONSE";function xx(l){if(l.startsWith(`${mm}:${mx}:{`))try{let i=JSON.parse(l.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function yx(l){if(l.startsWith(`${mm}:${px}:{`))try{let i=JSON.parse(l.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new ox(i.status,i.statusText,i.data)}catch{}}function wx(l,{relative:i}={}){Qt(sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:h}=W.useContext(_r),{hash:p,pathname:g,search:v}=bo(l,{relative:i}),_=g;return o!=="/"&&(_=g==="/"?o:Ui([o,g])),h.createHref({pathname:_,search:v,hash:p})}function sl(){return W.useContext(wo)!=null}function Ta(){return Qt(sl(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(wo).location}var pm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xm(l){W.useContext(_r).static||W.useLayoutEffect(l)}function ou(){let{isDataRoute:l}=W.useContext(jr);return l?kx():bx()}function bx(){Qt(sl(),"useNavigate() may be used only in the context of a <Router> component.");let l=W.useContext(al),{basename:i,navigator:o}=W.useContext(_r),{matches:h}=W.useContext(jr),{pathname:p}=Ta(),g=JSON.stringify(Yf(h)),v=W.useRef(!1);return xm(()=>{v.current=!0}),W.useCallback((E,w={})=>{if($r(v.current,pm),!v.current)return;if(typeof E=="number"){o.go(E);return}let C=Wf(E,JSON.parse(g),p,w.relative==="path");l==null&&i!=="/"&&(C.pathname=C.pathname==="/"?i:Ui([i,C.pathname])),(w.replace?o.replace:o.push)(C,w.state,w)},[i,o,g,p,l])}var vx=W.createContext(null);function Ex(l){let i=W.useContext(jr).outlet;return W.useMemo(()=>i&&W.createElement(vx.Provider,{value:l},i),[i,l])}function Ax(){let{matches:l}=W.useContext(jr),i=l[l.length-1];return i?i.params:{}}function bo(l,{relative:i}={}){let{matches:o}=W.useContext(jr),{pathname:h}=Ta(),p=JSON.stringify(Yf(o));return W.useMemo(()=>Wf(l,JSON.parse(p),h,i==="path"),[l,p,h,i])}function _x(l,i){return ym(l,i)}function ym(l,i,o,h,p){Qt(sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=W.useContext(_r),{matches:v}=W.useContext(jr),_=v[v.length-1],E=_?_.params:{},w=_?_.pathname:"/",C=_?_.pathnameBase:"/",R=_&&_.route;{let X=R&&R.path||"";bm(w,!R||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let M=Ta(),k;if(i){let X=typeof i=="string"?il(i):i;Qt(C==="/"||X.pathname?.startsWith(C),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${X.pathname}" was given in the \`location\` prop.`),k=X}else k=M;let j=k.pathname||"/",F=j;if(C!=="/"){let X=C.replace(/^\//,"").split("/");F="/"+j.replace(/^\//,"").split("/").slice(X.length).join("/")}let H=om(l,{pathname:F});$r(R||H!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),$r(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=Nx(H&&H.map(X=>Object.assign({},X,{params:Object.assign({},E,X.params),pathname:Ui([C,g.encodeLocation?g.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?C:Ui([C,g.encodeLocation?g.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),v,o,h,p);return i&&ie?W.createElement(wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},ie):ie}function Cx(){let l=Bx(),i=cx(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,h="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:h},g={padding:"2px 4px",backgroundColor:h},v=null;return console.error("Error handled by React Router default ErrorBoundary:",l),v=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:g},"ErrorBoundary")," or"," ",W.createElement("code",{style:g},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},i),o?W.createElement("pre",{style:p},o):null,v)}var Sx=W.createElement(Cx,null),wm=class extends W.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,i){return i.location!==l.location||i.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:i.error,location:i.location,revalidation:l.revalidation||i.revalidation}}componentDidCatch(l,i){this.props.onError?this.props.onError(l,i):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=yx(l.digest);o&&(l=o)}let i=l!==void 0?W.createElement(jr.Provider,{value:this.props.routeContext},W.createElement(Kf.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?W.createElement(Tx,{error:l},i):i}};wm.contextType=fx;var yf=new WeakMap;function Tx({children:l,error:i}){let{basename:o}=W.useContext(_r);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let h=xx(i.digest);if(h){let p=yf.get(i);if(p)throw p;let g=fm(h.location,o);if(hm&&!yf.get(i))if(g.isExternal||h.reloadDocument)window.location.href=g.absoluteURL||g.to;else{const v=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(g.to,{replace:h.replace}));throw yf.set(i,v),v}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${g.absoluteURL||g.to}`})}}return l}function Rx({routeContext:l,match:i,children:o}){let h=W.useContext(al);return h&&h.static&&h.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=i.route.id),W.createElement(jr.Provider,{value:l},o)}function Nx(l,i=[],o=null,h=null,p=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(i.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let g=l,v=o?.errors;if(v!=null){let C=g.findIndex(R=>R.route.id&&v?.[R.route.id]!==void 0);Qt(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(v).join(",")}`),g=g.slice(0,Math.min(g.length,C+1))}let _=!1,E=-1;if(o)for(let C=0;C<g.length;C++){let R=g[C];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(E=C),R.route.id){let{loaderData:M,errors:k}=o,j=R.route.loader&&!M.hasOwnProperty(R.route.id)&&(!k||k[R.route.id]===void 0);if(R.route.lazy||j){_=!0,E>=0?g=g.slice(0,E+1):g=[g[0]];break}}}let w=o&&h?(C,R)=>{h(C,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:ux(o.matches),errorInfo:R})}:void 0;return g.reduceRight((C,R,M)=>{let k,j=!1,F=null,H=null;o&&(k=v&&R.route.id?v[R.route.id]:void 0,F=R.route.errorElement||Sx,_&&(E<0&&M===0?(bm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,H=null):E===M&&(j=!0,H=R.route.hydrateFallbackElement||null)));let ie=i.concat(g.slice(0,M+1)),X=()=>{let P;return k?P=F:j?P=H:R.route.Component?P=W.createElement(R.route.Component,null):R.route.element?P=R.route.element:P=C,W.createElement(Rx,{match:R,routeContext:{outlet:C,matches:ie,isDataRoute:o!=null},children:P})};return o&&(R.route.ErrorBoundary||R.route.errorElement||M===0)?W.createElement(wm,{location:o.location,revalidation:o.revalidation,component:F,error:k,children:X(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},onError:w}):X()},null)}function Zf(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ox(l){let i=W.useContext(al);return Qt(i,Zf(l)),i}function Ix(l){let i=W.useContext(lu);return Qt(i,Zf(l)),i}function Dx(l){let i=W.useContext(jr);return Qt(i,Zf(l)),i}function Qf(l){let i=Dx(l),o=i.matches[i.matches.length-1];return Qt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function Mx(){return Qf("useRouteId")}function Bx(){let l=W.useContext(Kf),i=Ix("useRouteError"),o=Qf("useRouteError");return l!==void 0?l:i.errors?.[o]}function kx(){let{router:l}=Ox("useNavigate"),i=Qf("useNavigate"),o=W.useRef(!1);return xm(()=>{o.current=!0}),W.useCallback(async(p,g={})=>{$r(o.current,pm),o.current&&(typeof p=="number"?await l.navigate(p):await l.navigate(p,{fromRouteId:i,...g}))},[l,i])}var wg={};function bm(l,i,o){!i&&!wg[l]&&(wg[l]=!0,$r(!1,o))}W.memo(Lx);function Lx({routes:l,future:i,state:o,onError:h}){return ym(l,void 0,o,h,i)}function Nf({to:l,replace:i,state:o,relative:h}){Qt(sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:p}=W.useContext(_r);$r(!p,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:g}=W.useContext(jr),{pathname:v}=Ta(),_=ou(),E=Wf(l,Yf(g),v,h==="path"),w=JSON.stringify(E);return W.useEffect(()=>{_(JSON.parse(w),{replace:i,state:o,relative:h})},[_,w,h,i,o]),null}function vm(l){return Ex(l.context)}function Kr(l){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ux({basename:l="/",children:i=null,location:o,navigationType:h="POP",navigator:p,static:g=!1,unstable_useTransitions:v}){Qt(!sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let _=l.replace(/^\/*/,"/"),E=W.useMemo(()=>({basename:_,navigator:p,static:g,unstable_useTransitions:v,future:{}}),[_,p,g,v]);typeof o=="string"&&(o=il(o));let{pathname:w="/",search:C="",hash:R="",state:M=null,key:k="default"}=o,j=W.useMemo(()=>{let F=ji(w,_);return F==null?null:{location:{pathname:F,search:C,hash:R,state:M,key:k},navigationType:h}},[_,w,C,R,M,k,h]);return $r(j!=null,`<Router basename="${_}"> is not able to match the URL "${w}${C}${R}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:W.createElement(_r.Provider,{value:E},W.createElement(wo.Provider,{children:i,value:j}))}function jx({children:l,location:i}){return _x(Of(l),i)}function Of(l,i=[]){let o=[];return W.Children.forEach(l,(h,p)=>{if(!W.isValidElement(h))return;let g=[...i,p];if(h.type===W.Fragment){o.push.apply(o,Of(h.props.children,g));return}Qt(h.type===Kr,`[${typeof h.type=="string"?h.type:h.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!h.props.index||!h.props.children,"An index route cannot have child routes.");let v={id:h.props.id||g.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,middleware:h.props.middleware,loader:h.props.loader,action:h.props.action,hydrateFallbackElement:h.props.hydrateFallbackElement,HydrateFallback:h.props.HydrateFallback,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.hasErrorBoundary===!0||h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(v.children=Of(h.props.children,g)),o.push(v)}),o}var Zc="get",Qc="application/x-www-form-urlencoded";function cu(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Px(l){return cu(l)&&l.tagName.toLowerCase()==="button"}function Fx(l){return cu(l)&&l.tagName.toLowerCase()==="form"}function zx(l){return cu(l)&&l.tagName.toLowerCase()==="input"}function Hx(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Gx(l,i){return l.button===0&&(!i||i==="_self")&&!Hx(l)}var zc=null;function Vx(){if(zc===null)try{new FormData(document.createElement("form"),0),zc=!1}catch{zc=!0}return zc}var qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wf(l){return l!=null&&!qx.has(l)?($r(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qc}"`),null):l}function Xx(l,i){let o,h,p,g,v;if(Fx(l)){let _=l.getAttribute("action");h=_?ji(_,i):null,o=l.getAttribute("method")||Zc,p=wf(l.getAttribute("enctype"))||Qc,g=new FormData(l)}else if(Px(l)||zx(l)&&(l.type==="submit"||l.type==="image")){let _=l.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=l.getAttribute("formaction")||_.getAttribute("action");if(h=E?ji(E,i):null,o=l.getAttribute("formmethod")||_.getAttribute("method")||Zc,p=wf(l.getAttribute("formenctype"))||wf(_.getAttribute("enctype"))||Qc,g=new FormData(_,l),!Vx()){let{name:w,type:C,value:R}=l;if(C==="image"){let M=w?`${w}.`:"";g.append(`${M}x`,"0"),g.append(`${M}y`,"0")}else w&&g.append(w,R)}}else{if(cu(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Zc,h=null,p=Qc,v=l}return g&&p==="text/plain"&&(v=g,g=void 0),{action:h,method:o.toLowerCase(),encType:p,formData:g,body:v}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jf(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function Yx(l,i,o,h){let p=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?p.pathname.endsWith("/")?p.pathname=`${p.pathname}_.${h}`:p.pathname=`${p.pathname}.${h}`:p.pathname==="/"?p.pathname=`_root.${h}`:i&&ji(p.pathname,i)==="/"?p.pathname=`${i.replace(/\/$/,"")}/_root.${h}`:p.pathname=`${p.pathname.replace(/\/$/,"")}.${h}`,p}async function Wx(l,i){if(l.id in i)return i[l.id];try{let o=await import(l.module);return i[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kx(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Zx(l,i,o){let h=await Promise.all(l.map(async p=>{let g=i.routes[p.route.id];if(g){let v=await Wx(g,o);return v.links?v.links():[]}return[]}));return ey(h.flat(1).filter(Kx).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function bg(l,i,o,h,p,g){let v=(E,w)=>o[w]?E.route.id!==o[w].route.id:!0,_=(E,w)=>o[w].pathname!==E.pathname||o[w].route.path?.endsWith("*")&&o[w].params["*"]!==E.params["*"];return g==="assets"?i.filter((E,w)=>v(E,w)||_(E,w)):g==="data"?i.filter((E,w)=>{let C=h.routes[E.route.id];if(!C||!C.hasLoader)return!1;if(v(E,w)||_(E,w))return!0;if(E.route.shouldRevalidate){let R=E.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Qx(l,i,{includeHydrateFallback:o}={}){return Jx(l.map(h=>{let p=i.routes[h.route.id];if(!p)return[];let g=[p.module];return p.clientActionModule&&(g=g.concat(p.clientActionModule)),p.clientLoaderModule&&(g=g.concat(p.clientLoaderModule)),o&&p.hydrateFallbackModule&&(g=g.concat(p.hydrateFallbackModule)),p.imports&&(g=g.concat(p.imports)),g}).flat(1))}function Jx(l){return[...new Set(l)]}function $x(l){let i={},o=Object.keys(l).sort();for(let h of o)i[h]=l[h];return i}function ey(l,i){let o=new Set;return new Set(i),l.reduce((h,p)=>{let g=JSON.stringify($x(p));return o.has(g)||(o.add(g),h.push({key:g,link:p})),h},[])}function Em(){let l=W.useContext(al);return Jf(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function ty(){let l=W.useContext(lu);return Jf(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var $f=W.createContext(void 0);$f.displayName="FrameworkContext";function Am(){let l=W.useContext($f);return Jf(l,"You must render this element inside a <HydratedRouter> element"),l}function ny(l,i){let o=W.useContext($f),[h,p]=W.useState(!1),[g,v]=W.useState(!1),{onFocus:_,onBlur:E,onMouseEnter:w,onMouseLeave:C,onTouchStart:R}=i,M=W.useRef(null);W.useEffect(()=>{if(l==="render"&&v(!0),l==="viewport"){let F=ie=>{ie.forEach(X=>{v(X.isIntersecting)})},H=new IntersectionObserver(F,{threshold:.5});return M.current&&H.observe(M.current),()=>{H.disconnect()}}},[l]),W.useEffect(()=>{if(h){let F=setTimeout(()=>{v(!0)},100);return()=>{clearTimeout(F)}}},[h]);let k=()=>{p(!0)},j=()=>{p(!1),v(!1)};return o?l!=="intent"?[g,M,{}]:[g,M,{onFocus:ro(_,k),onBlur:ro(E,j),onMouseEnter:ro(w,k),onMouseLeave:ro(C,j),onTouchStart:ro(R,k)}]:[!1,M,{}]}function ro(l,i){return o=>{l&&l(o),o.defaultPrevented||i(o)}}function ry({page:l,...i}){let{router:o}=Em(),h=W.useMemo(()=>om(o.routes,l,o.basename),[o.routes,l,o.basename]);return h?W.createElement(ay,{page:l,matches:h,...i}):null}function iy(l){let{manifest:i,routeModules:o}=Am(),[h,p]=W.useState([]);return W.useEffect(()=>{let g=!1;return Zx(l,i,o).then(v=>{g||p(v)}),()=>{g=!0}},[l,i,o]),h}function ay({page:l,matches:i,...o}){let h=Ta(),{future:p,manifest:g,routeModules:v}=Am(),{basename:_}=Em(),{loaderData:E,matches:w}=ty(),C=W.useMemo(()=>bg(l,i,w,g,h,"data"),[l,i,w,g,h]),R=W.useMemo(()=>bg(l,i,w,g,h,"assets"),[l,i,w,g,h]),M=W.useMemo(()=>{if(l===h.pathname+h.search+h.hash)return[];let F=new Set,H=!1;if(i.forEach(X=>{let P=g.routes[X.route.id];!P||!P.hasLoader||(!C.some(ce=>ce.route.id===X.route.id)&&X.route.id in E&&v[X.route.id]?.shouldRevalidate||P.hasClientLoader?H=!0:F.add(X.route.id))}),F.size===0)return[];let ie=Yx(l,_,p.unstable_trailingSlashAwareDataRequests,"data");return H&&F.size>0&&ie.searchParams.set("_routes",i.filter(X=>F.has(X.route.id)).map(X=>X.route.id).join(",")),[ie.pathname+ie.search]},[_,p.unstable_trailingSlashAwareDataRequests,E,h,g,C,i,l,v]),k=W.useMemo(()=>Qx(R,g),[R,g]),j=iy(R);return W.createElement(W.Fragment,null,M.map(F=>W.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...o})),k.map(F=>W.createElement("link",{key:F,rel:"modulepreload",href:F,...o})),j.map(({key:F,link:H})=>W.createElement("link",{key:F,nonce:o.nonce,...H,crossOrigin:H.crossOrigin??o.crossOrigin})))}function sy(...l){return i=>{l.forEach(o=>{typeof o=="function"?o(i):o!=null&&(o.current=i)})}}var ly=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ly&&(window.__reactRouterVersion="7.13.0")}catch{}function oy({basename:l,children:i,unstable_useTransitions:o,window:h}){let p=W.useRef();p.current==null&&(p.current=Pp({window:h,v5Compat:!0}));let g=p.current,[v,_]=W.useState({action:g.action,location:g.location}),E=W.useCallback(w=>{o===!1?_(w):W.startTransition(()=>_(w))},[o]);return W.useLayoutEffect(()=>g.listen(E),[g,E]),W.createElement(Ux,{basename:l,children:i,location:v.location,navigationType:v.action,navigator:g,unstable_useTransitions:o})}var _m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ca=W.forwardRef(function({onClick:i,discover:o="render",prefetch:h="none",relative:p,reloadDocument:g,replace:v,state:_,target:E,to:w,preventScrollReset:C,viewTransition:R,unstable_defaultShouldRevalidate:M,...k},j){let{basename:F,unstable_useTransitions:H}=W.useContext(_r),ie=typeof w=="string"&&_m.test(w),X=fm(w,F);w=X.to;let P=wx(w,{relative:p}),[ce,Re,be]=ny(h,k),J=fy(w,{replace:v,state:_,target:E,preventScrollReset:C,relative:p,viewTransition:R,unstable_defaultShouldRevalidate:M,unstable_useTransitions:H});function Se(ot){i&&i(ot),ot.defaultPrevented||J(ot)}let he=W.createElement("a",{...k,...be,href:X.absoluteURL||P,onClick:X.isExternal||g?i:Se,ref:sy(j,Re),target:E,"data-discover":!ie&&o==="render"?"true":void 0});return ce&&!ie?W.createElement(W.Fragment,null,he,W.createElement(ry,{page:P})):he});Ca.displayName="Link";var cy=W.forwardRef(function({"aria-current":i="page",caseSensitive:o=!1,className:h="",end:p=!1,style:g,to:v,viewTransition:_,children:E,...w},C){let R=bo(v,{relative:w.relative}),M=Ta(),k=W.useContext(lu),{navigator:j,basename:F}=W.useContext(_r),H=k!=null&&xy(R)&&_===!0,ie=j.encodeLocation?j.encodeLocation(R).pathname:R.pathname,X=M.pathname,P=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;o||(X=X.toLowerCase(),P=P?P.toLowerCase():null,ie=ie.toLowerCase()),P&&F&&(P=ji(P,F)||P);const ce=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Re=X===ie||!p&&X.startsWith(ie)&&X.charAt(ce)==="/",be=P!=null&&(P===ie||!p&&P.startsWith(ie)&&P.charAt(ie.length)==="/"),J={isActive:Re,isPending:be,isTransitioning:H},Se=Re?i:void 0,he;typeof h=="function"?he=h(J):he=[h,Re?"active":null,be?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let ot=typeof g=="function"?g(J):g;return W.createElement(Ca,{...w,"aria-current":Se,className:he,ref:C,style:ot,to:v,viewTransition:_},typeof E=="function"?E(J):E)});cy.displayName="NavLink";var uy=W.forwardRef(({discover:l="render",fetcherKey:i,navigate:o,reloadDocument:h,replace:p,state:g,method:v=Zc,action:_,onSubmit:E,relative:w,preventScrollReset:C,viewTransition:R,unstable_defaultShouldRevalidate:M,...k},j)=>{let{unstable_useTransitions:F}=W.useContext(_r),H=my(),ie=py(_,{relative:w}),X=v.toLowerCase()==="get"?"get":"post",P=typeof _=="string"&&_m.test(_),ce=Re=>{if(E&&E(Re),Re.defaultPrevented)return;Re.preventDefault();let be=Re.nativeEvent.submitter,J=be?.getAttribute("formmethod")||v,Se=()=>H(be||Re.currentTarget,{fetcherKey:i,method:J,navigate:o,replace:p,state:g,relative:w,preventScrollReset:C,viewTransition:R,unstable_defaultShouldRevalidate:M});F&&o!==!1?W.startTransition(()=>Se()):Se()};return W.createElement("form",{ref:j,method:X,action:ie,onSubmit:h?E:ce,...k,"data-discover":!P&&l==="render"?"true":void 0})});uy.displayName="Form";function hy(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cm(l){let i=W.useContext(al);return Qt(i,hy(l)),i}function fy(l,{target:i,replace:o,state:h,preventScrollReset:p,relative:g,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:E}={}){let w=ou(),C=Ta(),R=bo(l,{relative:g});return W.useCallback(M=>{if(Gx(M,i)){M.preventDefault();let k=o!==void 0?o:uo(C)===uo(R),j=()=>w(l,{replace:k,state:h,preventScrollReset:p,relative:g,viewTransition:v,unstable_defaultShouldRevalidate:_});E?W.startTransition(()=>j()):j()}},[C,w,R,o,h,i,l,p,g,v,_,E])}var dy=0,gy=()=>`__${String(++dy)}__`;function my(){let{router:l}=Cm("useSubmit"),{basename:i}=W.useContext(_r),o=Mx(),h=l.fetch,p=l.navigate;return W.useCallback(async(g,v={})=>{let{action:_,method:E,encType:w,formData:C,body:R}=Xx(g,i);if(v.navigate===!1){let M=v.fetcherKey||gy();await h(M,o,v.action||_,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:C,body:R,formMethod:v.method||E,formEncType:v.encType||w,flushSync:v.flushSync})}else await p(v.action||_,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:C,body:R,formMethod:v.method||E,formEncType:v.encType||w,replace:v.replace,state:v.state,fromRouteId:o,flushSync:v.flushSync,viewTransition:v.viewTransition})},[h,p,i,o])}function py(l,{relative:i}={}){let{basename:o}=W.useContext(_r),h=W.useContext(jr);Qt(h,"useFormAction must be used inside a RouteContext");let[p]=h.matches.slice(-1),g={...bo(l||".",{relative:i})},v=Ta();if(l==null){g.search=v.search;let _=new URLSearchParams(g.search),E=_.getAll("index");if(E.some(C=>C==="")){_.delete("index"),E.filter(R=>R).forEach(R=>_.append("index",R));let C=_.toString();g.search=C?`?${C}`:""}}return(!l||l===".")&&p.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(g.pathname=g.pathname==="/"?o:Ui([o,g.pathname])),uo(g)}function xy(l,{relative:i}={}){let o=W.useContext(gm);Qt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:h}=Cm("useViewTransitionState"),p=bo(l,{relative:i});if(!o.isTransitioning)return!1;let g=ji(o.currentLocation.pathname,h)||o.currentLocation.pathname,v=ji(o.nextLocation.pathname,h)||o.nextLocation.pathname;return Jc(p.pathname,v)!=null||Jc(p.pathname,g)!=null}const Sm=(...l)=>l.filter((i,o,h)=>!!i&&i.trim()!==""&&h.indexOf(i)===o).join(" ").trim();const yy=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const wy=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,h)=>h?h.toUpperCase():o.toLowerCase());const vg=l=>{const i=wy(l);return i.charAt(0).toUpperCase()+i.slice(1)};var by={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vy=l=>{for(const i in l)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};const Ey=W.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:h,className:p="",children:g,iconNode:v,..._},E)=>W.createElement("svg",{ref:E,...by,width:i,height:i,stroke:l,strokeWidth:h?Number(o)*24/Number(i):o,className:Sm("lucide",p),...!g&&!vy(_)&&{"aria-hidden":"true"},..._},[...v.map(([w,C])=>W.createElement(w,C)),...Array.isArray(g)?g:[g]]));const En=(l,i)=>{const o=W.forwardRef(({className:h,...p},g)=>W.createElement(Ey,{ref:g,iconNode:i,className:Sm(`lucide-${yy(vg(l))}`,`lucide-${l}`,h),...p}));return o.displayName=vg(l),o};const Ay=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],If=En("arrow-left",Ay);const _y=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Cy=En("chart-no-axes-column",_y);const Sy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Df=En("circle-check-big",Sy);const Ty=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ry=En("circle-plus",Ty);const Ny=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Oy=En("circle-x",Ny);const Iy=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Dy=En("clipboard-list",Iy);const My=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bf=En("download",My);const By=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ky=En("layout-dashboard",By);const Ly=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Uy=En("list",Ly);const jy=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Py=En("menu",jy);const Fy=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],zy=En("package",Fy);const Hy=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Gy=En("play",Hy);const Vy=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Tm=En("printer",Vy);const qy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xy=En("refresh-cw",qy);const Yy=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wy=En("save",Yy);const Ky=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rm=En("settings",Ky);const Zy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qy=En("triangle-alert",Zy);const Jy=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$y=En("trophy",Jy);const ew=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],tw=En("user-plus",ew);const nw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nm=En("users",nw);function uu(l,i){var o={};for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&i.indexOf(h)<0&&(o[h]=l[h]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,h=Object.getOwnPropertySymbols(l);p<h.length;p++)i.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(l,h[p])&&(o[h[p]]=l[h[p]]);return o}function rw(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})}const iw=l=>l?(...i)=>l(...i):(...i)=>fetch(...i);class ed extends Error{constructor(i,o="FunctionsError",h){super(i),this.name=o,this.context=h}}class aw extends ed{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class Eg extends ed{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class Ag extends ed{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var Mf;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Mf||(Mf={}));class sw{constructor(i,{headers:o={},customFetch:h,region:p=Mf.Any}={}){this.url=i,this.headers=o,this.region=p,this.fetch=iw(h)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return rw(this,arguments,void 0,function*(o,h={}){var p;let g,v;try{const{headers:_,method:E,body:w,signal:C,timeout:R}=h;let M={},{region:k}=h;k||(k=this.region);const j=new URL(`${this.url}/${o}`);k&&k!=="any"&&(M["x-region"]=k,j.searchParams.set("forceFunctionRegion",k));let F;w&&(_&&!Object.prototype.hasOwnProperty.call(_,"Content-Type")||!_)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(M["Content-Type"]="application/octet-stream",F=w):typeof w=="string"?(M["Content-Type"]="text/plain",F=w):typeof FormData<"u"&&w instanceof FormData?F=w:(M["Content-Type"]="application/json",F=JSON.stringify(w)):w&&typeof w!="string"&&!(typeof Blob<"u"&&w instanceof Blob)&&!(w instanceof ArrayBuffer)&&!(typeof FormData<"u"&&w instanceof FormData)?F=JSON.stringify(w):F=w;let H=C;R&&(v=new AbortController,g=setTimeout(()=>v.abort(),R),C?(H=v.signal,C.addEventListener("abort",()=>v.abort())):H=v.signal);const ie=yield this.fetch(j.toString(),{method:E||"POST",headers:Object.assign(Object.assign(Object.assign({},M),this.headers),_),body:F,signal:H}).catch(Re=>{throw new aw(Re)}),X=ie.headers.get("x-relay-error");if(X&&X==="true")throw new Eg(ie);if(!ie.ok)throw new Ag(ie);let P=((p=ie.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),ce;return P==="application/json"?ce=yield ie.json():P==="application/octet-stream"||P==="application/pdf"?ce=yield ie.blob():P==="text/event-stream"?ce=ie:P==="multipart/form-data"?ce=yield ie.formData():ce=yield ie.text(),{data:ce,error:null,response:ie}}catch(_){return{data:null,error:_,response:_ instanceof Ag||_ instanceof Eg?_.context:void 0}}finally{g&&clearTimeout(g)}})}}var lw=class extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}},ow=class{constructor(l){var i,o,h;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(i=l.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=l.signal,this.isMaybeSingle=(o=l.isMaybeSingle)!==null&&o!==void 0?o:!1,this.urlLengthLimit=(h=l.urlLengthLimit)!==null&&h!==void 0?h:8e3,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,i){return this.headers=new Headers(this.headers),this.headers.set(l,i),this}then(l,i){var o=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{let v=null,_=null,E=null,w=g.status,C=g.statusText;if(g.ok){var R,M;if(o.method!=="HEAD"){var k;const ie=await g.text();ie===""||(o.headers.get("Accept")==="text/csv"||o.headers.get("Accept")&&(!((k=o.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?_=ie:_=JSON.parse(ie))}const F=(R=o.headers.get("Prefer"))===null||R===void 0?void 0:R.match(/count=(exact|planned|estimated)/),H=(M=g.headers.get("content-range"))===null||M===void 0?void 0:M.split("/");F&&H&&H.length>1&&(E=parseInt(H[1])),o.isMaybeSingle&&o.method==="GET"&&Array.isArray(_)&&(_.length>1?(v={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,E=null,w=406,C="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{var j;const F=await g.text();try{v=JSON.parse(F),Array.isArray(v)&&g.status===404&&(_=[],v=null,w=200,C="OK")}catch{g.status===404&&F===""?(w=204,C="No Content"):v={message:F}}if(v&&o.isMaybeSingle&&(!(v==null||(j=v.details)===null||j===void 0)&&j.includes("0 rows"))&&(v=null,w=200,C="OK"),v&&o.shouldThrowOnError)throw new lw(v)}return{error:v,data:_,count:E,status:w,statusText:C}});return this.shouldThrowOnError||(p=p.catch(g=>{var v;let _="",E="",w="";const C=g?.cause;if(C){var R,M,k,j;const ie=(R=C?.message)!==null&&R!==void 0?R:"",X=(M=C?.code)!==null&&M!==void 0?M:"";_=`${(k=g?.name)!==null&&k!==void 0?k:"FetchError"}: ${g?.message}`,_+=`

Caused by: ${(j=C?.name)!==null&&j!==void 0?j:"Error"}: ${ie}`,X&&(_+=` (${X})`),C?.stack&&(_+=`
${C.stack}`)}else{var F;_=(F=g?.stack)!==null&&F!==void 0?F:""}const H=this.url.toString().length;return g?.name==="AbortError"||g?.code==="ABORT_ERR"?(w="",E="Request was aborted (timeout or manual cancellation)",H>this.urlLengthLimit&&(E+=`. Note: Your request URL is ${H} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(C?.name==="HeadersOverflowError"||C?.code==="UND_ERR_HEADERS_OVERFLOW")&&(w="",E="HTTP headers exceeded server limits (typically 16KB)",H>this.urlLengthLimit&&(E+=`. Your request URL is ${H} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(v=g?.name)!==null&&v!==void 0?v:"FetchError"}: ${g?.message}`,details:_,hint:E,code:w},data:null,count:null,status:0,statusText:""}})),p.then(l,i)}returns(){return this}overrideTypes(){return this}},cw=class extends ow{select(l){let i=!1;const o=(l??"*").split("").map(h=>/\s/.test(h)&&!i?"":(h==='"'&&(i=!i),h)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:i=!0,nullsFirst:o,foreignTable:h,referencedTable:p=h}={}){const g=p?`${p}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${l}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:i,referencedTable:o=i}={}){const h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,i,{foreignTable:o,referencedTable:h=o}={}){const p=typeof h>"u"?"offset":`${h}.offset`,g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(g,`${i-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:i=!1,settings:o=!1,buffers:h=!1,wal:p=!1,format:g="text"}={}){var v;const _=[l?"analyze":null,i?"verbose":null,o?"settings":null,h?"buffers":null,p?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${E}"; options=${_};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};const _g=new RegExp("[,()]");var Qs=class extends cw{eq(l,i){return this.url.searchParams.append(l,`eq.${i}`),this}neq(l,i){return this.url.searchParams.append(l,`neq.${i}`),this}gt(l,i){return this.url.searchParams.append(l,`gt.${i}`),this}gte(l,i){return this.url.searchParams.append(l,`gte.${i}`),this}lt(l,i){return this.url.searchParams.append(l,`lt.${i}`),this}lte(l,i){return this.url.searchParams.append(l,`lte.${i}`),this}like(l,i){return this.url.searchParams.append(l,`like.${i}`),this}likeAllOf(l,i){return this.url.searchParams.append(l,`like(all).{${i.join(",")}}`),this}likeAnyOf(l,i){return this.url.searchParams.append(l,`like(any).{${i.join(",")}}`),this}ilike(l,i){return this.url.searchParams.append(l,`ilike.${i}`),this}ilikeAllOf(l,i){return this.url.searchParams.append(l,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(l,i){return this.url.searchParams.append(l,`ilike(any).{${i.join(",")}}`),this}regexMatch(l,i){return this.url.searchParams.append(l,`match.${i}`),this}regexIMatch(l,i){return this.url.searchParams.append(l,`imatch.${i}`),this}is(l,i){return this.url.searchParams.append(l,`is.${i}`),this}isDistinct(l,i){return this.url.searchParams.append(l,`isdistinct.${i}`),this}in(l,i){const o=Array.from(new Set(i)).map(h=>typeof h=="string"&&_g.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${o})`),this}notIn(l,i){const o=Array.from(new Set(i)).map(h=>typeof h=="string"&&_g.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`not.in.(${o})`),this}contains(l,i){return typeof i=="string"?this.url.searchParams.append(l,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(l,`cs.{${i.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(i)}`),this}containedBy(l,i){return typeof i=="string"?this.url.searchParams.append(l,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(l,`cd.{${i.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(i)}`),this}rangeGt(l,i){return this.url.searchParams.append(l,`sr.${i}`),this}rangeGte(l,i){return this.url.searchParams.append(l,`nxl.${i}`),this}rangeLt(l,i){return this.url.searchParams.append(l,`sl.${i}`),this}rangeLte(l,i){return this.url.searchParams.append(l,`nxr.${i}`),this}rangeAdjacent(l,i){return this.url.searchParams.append(l,`adj.${i}`),this}overlaps(l,i){return typeof i=="string"?this.url.searchParams.append(l,`ov.${i}`):this.url.searchParams.append(l,`ov.{${i.join(",")}}`),this}textSearch(l,i,{config:o,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const g=o===void 0?"":`(${o})`;return this.url.searchParams.append(l,`${p}fts${g}.${i}`),this}match(l){return Object.entries(l).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(l,i,o){return this.url.searchParams.append(l,`not.${i}.${o}`),this}or(l,{foreignTable:i,referencedTable:o=i}={}){const h=o?`${o}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,i,o){return this.url.searchParams.append(l,`${i}.${o}`),this}},uw=class{constructor(l,{headers:i={},schema:o,fetch:h,urlLengthLimit:p=8e3}){this.url=l,this.headers=new Headers(i),this.schema=o,this.fetch=h,this.urlLengthLimit=p}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(l,i){const{head:o=!1,count:h}=i??{},p=o?"HEAD":"GET";let g=!1;const v=(l??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join(""),{url:_,headers:E}=this.cloneRequestState();return _.searchParams.set("select",v),h&&E.append("Prefer",`count=${h}`),new Qs({method:p,url:_,headers:E,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(l,{count:i,defaultToNull:o=!0}={}){var h;const p="POST",{url:g,headers:v}=this.cloneRequestState();if(i&&v.append("Prefer",`count=${i}`),o||v.append("Prefer","missing=default"),Array.isArray(l)){const _=l.reduce((E,w)=>E.concat(Object.keys(w)),[]);if(_.length>0){const E=[...new Set(_)].map(w=>`"${w}"`);g.searchParams.set("columns",E.join(","))}}return new Qs({method:p,url:g,headers:v,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(l,{onConflict:i,ignoreDuplicates:o=!1,count:h,defaultToNull:p=!0}={}){var g;const v="POST",{url:_,headers:E}=this.cloneRequestState();if(E.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&_.searchParams.set("on_conflict",i),h&&E.append("Prefer",`count=${h}`),p||E.append("Prefer","missing=default"),Array.isArray(l)){const w=l.reduce((C,R)=>C.concat(Object.keys(R)),[]);if(w.length>0){const C=[...new Set(w)].map(R=>`"${R}"`);_.searchParams.set("columns",C.join(","))}}return new Qs({method:v,url:_,headers:E,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch,urlLengthLimit:this.urlLengthLimit})}update(l,{count:i}={}){var o;const h="PATCH",{url:p,headers:g}=this.cloneRequestState();return i&&g.append("Prefer",`count=${i}`),new Qs({method:h,url:p,headers:g,schema:this.schema,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:l}={}){var i;const o="DELETE",{url:h,headers:p}=this.cloneRequestState();return l&&p.append("Prefer",`count=${l}`),new Qs({method:o,url:h,headers:p,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};function ho(l){"@babel/helpers - typeof";return ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ho(l)}function hw(l,i){if(ho(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var h=o.call(l,i);if(ho(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function fw(l){var i=hw(l,"string");return ho(i)=="symbol"?i:i+""}function dw(l,i,o){return(i=fw(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function Cg(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);i&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,h)}return o}function Hc(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Cg(Object(o),!0).forEach(function(h){dw(l,h,o[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):Cg(Object(o)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(o,h))})}return l}var gw=class Om{constructor(i,{headers:o={},schema:h,fetch:p,timeout:g,urlLengthLimit:v=8e3}={}){this.url=i,this.headers=new Headers(o),this.schemaName=h,this.urlLengthLimit=v;const _=p??globalThis.fetch;g!==void 0&&g>0?this.fetch=(E,w)=>{const C=new AbortController,R=setTimeout(()=>C.abort(),g),M=w?.signal;if(M){if(M.aborted)return clearTimeout(R),_(E,w);const k=()=>{clearTimeout(R),C.abort()};return M.addEventListener("abort",k,{once:!0}),_(E,Hc(Hc({},w),{},{signal:C.signal})).finally(()=>{clearTimeout(R),M.removeEventListener("abort",k)})}return _(E,Hc(Hc({},w),{},{signal:C.signal})).finally(()=>clearTimeout(R))}:this.fetch=_}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new uw(new URL(`${this.url}/${i}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(i){return new Om(this.url,{headers:this.headers,schema:i,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(i,o={},{head:h=!1,get:p=!1,count:g}={}){var v;let _;const E=new URL(`${this.url}/rpc/${i}`);let w;const C=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(C)),R=h&&Object.values(o).some(C);R?(_="POST",w=o):h||p?(_=h?"HEAD":"GET",Object.entries(o).filter(([k,j])=>j!==void 0).map(([k,j])=>[k,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([k,j])=>{E.searchParams.append(k,j)})):(_="POST",w=o);const M=new Headers(this.headers);return R?M.set("Prefer",g?`count=${g},return=minimal`:"return=minimal"):g&&M.set("Prefer",`count=${g}`),new Qs({method:_,url:E,headers:M,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch,urlLengthLimit:this.urlLengthLimit})}};class mw{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const o=globalThis.process;if(o){const h=o.versions;if(h&&h.node){const p=h.node,g=parseInt(p.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let o=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(o+=`

Suggested solution: ${i.workaround}`),new Error(o)}static createWebSocket(i,o){const h=this.getWebSocketConstructor();return new h(i,o)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const pw="2.96.0",xw=`realtime-js/${pw}`,yw="1.0.0",Im="2.0.0",Sg=Im,Bf=1e4,ww=1e3,bw=100;var _a;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(_a||(_a={}));var On;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(On||(On={}));var Jr;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Jr||(Jr={}));var kf;(function(l){l.websocket="websocket"})(kf||(kf={}));var ns;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(ns||(ns={}));class vw{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,o){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return o(this._binaryEncodeUserBroadcastPush(i));let h=[i.join_ref,i.ref,i.topic,i.event,i.payload];return o(JSON.stringify(h))}_binaryEncodeUserBroadcastPush(i){var o;return this._isArrayBuffer((o=i.payload)===null||o===void 0?void 0:o.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var o,h;const p=(h=(o=i.payload)===null||o===void 0?void 0:o.payload)!==null&&h!==void 0?h:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(i){var o,h;const p=(h=(o=i.payload)===null||o===void 0?void 0:o.payload)!==null&&h!==void 0?h:{},v=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,v)}_encodeUserBroadcastPush(i,o,h){var p,g;const v=i.topic,_=(p=i.ref)!==null&&p!==void 0?p:"",E=(g=i.join_ref)!==null&&g!==void 0?g:"",w=i.payload.event,C=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},R=Object.keys(C).length===0?"":JSON.stringify(C);if(E.length>255)throw new Error(`joinRef length ${E.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`ref length ${_.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`topic length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`userEvent length ${w.length} exceeds maximum of 255`);if(R.length>255)throw new Error(`metadata length ${R.length} exceeds maximum of 255`);const M=this.USER_BROADCAST_PUSH_META_LENGTH+E.length+_.length+v.length+w.length+R.length,k=new ArrayBuffer(this.HEADER_LENGTH+M);let j=new DataView(k),F=0;j.setUint8(F++,this.KINDS.userBroadcastPush),j.setUint8(F++,E.length),j.setUint8(F++,_.length),j.setUint8(F++,v.length),j.setUint8(F++,w.length),j.setUint8(F++,R.length),j.setUint8(F++,o),Array.from(E,ie=>j.setUint8(F++,ie.charCodeAt(0))),Array.from(_,ie=>j.setUint8(F++,ie.charCodeAt(0))),Array.from(v,ie=>j.setUint8(F++,ie.charCodeAt(0))),Array.from(w,ie=>j.setUint8(F++,ie.charCodeAt(0))),Array.from(R,ie=>j.setUint8(F++,ie.charCodeAt(0)));var H=new Uint8Array(k.byteLength+h.byteLength);return H.set(new Uint8Array(k),0),H.set(new Uint8Array(h),k.byteLength),H.buffer}decode(i,o){if(this._isArrayBuffer(i)){let h=this._binaryDecode(i);return o(h)}if(typeof i=="string"){const h=JSON.parse(i),[p,g,v,_,E]=h;return o({join_ref:p,ref:g,topic:v,event:_,payload:E})}return o({})}_binaryDecode(i){const o=new DataView(i),h=o.getUint8(0),p=new TextDecoder;if(h===this.KINDS.userBroadcast)return this._decodeUserBroadcast(i,o,p)}_decodeUserBroadcast(i,o,h){const p=o.getUint8(1),g=o.getUint8(2),v=o.getUint8(3),_=o.getUint8(4);let E=this.HEADER_LENGTH+4;const w=h.decode(i.slice(E,E+p));E=E+p;const C=h.decode(i.slice(E,E+g));E=E+g;const R=h.decode(i.slice(E,E+v));E=E+v;const M=i.slice(E,i.byteLength),k=_===this.JSON_ENCODING?JSON.parse(h.decode(M)):M,j={type:this.BROADCAST_EVENT,event:C,payload:k};return v>0&&(j.meta=JSON.parse(R)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(i){var o;return i instanceof ArrayBuffer||((o=i?.constructor)===null||o===void 0?void 0:o.name)==="ArrayBuffer"}_pick(i,o){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([h])=>o.includes(h)))}}class Dm{constructor(i,o){this.callback=i,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Ht||(Ht={}));const Tg=(l,i,o={})=>{var h;const p=(h=o.skipTypes)!==null&&h!==void 0?h:[];return i?Object.keys(i).reduce((g,v)=>(g[v]=Ew(v,l,i,p),g),{}):{}},Ew=(l,i,o,h)=>{const p=i.find(_=>_.name===l),g=p?.type,v=o[l];return g&&!h.includes(g)?Mm(g,v):Lf(v)},Mm=(l,i)=>{if(l.charAt(0)==="_"){const o=l.slice(1,l.length);return Sw(i,o)}switch(l){case Ht.bool:return Aw(i);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return _w(i);case Ht.json:case Ht.jsonb:return Cw(i);case Ht.timestamp:return Tw(i);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return Lf(i);default:return Lf(i)}},Lf=l=>l,Aw=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},_w=l=>{if(typeof l=="string"){const i=parseFloat(l);if(!Number.isNaN(i))return i}return l},Cw=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l}return l},Sw=(l,i)=>{if(typeof l!="string")return l;const o=l.length-1,h=l[o];if(l[0]==="{"&&h==="}"){let g;const v=l.slice(1,o);try{g=JSON.parse("["+v+"]")}catch{g=v?v.split(","):[]}return g.map(_=>Mm(i,_))}return l},Tw=l=>typeof l=="string"?l.replace(" ","T"):l,Bm=l=>{const i=new URL(l);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class vf{constructor(i,o,h={},p=Bf){this.channel=i,this.event=o,this.payload=h,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,o){var h;return this._hasReceived(i)&&o((h=this.receivedResp)===null||h===void 0?void 0:h.response),this.recHooks.push({status:i,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:o}){this.recHooks.filter(h=>h.status===i).forEach(h=>h.callback(o))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var Rg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(Rg||(Rg={}));class oo{constructor(i,o){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const h=o?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(h.state,{},p=>{const{onJoin:g,onLeave:v,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oo.syncState(this.state,p,g,v),this.pendingDiffs.forEach(E=>{this.state=oo.syncDiff(this.state,E,g,v)}),this.pendingDiffs=[],_()}),this.channel._on(h.diff,{},p=>{const{onJoin:g,onLeave:v,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=oo.syncDiff(this.state,p,g,v),_())}),this.onJoin((p,g,v)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:g,newPresences:v})}),this.onLeave((p,g,v)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:g,leftPresences:v})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,o,h,p){const g=this.cloneDeep(i),v=this.transformState(o),_={},E={};return this.map(g,(w,C)=>{v[w]||(E[w]=C)}),this.map(v,(w,C)=>{const R=g[w];if(R){const M=C.map(H=>H.presence_ref),k=R.map(H=>H.presence_ref),j=C.filter(H=>k.indexOf(H.presence_ref)<0),F=R.filter(H=>M.indexOf(H.presence_ref)<0);j.length>0&&(_[w]=j),F.length>0&&(E[w]=F)}else _[w]=C}),this.syncDiff(g,{joins:_,leaves:E},h,p)}static syncDiff(i,o,h,p){const{joins:g,leaves:v}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return h||(h=()=>{}),p||(p=()=>{}),this.map(g,(_,E)=>{var w;const C=(w=i[_])!==null&&w!==void 0?w:[];if(i[_]=this.cloneDeep(E),C.length>0){const R=i[_].map(k=>k.presence_ref),M=C.filter(k=>R.indexOf(k.presence_ref)<0);i[_].unshift(...M)}h(_,C,E)}),this.map(v,(_,E)=>{let w=i[_];if(!w)return;const C=E.map(R=>R.presence_ref);w=w.filter(R=>C.indexOf(R.presence_ref)<0),i[_]=w,p(_,w,E),w.length===0&&delete i[_]}),i}static map(i,o){return Object.getOwnPropertyNames(i).map(h=>o(h,i[h]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((o,h)=>{const p=i[h];return"metas"in p?o[h]=p.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):o[h]=p,o},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ng;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Ng||(Ng={}));var co;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(co||(co={}));var Li;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Li||(Li={}));class el{constructor(i,o={config:{}},h){var p,g;if(this.topic=i,this.params=o,this.socket=h,this.bindings={},this.state=On.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new vf(this,Jr.join,this.params,this.timeout),this.rejoinTimer=new Dm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=On.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(v=>v.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=On.closed,this.socket._remove(this)}),this._onError(v=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,v),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",v=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,v),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jr.reply,{},(v,_)=>{this._trigger(this._replyEventName(_),v)}),this.presence=new oo(this),this.broadcastEndpointURL=Bm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,o=this.timeout){var h,p,g;if(this.socket.isConnected()||this.socket.connect(),this.state==On.closed){const{config:{broadcast:v,presence:_,private:E}}=this.params,w=(p=(h=this.bindings.postgres_changes)===null||h===void 0?void 0:h.map(k=>k.filter))!==null&&p!==void 0?p:[],C=!!this.bindings[co.PRESENCE]&&this.bindings[co.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,R={},M={broadcast:v,presence:Object.assign(Object.assign({},_),{enabled:C}),postgres_changes:w,private:E};this.socket.accessTokenValue&&(R.access_token=this.socket.accessTokenValue),this._onError(k=>i?.(Li.CHANNEL_ERROR,k)),this._onClose(()=>i?.(Li.CLOSED)),this.updateJoinPayload(Object.assign({config:M},R)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:k})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){i?.(Li.SUBSCRIBED);return}else{const F=this.bindings.postgres_changes,H=(j=F?.length)!==null&&j!==void 0?j:0,ie=[];for(let X=0;X<H;X++){const P=F[X],{filter:{event:ce,schema:Re,table:be,filter:J}}=P,Se=k&&k[X];if(Se&&Se.event===ce&&el.isFilterValueEqual(Se.schema,Re)&&el.isFilterValueEqual(Se.table,be)&&el.isFilterValueEqual(Se.filter,J))ie.push(Object.assign(Object.assign({},P),{id:Se.id}));else{this.unsubscribe(),this.state=On.errored,i?.(Li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ie,i&&i(Li.SUBSCRIBED);return}}).receive("error",k=>{this.state=On.errored,i?.(Li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{i?.(Li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,o={}){return await this.send({type:"presence",event:"track",payload:i},o.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,o,h){return this.state===On.joined&&i===co.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(i,o,h)}async httpSend(i,o,h={}){var p;if(o==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})},_=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(p=h.timeout)!==null&&p!==void 0?p:this.timeout);if(_.status===202)return{success:!0};let E=_.statusText;try{const w=await _.json();E=w.error||w.message||E}catch{}return Promise.reject(new Error(E))}async send(i,o={}){var h,p;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:v}=i,_={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(_.Authorization=`Bearer ${this.socket.accessTokenValue}`);const E={method:"POST",headers:_,body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:v,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(h=o.timeout)!==null&&h!==void 0?h:this.timeout);return await((p=w.body)===null||p===void 0?void 0:p.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var v,_,E;const w=this._push(i.type,i,o.timeout||this.timeout);i.type==="broadcast"&&!(!((E=(_=(v=this.params)===null||v===void 0?void 0:v.config)===null||_===void 0?void 0:_.broadcast)===null||E===void 0)&&E.ack)&&g("ok"),w.receive("ok",()=>g("ok")),w.receive("error",()=>g("error")),w.receive("timeout",()=>g("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=On.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jr.close,"leave",this._joinRef())};this.joinPush.destroy();let h=null;return new Promise(p=>{h=new vf(this,Jr.leave,{},i),h.receive("ok",()=>{o(),p("ok")}).receive("timeout",()=>{o(),p("timed out")}).receive("error",()=>{p("error")}),h.send(),this._canPush()||h.trigger("ok",{})}).finally(()=>{h?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=On.closed,this.bindings={}}async _fetchWithTimeout(i,o,h){const p=new AbortController,g=setTimeout(()=>p.abort(),h),v=await this.socket.fetch(i,Object.assign(Object.assign({},o),{signal:p.signal}));return clearTimeout(g),v}_push(i,o,h=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new vf(this,i,o,h);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>bw){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(i,o,h){return o}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,o,h){var p,g;const v=i.toLocaleLowerCase(),{close:_,error:E,leave:w,join:C}=Jr;if(h&&[_,E,w,C].indexOf(v)>=0&&h!==this._joinRef())return;let M=this._onMessage(v,o,h);if(o&&!M)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(v)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(k=>{var j,F,H;return((j=k.filter)===null||j===void 0?void 0:j.event)==="*"||((H=(F=k.filter)===null||F===void 0?void 0:F.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===v}).map(k=>k.callback(M,h)):(g=this.bindings[v])===null||g===void 0||g.filter(k=>{var j,F,H,ie,X,P;if(["broadcast","presence","postgres_changes"].includes(v))if("id"in k){const ce=k.id,Re=(j=k.filter)===null||j===void 0?void 0:j.event;return ce&&((F=o.ids)===null||F===void 0?void 0:F.includes(ce))&&(Re==="*"||Re?.toLocaleLowerCase()===((H=o.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const ce=(X=(ie=k?.filter)===null||ie===void 0?void 0:ie.event)===null||X===void 0?void 0:X.toLocaleLowerCase();return ce==="*"||ce===((P=o?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===v}).map(k=>{if(typeof M=="object"&&"ids"in M){const j=M.data,{schema:F,table:H,commit_timestamp:ie,type:X,errors:P}=j;M=Object.assign(Object.assign({},{schema:F,table:H,commit_timestamp:ie,eventType:X,new:{},old:{},errors:P}),this._getPayloadRecords(j))}k.callback(M,h)})}_isClosed(){return this.state===On.closed}_isJoined(){return this.state===On.joined}_isJoining(){return this.state===On.joining}_isLeaving(){return this.state===On.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,o,h){const p=i.toLocaleLowerCase(),g={type:p,filter:o,callback:h};return this.bindings[p]?this.bindings[p].push(g):this.bindings[p]=[g],this}_off(i,o){const h=i.toLocaleLowerCase();return this.bindings[h]&&(this.bindings[h]=this.bindings[h].filter(p=>{var g;return!(((g=p.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===h&&el.isEqual(p.filter,o))})),this}static isEqual(i,o){if(Object.keys(i).length!==Object.keys(o).length)return!1;for(const h in i)if(i[h]!==o[h])return!1;return!0}static isFilterValueEqual(i,o){return(i??void 0)===(o??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Jr.close,{},i)}_onError(i){this._on(Jr.error,{},o=>i(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=On.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const o={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(o.new=Tg(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(o.old=Tg(i.columns,i.old_record)),o}}const Ef=()=>{},Gc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Rw=[1e3,2e3,5e3,1e4],Nw=1e4,Ow=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Iw{constructor(i,o){var h;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bf,this.transport=null,this.heartbeatIntervalMs=Gc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ef,this.ref=0,this.reconnectTimer=null,this.vsn=Sg,this.logger=Ef,this.conn=null,this.sendBuffer=[],this.serializer=new vw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...g)=>p(...g):(...g)=>fetch(...g),!(!((h=o?.params)===null||h===void 0)&&h.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${i}/${kf.websocket}`,this.httpEndpoint=Bm(i),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mw.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const o=i.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const h=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(h),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,o??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const o=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const i=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,o,h){this.logger(i,o,h)}connectionState(){switch(this.conn&&this.conn.readyState){case _a.connecting:return ns.Connecting;case _a.open:return ns.Open;case _a.closing:return ns.Closing;default:return ns.Closed}}isConnected(){return this.connectionState()===ns.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,o={config:{}}){const h=`realtime:${i}`,p=this.getChannels().find(g=>g.topic===h);if(p)return p;{const g=new el(`realtime:${i}`,o,this);return this.channels.push(g),g}}push(i){const{topic:o,event:h,payload:p,ref:g}=i,v=()=>{this.encode(i,_=>{var E;(E=this.conn)===null||E===void 0||E.send(_)})};this.log("push",`${o} ${h} (${g})`,p),this.isConnected()?v():this.sendBuffer.push(v)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(ww,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},Gc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let o=this.channels.find(h=>h.topic===i&&(h._isJoined()||h._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${i}"`),o.unsubscribe())}_remove(i){this.channels=this.channels.filter(o=>o.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply"&&o.ref&&o.ref===this.pendingHeartbeatRef){const w=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error",w)}catch(C){this.log("error","error in heartbeat callback",C)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:h,event:p,payload:g,ref:v}=o,_=v?`(${v})`:"",E=g.status||"";this.log("receive",`${E} ${h} ${p} ${_}`.trim(),g),this.channels.filter(w=>w._isMember(h)).forEach(w=>w._trigger(p,g,v)),this._triggerStateCallbacks("message",o)})}_clearTimer(i){var o;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i),this.conn.readyState===_a.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_a.open||this.conn.readyState===_a.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(o=>{this.log("error","error waiting for auth on connect",o),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this._terminateWorker()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(i){var o;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i);try{this.heartbeatCallback("error")}catch(o){this.log("error","error in heartbeat callback",o)}}_triggerChanError(){this.channels.forEach(i=>i._trigger(Jr.error))}_appendParams(i,o){if(Object.keys(o).length===0)return i;const h=i.match(/\?/)?"&":"?",p=new URLSearchParams(o);return`${i}${h}${p}`}_workerObjectUrl(i){let o;if(i)o=i;else{const h=new Blob([Ow],{type:"application/javascript"});o=URL.createObjectURL(h)}return o}_setConnectionState(i,o=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(i=null){let o,h=!1;if(i)o=i,h=!0;else if(this.accessToken)try{o=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),o=this.accessTokenValue}else o=this.accessTokenValue;h?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(p=>{const g={access_token:o,version:xw};o&&p.updateJoinPayload(g),p.joinedOnce&&p._isJoined()&&p._push(Jr.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this._isManualToken()||this.setAuth().catch(o=>{this.log("error",`Error setting auth in ${i}`,o)})}_triggerStateCallbacks(i,o){try{this.stateChangeCallbacks[i].forEach(h=>{try{h(o)}catch(p){this.log("error",`error in ${i} callback`,p)}})}catch(h){this.log("error",`error triggering ${i} callbacks`,h)}}_setupReconnectionTimer(){this.reconnectTimer=new Dm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var o,h,p,g,v,_,E,w,C,R,M,k;switch(this.transport=(o=i?.transport)!==null&&o!==void 0?o:null,this.timeout=(h=i?.timeout)!==null&&h!==void 0?h:Bf,this.heartbeatIntervalMs=(p=i?.heartbeatIntervalMs)!==null&&p!==void 0?p:Gc.HEARTBEAT_INTERVAL,this.worker=(g=i?.worker)!==null&&g!==void 0?g:!1,this.accessToken=(v=i?.accessToken)!==null&&v!==void 0?v:null,this.heartbeatCallback=(_=i?.heartbeatCallback)!==null&&_!==void 0?_:Ef,this.vsn=(E=i?.vsn)!==null&&E!==void 0?E:Sg,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=i?.reconnectAfterMs)!==null&&w!==void 0?w:(j=>Rw[j-1]||Nw),this.vsn){case yw:this.encode=(C=i?.encode)!==null&&C!==void 0?C:((j,F)=>F(JSON.stringify(j))),this.decode=(R=i?.decode)!==null&&R!==void 0?R:((j,F)=>F(JSON.parse(j)));break;case Im:this.encode=(M=i?.encode)!==null&&M!==void 0?M:this.serializer.encode.bind(this.serializer),this.decode=(k=i?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}var fo=class extends Error{constructor(l,i){super(l),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&i.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Dw(l,i,o){const h=new URL(i,l);if(o)for(const[p,g]of Object.entries(o))g!==void 0&&h.searchParams.set(p,g);return h.toString()}async function Mw(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function Bw(l){const i=l.fetchImpl??globalThis.fetch;return{async request({method:o,path:h,query:p,body:g,headers:v}){const _=Dw(l.baseUrl,h,p),E=await Mw(l.auth),w=await i(_,{method:o,headers:{...g?{"Content-Type":"application/json"}:{},...E,...v},body:g?JSON.stringify(g):void 0}),C=await w.text(),R=(w.headers.get("content-type")||"").includes("application/json"),M=R&&C?JSON.parse(C):C;if(!w.ok){const k=R?M:void 0,j=k?.error;throw new fo(j?.message??`Request failed with status ${w.status}`,{status:w.status,icebergType:j?.type,icebergCode:j?.code,details:k})}return{status:w.status,headers:w.headers,data:M}}}}function Vc(l){return l.join("")}var kw=class{constructor(l,i=""){this.client=l,this.prefix=i}async listNamespaces(l){const i=l?{parent:Vc(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(h=>({namespace:h}))}async createNamespace(l,i){const o={namespace:l.namespace,properties:i?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:o})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vc(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vc(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vc(l.namespace)}`}),!0}catch(i){if(i instanceof fo&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(l,i){try{return await this.createNamespace(l,i)}catch(o){if(o instanceof fo&&o.status===409)return;throw o}}};function qs(l){return l.join("")}var Lw=class{constructor(l,i="",o){this.client=l,this.prefix=i,this.accessDelegation=o}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables`})).data.identifiers}async createTable(l,i){const o={};return this.accessDelegation&&(o["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables`,body:i,headers:o})).data.metadata}async updateTable(l,i){const o=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables/${l.name}`,body:i});return{"metadata-location":o.data["metadata-location"],metadata:o.data.metadata}}async dropTable(l,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String(i?.purge??!1)}})}async loadTable(l){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables/${l.name}`,headers:i})).data.metadata}async tableExists(l){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qs(l.namespace)}/tables/${l.name}`,headers:i}),!0}catch(o){if(o instanceof fo&&o.status===404)return!1;throw o}}async createTableIfNotExists(l,i){try{return await this.createTable(l,i)}catch(o){if(o instanceof fo&&o.status===409)return await this.loadTable({namespace:l.namespace,name:i.name});throw o}}},Uw=class{constructor(l){let i="v1";l.catalogName&&(i+=`/${l.catalogName}`);const o=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=Bw({baseUrl:o,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=l.accessDelegation?.join(","),this.namespaceOps=new kw(this.client,i),this.tableOps=new Lw(this.client,i,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,i){return this.namespaceOps.createNamespace(l,i)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,i){return this.tableOps.createTable(l,i)}async updateTable(l,i){return this.tableOps.updateTable(l,i)}async dropTable(l,i){await this.tableOps.dropTable(l,i)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,i){return this.namespaceOps.createNamespaceIfNotExists(l,i)}async createTableIfNotExists(l,i){return this.tableOps.createTableIfNotExists(l,i)}},hu=class extends Error{constructor(l,i="storage",o,h){super(l),this.__isStorageError=!0,this.namespace=i,this.name=i==="vectors"?"StorageVectorsError":"StorageError",this.status=o,this.statusCode=h}};function fu(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}var qc=class extends hu{constructor(l,i,o,h="storage"){super(l,h,i,o),this.name=h==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},km=class extends hu{constructor(l,i,o="storage"){super(l,o),this.name=o==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=i}};const jw=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),Pw=l=>{if(typeof l!="object"||l===null)return!1;const i=Object.getPrototypeOf(l);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Uf=l=>{if(Array.isArray(l))return l.map(o=>Uf(o));if(typeof l=="function"||l!==Object(l))return l;const i={};return Object.entries(l).forEach(([o,h])=>{const p=o.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));i[p]=Uf(h)}),i},Fw=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l);function go(l){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},go(l)}function zw(l,i){if(go(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var h=o.call(l,i);if(go(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function Hw(l){var i=zw(l,"string");return go(i)=="symbol"?i:i+""}function Gw(l,i,o){return(i=Hw(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function Og(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);i&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,h)}return o}function He(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Og(Object(o),!0).forEach(function(h){Gw(l,h,o[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):Og(Object(o)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(o,h))})}return l}const Ig=l=>{var i;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(i=l.error)===null||i===void 0?void 0:i.message)||JSON.stringify(l)},Vw=async(l,i,o,h)=>{if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!o?.noResolveJson){const p=l,g=p.status||500;if(typeof p.json=="function")p.json().then(v=>{const _=v?.statusCode||v?.code||g+"";i(new qc(Ig(v),g,_,h))}).catch(()=>{if(h==="vectors"){const v=g+"";i(new qc(p.statusText||`HTTP ${g} error`,g,v,h))}else{const v=g+"";i(new qc(p.statusText||`HTTP ${g} error`,g,v,h))}});else{const v=g+"";i(new qc(p.statusText||`HTTP ${g} error`,g,v,h))}}else i(new km(Ig(l),l,h))},qw=(l,i,o,h)=>{const p={method:l,headers:i?.headers||{}};return l==="GET"||l==="HEAD"||!h?He(He({},p),o):(Pw(h)?(p.headers=He({"Content-Type":"application/json"},i?.headers),p.body=JSON.stringify(h)):p.body=h,i?.duplex&&(p.duplex=i.duplex),He(He({},p),o))};async function io(l,i,o,h,p,g,v){return new Promise((_,E)=>{l(o,qw(i,h,p,g)).then(w=>{if(!w.ok)throw w;if(h?.noResolveJson)return w;if(v==="vectors"){const C=w.headers.get("content-type");if(w.headers.get("content-length")==="0"||w.status===204)return{};if(!C||!C.includes("application/json"))return{}}return w.json()}).then(w=>_(w)).catch(w=>Vw(w,E,h,v))})}function Lm(l="storage"){return{get:async(i,o,h,p)=>io(i,"GET",o,h,p,void 0,l),post:async(i,o,h,p,g)=>io(i,"POST",o,p,g,h,l),put:async(i,o,h,p,g)=>io(i,"PUT",o,p,g,h,l),head:async(i,o,h,p)=>io(i,"HEAD",o,He(He({},h),{},{noResolveJson:!0}),p,void 0,l),remove:async(i,o,h,p,g)=>io(i,"DELETE",o,p,g,h,l)}}const Xw=Lm("storage"),{get:mo,post:Qr,put:jf,head:Yw,remove:td}=Xw,Ar=Lm("vectors");var ll=class{constructor(l,i={},o,h="storage"){this.shouldThrowOnError=!1,this.url=l,this.headers=i,this.fetch=jw(o),this.namespace=h}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,i){return this.headers=He(He({},this.headers),{},{[l]:i}),this}async handleOperation(l){var i=this;try{return{data:await l(),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fu(o))return{data:null,error:o};throw o}}},Ww=class{constructor(l,i){this.downloadFn=l,this.shouldThrowOnError=i}then(l,i){return this.execute().then(l,i)}async execute(){var l=this;try{return{data:(await l.downloadFn()).body,error:null}}catch(i){if(l.shouldThrowOnError)throw i;if(fu(i))return{data:null,error:i};throw i}}};let Um;Um=Symbol.toStringTag;var Kw=class{constructor(l,i){this.downloadFn=l,this.shouldThrowOnError=i,this[Um]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ww(this.downloadFn,this.shouldThrowOnError)}then(l,i){return this.getPromise().then(l,i)}catch(l){return this.getPromise().catch(l)}finally(l){return this.getPromise().finally(l)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var l=this;try{return{data:await(await l.downloadFn()).blob(),error:null}}catch(i){if(l.shouldThrowOnError)throw i;if(fu(i))return{data:null,error:i};throw i}}};const Zw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Qw=class extends ll{constructor(l,i={},o,h){super(l,i,h,"storage"),this.bucketId=o}async uploadOrUpdate(l,i,o,h){var p=this;return p.handleOperation(async()=>{let g;const v=He(He({},Dg),h);let _=He(He({},p.headers),l==="POST"&&{"x-upsert":String(v.upsert)});const E=v.metadata;typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),E&&g.append("metadata",p.encodeMetadata(E)),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.has("cacheControl")||g.append("cacheControl",v.cacheControl),E&&!g.has("metadata")&&g.append("metadata",p.encodeMetadata(E))):(g=o,_["cache-control"]=`max-age=${v.cacheControl}`,_["content-type"]=v.contentType,E&&(_["x-metadata"]=p.toBase64(p.encodeMetadata(E))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!v.duplex&&(v.duplex="half")),h?.headers&&(_=He(He({},_),h.headers));const w=p._removeEmptyFolders(i),C=p._getFinalPath(w),R=await(l=="PUT"?jf:Qr)(p.fetch,`${p.url}/object/${C}`,g,He({headers:_},v?.duplex?{duplex:v.duplex}:{}));return{path:w,id:R.Id,fullPath:R.Key}})}async upload(l,i,o){return this.uploadOrUpdate("POST",l,i,o)}async uploadToSignedUrl(l,i,o,h){var p=this;const g=p._removeEmptyFolders(l),v=p._getFinalPath(g),_=new URL(p.url+`/object/upload/sign/${v}`);return _.searchParams.set("token",i),p.handleOperation(async()=>{let E;const w=He({upsert:Dg.upsert},h),C=He(He({},p.headers),{"x-upsert":String(w.upsert)});return typeof Blob<"u"&&o instanceof Blob?(E=new FormData,E.append("cacheControl",w.cacheControl),E.append("",o)):typeof FormData<"u"&&o instanceof FormData?(E=o,E.append("cacheControl",w.cacheControl)):(E=o,C["cache-control"]=`max-age=${w.cacheControl}`,C["content-type"]=w.contentType),{path:g,fullPath:(await jf(p.fetch,_.toString(),E,{headers:C})).Key}})}async createSignedUploadUrl(l,i){var o=this;return o.handleOperation(async()=>{let h=o._getFinalPath(l);const p=He({},o.headers);i?.upsert&&(p["x-upsert"]="true");const g=await Qr(o.fetch,`${o.url}/object/upload/sign/${h}`,{},{headers:p}),v=new URL(o.url+g.url),_=v.searchParams.get("token");if(!_)throw new hu("No token returned by API");return{signedUrl:v.toString(),path:l,token:_}})}async update(l,i,o){return this.uploadOrUpdate("PUT",l,i,o)}async move(l,i,o){var h=this;return h.handleOperation(async()=>await Qr(h.fetch,`${h.url}/object/move`,{bucketId:h.bucketId,sourceKey:l,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:h.headers}))}async copy(l,i,o){var h=this;return h.handleOperation(async()=>({path:(await Qr(h.fetch,`${h.url}/object/copy`,{bucketId:h.bucketId,sourceKey:l,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:h.headers})).Key}))}async createSignedUrl(l,i,o){var h=this;return h.handleOperation(async()=>{let p=h._getFinalPath(l),g=await Qr(h.fetch,`${h.url}/object/sign/${p}`,He({expiresIn:i},o?.transform?{transform:o.transform}:{}),{headers:h.headers});const v=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{signedUrl:encodeURI(`${h.url}${g.signedURL}${v}`)}})}async createSignedUrls(l,i,o){var h=this;return h.handleOperation(async()=>{const p=await Qr(h.fetch,`${h.url}/object/sign/${h.bucketId}`,{expiresIn:i,paths:l},{headers:h.headers}),g=o?.download?`&download=${o.download===!0?"":o.download}`:"";return p.map(v=>He(He({},v),{},{signedUrl:v.signedURL?encodeURI(`${h.url}${v.signedURL}${g}`):null}))})}download(l,i,o){const h=typeof i?.transform<"u"?"render/image/authenticated":"object",p=this.transformOptsToQueryString(i?.transform||{}),g=p?`?${p}`:"",v=this._getFinalPath(l),_=()=>mo(this.fetch,`${this.url}/${h}/${v}${g}`,{headers:this.headers,noResolveJson:!0},o);return new Kw(_,this.shouldThrowOnError)}async info(l){var i=this;const o=i._getFinalPath(l);return i.handleOperation(async()=>Uf(await mo(i.fetch,`${i.url}/object/info/${o}`,{headers:i.headers})))}async exists(l){var i=this;const o=i._getFinalPath(l);try{return await Yw(i.fetch,`${i.url}/object/${o}`,{headers:i.headers}),{data:!0,error:null}}catch(h){if(i.shouldThrowOnError)throw h;if(fu(h)&&h instanceof km){const p=h.originalError;if([400,404].includes(p?.status))return{data:!1,error:h}}throw h}}getPublicUrl(l,i){const o=this._getFinalPath(l),h=[],p=i?.download?`download=${i.download===!0?"":i.download}`:"";p!==""&&h.push(p);const g=typeof i?.transform<"u"?"render/image":"object",v=this.transformOptsToQueryString(i?.transform||{});v!==""&&h.push(v);let _=h.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${o}${_}`)}}}async remove(l){var i=this;return i.handleOperation(async()=>await td(i.fetch,`${i.url}/object/${i.bucketId}`,{prefixes:l},{headers:i.headers}))}async list(l,i,o){var h=this;return h.handleOperation(async()=>{const p=He(He(He({},Zw),i),{},{prefix:l||""});return await Qr(h.fetch,`${h.url}/object/list/${h.bucketId}`,p,{headers:h.headers},o)})}async listV2(l,i){var o=this;return o.handleOperation(async()=>{const h=He({},l);return await Qr(o.fetch,`${o.url}/object/list-v2/${o.bucketId}`,h,{headers:o.headers},i)})}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const i=[];return l.width&&i.push(`width=${l.width}`),l.height&&i.push(`height=${l.height}`),l.resize&&i.push(`resize=${l.resize}`),l.format&&i.push(`format=${l.format}`),l.quality&&i.push(`quality=${l.quality}`),i.join("&")}};const Jw="2.96.0",vo={"X-Client-Info":`storage-js/${Jw}`};var $w=class extends ll{constructor(l,i={},o,h){const p=new URL(l);h?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const g=p.href.replace(/\/$/,""),v=He(He({},vo),i);super(g,v,o,"storage")}async listBuckets(l){var i=this;return i.handleOperation(async()=>{const o=i.listBucketOptionsToQueryString(l);return await mo(i.fetch,`${i.url}/bucket${o}`,{headers:i.headers})})}async getBucket(l){var i=this;return i.handleOperation(async()=>await mo(i.fetch,`${i.url}/bucket/${l}`,{headers:i.headers}))}async createBucket(l,i={public:!1}){var o=this;return o.handleOperation(async()=>await Qr(o.fetch,`${o.url}/bucket`,{id:l,name:l,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:o.headers}))}async updateBucket(l,i){var o=this;return o.handleOperation(async()=>await jf(o.fetch,`${o.url}/bucket/${l}`,{id:l,name:l,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:o.headers}))}async emptyBucket(l){var i=this;return i.handleOperation(async()=>await Qr(i.fetch,`${i.url}/bucket/${l}/empty`,{},{headers:i.headers}))}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await td(i.fetch,`${i.url}/bucket/${l}`,{},{headers:i.headers}))}listBucketOptionsToQueryString(l){const i={};return l&&("limit"in l&&(i.limit=String(l.limit)),"offset"in l&&(i.offset=String(l.offset)),l.search&&(i.search=l.search),l.sortColumn&&(i.sortColumn=l.sortColumn),l.sortOrder&&(i.sortOrder=l.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}},eb=class extends ll{constructor(l,i={},o){const h=l.replace(/\/$/,""),p=He(He({},vo),i);super(h,p,o,"storage")}async createBucket(l){var i=this;return i.handleOperation(async()=>await Qr(i.fetch,`${i.url}/bucket`,{name:l},{headers:i.headers}))}async listBuckets(l){var i=this;return i.handleOperation(async()=>{const o=new URLSearchParams;l?.limit!==void 0&&o.set("limit",l.limit.toString()),l?.offset!==void 0&&o.set("offset",l.offset.toString()),l?.sortColumn&&o.set("sortColumn",l.sortColumn),l?.sortOrder&&o.set("sortOrder",l.sortOrder),l?.search&&o.set("search",l.search);const h=o.toString(),p=h?`${i.url}/bucket?${h}`:`${i.url}/bucket`;return await mo(i.fetch,p,{headers:i.headers})})}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await td(i.fetch,`${i.url}/bucket/${l}`,{},{headers:i.headers}))}from(l){var i=this;if(!Fw(l))throw new hu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const o=new Uw({baseUrl:this.url,catalogName:l,auth:{type:"custom",getHeaders:async()=>i.headers},fetch:this.fetch}),h=this.shouldThrowOnError;return new Proxy(o,{get(p,g){const v=p[g];return typeof v!="function"?v:async(..._)=>{try{return{data:await v.apply(p,_),error:null}}catch(E){if(h)throw E;return{data:null,error:E}}}}})}},tb=class extends ll{constructor(l,i={},o){const h=l.replace(/\/$/,""),p=He(He({},vo),{},{"Content-Type":"application/json"},i);super(h,p,o,"vectors")}async createIndex(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/CreateIndex`,l,{headers:i.headers})||{})}async getIndex(l,i){var o=this;return o.handleOperation(async()=>await Ar.post(o.fetch,`${o.url}/GetIndex`,{vectorBucketName:l,indexName:i},{headers:o.headers}))}async listIndexes(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/ListIndexes`,l,{headers:i.headers}))}async deleteIndex(l,i){var o=this;return o.handleOperation(async()=>await Ar.post(o.fetch,`${o.url}/DeleteIndex`,{vectorBucketName:l,indexName:i},{headers:o.headers})||{})}},nb=class extends ll{constructor(l,i={},o){const h=l.replace(/\/$/,""),p=He(He({},vo),{},{"Content-Type":"application/json"},i);super(h,p,o,"vectors")}async putVectors(l){var i=this;if(l.vectors.length<1||l.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/PutVectors`,l,{headers:i.headers})||{})}async getVectors(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/GetVectors`,l,{headers:i.headers}))}async listVectors(l){var i=this;if(l.segmentCount!==void 0){if(l.segmentCount<1||l.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(l.segmentIndex!==void 0&&(l.segmentIndex<0||l.segmentIndex>=l.segmentCount))throw new Error(`segmentIndex must be between 0 and ${l.segmentCount-1}`)}return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/ListVectors`,l,{headers:i.headers}))}async queryVectors(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/QueryVectors`,l,{headers:i.headers}))}async deleteVectors(l){var i=this;if(l.keys.length<1||l.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/DeleteVectors`,l,{headers:i.headers})||{})}},rb=class extends ll{constructor(l,i={},o){const h=l.replace(/\/$/,""),p=He(He({},vo),{},{"Content-Type":"application/json"},i);super(h,p,o,"vectors")}async createBucket(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/CreateVectorBucket`,{vectorBucketName:l},{headers:i.headers})||{})}async getBucket(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/GetVectorBucket`,{vectorBucketName:l},{headers:i.headers}))}async listBuckets(l={}){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/ListVectorBuckets`,l,{headers:i.headers}))}async deleteBucket(l){var i=this;return i.handleOperation(async()=>await Ar.post(i.fetch,`${i.url}/DeleteVectorBucket`,{vectorBucketName:l},{headers:i.headers})||{})}},ib=class extends rb{constructor(l,i={}){super(l,i.headers||{},i.fetch)}from(l){return new ab(this.url,this.headers,l,this.fetch)}async createBucket(l){var i=()=>super.createBucket,o=this;return i().call(o,l)}async getBucket(l){var i=()=>super.getBucket,o=this;return i().call(o,l)}async listBuckets(l={}){var i=()=>super.listBuckets,o=this;return i().call(o,l)}async deleteBucket(l){var i=()=>super.deleteBucket,o=this;return i().call(o,l)}},ab=class extends tb{constructor(l,i,o,h){super(l,i,h),this.vectorBucketName=o}async createIndex(l){var i=()=>super.createIndex,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName}))}async listIndexes(l={}){var i=()=>super.listIndexes,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName}))}async getIndex(l){var i=()=>super.getIndex,o=this;return i().call(o,o.vectorBucketName,l)}async deleteIndex(l){var i=()=>super.deleteIndex,o=this;return i().call(o,o.vectorBucketName,l)}index(l){return new sb(this.url,this.headers,this.vectorBucketName,l,this.fetch)}},sb=class extends nb{constructor(l,i,o,h,p){super(l,i,p),this.vectorBucketName=o,this.indexName=h}async putVectors(l){var i=()=>super.putVectors,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async getVectors(l){var i=()=>super.getVectors,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async listVectors(l={}){var i=()=>super.listVectors,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async queryVectors(l){var i=()=>super.queryVectors,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}async deleteVectors(l){var i=()=>super.deleteVectors,o=this;return i().call(o,He(He({},l),{},{vectorBucketName:o.vectorBucketName,indexName:o.indexName}))}},lb=class extends $w{constructor(l,i={},o,h){super(l,i,o,h)}from(l){return new Qw(this.url,this.headers,l,this.fetch)}get vectors(){return new ib(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eb(this.url+"/iceberg",this.headers,this.fetch)}};const jm="2.96.0",Js=30*1e3,Pf=3,Af=Pf*Js,ob="http://localhost:9999",cb="supabase.auth.token",ub={"X-Client-Info":`gotrue-js/${jm}`},Ff="X-Supabase-Api-Version",Pm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fb=600*1e3;class po extends Error{constructor(i,o,h){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=h}}function ke(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class db extends po{constructor(i,o,h){super(i,o,h),this.name="AuthApiError",this.status=o,this.code=h}}function gb(l){return ke(l)&&l.name==="AuthApiError"}class rs extends po{constructor(i,o){super(i),this.name="AuthUnknownError",this.originalError=o}}class Pi extends po{constructor(i,o,h,p){super(i,h,p),this.name=o,this.status=h}}class vr extends Pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _f(l){return ke(l)&&l.name==="AuthSessionMissingError"}class Xs extends Pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends Pi{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class Yc extends Pi{constructor(i,o=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mb(l){return ke(l)&&l.name==="AuthImplicitGrantRedirectError"}class Mg extends Pi{constructor(i,o=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pb extends Pi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class zf extends Pi{constructor(i,o){super(i,"AuthRetryableFetchError",o,void 0)}}function Cf(l){return ke(l)&&l.name==="AuthRetryableFetchError"}class Bg extends Pi{constructor(i,o,h){super(i,"AuthWeakPasswordError",o,"weak_password"),this.reasons=h}}class Hf extends Pi{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const $c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kg=` 	
\r=`.split(""),xb=(()=>{const l=new Array(128);for(let i=0;i<l.length;i+=1)l[i]=-1;for(let i=0;i<kg.length;i+=1)l[kg[i].charCodeAt(0)]=-2;for(let i=0;i<$c.length;i+=1)l[$c[i].charCodeAt(0)]=i;return l})();function Lg(l,i,o){if(l!==null)for(i.queue=i.queue<<8|l,i.queuedBits+=8;i.queuedBits>=6;){const h=i.queue>>i.queuedBits-6&63;o($c[h]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const h=i.queue>>i.queuedBits-6&63;o($c[h]),i.queuedBits-=6}}function Fm(l,i,o){const h=xb[l];if(h>-1)for(i.queue=i.queue<<6|h,i.queuedBits+=6;i.queuedBits>=8;)o(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(h===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Ug(l){const i=[],o=v=>{i.push(String.fromCodePoint(v))},h={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},g=v=>{bb(v,h,o)};for(let v=0;v<l.length;v+=1)Fm(l.charCodeAt(v),p,g);return i.join("")}function yb(l,i){if(l<=127){i(l);return}else if(l<=2047){i(192|l>>6),i(128|l&63);return}else if(l<=65535){i(224|l>>12),i(128|l>>6&63),i(128|l&63);return}else if(l<=1114111){i(240|l>>18),i(128|l>>12&63),i(128|l>>6&63),i(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function wb(l,i){for(let o=0;o<l.length;o+=1){let h=l.charCodeAt(o);if(h>55295&&h<=56319){const p=(h-55296)*1024&65535;h=(l.charCodeAt(o+1)-56320&65535|p)+65536,o+=1}yb(h,i)}}function bb(l,i,o){if(i.utf8seq===0){if(l<=127){o(l);return}for(let h=1;h<6;h+=1)if((l>>7-h&1)===0){i.utf8seq=h;break}if(i.utf8seq===2)i.codepoint=l&31;else if(i.utf8seq===3)i.codepoint=l&15;else if(i.utf8seq===4)i.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|l&63,i.utf8seq-=1,i.utf8seq===0&&o(i.codepoint)}}function rl(l){const i=[],o={queue:0,queuedBits:0},h=p=>{i.push(p)};for(let p=0;p<l.length;p+=1)Fm(l.charCodeAt(p),o,h);return new Uint8Array(i)}function vb(l){const i=[];return wb(l,o=>i.push(o)),new Uint8Array(i)}function is(l){const i=[],o={queue:0,queuedBits:0},h=p=>{i.push(p)};return l.forEach(p=>Lg(p,o,h)),Lg(null,o,h),i.join("")}function Eb(l){return Math.round(Date.now()/1e3)+l}function Ab(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",$a={tested:!1,writable:!1},zm=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($a.tested)return $a.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),$a.tested=!0,$a.writable=!0}catch{$a.tested=!0,$a.writable=!1}return $a.writable};function _b(l){const i={},o=new URL(l);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((p,g)=>{i[g]=p})}catch{}return o.searchParams.forEach((h,p)=>{i[p]=h}),i}const Hm=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),Cb=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",$s=async(l,i,o)=>{await l.setItem(i,JSON.stringify(o))},es=async(l,i)=>{const o=await l.getItem(i);if(!o)return null;try{return JSON.parse(o)}catch{return o}},Fn=async(l,i)=>{await l.removeItem(i)};class du{constructor(){this.promise=new du.promiseConstructor((i,o)=>{this.resolve=i,this.reject=o})}}du.promiseConstructor=Promise;function Wc(l){const i=l.split(".");if(i.length!==3)throw new Hf("Invalid JWT structure");for(let h=0;h<i.length;h++)if(!hb.test(i[h]))throw new Hf("JWT not in base64url format");return{header:JSON.parse(Ug(i[0])),payload:JSON.parse(Ug(i[1])),signature:rl(i[2]),raw:{header:i[0],payload:i[1]}}}async function Sb(l){return await new Promise(i=>{setTimeout(()=>i(null),l)})}function Tb(l,i){return new Promise((h,p)=>{(async()=>{for(let g=0;g<1/0;g++)try{const v=await l(g);if(!i(g,null,v)){h(v);return}}catch(v){if(!i(g,v)){p(v);return}}})()})}function Rb(l){return("0"+l.toString(16)).substr(-2)}function Nb(){const i=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",h=o.length;let p="";for(let g=0;g<56;g++)p+=o.charAt(Math.floor(Math.random()*h));return p}return crypto.getRandomValues(i),Array.from(i,Rb).join("")}async function Ob(l){const o=new TextEncoder().encode(l),h=await crypto.subtle.digest("SHA-256",o),p=new Uint8Array(h);return Array.from(p).map(g=>String.fromCharCode(g)).join("")}async function Ib(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const o=await Ob(l);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(l,i,o=!1){const h=Nb();let p=h;o&&(p+="/PASSWORD_RECOVERY"),await $s(l,`${i}-code-verifier`,p);const g=await Ib(h);return[g,h===g?"plain":"s256"]}const Db=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mb(l){const i=l.headers.get(Ff);if(!i||!i.match(Db))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function Bb(l){if(!l)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(l<=i)throw new Error("JWT has expired")}function kb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ws(l){if(!Lb.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sf(){const l={};return new Proxy(l,{get:(i,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ub(l,i){return new Proxy(l,{get:(o,h,p)=>{if(h==="__isInsecureUserWarningProxy")return!0;if(typeof h=="symbol"){const g=h.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(o,h,p)}return!i.value&&typeof h=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(o,h,p)}})}function jg(l){return JSON.parse(JSON.stringify(l))}const ts=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),jb=[502,503,504];async function Pg(l){var i;if(!Cb(l))throw new zf(ts(l),0);if(jb.includes(l.status))throw new zf(ts(l),l.status);let o;try{o=await l.json()}catch(g){throw new rs(ts(g),g)}let h;const p=Mb(l);if(p&&p.getTime()>=Pm["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?h=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(h=o.error_code),h){if(h==="weak_password")throw new Bg(ts(o),l.status,((i=o.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(h==="session_not_found")throw new vr}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((g,v)=>g&&typeof v=="string",!0))throw new Bg(ts(o),l.status,o.weak_password.reasons);throw new db(ts(o),l.status||500,h)}const Pb=(l,i,o,h)=>{const p={method:l,headers:i?.headers||{}};return l==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),p.body=JSON.stringify(h),Object.assign(Object.assign({},p),o))};async function Ge(l,i,o,h){var p;const g=Object.assign({},h?.headers);g[Ff]||(g[Ff]=Pm["2024-01-01"].name),h?.jwt&&(g.Authorization=`Bearer ${h.jwt}`);const v=(p=h?.query)!==null&&p!==void 0?p:{};h?.redirectTo&&(v.redirect_to=h.redirectTo);const _=Object.keys(v).length?"?"+new URLSearchParams(v).toString():"",E=await Fb(l,i,o+_,{headers:g,noResolveJson:h?.noResolveJson},{},h?.body);return h?.xform?h?.xform(E):{data:Object.assign({},E),error:null}}async function Fb(l,i,o,h,p,g){const v=Pb(i,h,p,g);let _;try{_=await l(o,Object.assign({},v))}catch(E){throw console.error(E),new zf(ts(E),0)}if(_.ok||await Pg(_),h?.noResolveJson)return _;try{return await _.json()}catch(E){await Pg(E)}}function Zr(l){var i;let o=null;Gb(l)&&(o=Object.assign({},l),l.expires_at||(o.expires_at=Eb(l.expires_in)));const h=(i=l.user)!==null&&i!==void 0?i:l;return{data:{session:o,user:h},error:null}}function Fg(l){const i=Zr(l);return!i.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((o,h)=>o&&typeof h=="string",!0)&&(i.data.weak_password=l.weak_password),i}function Sa(l){var i;return{data:{user:(i=l.user)!==null&&i!==void 0?i:l},error:null}}function zb(l){return{data:l,error:null}}function Hb(l){const{action_link:i,email_otp:o,hashed_token:h,redirect_to:p,verification_type:g}=l,v=uu(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:i,email_otp:o,hashed_token:h,redirect_to:p,verification_type:g},E=Object.assign({},v);return{data:{properties:_,user:E},error:null}}function zg(l){return l}function Gb(l){return l.access_token&&l.refresh_token&&l.expires_in}const Tf=["global","local","others"];class Vb{constructor({url:i="",headers:o={},fetch:h}){this.url=i,this.headers=o,this.fetch=Hm(h),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,o=Tf[0]){if(Tf.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tf.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(h){if(ke(h))return{data:null,error:h};throw h}}async inviteUserByEmail(i,o={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:Sa})}catch(h){if(ke(h))return{data:{user:null},error:h};throw h}}async generateLink(i){try{const{options:o}=i,h=uu(i,["options"]),p=Object.assign(Object.assign({},h),o);return"newEmail"in h&&(p.new_email=h?.newEmail,delete p.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:Hb,redirectTo:o?.redirectTo})}catch(o){if(ke(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(i){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:Sa})}catch(o){if(ke(o))return{data:{user:null},error:o};throw o}}async listUsers(i){var o,h,p,g,v,_,E;try{const w={nextPage:null,lastPage:0,total:0},C=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(o=i?.page)===null||o===void 0?void 0:o.toString())!==null&&h!==void 0?h:"",per_page:(g=(p=i?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:zg});if(C.error)throw C.error;const R=await C.json(),M=(v=C.headers.get("x-total-count"))!==null&&v!==void 0?v:0,k=(E=(_=C.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&E!==void 0?E:[];return k.length>0&&(k.forEach(j=>{const F=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(j.split(";")[1].split("=")[1]);w[`${H}Page`]=F}),w.total=parseInt(M)),{data:Object.assign(Object.assign({},R),w),error:null}}catch(w){if(ke(w))return{data:{users:[]},error:w};throw w}}async getUserById(i){Ws(i);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:Sa})}catch(o){if(ke(o))return{data:{user:null},error:o};throw o}}async updateUserById(i,o){Ws(i);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:o,headers:this.headers,xform:Sa})}catch(h){if(ke(h))return{data:{user:null},error:h};throw h}}async deleteUser(i,o=!1){Ws(i);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:o},xform:Sa})}catch(h){if(ke(h))return{data:{user:null},error:h};throw h}}async _listFactors(i){Ws(i.userId);try{const{data:o,error:h}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:o,error:h}}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _deleteFactor(i){Ws(i.userId),Ws(i.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _listOAuthClients(i){var o,h,p,g,v,_,E;try{const w={nextPage:null,lastPage:0,total:0},C=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(o=i?.page)===null||o===void 0?void 0:o.toString())!==null&&h!==void 0?h:"",per_page:(g=(p=i?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:zg});if(C.error)throw C.error;const R=await C.json(),M=(v=C.headers.get("x-total-count"))!==null&&v!==void 0?v:0,k=(E=(_=C.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&E!==void 0?E:[];return k.length>0&&(k.forEach(j=>{const F=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(j.split(";")[1].split("=")[1]);w[`${H}Page`]=F}),w.total=parseInt(M)),{data:Object.assign(Object.assign({},R),w),error:null}}catch(w){if(ke(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(i){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _getOAuthClient(i){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _updateOAuthClient(i,o){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:o,headers:this.headers,xform:h=>({data:h,error:null})})}catch(h){if(ke(h))return{data:null,error:h};throw h}}async _deleteOAuthClient(i){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _regenerateOAuthClientSecret(i){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ke(o))return{data:null,error:o};throw o}}}function Hg(l={}){return{getItem:i=>l[i]||null,setItem:(i,o)=>{l[i]=o},removeItem:i=>{delete l[i]}}}const Ks={debug:!!(globalThis&&zm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gm extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Gg extends Gm{}async function qb(l,i,o){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,i);const h=new globalThis.AbortController;i>0&&setTimeout(()=>{h.abort(),Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},i),await Promise.resolve();try{return await globalThis.navigator.locks.request(l,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:h.signal},async p=>{if(p){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,p.name);try{return await o()}finally{Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,p.name)}}else{if(i===0)throw Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Gg(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Ks.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}})}catch(p){throw p?.name==="AbortError"?new Gg(`Acquiring an exclusive Navigator LockManager lock "${l}" timed out waiting ${i}ms`):p}}function Xb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Vm(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Yb(l){return parseInt(l,16)}function Wb(l){const i=new TextEncoder().encode(l);return"0x"+Array.from(i,h=>h.toString(16).padStart(2,"0")).join("")}function Kb(l){var i;const{chainId:o,domain:h,expirationTime:p,issuedAt:g=new Date,nonce:v,notBefore:_,requestId:E,resources:w,scheme:C,uri:R,version:M}=l;{if(!Number.isInteger(o))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(v&&v.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${v}`);if(!R)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(M!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${M}`);if(!((i=l.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const k=Vm(l.address),j=C?`${C}://${h}`:h,F=l.statement?`${l.statement}
`:"",H=`${j} wants you to sign in with your Ethereum account:
${k}

${F}`;let ie=`URI: ${R}
Version: ${M}
Chain ID: ${o}${v?`
Nonce: ${v}`:""}
Issued At: ${g.toISOString()}`;if(p&&(ie+=`
Expiration Time: ${p.toISOString()}`),_&&(ie+=`
Not Before: ${_.toISOString()}`),E&&(ie+=`
Request ID: ${E}`),w){let X=`
Resources:`;for(const P of w){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);X+=`
- ${P}`}ie+=X}return`${H}
${ie}`}class bn extends Error{constructor({message:i,code:o,cause:h,name:p}){var g;super(i,{cause:h}),this.__isWebAuthnError=!0,this.name=(g=p??(h instanceof Error?h.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=o}}class eu extends bn{constructor(i,o){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o,message:i}),this.name="WebAuthnUnknownError",this.originalError=o}}function Zb({error:l,options:i}){var o,h,p;const{publicKey:g}=i;if(!g)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((o=g.authenticatorSelection)===null||o===void 0?void 0:o.requireResidentKey)===!0)return new bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(i.mediation==="conditional"&&((h=g.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((p=g.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new bn({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return g.pubKeyCredParams.filter(_=>_.type==="public-key").length===0?new bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const v=window.location.hostname;if(qm(v)){if(g.rp.id!==v)return new bn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Qb({error:l,options:i}){const{publicKey:o}=i;if(!o)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(i.signal instanceof AbortSignal)return new bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new bn({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const h=window.location.hostname;if(qm(h)){if(o.rpId!==h)return new bn({message:`The RP ID "${o.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Jb{createNewAbortSignal(){if(this.controller){const o=new Error("Cancelling existing WebAuthn API call for new one");o.name="AbortError",this.controller.abort(o)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const $b=new Jb;function ev(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:i,user:o,excludeCredentials:h}=l,p=uu(l,["challenge","user","excludeCredentials"]),g=rl(i).buffer,v=Object.assign(Object.assign({},o),{id:rl(o.id).buffer}),_=Object.assign(Object.assign({},p),{challenge:g,user:v});if(h&&h.length>0){_.excludeCredentials=new Array(h.length);for(let E=0;E<h.length;E++){const w=h[E];_.excludeCredentials[E]=Object.assign(Object.assign({},w),{id:rl(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return _}function tv(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:i,allowCredentials:o}=l,h=uu(l,["challenge","allowCredentials"]),p=rl(i).buffer,g=Object.assign(Object.assign({},h),{challenge:p});if(o&&o.length>0){g.allowCredentials=new Array(o.length);for(let v=0;v<o.length;v++){const _=o[v];g.allowCredentials[v]=Object.assign(Object.assign({},_),{id:rl(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return g}function nv(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l;return{id:l.id,rawId:l.id,response:{attestationObject:is(new Uint8Array(l.response.attestationObject)),clientDataJSON:is(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(i=o.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function rv(l){var i;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l,h=l.getClientExtensionResults(),p=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:is(new Uint8Array(p.authenticatorData)),clientDataJSON:is(new Uint8Array(p.clientDataJSON)),signature:is(new Uint8Array(p.signature)),userHandle:p.userHandle?is(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:h,authenticatorAttachment:(i=o.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function qm(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function Vg(){var l,i;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function iv(l){try{const i=await navigator.credentials.create(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",i)}:{data:null,error:new eu("Empty credential response",i)}}catch(i){return{data:null,error:Zb({error:i,options:l})}}}async function av(l){try{const i=await navigator.credentials.get(l);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",i)}:{data:null,error:new eu("Empty credential response",i)}}catch(i){return{data:null,error:Qb({error:i,options:l})}}}const sv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function tu(...l){const i=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),o=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),h={};for(const p of l)if(p)for(const g in p){const v=p[g];if(v!==void 0)if(Array.isArray(v))h[g]=v;else if(o(v))h[g]=v;else if(i(v)){const _=h[g];i(_)?h[g]=tu(_,v):h[g]=tu(v)}else h[g]=v}return h}function ov(l,i){return tu(sv,l,i||{})}function cv(l,i){return tu(lv,l,i||{})}class uv{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:o,friendlyName:h,signal:p},g){var v;try{const{data:_,error:E}=await this.client.mfa.challenge({factorId:i,webauthn:o});if(!_)return{data:null,error:E};const w=p??$b.createNewAbortSignal();if(_.webauthn.type==="create"){const{user:C}=_.webauthn.credential_options.publicKey;if(!C.name){const R=h;if(R)C.name=`${C.id}:${R}`;else{const k=(await this.client.getUser()).data.user,j=((v=k?.user_metadata)===null||v===void 0?void 0:v.name)||k?.email||k?.id||"User";C.name=`${C.id}:${j}`}}C.displayName||(C.displayName=C.name)}switch(_.webauthn.type){case"create":{const C=ov(_.webauthn.credential_options.publicKey,g?.create),{data:R,error:M}=await iv({publicKey:C,signal:w});return R?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:R}},error:null}:{data:null,error:M}}case"request":{const C=cv(_.webauthn.credential_options.publicKey,g?.request),{data:R,error:M}=await av(Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:C,signal:w}));return R?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:R}},error:null}:{data:null,error:M}}}}catch(_){return ke(_)?{data:null,error:_}:{data:null,error:new rs("Unexpected error in challenge",_)}}}async _verify({challengeId:i,factorId:o,webauthn:h}){return this.client.mfa.verify({factorId:o,challengeId:i,webauthn:h})}async _authenticate({factorId:i,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:h=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!o)return{data:null,error:new po("rpId is required for WebAuthn authentication")};try{if(!Vg())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:v,error:_}=await this.challenge({factorId:i,webauthn:{rpId:o,rpOrigins:h},signal:p},{request:g});if(!v)return{data:null,error:_};const{webauthn:E}=v;return this._verify({factorId:i,challengeId:v.challengeId,webauthn:{type:E.type,rpId:o,rpOrigins:h,credential_response:E.credential_response}})}catch(v){return ke(v)?{data:null,error:v}:{data:null,error:new rs("Unexpected error in authenticate",v)}}}async _register({friendlyName:i,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:h=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!o)return{data:null,error:new po("rpId is required for WebAuthn registration")};try{if(!Vg())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:v,error:_}=await this._enroll({friendlyName:i});if(!v)return await this.client.mfa.listFactors().then(C=>{var R;return(R=C.data)===null||R===void 0?void 0:R.all.find(M=>M.factor_type==="webauthn"&&M.friendly_name===i&&M.status!=="unverified")}).then(C=>C?this.client.mfa.unenroll({factorId:C?.id}):void 0),{data:null,error:_};const{data:E,error:w}=await this._challenge({factorId:v.id,friendlyName:v.friendly_name,webauthn:{rpId:o,rpOrigins:h},signal:p},{create:g});return E?this._verify({factorId:v.id,challengeId:E.challengeId,webauthn:{rpId:o,rpOrigins:h,type:E.webauthn.type,credential_response:E.webauthn.credential_response}}):{data:null,error:w}}catch(v){return ke(v)?{data:null,error:v}:{data:null,error:new rs("Unexpected error in register",v)}}}}Xb();const hv={url:ob,storageKey:cb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ub,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function qg(l,i,o){return await o()}const Zs={};class xo{get jwks(){var i,o;return(o=(i=Zs[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(i){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,o;return(o=(i=Zs[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{cachedAt:i})}constructor(i){var o,h,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},hv),i);if(this.storageKey=g.storageKey,this.instanceID=(o=xo.nextInstanceID[this.storageKey])!==null&&o!==void 0?o:0,xo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&zn()){const v=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(v),this.logDebugMessages&&console.trace(v)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new Vb({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=Hm(g.fetch),this.lock=g.lock||qg,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,this.lockAcquireTimeout=g.lockAcquireTimeout,g.lock?this.lock=g.lock:this.persistSession&&zn()&&(!((h=globalThis?.navigator)===null||h===void 0)&&h.locks)?this.lock=qb:this.lock=qg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:zm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hg(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=Hg(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(v){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",v)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async v=>{this._debug("received broadcast notification from other tab or client",v);try{await this._notifyAllSubscribers(v.data.event,v.data.session,!1)}catch(_){this._debug("#broadcastChannel","error",_)}})}this.initialize().catch(v=>{this._debug("#initialize()","error",v)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jm}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let o={},h="none";if(zn()&&(o=_b(window.location.href),this._isImplicitGrantCallback(o)?h="implicit":await this._isPKCECallback(o)&&(h="pkce")),zn()&&this.detectSessionInUrl&&h!=="none"){const{data:p,error:g}=await this._getSessionFromURL(o,h);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),mb(g)){const E=(i=g.details)===null||i===void 0?void 0:i.code;if(E==="identity_already_exists"||E==="identity_not_found"||E==="single_identity_not_deletable")return{error:g}}return{error:g}}const{session:v,redirectType:_}=p;return this._debug("#_initialize()","detected session in URL",v,"redirect type",_),await this._saveSession(v),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",v):await this._notifyAllSubscribers("SIGNED_IN",v)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return ke(o)?this._returnResult({error:o}):this._returnResult({error:new rs("Unexpected error during initialization",o)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var o,h,p;try{const g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(h=(o=i?.options)===null||o===void 0?void 0:o.data)!==null&&h!==void 0?h:{},gotrue_meta_security:{captcha_token:(p=i?.options)===null||p===void 0?void 0:p.captchaToken}},xform:Zr}),{data:v,error:_}=g;if(_||!v)return this._returnResult({data:{user:null,session:null},error:_});const E=v.session,w=v.user;return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",E)),this._returnResult({data:{user:w,session:E},error:null})}catch(g){if(ke(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(i){var o,h,p;try{let g;if("email"in i){const{email:C,password:R,options:M}=i;let k=null,j=null;this.flowType==="pkce"&&([k,j]=await Ys(this.storage,this.storageKey)),g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:M?.emailRedirectTo,body:{email:C,password:R,data:(o=M?.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:M?.captchaToken},code_challenge:k,code_challenge_method:j},xform:Zr})}else if("phone"in i){const{phone:C,password:R,options:M}=i;g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:C,password:R,data:(h=M?.data)!==null&&h!==void 0?h:{},channel:(p=M?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:M?.captchaToken}},xform:Zr})}else throw new Xc("You must provide either an email or phone number and a password");const{data:v,error:_}=g;if(_||!v)return await Fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:_});const E=v.session,w=v.user;return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",E)),this._returnResult({data:{user:w,session:E},error:null})}catch(g){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(i){try{let o;if("email"in i){const{email:g,password:v,options:_}=i;o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:v,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Fg})}else if("phone"in i){const{phone:g,password:v,options:_}=i;o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:v,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Fg})}else throw new Xc("You must provide either an email or phone number and a password");const{data:h,error:p}=o;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const g=new Xs;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign({user:h.user,session:h.session},h.weak_password?{weakPassword:h.weak_password}:null),error:p})}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOAuth(i){var o,h,p,g;return await this._handleProviderSignIn(i.provider,{redirectTo:(o=i.options)===null||o===void 0?void 0:o.redirectTo,scopes:(h=i.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=i.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(g=i.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:o}=i;switch(o){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}}async signInWithEthereum(i){var o,h,p,g,v,_,E,w,C,R,M;let k,j;if("message"in i)k=i.message,j=i.signature;else{const{chain:F,wallet:H,statement:ie,options:X}=i;let P;if(zn())if(typeof H=="object")P=H;else{const he=window;if("ethereum"in he&&typeof he.ethereum=="object"&&"request"in he.ethereum&&typeof he.ethereum.request=="function")P=he.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!X?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=H}const ce=new URL((o=X?.url)!==null&&o!==void 0?o:window.location.href),Re=await P.request({method:"eth_requestAccounts"}).then(he=>he).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Re||Re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const be=Vm(Re[0]);let J=(h=X?.signInWithEthereum)===null||h===void 0?void 0:h.chainId;if(!J){const he=await P.request({method:"eth_chainId"});J=Yb(he)}const Se={domain:ce.host,address:be,statement:ie,uri:ce.href,version:"1",chainId:J,nonce:(p=X?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(v=(g=X?.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&v!==void 0?v:new Date,expirationTime:(_=X?.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(E=X?.signInWithEthereum)===null||E===void 0?void 0:E.notBefore,requestId:(w=X?.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(C=X?.signInWithEthereum)===null||C===void 0?void 0:C.resources};k=Kb(Se),j=await P.request({method:"personal_sign",params:[Wb(k),be]})}try{const{data:F,error:H}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:j},!((R=i.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(M=i.options)===null||M===void 0?void 0:M.captchaToken}}:null),xform:Zr});if(H)throw H;if(!F||!F.session||!F.user){const ie=new Xs;return this._returnResult({data:{user:null,session:null},error:ie})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:H})}catch(F){if(ke(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async signInWithSolana(i){var o,h,p,g,v,_,E,w,C,R,M,k;let j,F;if("message"in i)j=i.message,F=i.signature;else{const{chain:H,wallet:ie,statement:X,options:P}=i;let ce;if(zn())if(typeof ie=="object")ce=ie;else{const be=window;if("solana"in be&&typeof be.solana=="object"&&("signIn"in be.solana&&typeof be.solana.signIn=="function"||"signMessage"in be.solana&&typeof be.solana.signMessage=="function"))ce=be.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ie!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ce=ie}const Re=new URL((o=P?.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in ce&&ce.signIn){const be=await ce.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:Re.host,uri:Re.href}),X?{statement:X}:null));let J;if(Array.isArray(be)&&be[0]&&typeof be[0]=="object")J=be[0];else if(be&&typeof be=="object"&&"signedMessage"in be&&"signature"in be)J=be;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)j=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),F=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ce)||typeof ce.signMessage!="function"||!("publicKey"in ce)||typeof ce!="object"||!ce.publicKey||!("toBase58"in ce.publicKey)||typeof ce.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${Re.host} wants you to sign in with your Solana account:`,ce.publicKey.toBase58(),...X?["",X,""]:[""],"Version: 1",`URI: ${Re.href}`,`Issued At: ${(p=(h=P?.signInWithSolana)===null||h===void 0?void 0:h.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((g=P?.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((v=P?.signInWithSolana)===null||v===void 0)&&v.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((_=P?.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((E=P?.signInWithSolana)===null||E===void 0)&&E.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((w=P?.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((R=(C=P?.signInWithSolana)===null||C===void 0?void 0:C.resources)===null||R===void 0)&&R.length?["Resources",...P.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const be=await ce.signMessage(new TextEncoder().encode(j),"utf8");if(!be||!(be instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=be}}try{const{data:H,error:ie}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:is(F)},!((M=i.options)===null||M===void 0)&&M.captchaToken?{gotrue_meta_security:{captcha_token:(k=i.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Zr});if(ie)throw ie;if(!H||!H.session||!H.user){const X=new Xs;return this._returnResult({data:{user:null,session:null},error:X})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:ie})}catch(H){if(ke(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async _exchangeCodeForSession(i){const o=await es(this.storage,`${this.storageKey}-code-verifier`),[h,p]=(o??"").split("/");try{if(!h&&this.flowType==="pkce")throw new pb;const{data:g,error:v}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:h},xform:Zr});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),v)throw v;if(!g||!g.session||!g.user){const _=new Xs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:p??null}),error:v})}catch(g){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(i){try{const{options:o,provider:h,token:p,access_token:g,nonce:v}=i,_=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:h,id_token:p,access_token:g,nonce:v,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Zr}),{data:E,error:w}=_;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!E||!E.session||!E.user){const C=new Xs;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:E,error:w})}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOtp(i){var o,h,p,g,v;try{if("email"in i){const{email:_,options:E}=i;let w=null,C=null;this.flowType==="pkce"&&([w,C]=await Ys(this.storage,this.storageKey));const{error:R}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(o=E?.data)!==null&&o!==void 0?o:{},create_user:(h=E?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:w,code_challenge_method:C},redirectTo:E?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:R})}if("phone"in i){const{phone:_,options:E}=i,{data:w,error:C}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(p=E?.data)!==null&&p!==void 0?p:{},create_user:(g=E?.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},channel:(v=E?.channel)!==null&&v!==void 0?v:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w?.message_id},error:C})}throw new Xc("You must provide either an email or phone number.")}catch(_){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async verifyOtp(i){var o,h;try{let p,g;"options"in i&&(p=(o=i.options)===null||o===void 0?void 0:o.redirectTo,g=(h=i.options)===null||h===void 0?void 0:h.captchaToken);const{data:v,error:_}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:g}}),redirectTo:p,xform:Zr});if(_)throw _;if(!v)throw new Error("An error occurred on token verification.");const E=v.session,w=v.user;return E?.access_token&&(await this._saveSession(E),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",E)),this._returnResult({data:{user:w,session:E},error:null})}catch(p){if(ke(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(i){var o,h,p,g,v;try{let _=null,E=null;this.flowType==="pkce"&&([_,E]=await Ys(this.storage,this.storageKey));const w=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(h=(o=i.options)===null||o===void 0?void 0:o.redirectTo)!==null&&h!==void 0?h:void 0}),!((p=i?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:E}),headers:this.headers,xform:zb});return!((g=w.data)===null||g===void 0)&&g.url&&zn()&&!(!((v=i.options)===null||v===void 0)&&v.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(_){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(_))return this._returnResult({data:null,error:_});throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:o},error:h}=i;if(h)throw h;if(!o)throw new vr;const{error:p}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const o=`${this.url}/resend`;if("email"in i){const{email:h,type:p,options:g}=i,{error:v}=await Ge(this.fetch,"POST",o,{headers:this.headers,body:{email:h,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}else if("phone"in i){const{phone:h,type:p,options:g}=i,{data:v,error:_}=await Ge(this.fetch,"POST",o,{headers:this.headers,body:{phone:h,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:_})}throw new Xc("You must provide either an email or phone number and a type")}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async o=>o))}async _acquireLock(i,o){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const h=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await h,await o()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const h=o();for(this.pendingInLock.push((async()=>{try{await h}catch{}})()),await h;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await h}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await i(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const o=await es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?i=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const h=i.expires_at?i.expires_at*1e3-Date.now()<Af:!1;if(this._debug("#__loadSession()",`session has${h?"":" not"} expired`,"expires_at",i.expires_at),!h){if(this.userStorage){const v=await es(this.userStorage,this.storageKey+"-user");v?.user?i.user=v.user:i.user=Sf()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const v={value:this.suppressGetSessionWarning};i.user=Ub(i.user,v),v.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:p,error:g}=await this._callRefreshToken(i.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){if(i)return await this._getUser(i);await this.initializePromise;const o=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return o.data.user&&(this.suppressGetSessionWarning=!0),o}async _getUser(i){try{return i?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:Sa}):await this._useSession(async o=>{var h,p,g;const{data:v,error:_}=o;if(_)throw _;return!(!((h=v.session)===null||h===void 0)&&h.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vr}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0,xform:Sa})})}catch(o){if(ke(o))return _f(o)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:o});throw o}}async updateUser(i,o={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(i,o))}async _updateUser(i,o={}){try{return await this._useSession(async h=>{const{data:p,error:g}=h;if(g)throw g;if(!p.session)throw new vr;const v=p.session;let _=null,E=null;this.flowType==="pkce"&&i.email!=null&&([_,E]=await Ys(this.storage,this.storageKey));const{data:w,error:C}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:_,code_challenge_method:E}),jwt:v.access_token,xform:Sa});if(C)throw C;return v.user=w.user,await this._saveSession(v),await this._notifyAllSubscribers("USER_UPDATED",v),this._returnResult({data:{user:v.user},error:null})})}catch(h){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(h))return this._returnResult({data:{user:null},error:h});throw h}}async setSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new vr;const o=Date.now()/1e3;let h=o,p=!0,g=null;const{payload:v}=Wc(i.access_token);if(v.exp&&(h=v.exp,p=h<=o),p){const{data:_,error:E}=await this._callRefreshToken(i.refresh_token);if(E)return this._returnResult({data:{user:null,session:null},error:E});if(!_)return{data:{user:null,session:null},error:null};g=_}else{const{data:_,error:E}=await this._getUser(i.access_token);if(E)return this._returnResult({data:{user:null,session:null},error:E});g={access_token:i.access_token,refresh_token:i.refresh_token,user:_.user,token_type:"bearer",expires_in:h-o,expires_at:h},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(o){if(ke(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async o=>{var h;if(!i){const{data:v,error:_}=o;if(_)throw _;i=(h=v.session)!==null&&h!==void 0?h:void 0}if(!i?.refresh_token)throw new vr;const{data:p,error:g}=await this._callRefreshToken(i.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async _getSessionFromURL(i,o){try{if(!zn())throw new Yc("No browser detected.");if(i.error||i.error_description||i.error_code)throw new Yc(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new Mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yc("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new Mg("No code detected.");const{data:X,error:P}=await this._exchangeCodeForSession(i.code);if(P)throw P;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:X.session,redirectType:null},error:null}}const{provider_token:h,provider_refresh_token:p,access_token:g,refresh_token:v,expires_in:_,expires_at:E,token_type:w}=i;if(!g||!_||!v||!w)throw new Yc("No session defined in URL");const C=Math.round(Date.now()/1e3),R=parseInt(_);let M=C+R;E&&(M=parseInt(E));const k=M-C;k*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${R}s`);const j=M-R;C-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,M,C):C-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,M,C);const{data:F,error:H}=await this._getUser(g);if(H)throw H;const ie={provider_token:h,provider_refresh_token:p,access_token:g,expires_in:R,expires_at:M,refresh_token:v,token_type:w,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ie,redirectType:i.type},error:null})}catch(h){if(ke(h))return this._returnResult({data:{session:null,redirectType:null},error:h});throw h}}_isImplicitGrantCallback(i){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),i):!!(i.access_token||i.error_description)}async _isPKCECallback(i){const o=await es(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&o)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async o=>{var h;const{data:p,error:g}=o;if(g&&!_f(g))return this._returnResult({error:g});const v=(h=p.session)===null||h===void 0?void 0:h.access_token;if(v){const{error:_}=await this.admin.signOut(v,i);if(_&&!(gb(_)&&(_.status===404||_.status===401||_.status===403)||_f(_)))return this._returnResult({error:_})}return i!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const o=Ab(),h={id:o,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,h),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:h}}}async _emitInitialSession(i){return await this._useSession(async o=>{var h,p;try{const{data:{session:g},error:v}=o;if(v)throw v;await((h=this.stateChangeEmitters.get(i))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",i,"session",g)}catch(g){await((p=this.stateChangeEmitters.get(i))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",g),console.error(g)}})}async resetPasswordForEmail(i,o={}){let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ys(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:h,code_challenge_method:p,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(g){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var i;try{const{data:o,error:h}=await this.getUser();if(h)throw h;return this._returnResult({data:{identities:(i=o.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var o;try{const{data:h,error:p}=await this._useSession(async g=>{var v,_,E,w,C;const{data:R,error:M}=g;if(M)throw M;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(v=i.options)===null||v===void 0?void 0:v.redirectTo,scopes:(_=i.options)===null||_===void 0?void 0:_.scopes,queryParams:(E=i.options)===null||E===void 0?void 0:E.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",k,{headers:this.headers,jwt:(C=(w=R.session)===null||w===void 0?void 0:w.access_token)!==null&&C!==void 0?C:void 0})});if(p)throw p;return zn()&&!(!((o=i.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h?.url),this._returnResult({data:{provider:i.provider,url:h?.url},error:null})}catch(h){if(ke(h))return this._returnResult({data:{provider:i.provider,url:null},error:h});throw h}}async linkIdentityIdToken(i){return await this._useSession(async o=>{var h;try{const{error:p,data:{session:g}}=o;if(p)throw p;const{options:v,provider:_,token:E,access_token:w,nonce:C}=i,R=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(h=g?.access_token)!==null&&h!==void 0?h:void 0,body:{provider:_,id_token:E,access_token:w,nonce:C,link_identity:!0,gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Zr}),{data:M,error:k}=R;return k?this._returnResult({data:{user:null,session:null},error:k}):!M||!M.session||!M.user?this._returnResult({data:{user:null,session:null},error:new Xs}):(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("USER_UPDATED",M.session)),this._returnResult({data:M,error:k}))}catch(p){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),ke(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(i){try{return await this._useSession(async o=>{var h,p;const{data:g,error:v}=o;if(v)throw v;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _refreshAccessToken(i){const o=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(o,"begin");try{const h=Date.now();return await Tb(async p=>(p>0&&await Sb(200*Math.pow(2,p-1)),this._debug(o,"refreshing attempt",p),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:Zr})),(p,g)=>{const v=200*Math.pow(2,p);return g&&Cf(g)&&Date.now()+v-h<Js})}catch(h){if(this._debug(o,"error",h),ke(h))return this._returnResult({data:{session:null,user:null},error:h});throw h}finally{this._debug(o,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,o){const h=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",o,"url",h),zn()&&!o.skipBrowserRedirect&&window.location.assign(h),{data:{provider:i,url:h},error:null}}async _recoverAndRefresh(){var i,o;const h="#_recoverAndRefresh()";this._debug(h,"begin");try{const p=await es(this.storage,this.storageKey);if(p&&this.userStorage){let v=await es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!v&&(v={user:p.user},await $s(this.userStorage,this.storageKey+"-user",v)),p.user=(i=v?.user)!==null&&i!==void 0?i:Sf()}else if(p&&!p.user&&!p.user){const v=await es(this.storage,this.storageKey+"-user");v&&v?.user?(p.user=v.user,await Fn(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,p)):p.user=Sf()}if(this._debug(h,"session from storage",p),!this._isValidSession(p)){this._debug(h,"session is not valid"),p!==null&&await this._removeSession();return}const g=((o=p.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<Af;if(this._debug(h,`session has${g?"":" not"} expired with margin of ${Af}s`),g){if(this.autoRefreshToken&&p.refresh_token){const{error:v}=await this._callRefreshToken(p.refresh_token);v&&(console.error(v),Cf(v)||(this._debug(h,"refresh failed with a non-retryable error, removing the session",v),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:v,error:_}=await this._getUser(p.access_token);!_&&v?.user?(p.user=v.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(h,"could not get user data, skipping SIGNED_IN notification")}catch(v){console.error("Error getting user data:",v),this._debug(h,"error getting user data, skipping SIGNED_IN notification",v)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(h,"error",p),console.error(p);return}finally{this._debug(h,"end")}}async _callRefreshToken(i){var o,h;if(!i)throw new vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new du;const{data:g,error:v}=await this._refreshAccessToken(i);if(v)throw v;if(!g.session)throw new vr;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const _={data:g.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(g){if(this._debug(p,"error",g),ke(g)){const v={data:null,error:g};return Cf(g)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(v),v}throw(h=this.refreshingDeferred)===null||h===void 0||h.reject(g),g}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(i,o,h=!0){const p=`#_notifyAllSubscribers(${i})`;this._debug(p,"begin",o,`broadcast = ${h}`);try{this.broadcastChannel&&h&&this.broadcastChannel.postMessage({event:i,session:o});const g=[],v=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(i,o)}catch(E){g.push(E)}});if(await Promise.all(v),g.length>0){for(let _=0;_<g.length;_+=1)console.error(g[_]);throw g[0]}}finally{this._debug(p,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await Fn(this.storage,`${this.storageKey}-code-verifier`);const o=Object.assign({},i),h=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!h&&o.user&&await $s(this.userStorage,this.storageKey+"-user",{user:o.user});const p=Object.assign({},o);delete p.user;const g=jg(p);await $s(this.storage,this.storageKey,g)}else{const p=jg(o);await $s(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&zn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i);const o=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=o,o&&typeof o=="object"&&typeof o.unref=="function"?o.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(o)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i);const o=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,o&&clearTimeout(o)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async o=>{const{data:{session:h}}=o;if(!h||!h.refresh_token||!h.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((h.expires_at*1e3-i)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Js}ms, refresh threshold is ${Pf} ticks`),p<=Pf&&await this._callRefreshToken(h.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof Gm)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(i){this._debug("#visibilityChangedCallback","error",i)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const o=`#_onVisibilityChanged(${i})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,o,h){const p=[`provider=${encodeURIComponent(o)}`];if(h?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(h.redirectTo)}`),h?.scopes&&p.push(`scopes=${encodeURIComponent(h.scopes)}`),this.flowType==="pkce"){const[g,v]=await Ys(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(v)}`});p.push(_.toString())}if(h?.queryParams){const g=new URLSearchParams(h.queryParams);p.push(g.toString())}return h?.skipBrowserRedirect&&p.push(`skip_http_redirect=${h.skipBrowserRedirect}`),`${i}?${p.join("&")}`}async _unenroll(i){try{return await this._useSession(async o=>{var h;const{data:p,error:g}=o;return g?this._returnResult({data:null,error:g}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(h=p?.session)===null||h===void 0?void 0:h.access_token})})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _enroll(i){try{return await this._useSession(async o=>{var h,p;const{data:g,error:v}=o;if(v)return this._returnResult({data:null,error:v});const _=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:E,error:w}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(h=g?.session)===null||h===void 0?void 0:h.access_token});return w?this._returnResult({data:null,error:w}):(i.factorType==="totp"&&E.type==="totp"&&(!((p=E?.totp)===null||p===void 0)&&p.qr_code)&&(E.totp.qr_code=`data:image/svg+xml;utf-8,${E.totp.qr_code}`),this._returnResult({data:E,error:null}))})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _verify(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async o=>{var h;const{data:p,error:g}=o;if(g)return this._returnResult({data:null,error:g});const v=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?nv(i.webauthn.credential_response):rv(i.webauthn.credential_response)})}:{code:i.code}),{data:_,error:E}=await Ge(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:v,headers:this.headers,jwt:(h=p?.session)===null||h===void 0?void 0:h.access_token});return E?this._returnResult({data:null,error:E}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),this._returnResult({data:_,error:E}))})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}})}async _challenge(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async o=>{var h;const{data:p,error:g}=o;if(g)return this._returnResult({data:null,error:g});const v=await Ge(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(h=p?.session)===null||h===void 0?void 0:h.access_token});if(v.error)return v;const{data:_}=v;if(_.type!=="webauthn")return{data:_,error:null};switch(_.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:ev(_.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:tv(_.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}})}async _challengeAndVerify(i){const{data:o,error:h}=await this._challenge({factorId:i.factorId});return h?this._returnResult({data:null,error:h}):await this._verify({factorId:i.factorId,challengeId:o.id,code:i.code})}async _listFactors(){var i;const{data:{user:o},error:h}=await this.getUser();if(h)return{data:null,error:h};const p={all:[],phone:[],totp:[],webauthn:[]};for(const g of(i=o?.factors)!==null&&i!==void 0?i:[])p.all.push(g),g.status==="verified"&&p[g.factor_type].push(g);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(i){var o,h,p,g;if(i)try{const{payload:k}=Wc(i);let j=null;k.aal&&(j=k.aal);let F=j;const{data:{user:H},error:ie}=await this.getUser(i);if(ie)return this._returnResult({data:null,error:ie});((h=(o=H?.factors)===null||o===void 0?void 0:o.filter(ce=>ce.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(F="aal2");const P=k.amr||[];return{data:{currentLevel:j,nextLevel:F,currentAuthenticationMethods:P},error:null}}catch(k){if(ke(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:v},error:_}=await this.getSession();if(_)return this._returnResult({data:null,error:_});if(!v)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:E}=Wc(v.access_token);let w=null;E.aal&&(w=E.aal);let C=w;((g=(p=v.user.factors)===null||p===void 0?void 0:p.filter(k=>k.status==="verified"))!==null&&g!==void 0?g:[]).length>0&&(C="aal2");const M=E.amr||[];return{data:{currentLevel:w,nextLevel:C,currentAuthenticationMethods:M},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async o=>{const{data:{session:h},error:p}=o;return p?this._returnResult({data:null,error:p}):h?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:h.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new vr})})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _approveAuthorization(i,o){try{return await this._useSession(async h=>{const{data:{session:p},error:g}=h;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new vr});const v=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:_=>({data:_,error:null})});return v.data&&v.data.redirect_url&&zn()&&!o?.skipBrowserRedirect&&window.location.assign(v.data.redirect_url),v})}catch(h){if(ke(h))return this._returnResult({data:null,error:h});throw h}}async _denyAuthorization(i,o){try{return await this._useSession(async h=>{const{data:{session:p},error:g}=h;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new vr});const v=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:_=>({data:_,error:null})});return v.data&&v.data.redirect_url&&zn()&&!o?.skipBrowserRedirect&&window.location.assign(v.data.redirect_url),v})}catch(h){if(ke(h))return this._returnResult({data:null,error:h});throw h}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:o},error:h}=i;return h?this._returnResult({data:null,error:h}):o?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new vr})})}catch(i){if(ke(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async o=>{const{data:{session:h},error:p}=o;return p?this._returnResult({data:null,error:p}):h?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:h.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vr})})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(i,o={keys:[]}){let h=o.keys.find(_=>_.kid===i);if(h)return h;const p=Date.now();if(h=this.jwks.keys.find(_=>_.kid===i),h&&this.jwks_cached_at+fb>p)return h;const{data:g,error:v}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(v)throw v;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=p,h=g.keys.find(_=>_.kid===i),!h)?null:h}async getClaims(i,o={}){try{let h=i;if(!h){const{data:k,error:j}=await this.getSession();if(j||!k.session)return this._returnResult({data:null,error:j});h=k.session.access_token}const{header:p,payload:g,signature:v,raw:{header:_,payload:E}}=Wc(h);o?.allowExpired||Bb(g.exp);const w=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,o?.keys?{keys:o.keys}:o?.jwks);if(!w){const{error:k}=await this.getUser(h);if(k)throw k;return{data:{claims:g,header:p,signature:v},error:null}}const C=kb(p.alg),R=await crypto.subtle.importKey("jwk",w,C,!0,["verify"]);if(!await crypto.subtle.verify(C,R,v,vb(`${_}.${E}`)))throw new Hf("Invalid JWT signature");return{data:{claims:g,header:p,signature:v},error:null}}catch(h){if(ke(h))return this._returnResult({data:null,error:h});throw h}}}xo.nextInstanceID={};const fv=xo,dv="2.96.0";let so="";typeof Deno<"u"?so="deno":typeof document<"u"?so="web":typeof navigator<"u"&&navigator.product==="ReactNative"?so="react-native":so="node";const gv={"X-Client-Info":`supabase-js-${so}/${dv}`},mv={headers:gv},pv={schema:"public"},xv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yv={};function yo(l){"@babel/helpers - typeof";return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},yo(l)}function wv(l,i){if(yo(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var h=o.call(l,i);if(yo(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function bv(l){var i=wv(l,"string");return yo(i)=="symbol"?i:i+""}function vv(l,i,o){return(i=bv(i))in l?Object.defineProperty(l,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[i]=o,l}function Xg(l,i){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);i&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),o.push.apply(o,h)}return o}function on(l){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?Xg(Object(o),!0).forEach(function(h){vv(l,h,o[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):Xg(Object(o)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(o,h))})}return l}const Ev=l=>l?(...i)=>l(...i):(...i)=>fetch(...i),Av=()=>Headers,_v=(l,i,o)=>{const h=Ev(o),p=Av();return async(g,v)=>{var _;const E=(_=await i())!==null&&_!==void 0?_:l;let w=new p(v?.headers);return w.has("apikey")||w.set("apikey",l),w.has("Authorization")||w.set("Authorization",`Bearer ${E}`),h(g,on(on({},v),{},{headers:w}))}};function Cv(l){return l.endsWith("/")?l:l+"/"}function Sv(l,i){var o,h;const{db:p,auth:g,realtime:v,global:_}=l,{db:E,auth:w,realtime:C,global:R}=i,M={db:on(on({},E),p),auth:on(on({},w),g),realtime:on(on({},C),v),storage:{},global:on(on(on({},R),_),{},{headers:on(on({},(o=R?.headers)!==null&&o!==void 0?o:{}),(h=_?.headers)!==null&&h!==void 0?h:{})}),accessToken:async()=>""};return l.accessToken?M.accessToken=l.accessToken:delete M.accessToken,M}function Tv(l){const i=l?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Cv(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Rv=class extends fv{constructor(l){super(l)}},Nv=class{constructor(l,i,o){var h,p;this.supabaseUrl=l,this.supabaseKey=i;const g=Tv(l);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const v=`sb-${g.hostname.split(".")[0]}-auth-token`,_={db:pv,realtime:yv,auth:on(on({},xv),{},{storageKey:v}),global:mv},E=Sv(o??{},_);if(this.storageKey=(h=E.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(p=E.global.headers)!==null&&p!==void 0?p:{},E.accessToken)this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(C,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}});else{var w;this.auth=this._initSupabaseAuthClient((w=E.auth)!==null&&w!==void 0?w:{},this.headers,E.global.fetch)}this.fetch=_v(i,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(on({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new gw(new URL("rest/v1",g).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch,timeout:E.db.timeout,urlLengthLimit:E.db.urlLengthLimit}),this.storage=new lb(this.storageUrl.href,this.headers,this.fetch,o?.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new sw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,i={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(l,i,o)}channel(l,i={config:{}}){return this.realtime.channel(l,i)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var l=this,i,o;if(l.accessToken)return await l.accessToken();const{data:h}=await l.auth.getSession();return(i=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:l.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:i,detectSessionInUrl:o,storage:h,userStorage:p,storageKey:g,flowType:v,lock:_,debug:E,throwOnError:w},C,R){const M={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rv({url:this.authUrl.href,headers:on(on({},M),C),storageKey:g,autoRefreshToken:l,persistSession:i,detectSessionInUrl:o,storage:h,userStorage:p,flowType:v,lock:_,debug:E,throwOnError:w,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(l){return new Iw(this.realtimeUrl.href,on(on({},l),{},{params:on(on({},{apikey:this.supabaseKey}),l?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i?.access_token)})}_handleTokenChanged(l,i,o){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):l==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Xm=(l,i,o)=>new Nv(l,i,o);function Ov(){if(typeof window<"u")return!1;const l=globalThis.process;if(!l)return!1;const i=l.version;if(i==null)return!1;const o=i.match(/^v(\d+)\./);return o?parseInt(o[1],10)<=18:!1}Ov()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ym="https://hckfizhzvslhyxsaftnx.supabase.co",Wm="sb_publishable_mWORlipYfNbwlhdgq6WM5g_lEiFxWMW",Yt=Xm(Ym,Wm),Km=W.createContext({session:null,user:null,role:null,loading:!0,signOut:async()=>{}}),Iv=({children:l})=>{const[i,o]=W.useState(null),[h,p]=W.useState(null),[g,v]=W.useState(null),[_,E]=W.useState(!0);console.log("AuthProvider initializing. Supabase client present?",!!Yt),W.useEffect(()=>{let R=!0;console.log("AuthProvider mounted");const M=setTimeout(()=>{R&&_&&(console.warn("Force stop loading (timeout)"),E(!1))},3e3);Yt.auth.getSession().then(({data:{session:j}})=>{console.log("Supabase session checked",j),R&&(o(j),p(j?.user??null),j?.user?w(j.user.id):E(!1))}).catch(()=>{console.error("Session check failed"),R&&E(!1)});const{data:{subscription:k}}=Yt.auth.onAuthStateChange((j,F)=>{R&&(o(F),p(F?.user??null),F?.user?w(F.user.id):(v(null),E(!1)))});return()=>{R=!1,k.unsubscribe(),clearTimeout(M)}},[]);const w=async R=>{try{const{data:M}=await Yt.from("profiles").select("role").eq("id",R).single();M?v(M.role):console.warn("No profile found for user")}catch{}finally{E(!1)}},C=async()=>{await Yt.auth.signOut(),v(null),p(null),o(null)};return I.jsx(Km.Provider,{value:{session:i,user:h,role:g,loading:_,signOut:C},children:l})},gu=()=>W.useContext(Km),Dv=()=>{const[l,i]=vn.useState(!1),{role:o}=gu();return I.jsxs("div",{className:"flex h-screen bg-gray-100",children:[l&&I.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 lg:hidden",onClick:()=>i(!1)}),I.jsxs("aside",{className:`fixed z-30 inset-y-0 left-0 w-64 bg-white shadow-lg transform transition-transform duration-300 lg:translate-x-0 lg:static lg:inset-0 ${l?"translate-x-0":"-translate-x-full"}`,children:[I.jsx("div",{className:"flex items-center justify-center h-16 bg-blue-600 text-white font-bold text-xl",children:"Hpital Inventaire"}),I.jsxs("nav",{className:"mt-5 px-4 space-y-2",children:[I.jsxs(Ca,{to:"/",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[I.jsx(ky,{className:"w-5 h-5 mr-3"}),"Tableau de bord"]}),I.jsxs(Ca,{to:"/materiels",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[I.jsx(zy,{className:"w-5 h-5 mr-3"}),"Matriels"]}),I.jsxs(Ca,{to:"/inventaire",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[I.jsx(Dy,{className:"w-5 h-5 mr-3"}),"Campagne Inventaire"]}),o==="admin"&&I.jsxs(I.Fragment,{children:[I.jsxs(Ca,{to:"/users",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[I.jsx(Nm,{className:"w-5 h-5 mr-3"}),"Agents"]}),I.jsxs(Ca,{to:"/printer-config",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>i(!1),children:[I.jsx(Rm,{className:"w-5 h-5 mr-3"}),"Config Imprimante"]})]}),I.jsxs("button",{onClick:()=>{Yt.auth.signOut(),i(!1)},className:"flex w-full items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md mt-4",children:[I.jsx("span",{className:"w-5 h-5 mr-3",children:""}),"Dconnexion"]})]})]}),I.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[I.jsxs("header",{className:"flex items-center justify-between h-16 bg-white shadow px-4 lg:hidden",children:[I.jsx("button",{onClick:()=>i(!0),className:"text-gray-500 focus:outline-none",children:I.jsx(Py,{className:"w-6 h-6"})}),I.jsx("span",{className:"font-semibold text-gray-700",children:"Inventaire"})]}),I.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4",children:I.jsx(vm,{})})]})]})},nu={getAll:async()=>{const{data:l,error:i}=await Yt.from("materiels").select("*, categories(code, libelle)").order("created_at",{ascending:!1});if(i)throw i;return l},create:async l=>{const i={...l};i.date_acquisition||delete i.date_acquisition,i.categorie_id&&(i.categorie_id=parseInt(i.categorie_id,10));const{data:o}=await Yt.from("categories").select("code").eq("id",i.categorie_id).single(),h=o?.code||"INC",g=`PSY-${new Date().getFullYear()}-${h}`,{data:v}=await Yt.from("materiels").select("numero_inventaire").ilike("numero_inventaire",`${g}-%`).order("numero_inventaire",{ascending:!1}).limit(1).single();let _=1;if(v){const R=v.numero_inventaire.split("-"),M=parseInt(R[3]);isNaN(M)||(_=M+1)}const E=`${g}-${_.toString().padStart(4,"0")}`,{data:w,error:C}=await Yt.from("materiels").insert([{...i,numero_inventaire:E}]).select().single();if(C)throw console.error("Supabase Create Error:",C),C;return w},uploadPhoto:async l=>{const i=l.name.split(".").pop(),h=`${`${Math.random()}.${i}`}`,{error:p}=await Yt.storage.from("materiel-photos").upload(h,l);if(p)throw p;const{data:g}=Yt.storage.from("materiel-photos").getPublicUrl(h);return g.publicUrl},getBarcodeUrl:l=>`https://bwipjs-api.metafloor.com/?bcid=code128&text=${l}&scale=3&includetext`},Mv={getAll:async()=>{const{data:l,error:i}=await Yt.from("categories").select("*");if(i)throw i;return l}},ao={create:async l=>{const{data:i,error:o}=await Yt.from("inventaires").insert([l]).select().single();if(o)throw o;return i},getMaterielByCode:async l=>{const{data:i,error:o}=await Yt.from("materiels").select("*").eq("numero_inventaire",l).single();if(o||!i)throw new Error("Matriel non trouv");return i},confirmScan:async l=>{const{data:i}=await Yt.from("inventaire_lignes").select("id").eq("inventaire_id",l.inventaire_id).eq("materiel_id",l.materiel_id).single();if(i)throw new Error("Dj scann dans cet inventaire");const{data:o,error:h}=await Yt.from("inventaire_lignes").insert([{inventaire_id:l.inventaire_id,materiel_id:l.materiel_id,scanne_par:l.user_id,presence:!0}]).select().single();if(h)throw h;return o},getAll:async()=>{const{data:l,error:i}=await Yt.from("inventaires").select("*").order("date_debut",{ascending:!1});if(i)throw i;return l},getStats:async(l,i)=>{const{count:o,error:h}=await Yt.from("inventaire_lignes").select("*",{count:"exact",head:!0}).eq("inventaire_id",l).eq("scanne_par",i);if(h)throw h;return{scannedCount:o||0}}},Yg={getAgents:async()=>{const{data:l,error:i}=await Yt.from("profiles").select("*").eq("role","agent");if(i)throw i;return l},createAgent:async(l,i,o)=>{const h=Xm(Ym,Wm),{data:p,error:g}=await h.auth.signUp({email:l,password:i,options:{data:{role:"agent",full_name:o}}});if(g)throw g;if(p.user){const{error:v}=await Yt.from("profiles").update({role:"agent",email:l}).eq("id",p.user.id);v&&console.error("Error updating profile role:",v)}return p}},Bv=()=>{const[l,i]=W.useState({totalMateriels:0,byCategory:{},byStatus:{}});W.useEffect(()=>{o()},[]);const o=async()=>{try{const h=await nu.getAll(),p={},g={};h.forEach(v=>{const _=v.categories?.libelle||"Inconnu";p[_]=(p[_]||0)+1;const E=v.statut||"Inconnu";g[E]=(g[E]||0)+1}),i({totalMateriels:h.length,byCategory:p,byStatus:g})}catch(h){console.error("Erreur chargement stats",h)}};return I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Tableau de bord"}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[I.jsx("h2",{className:"text-xl text-gray-700 font-semibold mb-2",children:"Total Matriels"}),I.jsx("p",{className:"text-4xl font-bold text-blue-600",children:l.totalMateriels})]})}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[I.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Par Catgorie"}),I.jsx("ul",{children:Object.entries(l.byCategory).map(([h,p])=>I.jsxs("li",{className:"flex justify-between py-2 border-b",children:[I.jsx("span",{children:h}),I.jsx("span",{className:"font-bold",children:p})]},h))})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[I.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Par Statut"}),I.jsx("ul",{children:Object.entries(l.byStatus).map(([h,p])=>I.jsxs("li",{className:"flex justify-between py-2 border-b",children:[I.jsx("span",{children:h}),I.jsx("span",{className:"font-bold",children:p})]},h))})]})]})]})},kv=({onSuccess:l})=>{const[i,o]=W.useState([]),[h,p]=W.useState({categorie_id:"",nom:"",marque:"",modele:"",numero_serie:"",date_acquisition:"",service:"",statut:"En service",commentaires:"",photo_url:""}),[g,v]=W.useState(!1);W.useEffect(()=>{Mv.getAll().then(w=>o(w))},[]);const _=async w=>{if(!(!w.target.files||w.target.files.length===0)){v(!0);try{const C=w.target.files[0],R=await nu.uploadPhoto(C);p({...h,photo_url:R})}catch(C){console.error(C),alert("Erreur upload photo")}finally{v(!1)}}},E=async w=>{w.preventDefault();try{await nu.create(h),l(),p({...h,nom:"",numero_serie:"",photo_url:""})}catch(C){alert("Erreur lors de la cration"),console.error(C)}};return I.jsxs("form",{onSubmit:E,className:"space-y-4",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Catgorie"}),I.jsxs("select",{className:"w-full border p-2 rounded",value:h.categorie_id,onChange:w=>p({...h,categorie_id:w.target.value}),required:!0,children:[I.jsx("option",{value:"",children:"Slectionner..."}),i.map(w=>I.jsxs("option",{value:w.id,children:[w.libelle," (",w.code,")"]},w.id))]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Nom matriel"}),I.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:h.nom,onChange:w=>p({...h,nom:w.target.value}),required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Marque"}),I.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:h.marque,onChange:w=>p({...h,marque:w.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Modle"}),I.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:h.modele,onChange:w=>p({...h,modele:w.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Numro Srie"}),I.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:h.numero_serie,onChange:w=>p({...h,numero_serie:w.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Service / Emplacement"}),I.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:h.service,onChange:w=>p({...h,service:w.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Date d'acquisition"}),I.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:h.date_acquisition,onChange:w=>p({...h,date_acquisition:w.target.value})})]}),I.jsxs("div",{className:"md:col-span-2",children:[I.jsx("label",{className:"block text-sm font-medium",children:"Photo"}),I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:_,className:`block w-full text-sm text-gray-500\r
                            file:mr-4 file:py-2 file:px-4\r
                            file:rounded-full file:border-0\r
                            file:text-sm file:font-semibold\r
                            file:bg-blue-50 file:text-blue-700\r
                            hover:file:bg-blue-100`,disabled:g}),g&&I.jsx("span",{className:"text-gray-500 text-sm",children:"Upload en cours..."}),h.photo_url&&I.jsx("img",{src:h.photo_url,alt:"Aperu",className:"h-16 w-16 object-cover rounded"})]})]})]}),I.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:g,children:g?"Patientez...":"Enregistrer"})]})};var Lv=Object.defineProperty,ru=Object.getOwnPropertySymbols,Zm=Object.prototype.hasOwnProperty,Qm=Object.prototype.propertyIsEnumerable,Wg=(l,i,o)=>i in l?Lv(l,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[i]=o,Gf=(l,i)=>{for(var o in i||(i={}))Zm.call(i,o)&&Wg(l,o,i[o]);if(ru)for(var o of ru(i))Qm.call(i,o)&&Wg(l,o,i[o]);return l},Vf=(l,i)=>{var o={};for(var h in l)Zm.call(l,h)&&i.indexOf(h)<0&&(o[h]=l[h]);if(l!=null&&ru)for(var h of ru(l))i.indexOf(h)<0&&Qm.call(l,h)&&(o[h]=l[h]);return o};var as;(l=>{const i=class lt{constructor(E,w,C,R){if(this.version=E,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],E<lt.MIN_VERSION||E>lt.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=E*4+17;let M=[];for(let j=0;j<this.size;j++)M.push(!1);for(let j=0;j<this.size;j++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(C);if(this.drawCodewords(k),R==-1){let j=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const H=this.getPenaltyScore();H<j&&(R=F,j=H),this.applyMask(F)}}p(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(E,w){const C=l.QrSegment.makeSegments(E);return lt.encodeSegments(C,w)}static encodeBinary(E,w){const C=l.QrSegment.makeBytes(E);return lt.encodeSegments([C],w)}static encodeSegments(E,w,C=1,R=40,M=-1,k=!0){if(!(lt.MIN_VERSION<=C&&C<=R&&R<=lt.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let j,F;for(j=C;;j++){const P=lt.getNumDataCodewords(j,w)*8,ce=v.getTotalBits(E,j);if(ce<=P){F=ce;break}if(j>=R)throw new RangeError("Data too long")}for(const P of[lt.Ecc.MEDIUM,lt.Ecc.QUARTILE,lt.Ecc.HIGH])k&&F<=lt.getNumDataCodewords(j,P)*8&&(w=P);let H=[];for(const P of E){o(P.mode.modeBits,4,H),o(P.numChars,P.mode.numCharCountBits(j),H);for(const ce of P.getData())H.push(ce)}p(H.length==F);const ie=lt.getNumDataCodewords(j,w)*8;p(H.length<=ie),o(0,Math.min(4,ie-H.length),H),o(0,(8-H.length%8)%8,H),p(H.length%8==0);for(let P=236;H.length<ie;P^=253)o(P,8,H);let X=[];for(;X.length*8<H.length;)X.push(0);return H.forEach((P,ce)=>X[ce>>>3]|=P<<7-(ce&7)),new lt(j,w,X,M)}getModule(E,w){return 0<=E&&E<this.size&&0<=w&&w<this.size&&this.modules[w][E]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const E=this.getAlignmentPatternPositions(),w=E.length;for(let C=0;C<w;C++)for(let R=0;R<w;R++)C==0&&R==0||C==0&&R==w-1||C==w-1&&R==0||this.drawAlignmentPattern(E[C],E[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(E){const w=this.errorCorrectionLevel.formatBits<<3|E;let C=w;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const R=(w<<10|C)^21522;p(R>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,h(R,M));this.setFunctionModule(8,7,h(R,6)),this.setFunctionModule(8,8,h(R,7)),this.setFunctionModule(7,8,h(R,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,h(R,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,h(R,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,h(R,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let E=this.version;for(let C=0;C<12;C++)E=E<<1^(E>>>11)*7973;const w=this.version<<12|E;p(w>>>18==0);for(let C=0;C<18;C++){const R=h(w,C),M=this.size-11+C%3,k=Math.floor(C/3);this.setFunctionModule(M,k,R),this.setFunctionModule(k,M,R)}}drawFinderPattern(E,w){for(let C=-4;C<=4;C++)for(let R=-4;R<=4;R++){const M=Math.max(Math.abs(R),Math.abs(C)),k=E+R,j=w+C;0<=k&&k<this.size&&0<=j&&j<this.size&&this.setFunctionModule(k,j,M!=2&&M!=4)}}drawAlignmentPattern(E,w){for(let C=-2;C<=2;C++)for(let R=-2;R<=2;R++)this.setFunctionModule(E+R,w+C,Math.max(Math.abs(R),Math.abs(C))!=1)}setFunctionModule(E,w,C){this.modules[w][E]=C,this.isFunction[w][E]=!0}addEccAndInterleave(E){const w=this.version,C=this.errorCorrectionLevel;if(E.length!=lt.getNumDataCodewords(w,C))throw new RangeError("Invalid argument");const R=lt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][w],M=lt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][w],k=Math.floor(lt.getNumRawDataModules(w)/8),j=R-k%R,F=Math.floor(k/R);let H=[];const ie=lt.reedSolomonComputeDivisor(M);for(let P=0,ce=0;P<R;P++){let Re=E.slice(ce,ce+F-M+(P<j?0:1));ce+=Re.length;const be=lt.reedSolomonComputeRemainder(Re,ie);P<j&&Re.push(0),H.push(Re.concat(be))}let X=[];for(let P=0;P<H[0].length;P++)H.forEach((ce,Re)=>{(P!=F-M||Re>=j)&&X.push(ce[P])});return p(X.length==k),X}drawCodewords(E){if(E.length!=Math.floor(lt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let R=0;R<this.size;R++)for(let M=0;M<2;M++){const k=C-M,F=(C+1&2)==0?this.size-1-R:R;!this.isFunction[F][k]&&w<E.length*8&&(this.modules[F][k]=h(E[w>>>3],7-(w&7)),w++)}}p(w==E.length*8)}applyMask(E){if(E<0||E>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let C=0;C<this.size;C++){let R;switch(E){case 0:R=(C+w)%2==0;break;case 1:R=w%2==0;break;case 2:R=C%3==0;break;case 3:R=(C+w)%3==0;break;case 4:R=(Math.floor(C/3)+Math.floor(w/2))%2==0;break;case 5:R=C*w%2+C*w%3==0;break;case 6:R=(C*w%2+C*w%3)%2==0;break;case 7:R=((C+w)%2+C*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][C]&&R&&(this.modules[w][C]=!this.modules[w][C])}}getPenaltyScore(){let E=0;for(let M=0;M<this.size;M++){let k=!1,j=0,F=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[M][H]==k?(j++,j==5?E+=lt.PENALTY_N1:j>5&&E++):(this.finderPenaltyAddHistory(j,F),k||(E+=this.finderPenaltyCountPatterns(F)*lt.PENALTY_N3),k=this.modules[M][H],j=1);E+=this.finderPenaltyTerminateAndCount(k,j,F)*lt.PENALTY_N3}for(let M=0;M<this.size;M++){let k=!1,j=0,F=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[H][M]==k?(j++,j==5?E+=lt.PENALTY_N1:j>5&&E++):(this.finderPenaltyAddHistory(j,F),k||(E+=this.finderPenaltyCountPatterns(F)*lt.PENALTY_N3),k=this.modules[H][M],j=1);E+=this.finderPenaltyTerminateAndCount(k,j,F)*lt.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let k=0;k<this.size-1;k++){const j=this.modules[M][k];j==this.modules[M][k+1]&&j==this.modules[M+1][k]&&j==this.modules[M+1][k+1]&&(E+=lt.PENALTY_N2)}let w=0;for(const M of this.modules)w=M.reduce((k,j)=>k+(j?1:0),w);const C=this.size*this.size,R=Math.ceil(Math.abs(w*20-C*10)/C)-1;return p(0<=R&&R<=9),E+=R*lt.PENALTY_N4,p(0<=E&&E<=2568888),E}getAlignmentPatternPositions(){if(this.version==1)return[];{const E=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(E*2-2))*2;let C=[6];for(let R=this.size-7;C.length<E;R-=w)C.splice(1,0,R);return C}}static getNumRawDataModules(E){if(E<lt.MIN_VERSION||E>lt.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*E+128)*E+64;if(E>=2){const C=Math.floor(E/7)+2;w-=(25*C-10)*C-55,E>=7&&(w-=36)}return p(208<=w&&w<=29648),w}static getNumDataCodewords(E,w){return Math.floor(lt.getNumRawDataModules(E)/8)-lt.ECC_CODEWORDS_PER_BLOCK[w.ordinal][E]*lt.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][E]}static reedSolomonComputeDivisor(E){if(E<1||E>255)throw new RangeError("Degree out of range");let w=[];for(let R=0;R<E-1;R++)w.push(0);w.push(1);let C=1;for(let R=0;R<E;R++){for(let M=0;M<w.length;M++)w[M]=lt.reedSolomonMultiply(w[M],C),M+1<w.length&&(w[M]^=w[M+1]);C=lt.reedSolomonMultiply(C,2)}return w}static reedSolomonComputeRemainder(E,w){let C=w.map(R=>0);for(const R of E){const M=R^C.shift();C.push(0),w.forEach((k,j)=>C[j]^=lt.reedSolomonMultiply(k,M))}return C}static reedSolomonMultiply(E,w){if(E>>>8||w>>>8)throw new RangeError("Byte out of range");let C=0;for(let R=7;R>=0;R--)C=C<<1^(C>>>7)*285,C^=(w>>>R&1)*E;return p(C>>>8==0),C}finderPenaltyCountPatterns(E){const w=E[1];p(w<=this.size*3);const C=w>0&&E[2]==w&&E[3]==w*3&&E[4]==w&&E[5]==w;return(C&&E[0]>=w*4&&E[6]>=w?1:0)+(C&&E[6]>=w*4&&E[0]>=w?1:0)}finderPenaltyTerminateAndCount(E,w,C){return E&&(this.finderPenaltyAddHistory(w,C),w=0),w+=this.size,this.finderPenaltyAddHistory(w,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(E,w){w[0]==0&&(E+=this.size),w.pop(),w.unshift(E)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],l.QrCode=i;function o(_,E,w){if(E<0||E>31||_>>>E)throw new RangeError("Value out of range");for(let C=E-1;C>=0;C--)w.push(_>>>C&1)}function h(_,E){return(_>>>E&1)!=0}function p(_){if(!_)throw new Error("Assertion error")}const g=class sn{constructor(E,w,C){if(this.mode=E,this.numChars=w,this.bitData=C,w<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(E){let w=[];for(const C of E)o(C,8,w);return new sn(sn.Mode.BYTE,E.length,w)}static makeNumeric(E){if(!sn.isNumeric(E))throw new RangeError("String contains non-numeric characters");let w=[];for(let C=0;C<E.length;){const R=Math.min(E.length-C,3);o(parseInt(E.substring(C,C+R),10),R*3+1,w),C+=R}return new sn(sn.Mode.NUMERIC,E.length,w)}static makeAlphanumeric(E){if(!sn.isAlphanumeric(E))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],C;for(C=0;C+2<=E.length;C+=2){let R=sn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(C))*45;R+=sn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(C+1)),o(R,11,w)}return C<E.length&&o(sn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(C)),6,w),new sn(sn.Mode.ALPHANUMERIC,E.length,w)}static makeSegments(E){return E==""?[]:sn.isNumeric(E)?[sn.makeNumeric(E)]:sn.isAlphanumeric(E)?[sn.makeAlphanumeric(E)]:[sn.makeBytes(sn.toUtf8ByteArray(E))]}static makeEci(E){let w=[];if(E<0)throw new RangeError("ECI assignment value out of range");if(E<128)o(E,8,w);else if(E<16384)o(2,2,w),o(E,14,w);else if(E<1e6)o(6,3,w),o(E,21,w);else throw new RangeError("ECI assignment value out of range");return new sn(sn.Mode.ECI,0,w)}static isNumeric(E){return sn.NUMERIC_REGEX.test(E)}static isAlphanumeric(E){return sn.ALPHANUMERIC_REGEX.test(E)}getData(){return this.bitData.slice()}static getTotalBits(E,w){let C=0;for(const R of E){const M=R.mode.numCharCountBits(w);if(R.numChars>=1<<M)return 1/0;C+=4+M+R.bitData.length}return C}static toUtf8ByteArray(E){E=encodeURI(E);let w=[];for(let C=0;C<E.length;C++)E.charAt(C)!="%"?w.push(E.charCodeAt(C)):(w.push(parseInt(E.substring(C+1,C+3),16)),C+=2);return w}};g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let v=g;l.QrSegment=g})(as||(as={}));(l=>{(i=>{const o=class{constructor(p,g){this.ordinal=p,this.formatBits=g}};o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),i.Ecc=o})(l.QrCode||(l.QrCode={}))})(as||(as={}));(l=>{(i=>{const o=class{constructor(p,g){this.modeBits=p,this.numBitsCharCount=g}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),i.Mode=o})(l.QrSegment||(l.QrSegment={}))})(as||(as={}));var tl=as;var Uv={L:tl.QrCode.Ecc.LOW,M:tl.QrCode.Ecc.MEDIUM,Q:tl.QrCode.Ecc.QUARTILE,H:tl.QrCode.Ecc.HIGH},Jm=128,$m="L",e2="#FFFFFF",t2="#000000",n2=!1,r2=1,jv=4,Pv=0,Fv=.1;function i2(l,i=0){const o=[];return l.forEach(function(h,p){let g=null;h.forEach(function(v,_){if(!v&&g!==null){o.push(`M${g+i} ${p+i}h${_-g}v1H${g+i}z`),g=null;return}if(_===h.length-1){if(!v)return;g===null?o.push(`M${_+i},${p+i} h1v1H${_+i}z`):o.push(`M${g+i},${p+i} h${_+1-g}v1H${g+i}z`);return}v&&g===null&&(g=_)})}),o.join("")}function a2(l,i){return l.slice().map((o,h)=>h<i.y||h>=i.y+i.h?o:o.map((p,g)=>g<i.x||g>=i.x+i.w?p:!1))}function zv(l,i,o,h){if(h==null)return null;const p=l.length+o*2,g=Math.floor(i*Fv),v=p/i,_=(h.width||g)*v,E=(h.height||g)*v,w=h.x==null?l.length/2-_/2:h.x*v,C=h.y==null?l.length/2-E/2:h.y*v,R=h.opacity==null?1:h.opacity;let M=null;if(h.excavate){let j=Math.floor(w),F=Math.floor(C),H=Math.ceil(_+w-j),ie=Math.ceil(E+C-F);M={x:j,y:F,w:H,h:ie}}const k=h.crossOrigin;return{x:w,y:C,h:E,w:_,excavation:M,opacity:R,crossOrigin:k}}function Hv(l,i){return i!=null?Math.max(Math.floor(i),0):l?jv:Pv}function s2({value:l,level:i,minVersion:o,includeMargin:h,marginSize:p,imageSettings:g,size:v,boostLevel:_}){let E=vn.useMemo(()=>{const j=(Array.isArray(l)?l:[l]).reduce((F,H)=>(F.push(...tl.QrSegment.makeSegments(H)),F),[]);return tl.QrCode.encodeSegments(j,Uv[i],o,void 0,void 0,_)},[l,i,o,_]);const{cells:w,margin:C,numCells:R,calculatedImageSettings:M}=vn.useMemo(()=>{let k=E.getModules();const j=Hv(h,p),F=k.length+j*2,H=zv(k,v,j,g);return{cells:k,margin:j,numCells:F,calculatedImageSettings:H}},[E,v,g,h,p]);return{qrcode:E,margin:C,cells:w,numCells:R,calculatedImageSettings:M}}var Gv=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Vv=vn.forwardRef(function(i,o){const h=i,{value:p,size:g=Jm,level:v=$m,bgColor:_=e2,fgColor:E=t2,includeMargin:w=n2,minVersion:C=r2,boostLevel:R,marginSize:M,imageSettings:k}=h,F=Vf(h,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:H}=F,ie=Vf(F,["style"]),X=k?.src,P=vn.useRef(null),ce=vn.useRef(null),Re=vn.useCallback(Te=>{P.current=Te,typeof o=="function"?o(Te):o&&(o.current=Te)},[o]),[be,J]=vn.useState(!1),{margin:Se,cells:he,numCells:ot,calculatedImageSettings:ve}=s2({value:p,level:v,minVersion:C,boostLevel:R,includeMargin:w,marginSize:M,imageSettings:k,size:g});vn.useEffect(()=>{if(P.current!=null){const Te=P.current,ee=Te.getContext("2d");if(!ee)return;let ne=he;const fe=ce.current,Le=ve!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;Le&&ve.excavation!=null&&(ne=a2(he,ve.excavation));const $e=window.devicePixelRatio||1;Te.height=Te.width=g*$e;const tt=g/ot*$e;ee.scale(tt,tt),ee.fillStyle=_,ee.fillRect(0,0,ot,ot),ee.fillStyle=E,Gv?ee.fill(new Path2D(i2(ne,Se))):he.forEach(function(Y,oe){Y.forEach(function(Ae,_e){Ae&&ee.fillRect(_e+Se,oe+Se,1,1)})}),ve&&(ee.globalAlpha=ve.opacity),Le&&ee.drawImage(fe,ve.x+Se,ve.y+Se,ve.w,ve.h)}}),vn.useEffect(()=>{J(!1)},[X]);const Ce=Gf({height:g,width:g},H);let We=null;return X!=null&&(We=vn.createElement("img",{src:X,key:X,style:{display:"none"},onLoad:()=>{J(!0)},ref:ce,crossOrigin:ve?.crossOrigin})),vn.createElement(vn.Fragment,null,vn.createElement("canvas",Gf({style:Ce,height:g,width:g,ref:Re,role:"img"},ie)),We)});Vv.displayName="QRCodeCanvas";var l2=vn.forwardRef(function(i,o){const h=i,{value:p,size:g=Jm,level:v=$m,bgColor:_=e2,fgColor:E=t2,includeMargin:w=n2,minVersion:C=r2,boostLevel:R,title:M,marginSize:k,imageSettings:j}=h,F=Vf(h,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:H,cells:ie,numCells:X,calculatedImageSettings:P}=s2({value:p,level:v,minVersion:C,boostLevel:R,includeMargin:w,marginSize:k,imageSettings:j,size:g});let ce=ie,Re=null;j!=null&&P!=null&&(P.excavation!=null&&(ce=a2(ie,P.excavation)),Re=vn.createElement("image",{href:j.src,height:P.h,width:P.w,x:P.x+H,y:P.y+H,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const be=i2(ce,H);return vn.createElement("svg",Gf({height:g,width:g,viewBox:`0 0 ${X} ${X}`,ref:o,role:"img"},F),!!M&&vn.createElement("title",null,M),vn.createElement("path",{fill:_,d:`M0,0 h${X}v${X}H0z`,shapeRendering:"crispEdges"}),vn.createElement("path",{fill:E,d:be,shapeRendering:"crispEdges"}),Re)});l2.displayName="QRCodeSVG";const qv=()=>{const[l,i]=W.useState([]),[o,h]=W.useState(!1),{role:p}=gu(),g=W.useRef(null),v=async()=>{try{const E=await nu.getAll();i(E)}catch(E){console.error(E)}};W.useEffect(()=>{v()},[]);const _=E=>{const w=localStorage.getItem("zebra_printer_settings"),C=w?JSON.parse(w):{width:50,height:25,marginLeft:0,marginTop:0,fontSize:9,logoWidth:15},R=g.current;if(!R)return;let M=document.getElementById("print-iframe");M||(M=document.createElement("iframe"),M.id="print-iframe",M.style.position="absolute",M.style.width="0px",M.style.height="0px",M.style.border="none",document.body.appendChild(M));const k=M.contentWindow?.document||M.contentDocument;k&&(k.open(),k.write(`
                <html>
                    <head>
                        <title>Etiquette QR ${E.numero_inventaire}</title>
                        <style>
                            @page { 
                                size: ${C.width}mm ${C.height}mm; 
                                margin: 0; 
                            }
                            body { 
                                margin: 0; 
                                padding: 0;
                                width: ${C.width}mm;
                                height: ${C.height}mm;
                                font-family: 'Arial', sans-serif;
                                overflow: hidden;
                            }
                            .label-container {
                                display: flex;
                                flex-direction: column;
                                width: 100%;
                                height: 100%;
                                margin-left: ${C.marginLeft}mm;
                                margin-top: ${C.marginTop}mm;
                                padding: 1mm;
                                box-sizing: border-box;
                            }
                            .header-section {
                                width: 100%;
                                margin-bottom: 1.5mm;
                                text-align: left;
                                border-bottom: 0.1mm solid #eee;
                                padding-bottom: 0.5mm;
                            }
                            .name {
                                font-size: ${C.fontSize}pt;
                                font-weight: bold;
                                text-transform: uppercase;
                                white-space: nowrap;
                                overflow: hidden;
                                text-overflow: ellipsis;
                            }
                            .subtitle {
                                font-size: ${C.fontSize-3}pt;
                                color: #444;
                                margin-top: 0.2mm;
                            }
                            .bottom-row {
                                flex: 1;
                                display: flex;
                                items-align: flex-end;
                                justify-content: space-between;
                                width: 100%;
                                overflow: hidden;
                            }
                            .col-left {
                                display: flex;
                                flex-direction: column;
                                align-items: flex-start;
                                justify-content: flex-end;
                            }
                            .qr-code svg {
                                width: ${C.height*.55}mm !important;
                                height: ${C.height*.55}mm !important;
                                margin-bottom: 0.5mm;
                            }
                            .inv-num {
                                font-size: ${C.fontSize-1}pt;
                                font-weight: bold;
                                font-family: monospace;
                            }
                            .col-right {
                                display: flex;
                                justify-content: flex-end;
                                align-items: flex-end;
                                width: ${C.logoWidth}mm;
                            }
                            .logo-img {
                                width: 100%;
                                max-height: ${C.height*.55}mm;
                                object-fit: contain;
                            }
                        </style>
                    </head>
                    <body>
                      <div class="label-container">
                        <div class="header-section">
                            <div class="name">${E.nom}</div>
                            <div class="subtitle">ETIQUETTE D'INVENTAIRE QR</div>
                        </div>
                        <div class="bottom-row">
                            <div class="col-left">
                                <div class="qr-code">
                                    ${R.innerHTML}
                                </div>
                                <div class="inv-num">${E.numero_inventaire}</div>
                            </div>
                            <div class="col-right">
                                <img src="${window.location.origin}/logo.png" class="logo-img" />
                            </div>
                        </div>
                      </div>
                      <script>
                        window.onload = function() {
                           window.print();
                        }
                      <\/script>
                    </body>
                </html>
            `),k.close(),setTimeout(()=>{M.contentWindow?.focus(),M.contentWindow?.print()},500))};return I.jsxs("div",{children:[I.jsx("div",{style:{display:"none"},children:l.map(E=>I.jsx("div",{id:`qr-${E.numero_inventaire}`,ref:g,children:I.jsx(l2,{value:E.numero_inventaire,size:128})},E.id))}),I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Matriels"}),p==="admin"&&I.jsx("button",{onClick:()=>h(!o),className:"bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700",children:o?"Fermer":"Ajouter un matriel"})]}),o&&p==="admin"&&I.jsxs("div",{className:"bg-white p-6 rounded shadow mb-6 animate-fade-in",children:[I.jsx("h2",{className:"text-xl mb-4",children:"Nouveau Matriel"}),I.jsx(kv,{onSuccess:()=>{h(!1),v()}})]}),I.jsx("div",{className:"bg-white rounded shadow overflow-x-auto",children:I.jsxs("table",{className:"min-w-full",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-gray-50 border-b",children:[I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N Inventaire"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tiquette"})]})}),I.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(E=>I.jsxs("tr",{children:[I.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.photo_url?I.jsx("img",{src:E.photo_url,alt:"Matriel",className:"h-10 w-10 rounded-full object-cover"}):I.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"No"})}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:E.numero_inventaire}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:E.categories?.code}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:E.nom}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:E.service}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.statut==="En service"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.statut})}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.jsxs("button",{onClick:()=>_(E),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[I.jsx(Tm,{className:"w-4 h-4 mr-1"})," Etiquette QR"]})})]},E.id))})]})})]})};var Oe;(function(l){l[l.QR_CODE=0]="QR_CODE",l[l.AZTEC=1]="AZTEC",l[l.CODABAR=2]="CODABAR",l[l.CODE_39=3]="CODE_39",l[l.CODE_93=4]="CODE_93",l[l.CODE_128=5]="CODE_128",l[l.DATA_MATRIX=6]="DATA_MATRIX",l[l.MAXICODE=7]="MAXICODE",l[l.ITF=8]="ITF",l[l.EAN_13=9]="EAN_13",l[l.EAN_8=10]="EAN_8",l[l.PDF_417=11]="PDF_417",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Oe||(Oe={}));var Kg=new Map([[Oe.QR_CODE,"QR_CODE"],[Oe.AZTEC,"AZTEC"],[Oe.CODABAR,"CODABAR"],[Oe.CODE_39,"CODE_39"],[Oe.CODE_93,"CODE_93"],[Oe.CODE_128,"CODE_128"],[Oe.DATA_MATRIX,"DATA_MATRIX"],[Oe.MAXICODE,"MAXICODE"],[Oe.ITF,"ITF"],[Oe.EAN_13,"EAN_13"],[Oe.EAN_8,"EAN_8"],[Oe.PDF_417,"PDF_417"],[Oe.RSS_14,"RSS_14"],[Oe.RSS_EXPANDED,"RSS_EXPANDED"],[Oe.UPC_A,"UPC_A"],[Oe.UPC_E,"UPC_E"],[Oe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Zg;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.URL=1]="URL"})(Zg||(Zg={}));function Xv(l){return Object.values(Oe).includes(l)}var iu;(function(l){l[l.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",l[l.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(iu||(iu={}));var Yv=(function(){function l(){}return l.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",l.SCAN_DEFAULT_FPS=2,l.DEFAULT_DISABLE_FLIP=!1,l.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,l.DEFAULT_SUPPORTED_SCAN_TYPE=[iu.SCAN_TYPE_CAMERA,iu.SCAN_TYPE_FILE],l})(),o2=(function(){function l(i,o){this.format=i,this.formatName=o}return l.prototype.toString=function(){return this.formatName},l.create=function(i){if(!Kg.has(i))throw"".concat(i," not in html5QrcodeSupportedFormatsTextMap");return new l(i,Kg.get(i))},l})(),Qg=(function(){function l(){}return l.createFromText=function(i){var o={text:i};return{decodedText:i,result:o}},l.createFromQrcodeResult=function(i){return{decodedText:i.text,result:i}},l})(),qf;(function(l){l[l.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",l[l.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",l[l.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(qf||(qf={}));var Wv=(function(){function l(){}return l.createFrom=function(i){return{errorMessage:i,type:qf.UNKWOWN_ERROR}},l})(),Kv=(function(){function l(i){this.verbose=i}return l.prototype.log=function(i){this.verbose&&console.log(i)},l.prototype.warn=function(i){this.verbose&&console.warn(i)},l.prototype.logError=function(i,o){(this.verbose||o===!0)&&console.error(i)},l.prototype.logErrors=function(i){if(i.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(i)},l})();function ki(l){return typeof l>"u"||l===null}var nl=(function(){function l(){}return l.codeParseError=function(i){return"QR code parse error, error = ".concat(i)},l.errorGettingUserMedia=function(i){return"Error getting userMedia, error = ".concat(i)},l.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},l.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},l.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},l.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},l.scannerPaused=function(){return"Scanner paused"},l})(),c2=(function(){function l(){}return l.isMediaStreamConstraintsValid=function(i,o){if(typeof i!="object"){var h=typeof i;return o.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(p),v=Object.keys(i),_=0,E=v;_<E.length;_++){var w=E[_];if(g.has(w))return o.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},l})(),lo={exports:{}},Zv=lo.exports,Jg;function Qv(){return Jg||(Jg=1,(function(l,i){(function(o,h){h(i)})(Zv,(function(o){function h(N){return N==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,t){N.__proto__=t}||function(N,t){for(var r in t)t.hasOwnProperty(r)&&(N[r]=t[r])};function g(N,t){p(N,t);function r(){this.constructor=N}N.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function v(N,t){var r=Object.setPrototypeOf;r?r(N,t):N.__proto__=t}function _(N,t){t===void 0&&(t=N.constructor);var r=Error.captureStackTrace;r&&r(N,t)}var E=(function(N){g(t,N);function t(r){var a=this.constructor,c=N.call(this,r)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),v(c,a.prototype),_(c),c}return t})(Error);class w extends E{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}w.kind="Exception";class C extends w{}C.kind="ArgumentException";class R extends w{}R.kind="IllegalArgumentException";class M{constructor(t){if(this.binarizer=t,t===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,a,c){const u=this.binarizer.getLuminanceSource().crop(t,r,a,c);return new M(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends w{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class j{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(t,r,a,c,u){for(;u--;)a[c++]=t[r++]}static currentTimeMillis(){return Date.now()}}class H extends w{}H.kind="IndexOutOfBoundsException";class ie extends H{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}ie.kind="ArrayIndexOutOfBoundsException";class X{static fill(t,r){for(let a=0,c=t.length;a<c;a++)t[a]=r}static fillWithin(t,r,a,c){X.rangeCheck(t.length,r,a);for(let u=r;u<a;u++)t[u]=c}static rangeCheck(t,r,a){if(r>a)throw new R("fromIndex("+r+") > toIndex("+a+")");if(r<0)throw new ie(r);if(a>t)throw new ie(a)}static asList(...t){return t}static create(t,r,a){return Array.from({length:t}).map(u=>Array.from({length:r}).fill(a))}static createInt32Array(t,r,a){return Array.from({length:t}).map(u=>Int32Array.from({length:r}).fill(a))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let a=0,c=t.length;a<c;a++)if(t[a]!==r[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const a of t)r=31*r+a;return r}static fillUint8Array(t,r){for(let a=0;a!==t.length;a++)t[a]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const a=new Uint8Array(r);return a.set(t),a}return t.slice(0,r)}static copyOfRange(t,r,a){const c=a-r,u=new Int32Array(c);return F.arraycopy(t,r,u,0,c),u}static binarySearch(t,r,a){a===void 0&&(a=X.numberComparator);let c=0,u=t.length-1;for(;c<=u;){const d=u+c>>1,m=a(r,t[d]);if(m>0)c=d+1;else if(m<0)u=d-1;else return d}return-c-1}static numberComparator(t,r){return t-r}}class P{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let a=31;return r=t<<16,r!==0&&(a-=16,t=r),r=t<<8,r!==0&&(a-=8,t=r),r=t<<4,r!==0&&(a-=4,t=r),r=t<<2,r!==0&&(a-=2,t=r),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=ce.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=ce.makeArray(t);F.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const a=this.bits;let c=Math.floor(t/32),u=a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return r;u=a[c]}const m=c*32+P.numberOfTrailingZeros(u);return m>r?r:m}getNextUnset(t){const r=this.size;if(t>=r)return r;const a=this.bits;let c=Math.floor(t/32),u=~a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return r;u=~a[c]}const m=c*32+P.numberOfTrailingZeros(u);return m>r?r:m}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new R;if(r===t)return;r--;const a=Math.floor(t/32),c=Math.floor(r/32),u=this.bits;for(let d=a;d<=c;d++){const m=d>a?0:t&31,A=(2<<(d<c?31:r&31))-(1<<m);u[d]|=A}}clear(){const t=this.bits.length,r=this.bits;for(let a=0;a<t;a++)r[a]=0}isRange(t,r,a){if(r<t||t<0||r>this.size)throw new R;if(r===t)return!0;r--;const c=Math.floor(t/32),u=Math.floor(r/32),d=this.bits;for(let m=c;m<=u;m++){const y=m>c?0:t&31,S=(2<<(m<u?31:r&31))-(1<<y)&4294967295;if((d[m]&S)!==(a?S:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let a=r;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let a=0;a<r;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new R("Sizes don't match");const r=this.bits;for(let a=0,c=r.length;a<c;a++)r[a]^=t.bits[a]}toBytes(t,r,a,c){for(let u=0;u<c;u++){let d=0;for(let m=0;m<8;m++)this.get(t)&&(d|=1<<7-m),t++;r[a+u]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),a=r+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[r-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=t[0]>>>u;for(let m=1;m<a;m++){const y=t[m];d|=y<<32-u,t[m-1]=d,d=y>>>u}t[a-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof ce))return!1;const r=t;return this.size===r.size&&X.equals(this.bits,r.bits)}hashCode(){return 31*this.size+X.hashCode(this.bits)}toString(){let t="";for(let r=0,a=this.size;r<a;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new ce(this.size,this.bits.slice())}}var Re;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Re||(Re={}));var be=Re;class J extends w{static getFormatInstance(){return new J}}J.kind="FormatException";var Se;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(Se||(Se={}));class he{constructor(t,r,a,...c){this.valueIdentifier=t,this.name=a,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=c,he.VALUE_IDENTIFIER_TO_ECI.set(t,this),he.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,m=u.length;d!==m;d++){const y=u[d];he.VALUES_TO_ECI.set(y,this)}for(const d of c)he.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new J("incorect value");const r=he.VALUES_TO_ECI.get(t);if(r===void 0)throw new J("incorect value");return r}static getCharacterSetECIByName(t){const r=he.NAME_TO_ECI.get(t);if(r===void 0)throw new J("incorect value");return r}equals(t){if(!(t instanceof he))return!1;const r=t;return this.getName()===r.getName()}}he.VALUE_IDENTIFIER_TO_ECI=new Map,he.VALUES_TO_ECI=new Map,he.NAME_TO_ECI=new Map,he.Cp437=new he(Se.Cp437,Int32Array.from([0,2]),"Cp437"),he.ISO8859_1=new he(Se.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),he.ISO8859_2=new he(Se.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),he.ISO8859_3=new he(Se.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),he.ISO8859_4=new he(Se.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),he.ISO8859_5=new he(Se.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),he.ISO8859_6=new he(Se.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),he.ISO8859_7=new he(Se.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),he.ISO8859_8=new he(Se.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),he.ISO8859_9=new he(Se.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),he.ISO8859_10=new he(Se.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),he.ISO8859_11=new he(Se.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),he.ISO8859_13=new he(Se.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),he.ISO8859_14=new he(Se.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),he.ISO8859_15=new he(Se.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),he.ISO8859_16=new he(Se.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),he.SJIS=new he(Se.SJIS,20,"SJIS","Shift_JIS"),he.Cp1250=new he(Se.Cp1250,21,"Cp1250","windows-1250"),he.Cp1251=new he(Se.Cp1251,22,"Cp1251","windows-1251"),he.Cp1252=new he(Se.Cp1252,23,"Cp1252","windows-1252"),he.Cp1256=new he(Se.Cp1256,24,"Cp1256","windows-1256"),he.UnicodeBigUnmarked=new he(Se.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),he.UTF8=new he(Se.UTF8,26,"UTF8","UTF-8"),he.ASCII=new he(Se.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),he.Big5=new he(Se.Big5,28,"Big5"),he.GB18030=new he(Se.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),he.EUC_KR=new he(Se.EUC_KR,30,"EUC_KR","EUC-KR");class ot extends w{}ot.kind="UnsupportedOperationException";class ve{static decode(t,r){const a=this.encodingName(r);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!ve.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const a=this.encodingName(r);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof he?t:he.getCharacterSetECIByName(t)}static decodeFallback(t,r){const a=this.encodingCharacterSet(r);if(ve.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=t.length;u<d;u++){let m=t[u].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(a.equals(he.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new ot(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(he.UTF8)||t.equals(he.ISO8859_1)||t.equals(he.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class Ce{static castAsNonUtf8Char(t,r=null){const a=r?r.getName():this.ISO88591;return ve.decode(new Uint8Array([t]),a)}static guessEncoding(t,r){if(r!=null&&r.get(be.CHARACTER_SET)!==void 0)return r.get(be.CHARACTER_SET).toString();const a=t.length;let c=!0,u=!0,d=!0,m=0,y=0,A=0,S=0,O=0,D=0,U=0,G=0,V=0,Z=0,ae=0;const ye=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let xe=0;xe<a&&(c||u||d);xe++){const pe=t[xe]&255;d&&(m>0?(pe&128)===0?d=!1:m--:(pe&128)!==0&&((pe&64)===0?d=!1:(m++,(pe&32)===0?y++:(m++,(pe&16)===0?A++:(m++,(pe&8)===0?S++:d=!1))))),c&&(pe>127&&pe<160?c=!1:pe>159&&(pe<192||pe===215||pe===247)&&ae++),u&&(O>0?pe<64||pe===127||pe>252?u=!1:O--:pe===128||pe===160||pe>239?u=!1:pe>160&&pe<224?(D++,G=0,U++,U>V&&(V=U)):pe>127?(O++,U=0,G++,G>Z&&(Z=G)):(U=0,G=0))}return d&&m>0&&(d=!1),u&&O>0&&(u=!1),d&&(ye||y+A+S>0)?Ce.UTF8:u&&(Ce.ASSUME_SHIFT_JIS||V>=3||Z>=3)?Ce.SHIFT_JIS:c&&u?V===2&&D===2||ae*10>=a?Ce.SHIFT_JIS:Ce.ISO88591:c?Ce.ISO88591:u?Ce.SHIFT_JIS:d?Ce.UTF8:Ce.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let a=-1;function c(d,m,y,A,S,O){if(d==="%%")return"%";if(r[++a]===void 0)return;d=A?parseInt(A.substr(1)):void 0;let D=S?parseInt(S.substr(1)):void 0,U;switch(O){case"s":U=r[a];break;case"c":U=r[a][0];break;case"f":U=parseFloat(r[a]).toFixed(d);break;case"p":U=parseFloat(r[a]).toPrecision(d);break;case"e":U=parseFloat(r[a]).toExponential(d);break;case"x":U=parseInt(r[a]).toString(D||16);break;case"d":U=parseFloat(parseInt(r[a],D||10).toPrecision(d)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(D);let G=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;U.length<G;)U=m!==void 0?U+V:V+U;return U}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}static getBytes(t,r){return ve.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}Ce.SHIFT_JIS=he.SJIS.getName(),Ce.GB2312="GB2312",Ce.ISO88591=he.ISO8859_1.getName(),Ce.EUC_JP="EUC_JP",Ce.UTF8=he.UTF8.getName(),Ce.PLATFORM_DEFAULT_ENCODING=Ce.UTF8,Ce.ASSUME_SHIFT_JIS=!1;class We{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Ce.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,a){for(let c=r;r<r+a;c++)this.append(t[c]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Te{constructor(t,r,a,c){if(this.width=t,this.height=r,this.rowSize=a,this.bits=c,r==null&&(r=t),this.height=r,t<1||r<1)throw new R("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,a=t[0].length,c=new Te(a,r);for(let u=0;u<r;u++){const d=t[u];for(let m=0;m<a;m++)d[m]&&c.set(m,u)}return c}static parseFromString(t,r,a){if(t===null)throw new R("stringRepresentation cannot be null");const c=new Array(t.length);let u=0,d=0,m=-1,y=0,A=0;for(;A<t.length;)if(t.charAt(A)===`
`||t.charAt(A)==="\r"){if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new R("row lengths do not match");d=u,y++}A++}else if(t.substring(A,A+r.length)===r)A+=r.length,c[u]=!0,u++;else if(t.substring(A,A+a.length)===a)A+=a.length,c[u]=!1,u++;else throw new R("illegal character encountered: "+t.substring(A));if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new R("row lengths do not match");y++}const S=new Te(m,y);for(let O=0;O<u;O++)c[O]&&S.set(Math.floor(O%m),Math.floor(O/m));return S}get(t,r){const a=r*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,r){const a=r*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new R("input matrix dimensions do not match");const r=new ce(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const m=u*a,y=t.getRow(u,r).getBitArray();for(let A=0;A<a;A++)c[m+A]^=y[A]}}clear(){const t=this.bits,r=t.length;for(let a=0;a<r;a++)t[a]=0}setRegion(t,r,a,c){if(r<0||t<0)throw new R("Left and top must be nonnegative");if(c<1||a<1)throw new R("Height and width must be at least 1");const u=t+a,d=r+c;if(d>this.height||u>this.width)throw new R("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let A=r;A<d;A++){const S=A*m;for(let O=t;O<u;O++)y[S+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new ce(this.width):r.clear();const a=this.rowSize,c=this.bits,u=t*a;for(let d=0;d<a;d++)r.setBulk(d*32,c[u+d]);return r}setRow(t,r){F.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let a=new ce(t),c=new ce(t);for(let u=0,d=Math.floor((r+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(r-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(r-1-u,a)}getEnclosingRectangle(){const t=this.width,r=this.height,a=this.rowSize,c=this.bits;let u=t,d=r,m=-1,y=-1;for(let A=0;A<r;A++)for(let S=0;S<a;S++){const O=c[A*a+S];if(O!==0){if(A<d&&(d=A),A>y&&(y=A),S*32<u){let D=0;for(;(O<<31-D&4294967295)===0;)D++;S*32+D<u&&(u=S*32+D)}if(S*32+31>m){let D=31;for(;!(O>>>D);)D--;S*32+D>m&&(m=S*32+D)}}}return m<u||y<d?null:Int32Array.from([u,d,m-u+1,y-d+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let a=0;for(;a<r.length&&r[a]===0;)a++;if(a===r.length)return null;const c=a/t;let u=a%t*32;const d=r[a];let m=0;for(;(d<<31-m&4294967295)===0;)m++;return u+=m,Int32Array.from([u,c])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let a=r.length-1;for(;a>=0&&r[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/t);let u=Math.floor(a%t)*32;const d=r[a];let m=31;for(;!(d>>>m);)m--;return u+=m,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Te))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&X.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+X.hashCode(this.bits),t}toString(t="X ",r="  ",a=`
`){return this.buildToString(t,r,a)}buildToString(t,r,a){let c=new We;for(let u=0,d=this.height;u<d;u++){for(let m=0,y=this.width;m<y;m++)c.append(this.get(m,u)?t:r);c.append(a)}return c.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends w{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class ne extends j{constructor(t){super(t),this.luminances=ne.EMPTY,this.buckets=new Int32Array(ne.LUMINANCE_BUCKETS)}getBlackRow(t,r){const a=this.getLuminanceSource(),c=a.getWidth();r==null||r.getSize()<c?r=new ce(c):r.clear(),this.initArrays(c);const u=a.getRow(t,this.luminances),d=this.buckets;for(let y=0;y<c;y++)d[(u[y]&255)>>ne.LUMINANCE_SHIFT]++;const m=ne.estimateBlackPoint(d);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<m&&r.set(y);else{let y=u[0]&255,A=u[1]&255;for(let S=1;S<c-1;S++){const O=u[S+1]&255;(A*4-y-O)/2<m&&r.set(S),y=A,A=O}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),a=t.getHeight(),c=new Te(r,a);this.initArrays(r);const u=this.buckets;for(let y=1;y<5;y++){const A=Math.floor(a*y/5),S=t.getRow(A,this.luminances),O=Math.floor(r*4/5);for(let D=Math.floor(r/5);D<O;D++){const U=S[D]&255;u[U>>ne.LUMINANCE_SHIFT]++}}const d=ne.estimateBlackPoint(u),m=t.getMatrix();for(let y=0;y<a;y++){const A=y*r;for(let S=0;S<r;S++)(m[A+S]&255)<d&&c.set(S,y)}return c}createBinarizer(t){return new ne(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let a=0;a<ne.LUMINANCE_BUCKETS;a++)r[a]=0}static estimateBlackPoint(t){const r=t.length;let a=0,c=0,u=0;for(let S=0;S<r;S++)t[S]>u&&(c=S,u=t[S]),t[S]>a&&(a=t[S]);let d=0,m=0;for(let S=0;S<r;S++){const O=S-c,D=t[S]*O*O;D>m&&(d=S,m=D)}if(c>d){const S=c;c=d,d=S}if(d-c<=r/16)throw new ee;let y=d-1,A=-1;for(let S=d-1;S>c;S--){const O=S-c,D=O*O*(d-S)*(a-t[S]);D>A&&(y=S,A=D)}return y<<ne.LUMINANCE_SHIFT}}ne.LUMINANCE_BITS=5,ne.LUMINANCE_SHIFT=8-ne.LUMINANCE_BITS,ne.LUMINANCE_BUCKETS=1<<ne.LUMINANCE_BITS,ne.EMPTY=Uint8ClampedArray.from([0]);class fe extends ne{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),a=t.getHeight();if(r>=fe.MINIMUM_DIMENSION&&a>=fe.MINIMUM_DIMENSION){const c=t.getMatrix();let u=r>>fe.BLOCK_SIZE_POWER;(r&fe.BLOCK_SIZE_MASK)!==0&&u++;let d=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&d++;const m=fe.calculateBlackPoints(c,u,d,r,a),y=new Te(r,a);fe.calculateThresholdForBlock(c,u,d,r,a,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,r,a,c,u,d,m){const y=u-fe.BLOCK_SIZE,A=c-fe.BLOCK_SIZE;for(let S=0;S<a;S++){let O=S<<fe.BLOCK_SIZE_POWER;O>y&&(O=y);const D=fe.cap(S,2,a-3);for(let U=0;U<r;U++){let G=U<<fe.BLOCK_SIZE_POWER;G>A&&(G=A);const V=fe.cap(U,2,r-3);let Z=0;for(let ye=-2;ye<=2;ye++){const xe=d[D+ye];Z+=xe[V-2]+xe[V-1]+xe[V]+xe[V+1]+xe[V+2]}const ae=Z/25;fe.thresholdBlock(t,G,O,ae,c,m)}}}static cap(t,r,a){return t<r?r:t>a?a:t}static thresholdBlock(t,r,a,c,u,d){for(let m=0,y=a*u+r;m<fe.BLOCK_SIZE;m++,y+=u)for(let A=0;A<fe.BLOCK_SIZE;A++)(t[y+A]&255)<=c&&d.set(r+A,a+m)}static calculateBlackPoints(t,r,a,c,u){const d=u-fe.BLOCK_SIZE,m=c-fe.BLOCK_SIZE,y=new Array(a);for(let A=0;A<a;A++){y[A]=new Int32Array(r);let S=A<<fe.BLOCK_SIZE_POWER;S>d&&(S=d);for(let O=0;O<r;O++){let D=O<<fe.BLOCK_SIZE_POWER;D>m&&(D=m);let U=0,G=255,V=0;for(let ae=0,ye=S*c+D;ae<fe.BLOCK_SIZE;ae++,ye+=c){for(let xe=0;xe<fe.BLOCK_SIZE;xe++){const pe=t[ye+xe]&255;U+=pe,pe<G&&(G=pe),pe>V&&(V=pe)}if(V-G>fe.MIN_DYNAMIC_RANGE)for(ae++,ye+=c;ae<fe.BLOCK_SIZE;ae++,ye+=c)for(let xe=0;xe<fe.BLOCK_SIZE;xe++)U+=t[ye+xe]&255}let Z=U>>fe.BLOCK_SIZE_POWER*2;if(V-G<=fe.MIN_DYNAMIC_RANGE&&(Z=G/2,A>0&&O>0)){const ae=(y[A-1][O]+2*y[A][O-1]+y[A-1][O-1])/4;G<ae&&(Z=ae)}y[A][O]=Z}}return y}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Le{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,a,c){throw new ot("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ot("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ot("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new We;for(let a=0;a<this.height;a++){const c=this.getRow(a,t);for(let u=0;u<this.width;u++){const d=c[u]&255;let m;d<64?m="#":d<128?m="+":d<192?m=".":m=" ",r.append(m)}r.append(`
`)}return r.toString()}}class $e extends Le{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const a=this.delegate.getRow(t,r),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(r);for(let c=0;c<r;c++)a[c]=255-(t[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,a,c){return new $e(this.delegate.crop(t,r,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $e(this.delegate.rotateCounterClockwise45())}}class tt extends Le{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=tt.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return tt.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,a){const c=new Uint8ClampedArray(r*a);for(let u=0,d=0,m=t.length;u<m;u+=4,d++){let y;if(t[u+3]===0)y=255;else{const S=t[u],O=t[u+1],D=t[u+2];y=306*S+601*O+117*D+512>>10}c[d]=y}return c}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const a=this.getWidth(),c=t*a;return r===null?r=this.buffer.slice(c,c+a):(r.length<a&&(r=new Uint8ClampedArray(a)),r.set(this.buffer.slice(c,c+a))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,a,c){return super.crop(t,r,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),a=r.getContext("2d"),c=t*tt.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return r.width=m,r.height=y,a.translate(m/2,y/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=tt.makeBufferFromCanvasImageData(r),this}invert(){return new $e(this)}}tt.DEGREE_TO_RADIANS=Math.PI/180;class Y{constructor(t,r,a){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||Fc||self||window||void 0)&&(globalThis||Fc||self||window||void 0).__awaiter||function(N,t,r,a){function c(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(S){try{A(a.next(S))}catch(O){d(O)}}function y(S){try{A(a.throw(S))}catch(O){d(O)}}function A(S){S.done?u(S.value):c(S.value).then(m,y)}A((a=a.apply(N,t||[])).next())})};class Ae{constructor(t,r=500,a){this.reader=t,this.timeBetweenScansMillis=r,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const a of t){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${r.length+1}`,m=a.groupId,y={deviceId:u,label:d,kind:c,groupId:m};r.push(y)}return r})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Y(r.deviceId,r.label))})}findDeviceById(t){return oe(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return oe(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,r)})}decodeOnceFromConstraints(t,r){return oe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,r)})}decodeOnceFromStream(t,r){return oe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,r,a){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,a)})}decodeFromVideoDevice(t,r,a){return oe(this,void 0,void 0,function*(){let c;t?c={deviceId:{exact:t}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,r,a)})}decodeFromConstraints(t,r,a){return oe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(c,r,a)})}decodeFromStream(t,r,a){return oe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return oe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(r);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((r,a)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const a=document.getElementById(t);if(!a)throw new C(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==r.toLowerCase())throw new C(`element with id '${t}' must be an ${r} element`);return a}decodeFromImage(t,r){if(!t&&!r)throw new C("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new C("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,a){if(t===void 0&&r===void 0)throw new C("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new C("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let a;return this.isImageLoaded(r)?a=this.decodeOnce(r,!1,!0):a=this._decodeOnLoadImage(r),a}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,r)}_decodeFromVideoElementSetup(t){if(!t)throw new C("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new C("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const a=this._decodeOnLoadImage(r);return r.src=t,a}decodeFromVideoUrl(t){if(!t)throw new C("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),a=this.decodeFromVideoElement(r);return r.src=t,a}decodeFromVideoUrlContinuously(t,r){if(!t)throw new C("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,r);return a.src=t,c}_decodeOnLoadImage(t){return new Promise((r,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(t);u(m)}catch(m){const y=r&&m instanceof ee,S=(m instanceof k||m instanceof J)&&a;if(y||S)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(m)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(t);r(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){r(null,c);const u=c instanceof k||c instanceof J,d=c instanceof ee;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,a){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,a=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),a=new tt(r),c=new fe(a);return new M(c)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let a,c;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,c=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,c=t.naturalHeight||t.height)),r.style.width=a+"px",r.style.height=c+"px",r.width=a,r.height=c,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class _e{constructor(t,r,a=r==null?0:8*r.length,c,u,d=F.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=t,this.rawBytes=r,a==null?this.numBits=r==null?0:8*r.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=F.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(r.length+t.length);F.arraycopy(r,0,a,0,r.length),F.arraycopy(t,0,a,r.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ve;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var Ee=Ve,gt;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(gt||(gt={}));var mt=gt;class Lt{constructor(t,r,a,c,u=-1,d=-1){this.rawBytes=t,this.text=r,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Pr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class An{constructor(t,r){if(r.length===0)throw new R;this.field=t;const a=r.length;if(a>1&&r[0]===0){let c=1;for(;c<a&&r[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),F.arraycopy(r,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let a;if(t===1){a=0;for(let d=0,m=r.length;d!==m;d++){const y=r[d];a=Pr.addOrSubtract(a,y)}return a}a=r[0];const c=r.length,u=this.field;for(let d=1;d<c;d++)a=Pr.addOrSubtract(u.multiply(t,a),r[d]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,a=t.coefficients;if(r.length>a.length){const d=r;r=a,a=d}let c=new Int32Array(a.length);const u=a.length-r.length;F.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=Pr.addOrSubtract(r[d-u],a[d]);return new An(this.field,c)}multiply(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,a=r.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1),m=this.field;for(let y=0;y<a;y++){const A=r[y];for(let S=0;S<u;S++)d[y+S]=Pr.addOrSubtract(d[y+S],m.multiply(A,c[S]))}return new An(m,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,a=this.field,c=new Int32Array(r),u=this.coefficients;for(let d=0;d<r;d++)c[d]=a.multiply(u[d],t);return new An(a,c)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+t),d=this.field;for(let m=0;m<c;m++)u[m]=d.multiply(a[m],r);return new An(d,u)}divide(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new R("Divide by 0");const r=this.field;let a=r.getZero(),c=this;const u=t.getCoefficient(t.getDegree()),d=r.inverse(u);for(;c.getDegree()>=t.getDegree()&&!c.isZero();){const m=c.getDegree()-t.getDegree(),y=r.multiply(c.getCoefficient(c.getDegree()),d),A=t.multiplyByMonomial(m,y),S=r.buildMonomial(m,y);a=a.addOrSubtract(S),c=c.addOrSubtract(A)}return[a,c]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),r===0||a!==1){const c=this.field.log(a);c===0?t+="1":c===1?t+="a":(t+="a^",t+=c)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class Fi extends w{}Fi.kind="ArithmeticException";class pt extends Pr{constructor(t,r,a){super(),this.primitive=t,this.size=r,this.generatorBase=a;const c=new Int32Array(r);let u=1;for(let m=0;m<r;m++)c[m]=u,u*=2,u>=r&&(u^=t,u&=r-1);this.expTable=c;const d=new Int32Array(r);for(let m=0;m<r-1;m++)d[c[m]]=m;this.logTable=d,this.zero=new An(this,Int32Array.from([0])),this.one=new An(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;const a=new Int32Array(t+1);return a[0]=r,new An(this,a)}inverse(t){if(t===0)throw new Fi;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class Zn extends w{}Zn.kind="ReedSolomonException";class Qn extends w{}Qn.kind="IllegalStateException";class fi{constructor(t){this.field=t}decode(t,r){const a=this.field,c=new An(a,t),u=new Int32Array(r);let d=!0;for(let U=0;U<r;U++){const G=c.evaluateAt(a.exp(U+a.getGeneratorBase()));u[u.length-1-U]=G,G!==0&&(d=!1)}if(d)return;const m=new An(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(r,1),m,r),A=y[0],S=y[1],O=this.findErrorLocations(A),D=this.findErrorMagnitudes(S,O);for(let U=0;U<O.length;U++){const G=t.length-1-a.log(O[U]);if(G<0)throw new Zn("Bad error location");t[G]=pt.addOrSubtract(t[G],D[U])}}runEuclideanAlgorithm(t,r,a){if(t.getDegree()<r.getDegree()){const U=t;t=r,r=U}const c=this.field;let u=t,d=r,m=c.getZero(),y=c.getOne();for(;d.getDegree()>=(a/2|0);){let U=u,G=m;if(u=d,m=y,u.isZero())throw new Zn("r_{i-1} was zero");d=U;let V=c.getZero();const Z=u.getCoefficient(u.getDegree()),ae=c.inverse(Z);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ye=d.getDegree()-u.getDegree(),xe=c.multiply(d.getCoefficient(d.getDegree()),ae);V=V.addOrSubtract(c.buildMonomial(ye,xe)),d=d.addOrSubtract(u.multiplyByMonomial(ye,xe))}if(y=V.multiply(m).addOrSubtract(G),d.getDegree()>=u.getDegree())throw new Qn("Division algorithm failed to reduce polynomial?")}const A=y.getCoefficient(0);if(A===0)throw new Zn("sigmaTilde(0) was zero");const S=c.inverse(A),O=y.multiplyScalar(S),D=d.multiplyScalar(S);return[O,D]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(r);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<r;d++)t.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==r)throw new Zn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,r){const a=r.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const m=u.inverse(r[d]);let y=1;for(let A=0;A<a;A++)if(d!==A){const S=u.multiply(r[A],m),O=(S&1)===0?S|1:S&-2;y=u.multiply(y,O)}c[d]=u.multiply(t.evaluateAt(m),u.inverse(y)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],m))}return c}}var _n;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(_n||(_n={}));class Rt{decode(t){this.ddata=t;let r=t.getBits(),a=this.extractBits(r),c=this.correctBits(a),u=Rt.convertBoolArrayToByteArray(c),d=Rt.getEncodedData(c),m=new Lt(u,d,null,null);return m.setNumBits(c.length),m}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,a=_n.UPPER,c=_n.UPPER,u="",d=0;for(;d<r;)if(c===_n.BINARY){if(r-d<5)break;let m=Rt.readCode(t,d,5);if(d+=5,m===0){if(r-d<11)break;m=Rt.readCode(t,d,11)+31,d+=11}for(let y=0;y<m;y++){if(r-d<8){d=r;break}const A=Rt.readCode(t,d,8);u+=Ce.castAsNonUtf8Char(A),d+=8}c=a}else{let m=c===_n.DIGIT?4:5;if(r-d<m)break;let y=Rt.readCode(t,d,m);d+=m;let A=Rt.getCharacter(c,y);A.startsWith("CTRL_")?(a=c,c=Rt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(a=c)):(u+=A,c=a)}return u}static getTable(t){switch(t){case"L":return _n.LOWER;case"P":return _n.PUNCT;case"M":return _n.MIXED;case"D":return _n.DIGIT;case"B":return _n.BINARY;default:return _n.UPPER}}static getCharacter(t,r){switch(t){case _n.UPPER:return Rt.UPPER_TABLE[r];case _n.LOWER:return Rt.LOWER_TABLE[r];case _n.MIXED:return Rt.MIXED_TABLE[r];case _n.PUNCT:return Rt.PUNCT_TABLE[r];case _n.DIGIT:return Rt.DIGIT_TABLE[r];default:throw new Qn("Bad table")}}correctBits(t){let r,a;this.ddata.getNbLayers()<=2?(a=6,r=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,r=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,r=pt.AZTEC_DATA_10):(a=12,r=pt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=t.length/a;if(u<c)throw new J;let d=t.length%a,m=new Int32Array(u);for(let D=0;D<u;D++,d+=a)m[D]=Rt.readCode(t,d,a);try{new fi(r).decode(m,u-c)}catch(D){throw new J(D)}let y=(1<<a)-1,A=0;for(let D=0;D<c;D++){let U=m[D];if(U===0||U===y)throw new J;(U===1||U===y-1)&&A++}let S=new Array(c*a-A),O=0;for(let D=0;D<c;D++){let U=m[D];if(U===1||U===y-1)S.fill(U>1,O,O+a-1),O+=a-1;else for(let G=a-1;G>=0;--G)S[O++]=(U&1<<G)!==0}return S}extractBits(t){let r=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(r?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,r));if(r)for(let m=0;m<u.length;m++)u[m]=m;else{let m=c+1+2*P.truncDivision(P.truncDivision(c,2)-1,15),y=c/2,A=P.truncDivision(m,2);for(let S=0;S<y;S++){let O=S+P.truncDivision(S,15);u[y-S-1]=A-O-1,u[y+S]=A+O+1}}for(let m=0,y=0;m<a;m++){let A=(a-m)*4+(r?9:12),S=m*2,O=c-1-S;for(let D=0;D<A;D++){let U=D*2;for(let G=0;G<2;G++)d[y+U+G]=t.get(u[S+G],u[S+D]),d[y+2*A+U+G]=t.get(u[S+D],u[O-G]),d[y+4*A+U+G]=t.get(u[O-G],u[O-D]),d[y+6*A+U+G]=t.get(u[O-D],u[S+G])}y+=A*8}return d}static readCode(t,r,a){let c=0;for(let u=r;u<r+a;u++)c<<=1,t[u]&&(c|=1);return c}static readByte(t,r){let a=t.length-r;return a>=8?Rt.readCode(t,r,8):Rt.readCode(t,r,a)<<8-a}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let a=0;a<r.length;a++)r[a]=Rt.readByte(t,8*a);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class rt{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,a,c){const u=t-a,d=r-c;return Math.sqrt(u*u+d*d)}static sum(t){let r=0;for(let a=0,c=t.length;a!==c;a++){const u=t[a];r+=u}return r}}class zi{static floatToIntBits(t){return t}}zi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ie){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*zi.floatToIntBits(this.x)+zi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),c=this.distance(t[0],t[2]);let u,d,m;if(a>=r&&a>=c?(d=t[0],u=t[1],m=t[2]):c>=a&&c>=r?(d=t[1],u=t[0],m=t[2]):(d=t[2],u=t[0],m=t[1]),this.crossProductZ(u,d,m)<0){const y=u;u=m,m=y}t[0]=u,t[1]=d,t[2]=m}static distance(t,r){return rt.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,a){const c=r.x,u=r.y;return(a.x-c)*(t.y-u)-(a.y-u)*(t.x-c)}}class ss{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Eo extends ss{constructor(t,r,a,c,u){super(t,r),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(t,r,a,c){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Jt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),c==null&&(c=t.getHeight()/2|0);const u=r/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let t=this.leftInit,r=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,m=!1,y=!1,A=!1,S=!1,O=!1;const D=this.width,U=this.height;for(;d;){d=!1;let G=!0;for(;(G||!y)&&r<D;)G=this.containsBlackPoint(a,c,r,!1),G?(r++,d=!0,y=!0):y||r++;if(r>=D){u=!0;break}let V=!0;for(;(V||!A)&&c<U;)V=this.containsBlackPoint(t,r,c,!0),V?(c++,d=!0,A=!0):A||c++;if(c>=U){u=!0;break}let Z=!0;for(;(Z||!S)&&t>=0;)Z=this.containsBlackPoint(a,c,t,!1),Z?(t--,d=!0,S=!0):S||t--;if(t<0){u=!0;break}let ae=!0;for(;(ae||!O)&&a>=0;)ae=this.containsBlackPoint(t,r,a,!0),ae?(a--,d=!0,O=!0):O||a--;if(a<0){u=!0;break}d&&(m=!0)}if(!u&&m){const G=r-t;let V=null;for(let xe=1;V===null&&xe<G;xe++)V=this.getBlackPointOnSegment(t,c-xe,t+xe,c);if(V==null)throw new ee;let Z=null;for(let xe=1;Z===null&&xe<G;xe++)Z=this.getBlackPointOnSegment(t,a+xe,t+xe,a);if(Z==null)throw new ee;let ae=null;for(let xe=1;ae===null&&xe<G;xe++)ae=this.getBlackPointOnSegment(r,a+xe,r-xe,a);if(ae==null)throw new ee;let ye=null;for(let xe=1;ye===null&&xe<G;xe++)ye=this.getBlackPointOnSegment(r,c-xe,r-xe,c);if(ye==null)throw new ee;return this.centerEdges(ye,V,ae,Z)}else throw new ee}getBlackPointOnSegment(t,r,a,c){const u=rt.round(rt.distance(t,r,a,c)),d=(a-t)/u,m=(c-r)/u,y=this.image;for(let A=0;A<u;A++){const S=rt.round(t+A*d),O=rt.round(r+A*m);if(y.get(S,O))return new Ie(S,O)}return null}centerEdges(t,r,a,c){const u=t.getX(),d=t.getY(),m=r.getX(),y=r.getY(),A=a.getX(),S=a.getY(),O=c.getX(),D=c.getY(),U=Jt.CORR;return u<this.width/2?[new Ie(O-U,D+U),new Ie(m+U,y+U),new Ie(A-U,S-U),new Ie(u+U,d-U)]:[new Ie(O+U,D+U),new Ie(m+U,y-U),new Ie(A-U,S+U),new Ie(u-U,d-U)]}containsBlackPoint(t,r,a,c){const u=this.image;if(c){for(let d=t;d<=r;d++)if(u.get(d,a))return!0}else for(let d=t;d<=r;d++)if(u.get(a,d))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class ol{static checkAndNudgePoints(t,r){const a=t.getWidth(),c=t.getHeight();let u=!0;for(let d=0;d<r.length&&u;d+=2){const m=Math.floor(r[d]),y=Math.floor(r[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ee;u=!1,m===-1?(r[d]=0,u=!0):m===a&&(r[d]=a-1,u=!0),y===-1?(r[d+1]=0,u=!0):y===c&&(r[d+1]=c-1,u=!0)}u=!0;for(let d=r.length-2;d>=0&&u;d-=2){const m=Math.floor(r[d]),y=Math.floor(r[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ee;u=!1,m===-1?(r[d]=0,u=!0):m===a&&(r[d]=a-1,u=!0),y===-1?(r[d+1]=0,u=!0):y===c&&(r[d+1]=c-1,u=!0)}}}class Jn{constructor(t,r,a,c,u,d,m,y,A){this.a11=t,this.a21=r,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=m,this.a23=y,this.a33=A}static quadrilateralToQuadrilateral(t,r,a,c,u,d,m,y,A,S,O,D,U,G,V,Z){const ae=Jn.quadrilateralToSquare(t,r,a,c,u,d,m,y);return Jn.squareToQuadrilateral(A,S,O,D,U,G,V,Z).times(ae)}transformPoints(t){const r=t.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,A=this.a31,S=this.a32,O=this.a33;for(let D=0;D<r;D+=2){const U=t[D],G=t[D+1],V=u*U+y*G+O;t[D]=(a*U+d*G+A)/V,t[D+1]=(c*U+m*G+S)/V}}transformPointsWithValues(t,r){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,A=this.a31,S=this.a32,O=this.a33,D=t.length;for(let U=0;U<D;U++){const G=t[U],V=r[U],Z=u*G+y*V+O;t[U]=(a*G+d*V+A)/Z,r[U]=(c*G+m*V+S)/Z}}static squareToQuadrilateral(t,r,a,c,u,d,m,y){const A=t-a+u-m,S=r-c+d-y;if(A===0&&S===0)return new Jn(a-t,u-a,t,c-r,d-c,r,0,0,1);{const O=a-u,D=m-u,U=c-d,G=y-d,V=O*G-D*U,Z=(A*G-D*S)/V,ae=(O*S-A*U)/V;return new Jn(a-t+Z*a,m-t+ae*m,t,c-r+Z*c,y-r+ae*y,r,Z,ae,1)}}static quadrilateralToSquare(t,r,a,c,u,d,m,y){return Jn.squareToQuadrilateral(t,r,a,c,u,d,m,y).buildAdjoint()}buildAdjoint(){return new Jn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Jn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class cl extends ol{sampleGrid(t,r,a,c,u,d,m,y,A,S,O,D,U,G,V,Z,ae,ye,xe){const pe=Jn.quadrilateralToQuadrilateral(c,u,d,m,y,A,S,O,D,U,G,V,Z,ae,ye,xe);return this.sampleGridWithTransform(t,r,a,pe)}sampleGridWithTransform(t,r,a,c){if(r<=0||a<=0)throw new ee;const u=new Te(r,a),d=new Float32Array(2*r);for(let m=0;m<a;m++){const y=d.length,A=m+.5;for(let S=0;S<y;S+=2)d[S]=S/2+.5,d[S+1]=A;c.transformPoints(d),ol.checkAndNudgePoints(t,d);try{for(let S=0;S<y;S+=2)t.get(Math.floor(d[S]),Math.floor(d[S+1]))&&u.set(S/2,m)}catch{throw new ee}}return u}}class or{static setGridSampler(t){or.gridSampler=t}static getInstance(){return or.gridSampler}}or.gridSampler=new cl;class Mn{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ul{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),a=this.getBullsEyeCorners(r);if(t){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new Eo(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ee;let r=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(a,r);let c=0;for(let d=0;d<4;d++){let m=a[(this.shift+d)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,r){let a=0;t.forEach((c,u,d)=>{let m=(c>>r-2<<1)+(c&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(P.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ee}getCorrectedParameterData(t,r){let a,c;r?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let y=a-1;y>=0;--y)d[y]=t&15,t>>=4;try{new fi(pt.AZTEC_PARAM).decode(d,u)}catch{throw new ee}let m=0;for(let y=0;y<c;y++)m=(m<<4)+d[y];return m}getBullsEyeCorners(t){let r=t,a=t,c=t,u=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(r,d,1,-1),D=this.getFirstDifferent(a,d,1,1),U=this.getFirstDifferent(c,d,-1,1),G=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(G,O)*this.nbCenterLayers/(this.distancePoint(u,r)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(O,D,U,G))break}r=O,a=D,c=U,u=G,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let m=new Ie(r.getX()+.5,r.getY()-.5),y=new Ie(a.getX()+.5,a.getY()+.5),A=new Ie(c.getX()-.5,c.getY()+.5),S=new Ie(u.getX()-.5,u.getY()-.5);return this.expandSquare([m,y,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,a,c;try{let m=new Jt(this.image).detect();t=m[0],r=m[1],a=m[2],c=m[3]}catch{let y=this.image.getWidth()/2,A=this.image.getHeight()/2;t=this.getFirstDifferent(new Mn(y+7,A-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Mn(y+7,A+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Mn(y-7,A+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Mn(y-7,A-7),!1,-1,-1).toResultPoint()}let u=rt.round((t.getX()+c.getX()+r.getX()+a.getX())/4),d=rt.round((t.getY()+c.getY()+r.getY()+a.getY())/4);try{let m=new Jt(this.image,15,u,d).detect();t=m[0],r=m[1],a=m[2],c=m[3]}catch{t=this.getFirstDifferent(new Mn(u+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Mn(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Mn(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Mn(u-7,d-7),!1,-1,-1).toResultPoint()}return u=rt.round((t.getX()+c.getX()+r.getX()+a.getX())/4),d=rt.round((t.getY()+c.getY()+r.getY()+a.getY())/4),new Mn(u,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,a,c,u){let d=or.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,A=m/2+this.nbCenterLayers;return d.sampleGrid(t,m,m,y,y,A,y,A,A,y,A,r.getX(),r.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(t,r,a){let c=0,u=this.distanceResultPoint(t,r),d=u/a,m=t.getX(),y=t.getY(),A=d*(r.getX()-t.getX())/u,S=d*(r.getY()-t.getY())/u;for(let O=0;O<a;O++)this.image.get(rt.round(m+O*A),rt.round(y+O*S))&&(c|=1<<a-O-1);return c}isWhiteOrBlackRectangle(t,r,a,c){let u=3;t=new Mn(t.getX()-u,t.getY()+u),r=new Mn(r.getX()-u,r.getY()-u),a=new Mn(a.getX()+u,a.getY()-u),c=new Mn(c.getX()+u,c.getY()+u);let d=this.getColor(c,t);if(d===0)return!1;let m=this.getColor(t,r);return m!==d||(m=this.getColor(r,a),m!==d)?!1:(m=this.getColor(a,c),m===d)}getColor(t,r){let a=this.distancePoint(t,r),c=(r.getX()-t.getX())/a,u=(r.getY()-t.getY())/a,d=0,m=t.getX(),y=t.getY(),A=this.image.get(t.getX(),t.getY()),S=Math.ceil(a);for(let D=0;D<S;D++)m+=c,y+=u,this.image.get(rt.round(m),rt.round(y))!==A&&d++;let O=d/a;return O>.1&&O<.9?0:O<=.1===A?1:-1}getFirstDifferent(t,r,a,c){let u=t.getX()+a,d=t.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===r;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===r;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===r;)d+=c;return d-=c,new Mn(u,d)}expandSquare(t,r,a){let c=a/(2*r),u=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),m=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,A=new Ie(m+c*u,y+c*d),S=new Ie(m-c*u,y-c*d);u=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),m=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let O=new Ie(m+c*u,y+c*d),D=new Ie(m-c*u,y-c*d);return[A,O,S,D]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=rt.round(t.getX()),a=rt.round(t.getY());return this.isValid(r,a)}distancePoint(t,r){return rt.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return rt.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class ls{decode(t,r=null){let a=null,c=new ul(t.getBlackMatrix()),u=null,d=null;try{let S=c.detectMirror(!1);u=S.getPoints(),this.reportFoundResultPoints(r,u),d=new Rt().decode(S)}catch(S){a=S}if(d==null)try{let S=c.detectMirror(!0);u=S.getPoints(),this.reportFoundResultPoints(r,u),d=new Rt().decode(S)}catch(S){throw a??S}let m=new _e(d.getText(),d.getRawBytes(),d.getNumBits(),u,Ee.AZTEC,F.currentTimeMillis()),y=d.getByteSegments();y!=null&&m.putMetadata(mt.BYTE_SEGMENTS,y);let A=d.getECLevel();return A!=null&&m.putMetadata(mt.ERROR_CORRECTION_LEVEL,A),m}reportFoundResultPoints(t,r){if(t!=null){let a=t.get(be.NEED_RESULT_POINT_CALLBACK);a!=null&&r.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class mu extends Ae{constructor(t=500){super(new ls,t)}}class zt{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(be.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),d=this.doDecode(u,r),m=d.getResultMetadata();let y=270;m!==null&&m.get(mt.ORIENTATION)===!0&&(y=y+m.get(mt.ORIENTATION)%360),d.putMetadata(mt.ORIENTATION,y);const A=d.getResultPoints();if(A!==null){const S=u.getHeight();for(let O=0;O<A.length;O++)A[O]=new Ie(S-A[O].getY()-1,A[O].getX())}return d}else throw new ee}}reset(){}doDecode(t,r){const a=t.getWidth(),c=t.getHeight();let u=new ce(a);const d=r&&r.get(be.TRY_HARDER)===!0,m=Math.max(1,c>>(d?8:5));let y;d?y=c:y=15;const A=Math.trunc(c/2);for(let S=0;S<y;S++){const O=Math.trunc((S+1)/2),D=(S&1)===0,U=A+m*(D?O:-O);if(U<0||U>=c)break;try{u=t.getBlackRow(U,u)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(u.reverse(),r&&r.get(be.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;r.forEach((Z,ae)=>V.set(ae,Z)),V.delete(be.NEED_RESULT_POINT_CALLBACK),r=V}try{const V=this.decodeRow(U,u,r);if(G===1){V.putMetadata(mt.ORIENTATION,180);const Z=V.getResultPoints();Z!==null&&(Z[0]=new Ie(a-Z[0].getX()-1,Z[0].getY()),Z[1]=new Ie(a-Z[1].getX()-1,Z[1].getY()))}return V}catch{}}}throw new ee}static recordPattern(t,r,a){const c=a.length;for(let A=0;A<c;A++)a[A]=0;const u=t.getSize();if(r>=u)throw new ee;let d=!t.get(r),m=0,y=r;for(;y<u;){if(t.get(y)!==d)a[m]++;else{if(++m===c)break;a[m]=1,d=!d}y++}if(!(m===c||m===c-1&&y===u))throw new ee}static recordPatternInReverse(t,r,a){let c=a.length,u=t.get(r);for(;r>0&&c>=0;)t.get(--r)!==u&&(c--,u=!u);if(c>=0)throw new ee;zt.recordPattern(t,r+1,a)}static patternMatchVariance(t,r,a){const c=t.length;let u=0,d=0;for(let A=0;A<c;A++)u+=t[A],d+=r[A];if(u<d)return Number.POSITIVE_INFINITY;const m=u/d;a*=m;let y=0;for(let A=0;A<c;A++){const S=t[A],O=r[A]*m,D=S>O?S-O:O-S;if(D>a)return Number.POSITIVE_INFINITY;y+=D}return y/u}}class we extends zt{static findStartPattern(t){const r=t.getSize(),a=t.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,m=!1;const y=6;for(let A=a;A<r;A++)if(t.get(A)!==m)u[c]++;else{if(c===y-1){let S=we.MAX_AVG_VARIANCE,O=-1;for(let D=we.CODE_START_A;D<=we.CODE_START_C;D++){const U=zt.patternMatchVariance(u,we.CODE_PATTERNS[D],we.MAX_INDIVIDUAL_VARIANCE);U<S&&(S=U,O=D)}if(O>=0&&t.isRange(Math.max(0,d-(A-d)/2),d,!1))return Int32Array.from([d,A,O]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,m=!m}throw new ee}static decodeCode(t,r,a){zt.recordPattern(t,a,r);let c=we.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<we.CODE_PATTERNS.length;d++){const m=we.CODE_PATTERNS[d],y=this.patternMatchVariance(r,m,we.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=d)}if(u>=0)return u;throw new ee}decodeRow(t,r,a){const c=a&&a.get(be.ASSUME_GS1)===!0,u=we.findStartPattern(r),d=u[2];let m=0;const y=new Uint8Array(20);y[m++]=d;let A;switch(d){case we.CODE_START_A:A=we.CODE_CODE_A;break;case we.CODE_START_B:A=we.CODE_CODE_B;break;case we.CODE_START_C:A=we.CODE_CODE_C;break;default:throw new J}let S=!1,O=!1,D="",U=u[0],G=u[1];const V=Int32Array.from([0,0,0,0,0,0]);let Z=0,ae=0,ye=d,xe=0,pe=!0,et=!1,Xe=!1;for(;!S;){const wi=O;switch(O=!1,Z=ae,ae=we.decodeCode(r,V,G),y[m++]=ae,ae!==we.CODE_STOP&&(pe=!0),ae!==we.CODE_STOP&&(xe++,ye+=xe*ae),U=G,G+=V.reduce((Uo,El)=>Uo+El,0),ae){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new J}switch(A){case we.CODE_CODE_A:if(ae<64)Xe===et?D+=String.fromCharCode(32+ae):D+=String.fromCharCode(32+ae+128),Xe=!1;else if(ae<96)Xe===et?D+=String.fromCharCode(ae-64):D+=String.fromCharCode(ae+64),Xe=!1;else switch(ae!==we.CODE_STOP&&(pe=!1),ae){case we.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!et&&Xe?(et=!0,Xe=!1):et&&Xe?(et=!1,Xe=!1):Xe=!0;break;case we.CODE_SHIFT:O=!0,A=we.CODE_CODE_B;break;case we.CODE_CODE_B:A=we.CODE_CODE_B;break;case we.CODE_CODE_C:A=we.CODE_CODE_C;break;case we.CODE_STOP:S=!0;break}break;case we.CODE_CODE_B:if(ae<96)Xe===et?D+=String.fromCharCode(32+ae):D+=String.fromCharCode(32+ae+128),Xe=!1;else switch(ae!==we.CODE_STOP&&(pe=!1),ae){case we.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!et&&Xe?(et=!0,Xe=!1):et&&Xe?(et=!1,Xe=!1):Xe=!0;break;case we.CODE_SHIFT:O=!0,A=we.CODE_CODE_A;break;case we.CODE_CODE_A:A=we.CODE_CODE_A;break;case we.CODE_CODE_C:A=we.CODE_CODE_C;break;case we.CODE_STOP:S=!0;break}break;case we.CODE_CODE_C:if(ae<100)ae<10&&(D+="0"),D+=ae;else switch(ae!==we.CODE_STOP&&(pe=!1),ae){case we.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case we.CODE_CODE_A:A=we.CODE_CODE_A;break;case we.CODE_CODE_B:A=we.CODE_CODE_B;break;case we.CODE_STOP:S=!0;break}break}wi&&(A=A===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const nn=G-U;if(G=r.getNextUnset(G),!r.isRange(G,Math.min(r.getSize(),G+(G-U)/2),!1))throw new ee;if(ye-=xe*Z,ye%103!==Z)throw new k;const nr=D.length;if(nr===0)throw new ee;nr>0&&pe&&(A===we.CODE_CODE_C?D=D.substring(0,nr-2):D=D.substring(0,nr-1));const kn=(u[1]+u[0])/2,Tt=U+nn/2,Rn=y.length,Wn=new Uint8Array(Rn);for(let wi=0;wi<Rn;wi++)Wn[wi]=y[wi];const ta=[new Ie(kn,t),new Ie(Tt,t)];return new _e(D,Wn,0,ta,Ee.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class Dt extends zt{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Dt.findAsteriskPattern(r,c),d=r.getNextSet(u[1]),m=r.getSize(),y,A;do{Dt.recordPattern(r,d,c);let V=Dt.toNarrowWidePattern(c);if(V<0)throw new ee;y=Dt.patternToChar(V),this.decodeRowResult+=y,A=d;for(let Z of c)d+=Z;d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let V of c)S+=V;let O=d-A-S;if(d!==m&&O*2<S)throw new ee;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,Z=0;for(let ae=0;ae<V;ae++)Z+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ae));if(this.decodeRowResult.charAt(V)!==Dt.ALPHABET_STRING.charAt(Z%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new ee;let D;this.extendedMode?D=Dt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let U=(u[1]+u[0])/2,G=A+S/2;return new _e(D,null,0,[new Ie(U,t),new Ie(G,t)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let a=t.getSize(),c=t.getNextSet(0),u=0,d=c,m=!1,y=r.length;for(let A=c;A<a;A++)if(t.get(A)!==m)r[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(r)===Dt.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((A-d)/2)),d,!1))return[d,A];d+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,m=!m}throw new ee}static toNarrowWidePattern(t){let r=t.length,a=0,c;do{let u=2147483647;for(let y of t)y<u&&y>a&&(u=y);a=u,c=0;let d=0,m=0;for(let y=0;y<r;y++){let A=t[y];A>a&&(m|=1<<r-1-y,c++,d+=A)}if(c===3){for(let y=0;y<r&&c>0;y++){let A=t[y];if(A>a&&(c--,A*2>=d))return-1}return m}}while(c>3);return-1}static patternToChar(t){for(let r=0;r<Dt.CHARACTER_ENCODINGS.length;r++)if(Dt.CHARACTER_ENCODINGS[r]===t)return Dt.ALPHABET_STRING.charAt(r);if(t===Dt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(t){let r=t.length,a="";for(let c=0;c<r;c++){let u=t.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=t.charAt(c+1),m="\0";switch(u){case"+":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)+32);else throw new J;break;case"$":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)-64);else throw new J;break;case"%":if(d>="A"&&d<="E")m=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")m=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")m=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")m="\0";else if(d==="V")m="@";else if(d==="W")m="`";else if(d==="X"||d==="Y"||d==="Z")m="";else throw new J;break;case"/":if(d>="A"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")m=":";else throw new J;break}a+=m,c++}else a+=u}return a}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class Ze extends zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,a){let c=this.decodeStart(r),u=this.decodeEnd(r),d=new We;Ze.decodeMiddle(r,c[1],u[0],d);let m=d.toString(),y=null;a!=null&&(y=a.get(be.ALLOWED_LENGTHS)),y==null&&(y=Ze.DEFAULT_ALLOWED_LENGTHS);let A=m.length,S=!1,O=0;for(let G of y){if(A===G){S=!0;break}G>O&&(O=G)}if(!S&&A>O&&(S=!0),!S)throw new J;const D=[new Ie(c[1],t),new Ie(u[0],t)];return new _e(m,null,0,D,Ee.ITF,new Date().getTime())}static decodeMiddle(t,r,a,c){let u=new Int32Array(10),d=new Int32Array(5),m=new Int32Array(5);for(u.fill(0),d.fill(0),m.fill(0);r<a;){zt.recordPattern(t,r,u);for(let A=0;A<5;A++){let S=2*A;d[A]=u[S],m[A]=u[S+1]}let y=Ze.decodeDigit(d);c.append(y.toString()),y=this.decodeDigit(m),c.append(y.toString()),u.forEach(function(A){r+=A})}}decodeStart(t){let r=Ze.skipWhiteSpace(t),a=Ze.findGuardPattern(t,r,Ze.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,r){let a=this.narrowLineWidth*10;a=a<r?a:r;for(let c=r-1;a>0&&c>=0&&!t.get(c);c--)a--;if(a!==0)throw new ee}static skipWhiteSpace(t){const r=t.getSize(),a=t.getNextSet(0);if(a===r)throw new ee;return a}decodeEnd(t){t.reverse();try{let r=Ze.skipWhiteSpace(t),a;try{a=Ze.findGuardPattern(t,r,Ze.END_PATTERN_REVERSED[0])}catch(u){u instanceof ee&&(a=Ze.findGuardPattern(t,r,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let c=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-c,a}finally{t.reverse()}}static findGuardPattern(t,r,a){let c=a.length,u=new Int32Array(c),d=t.getSize(),m=!1,y=0,A=r;u.fill(0);for(let S=r;S<d;S++)if(t.get(S)!==m)u[y]++;else{if(y===c-1){if(zt.patternMatchVariance(u,a,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[A,S];A+=u[0]+u[1],F.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,m=!m}throw new ee}static decodeDigit(t){let r=Ze.MAX_AVG_VARIANCE,a=-1,c=Ze.PATTERNS.length;for(let u=0;u<c;u++){let d=Ze.PATTERNS[u],m=zt.patternMatchVariance(t,d,Ze.MAX_INDIVIDUAL_VARIANCE);m<r?(r=m,a=u):m===r&&(a=-1)}if(a>=0)return a%10;throw new ee}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Wt extends zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!r;){u=Int32Array.from([0,0,0]),a=Wt.findGuardPattern(t,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let m=d-(c-d);m>=0&&(r=t.isRange(m,d,!1))}return a}static checkChecksum(t){return Wt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let a=parseInt(t.charAt(r-1),10);return Wt.getStandardUPCEANChecksum(t.substring(0,r-1))===a}static getStandardUPCEANChecksum(t){let r=t.length,a=0;for(let c=r-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new J;a+=u}a*=3;for(let c=r-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new J;a+=u}return(1e3-a)%10}static decodeEnd(t,r){return Wt.findGuardPattern(t,r,!1,Wt.START_END_PATTERN,new Int32Array(Wt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,a,c){return this.findGuardPattern(t,r,a,c,new Int32Array(c.length))}static findGuardPattern(t,r,a,c,u){let d=t.getSize();r=a?t.getNextUnset(r):t.getNextSet(r);let m=0,y=r,A=c.length,S=a;for(let O=r;O<d;O++)if(t.get(O)!==S)u[m]++;else{if(m===A-1){if(zt.patternMatchVariance(u,c,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return Int32Array.from([y,O]);y+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let U=0;U<m-1;U++)u[U]=D[U];u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,S=!S}throw new ee}static decodeDigit(t,r,a,c){this.recordPattern(t,a,r);let u=this.MAX_AVG_VARIANCE,d=-1,m=c.length;for(let y=0;y<m;y++){let A=c[y],S=zt.patternMatchVariance(r,A,Wt.MAX_INDIVIDUAL_VARIANCE);S<u&&(u=S,d=y)}if(d>=0)return d;throw new ee}}Wt.MAX_AVG_VARIANCE=.48,Wt.MAX_INDIVIDUAL_VARIANCE=.7,Wt.START_END_PATTERN=Int32Array.from([1,1,1]),Wt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Wt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ra{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(r,a,c),d=c.toString(),m=Ra.parseExtensionString(d),y=[new Ie((a[0]+a[1])/2,t),new Ie(u,t)],A=new _e(d,null,0,y,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=r[1],m=0;for(let A=0;A<5&&d<u;A++){let S=Wt.decodeDigit(t,c,d,Wt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of c)d+=O;S>=10&&(m|=1<<4-A),A!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==5)throw new ee;let y=this.determineCheckDigit(m);if(Ra.extensionChecksum(a.toString())!==y)throw new ee;return d}static extensionChecksum(t){let r=t.length,a=0;for(let c=r-2;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;a*=3;for(let c=r-1;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ee}static parseExtensionString(t){if(t.length!==5)return null;let r=Ra.parseExtension5String(t);return r==null?null:new Map([[mt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let a=parseInt(t.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return r+c+"."+d}}class hl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(r,a,c),d=c.toString(),m=hl.parseExtensionString(d),y=[new Ie((a[0]+a[1])/2,t),new Ie(u,t)],A=new _e(d,null,0,y,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=r[1],m=0;for(let y=0;y<2&&d<u;y++){let A=Wt.decodeDigit(t,c,d,Wt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let S of c)d+=S;A>=10&&(m|=1<<1-y),y!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==2)throw new ee;if(parseInt(a.toString())%4!==m)throw new ee;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[mt.ISSUE_NUMBER,parseInt(t)]])}}class Na{static decodeRow(t,r,a){let c=Wt.findGuardPattern(r,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ra().decodeRow(t,r,c)}catch{return new hl().decodeRow(t,r,c)}}}Na.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ct extends Wt{constructor(){super(),this.decodeRowStringBuffer="",ct.L_AND_G_PATTERNS=ct.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=ct.L_PATTERNS[t-10],a=new Int32Array(r.length);for(let c=0;c<r.length;c++)a[c]=r[r.length-c-1];ct.L_AND_G_PATTERNS[t]=a}}decodeRow(t,r,a){let c=ct.findStartGuardPattern(r),u=a==null?null:a.get(be.NEED_RESULT_POINT_CALLBACK);if(u!=null){const pe=new Ie((c[0]+c[1])/2,t);u.foundPossibleResultPoint(pe)}let d=this.decodeMiddle(r,c,this.decodeRowStringBuffer),m=d.rowOffset,y=d.resultString;if(u!=null){const pe=new Ie(m,t);u.foundPossibleResultPoint(pe)}let A=this.decodeEnd(r,m);if(u!=null){const pe=new Ie((A[0]+A[1])/2,t);u.foundPossibleResultPoint(pe)}let S=A[1],O=S+(S-A[0]);if(O>=r.getSize()||!r.isRange(S,O,!1))throw new ee;let D=y.toString();if(D.length<8)throw new J;if(!ct.checkChecksum(D))throw new k;let U=(c[1]+c[0])/2,G=(A[1]+A[0])/2,V=this.getBarcodeFormat(),Z=[new Ie(U,t),new Ie(G,t)],ae=new _e(D,null,0,Z,V,new Date().getTime()),ye=0;try{let pe=Na.decodeRow(t,r,A[1]);ae.putMetadata(mt.UPC_EAN_EXTENSION,pe.getText()),ae.putAllMetadata(pe.getResultMetadata()),ae.addResultPoints(pe.getResultPoints()),ye=pe.getText().length}catch{}let xe=a==null?null:a.get(be.ALLOWED_EAN_EXTENSIONS);if(xe!=null){let pe=!1;for(let et in xe)if(ye.toString()===et){pe=!0;break}if(!pe)throw new ee}return ae}decodeEnd(t,r){return ct.findGuardPattern(t,r,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ct.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let a=parseInt(t.charAt(r-1),10);return ct.getStandardUPCEANChecksum(t.substring(0,r-1))===a}static getStandardUPCEANChecksum(t){let r=t.length,a=0;for(let c=r-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new J;a+=u}a*=3;for(let c=r-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new J;a+=u}return(1e3-a)%10}}class Cr extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=r[1],m=0;for(let A=0;A<6&&d<u;A++){let S=ct.decodeDigit(t,c,d,ct.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of c)d+=O;S>=10&&(m|=1<<5-A)}a=Cr.determineFirstDigit(a,m),d=ct.findGuardPattern(t,d,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&d<u;A++){let S=ct.decodeDigit(t,c,d,ct.L_PATTERNS);a+=String.fromCharCode(48+S);for(let O of c)d+=O}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(t,r){for(let a=0;a<10;a++)if(r===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ee}}Cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ei extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=r[1];for(let y=0;y<4&&d<u;y++){let A=ct.decodeDigit(t,c,d,ct.L_PATTERNS);a+=String.fromCharCode(48+A);for(let S of c)d+=S}d=ct.findGuardPattern(t,d,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<u;y++){let A=ct.decodeDigit(t,c,d,ct.L_PATTERNS);a+=String.fromCharCode(48+A);for(let S of c)d+=S}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ee.EAN_8}}class Oa extends ct{constructor(){super(...arguments),this.ean13Reader=new Cr}getBarcodeFormat(){return Ee.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,a))}decodeMiddle(t,r,a){return this.ean13Reader.decodeMiddle(t,r,a)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let a=new _e(r.substring(1),null,null,t.getResultPoints(),Ee.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ee}reset(){this.ean13Reader.reset()}}class Bn extends ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,a){const c=this.decodeMiddleCounters.map(A=>A);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=t.getSize();let d=r[1],m=0;for(let A=0;A<6&&d<u;A++){const S=Bn.decodeDigit(t,c,d,Bn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let O of c)d+=O;S>=10&&(m|=1<<5-A)}let y=Bn.determineNumSysAndCheckDigit(a,m);return{rowOffset:d,resultString:y}}decodeEnd(t,r){return Bn.findGuardPatternWithoutCounters(t,r,!0,Bn.MIDDLE_END_PATTERN)}checkChecksum(t){return ct.checkChecksum(Bn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+t+d}throw ee.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new We;a.append(t.charAt(0));let c=r[5];switch(c){case 0:case 1:case 2:a.appendChars(r,0,2),a.append(c),a.append("0000"),a.appendChars(r,2,3);break;case 3:a.appendChars(r,0,3),a.append("00000"),a.appendChars(r,3,2);break;case 4:a.appendChars(r,0,4),a.append("00000"),a.append(r[4]);break;default:a.appendChars(r,0,5),a.append("0000"),a.append(c);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Bn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fl extends zt{constructor(t){super();let r=t==null?null:t.get(be.POSSIBLE_FORMATS),a=[];h(r)?(a.push(new Cr),a.push(new Oa),a.push(new ei),a.push(new Bn)):(r.indexOf(Ee.EAN_13)>-1&&a.push(new Cr),r.indexOf(Ee.UPC_A)>-1&&a.push(new Oa),r.indexOf(Ee.EAN_8)>-1&&a.push(new ei),r.indexOf(Ee.UPC_E)>-1&&a.push(new Bn)),this.readers=a}decodeRow(t,r,a){for(let c of this.readers)try{const u=c.decodeRow(t,r,a),d=u.getBarcodeFormat()===Ee.EAN_13&&u.getText().charAt(0)==="0",m=a==null?null:a.get(be.POSSIBLE_FORMATS),y=m==null||m.includes(Ee.UPC_A);if(d&&y){const A=u.getRawBytes(),S=new _e(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),Ee.UPC_A);return S.putAllMetadata(u.getResultMetadata()),S}return u}catch{}throw new ee}reset(){for(let t of this.readers)t.reset()}}class Cn extends zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let a=0;a<r.length;a++)if(zt.patternMatchVariance(t,r[a],Cn.MAX_INDIVIDUAL_VARIANCE)<Cn.MAX_AVG_VARIANCE)return a;throw new ee}static count(t){return rt.sum(new Int32Array(t))}static increment(t,r){let a=0,c=r[0];for(let u=1;u<t.length;u++)r[u]>c&&(c=r[u],a=u);t[a]++}static decrement(t,r){let a=0,c=r[0];for(let u=1;u<t.length;u++)r[u]<c&&(c=r[u],a=u);t[a]--}static isFinderPattern(t){let r=t[0]+t[1],a=r+t[2]+t[3],c=r/a;if(c>=Cn.MIN_FINDER_PATTERN_RATIO&&c<=Cn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m of t)m>d&&(d=m),m<u&&(u=m);return d<10*u}return!1}}Cn.MAX_AVG_VARIANCE=.2,Cn.MAX_INDIVIDUAL_VARIANCE=.45,Cn.MIN_FINDER_PATTERN_RATIO=9.5/12,Cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ti{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ti))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ni{constructor(t,r,a,c,u){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ie(a,u)),this.resultPoints.push(new Ie(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof ni))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Sr{constructor(){}static getRSSvalue(t,r,a){let c=0;for(let y of t)c+=y;let u=0,d=0,m=t.length;for(let y=0;y<m-1;y++){let A;for(A=1,d|=1<<y;A<t[y];A++,d&=~(1<<y)){let S=Sr.combins(c-A-1,m-y-2);if(a&&d===0&&c-A-(m-y-1)>=m-y-1&&(S-=Sr.combins(c-A-(m-y),m-y-2)),m-y-1>1){let O=0;for(let D=c-A-(m-y-2);D>r;D--)O+=Sr.combins(c-A-D-1,m-y-3);S-=O*(m-1-y)}else c-A>r&&S--;u+=S}c-=A}return u}static combins(t,r){let a,c;t-r>r?(c=r,a=t-r):(c=t-r,a=r);let u=1,d=1;for(let m=t;m>a;m--)u*=m,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class Ao{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let a=12*r,c=new ce(a),u=0,m=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(m&1<<y)!=0&&c.set(u),u++;for(let y=1;y<t.length;++y){let A=t[y],S=A.getLeftChar().getValue();for(let O=11;O>=0;--O)(S&1<<O)!=0&&c.set(u),u++;if(A.getRightChar()!=null){let O=A.getRightChar().getValue();for(let D=11;D>=0;--D)(O&1<<D)!=0&&c.set(u),u++}}return c}}class ri{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class os{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class In extends os{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===In.FNC1}}In.FNC1="$";class Fr extends os{constructor(t,r,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Gn extends os{constructor(t,r,a){if(super(t),r<0||r>10||a<0||a>10)throw new J;this.firstDigit=r,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Gn.FNC1}isAnyFNC1(){return this.firstDigit===Gn.FNC1||this.secondDigit===Gn.FNC1}}Gn.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ee;let r=t.substring(0,2);for(let u of Ne.TWO_DIGIT_DATA_LENGTH)if(u[0]===r)return u[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,u[2],t):Ne.processFixedAI(2,u[1],t);if(t.length<3)throw new ee;let a=t.substring(0,3);for(let u of Ne.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,u[2],t):Ne.processFixedAI(3,u[1],t);for(let u of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,u[2],t):Ne.processFixedAI(4,u[1],t);if(t.length<4)throw new ee;let c=t.substring(0,4);for(let u of Ne.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,u[2],t):Ne.processFixedAI(4,u[1],t);throw new ee}static processFixedAI(t,r,a){if(a.length<t)throw new ee;let c=a.substring(0,t);if(a.length<t+r)throw new ee;let u=a.substring(t,t+r),d=a.substring(t+r),m="("+c+")"+u,y=Ne.parseFieldsInGeneralPurpose(d);return y==null?m:m+y}static processVariableAI(t,r,a){let c=a.substring(0,t),u;a.length<t+r?u=a.length:u=t+r;let d=a.substring(t,u),m=a.substring(u),y="("+c+")"+d,A=Ne.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class Vn{constructor(t){this.buffer=new We,this.information=t}decodeAllCodes(t,r){let a=r,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=Ne.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&t.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new Gn(this.information.getSize(),Gn.FNC1,Gn.FNC1):new Gn(this.information.getSize(),u-1,Gn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),a=(r-8)/11,c=(r-8)%11;return new Gn(t+7,a,c)}extractNumericValueFromBitArray(t,r){return Vn.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,a){let c=0;for(let u=0;u<a;++u)t.get(r+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Fr(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Fr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let a=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Fr(this.current.getPosition(),this.buffer.toString()):r=new Fr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new ri(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Fr(this.current.getPosition(),this.buffer.toString());return new ri(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ri(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Fr(this.current.getPosition(),this.buffer.toString());return new ri(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ri(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Fr(this.current.getPosition(),this.buffer.toString());return new ri(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ri(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(t,8);return c>=232&&c<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new In(t+5,In.FNC1);if(r>=5&&r<15)return new In(t+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new In(t+7,""+(a+1));if(a>=90&&a<116)return new In(t+7,""+(a+7));let c=this.extractNumericValueFromBitArray(t,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new J}return new In(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new In(t+5,In.FNC1);if(r>=5&&r<15)return new In(t+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new In(t+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Qn("Decoding invalid alphanumeric value: "+a)}return new In(t+6,c)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class cn{constructor(t){this.information=t,this.generalDecoder=new Vn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Nt extends cn{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,a)}encodeCompressedGtinWithoutAI(t,r,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*c,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}Nt.appendCheckDigit(t,a)}static appendCheckDigit(t,r){let a=0;for(let c=0;c<13;c++){let u=t.charAt(c+r).charCodeAt(0)-48;a+=(c&1)===0?3*u:u}a=10-a%10,a===10&&(a=0),t.append(a)}}Nt.GTIN_SIZE=40;class cr extends Nt{constructor(t){super(t)}parseInformation(){let t=new We;t.append("(01)");let r=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(cr.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,cr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,cr.HEADER_SIZE+44)}}cr.HEADER_SIZE=4;class Hi extends cn{constructor(t){super(t)}parseInformation(){let t=new We;return this.getGeneralDecoder().decodeAllCodes(t,Hi.HEADER_SIZE)}}Hi.HEADER_SIZE=5;class cs extends Nt{constructor(t){super(t)}encodeCompressedWeight(t,r,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r,a);this.addWeightCode(t,c);let u=this.checkWeight(c),d=1e5;for(let m=0;m<5;++m)u/d===0&&t.append("0"),d/=10;t.append(u)}}class Tr extends cs{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Tr.HEADER_SIZE+cs.GTIN_SIZE+Tr.WEIGHT_SIZE)throw new ee;let t=new We;return this.encodeCompressedGtin(t,Tr.HEADER_SIZE),this.encodeCompressedWeight(t,Tr.HEADER_SIZE+cs.GTIN_SIZE,Tr.WEIGHT_SIZE),t.toString()}}Tr.HEADER_SIZE=5,Tr.WEIGHT_SIZE=15;class _o extends Tr{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Ia extends Tr{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class $n extends Nt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Nt.GTIN_SIZE)throw new ee;let t=new We;this.encodeCompressedGtin(t,$n.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Nt.GTIN_SIZE,$n.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Nt.GTIN_SIZE+$n.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2;class en extends Nt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+Nt.GTIN_SIZE)throw new ee;let t=new We;this.encodeCompressedGtin(t,en.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+Nt.GTIN_SIZE,en.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+Nt.GTIN_SIZE+en.LAST_DIGIT_SIZE,en.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+Nt.GTIN_SIZE+en.LAST_DIGIT_SIZE+en.FIRST_THREE_DIGITS_SIZE,null);return t.append(c.getNewString()),t.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2,en.FIRST_THREE_DIGITS_SIZE=10;class Et extends cs{constructor(t,r,a){super(t),this.dateCode=a,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE+Et.DATE_SIZE)throw new ee;let t=new We;return this.encodeCompressedGtin(t,Et.HEADER_SIZE),this.encodeCompressedWeight(t,Et.HEADER_SIZE+Et.GTIN_SIZE,Et.WEIGHT_SIZE),this.encodeCompressedDate(t,Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Et.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&t.append("0"),t.append(d),u/10==0&&t.append("0"),t.append(u),c/10==0&&t.append("0"),t.append(c)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Et.HEADER_SIZE=8,Et.WEIGHT_SIZE=20,Et.DATE_SIZE=16;function Gi(N){try{if(N.get(1))return new cr(N);if(!N.get(2))return new Hi(N);switch(Vn.extractNumericValueFromBitArray(N,1,4)){case 4:return new _o(N);case 5:return new Ia(N)}switch(Vn.extractNumericValueFromBitArray(N,1,5)){case 12:return new $n(N);case 13:return new en(N)}switch(Vn.extractNumericValueFromBitArray(N,1,7)){case 56:return new Et(N,"310","11");case 57:return new Et(N,"320","11");case 58:return new Et(N,"310","13");case 59:return new Et(N,"320","13");case 60:return new Et(N,"310","15");case 61:return new Et(N,"320","15");case 62:return new Et(N,"310","17");case 63:return new Et(N,"320","17")}}catch(t){throw console.log(t),new Qn("unknown decoder: "+N)}}class qn{constructor(t,r,a,c){this.leftchar=t,this.rightchar=r,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof qn?qn.equalsOrNull(t.leftchar,r.leftchar)&&qn.equalsOrNull(t.rightchar,r.rightchar)&&qn.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:qn.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tn{constructor(t,r,a){this.pairs=t,this.rowNumber=r,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof tn?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let a;return t.forEach((c,u)=>{r.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class me extends Cn{constructor(t){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,a){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(t,r))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(t,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ee}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let a=r;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new ee}static isValidSequence(t){for(let r of me.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let a=!0;for(let c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!=r[c]){a=!1;break}if(a)return!0}return!1}storeRow(t,r){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>t){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new tn(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let a of r)if(a.getPairs().length!==t.length){for(let c of a.getPairs())for(let u of t)if(qn.equals(c,u))break}}static isPartialRow(t,r){for(let a of r){let c=!0;for(let u of t){let d=!1;for(let m of a.getPairs())if(u.equals(m)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Ao.buildBitArray(t),c=Gi(r).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),m=[u[0],u[1],d[0],d[1]];return new _e(c,null,null,m,Ee.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);c+=y.getLeftChar().getChecksumPortion(),u++;let A=y.getRightChar();A!=null&&(c+=A.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==r.getValue()}static getNextSecondBar(t,r){let a;return t.get(r)?(a=t.getNextUnset(r),a=t.getNextSet(a)):(a=t.getNextSet(r),a=t.getNextUnset(a)),a}retrieveNextPair(t,r,a){let c=r.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,m=-1;do this.findNextPair(t,r,m),u=this.parseFoundFinderPattern(t,a,c),u==null?m=me.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(t,u,c,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ee;let A;try{A=this.decodeDataCharacter(t,u,c,!1)}catch(S){A=null,this.verbose&&console.log(S)}return new qn(y,A,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d;a>=0?d=a:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let m=r.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;d<u&&(y=!t.get(d),!!y);)d++;let A=0,S=d;for(let O=d;O<u;O++)if(t.get(O)!=y)c[A]++;else{if(A==3){if(m&&me.reverseCounters(c),me.isFinderPattern(c)){this.startEnd[0]=S,this.startEnd[1]=O;return}m&&me.reverseCounters(c),S+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,A--}else A++;c[A]=1,y=!y}throw new ee}static reverseCounters(t){let r=t.length;for(let a=0;a<r/2;++a){let c=t[a];t[a]=t[r-a-1],t[r-a-1]=c}}parseFoundFinderPattern(t,r,a){let c,u,d;if(a){let A=this.startEnd[0]-1;for(;A>=0&&!t.get(A);)A--;A++,c=this.startEnd[0]-A,u=A,d=this.startEnd[1]}else u=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let m=this.getDecodeFinderCounters();F.arraycopy(m,0,m,1,m.length-1),m[0]=c;let y;try{y=this.parseFinderValue(m,me.FINDER_PATTERNS)}catch{return null}return new ni(y,[u,d],u,d,r)}decodeDataCharacter(t,r,a,c){let u=this.getDataCharacterCounters();for(let Tt=0;Tt<u.length;Tt++)u[Tt]=0;if(c)me.recordPatternInReverse(t,r.getStartEnd()[0],u);else{me.recordPattern(t,r.getStartEnd()[1],u);for(let Tt=0,Rn=u.length-1;Tt<Rn;Tt++,Rn--){let Wn=u[Tt];u[Tt]=u[Rn],u[Rn]=Wn}}let d=17,m=rt.sum(new Int32Array(u))/d,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new ee;let A=this.getOddCounts(),S=this.getEvenCounts(),O=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Tt=0;Tt<u.length;Tt++){let Rn=1*u[Tt]/m,Wn=Rn+.5;if(Wn<1){if(Rn<.3)throw new ee;Wn=1}else if(Wn>8){if(Rn>8.7)throw new ee;Wn=8}let ta=Tt/2;(Tt&1)==0?(A[ta]=Wn,O[ta]=Rn-Wn):(S[ta]=Wn,D[ta]=Rn-Wn)}this.adjustOddEvenCounts(d);let U=4*r.getValue()+(a?0:2)+(c?0:1)-1,G=0,V=0;for(let Tt=A.length-1;Tt>=0;Tt--){if(me.isNotA1left(r,a,c)){let Rn=me.WEIGHTS[U][2*Tt];V+=A[Tt]*Rn}G+=A[Tt]}let Z=0;for(let Tt=S.length-1;Tt>=0;Tt--)if(me.isNotA1left(r,a,c)){let Rn=me.WEIGHTS[U][2*Tt+1];Z+=S[Tt]*Rn}let ae=V+Z;if((G&1)!=0||G>13||G<4)throw new ee;let ye=(13-G)/2,xe=me.SYMBOL_WIDEST[ye],pe=9-xe,et=Sr.getRSSvalue(A,xe,!0),Xe=Sr.getRSSvalue(S,pe,!1),nn=me.EVEN_TOTAL_SUBSET[ye],nr=me.GSUM[ye],kn=et*nn+Xe+nr;return new ti(kn,ae)}static isNotA1left(t,r,a){return!(t.getValue()==0&&r&&a)}adjustOddEvenCounts(t){let r=rt.sum(new Int32Array(this.getOddCounts())),a=rt.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;r>13?u=!0:r<4&&(c=!0);let d=!1,m=!1;a>13?m=!0:a<4&&(d=!0);let y=r+a-t,A=(r&1)==1,S=(a&1)==0;if(y==1)if(A){if(S)throw new ee;u=!0}else{if(!S)throw new ee;m=!0}else if(y==-1)if(A){if(S)throw new ee;c=!0}else{if(!S)throw new ee;d=!0}else if(y==0){if(A){if(!S)throw new ee;r<a?(c=!0,m=!0):(u=!0,d=!0)}else if(S)throw new ee}else throw new ee;if(c){if(u)throw new ee;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new ee;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class Co extends ti{constructor(t,r,a){super(t,r),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends Cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,a){const c=this.decodePair(r,!1,t,a);Ct.addOrTally(this.possibleLeftPairs,c),r.reverse();let u=this.decodePair(r,!0,t,a);Ct.addOrTally(this.possibleRightPairs,u),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Ct.checkChecksum(d,m))return Ct.constructResult(d,m)}throw new ee}static addOrTally(t,r){if(r==null)return;let a=!1;for(let c of t)if(c.getValue()===r.getValue()){c.incrementCount(),a=!0;break}a||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let a=4537077*t.getValue()+r.getValue(),c=new String(a).toString(),u=new We;for(let A=13-c.length;A>0;A--)u.append("0");u.append(c);let d=0;for(let A=0;A<13;A++){let S=u.charAt(A).charCodeAt(0)-48;d+=(A&1)===0?3*S:S}d=10-d%10,d===10&&(d=0),u.append(d.toString());let m=t.getFinderPattern().getResultPoints(),y=r.getFinderPattern().getResultPoints();return new _e(u.toString(),null,0,[m[0],m[1],y[0],y[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(t,r){let a=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,c=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(t,r,a,c){try{let u=this.findFinderPattern(t,r),d=this.parseFoundFinderPattern(t,a,r,u),m=c==null?null:c.get(be.NEED_RESULT_POINT_CALLBACK);if(m!=null){let S=(u[0]+u[1])/2;r&&(S=t.getSize()-1-S),m.foundPossibleResultPoint(new Ie(S,a))}let y=this.decodeDataCharacter(t,d,!0),A=this.decodeDataCharacter(t,d,!1);return new Co(1597*y.getValue()+A.getValue(),y.getChecksumPortion()+4*A.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,r,a){let c=this.getDataCharacterCounters();for(let Z=0;Z<c.length;Z++)c[Z]=0;if(a)zt.recordPatternInReverse(t,r.getStartEnd()[0],c);else{zt.recordPattern(t,r.getStartEnd()[1]+1,c);for(let Z=0,ae=c.length-1;Z<ae;Z++,ae--){let ye=c[Z];c[Z]=c[ae],c[ae]=ye}}let u=a?16:15,d=rt.sum(new Int32Array(c))/u,m=this.getOddCounts(),y=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let Z=0;Z<c.length;Z++){let ae=c[Z]/d,ye=Math.floor(ae+.5);ye<1?ye=1:ye>8&&(ye=8);let xe=Math.floor(Z/2);(Z&1)===0?(m[xe]=ye,A[xe]=ae-ye):(y[xe]=ye,S[xe]=ae-ye)}this.adjustOddEvenCounts(a,u);let O=0,D=0;for(let Z=m.length-1;Z>=0;Z--)D*=9,D+=m[Z],O+=m[Z];let U=0,G=0;for(let Z=y.length-1;Z>=0;Z--)U*=9,U+=y[Z],G+=y[Z];let V=D+3*U;if(a){if((O&1)!==0||O>12||O<4)throw new ee;let Z=(12-O)/2,ae=Ct.OUTSIDE_ODD_WIDEST[Z],ye=9-ae,xe=Sr.getRSSvalue(m,ae,!1),pe=Sr.getRSSvalue(y,ye,!0),et=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[Z],Xe=Ct.OUTSIDE_GSUM[Z];return new ti(xe*et+pe+Xe,V)}else{if((G&1)!==0||G>10||G<4)throw new ee;let Z=(10-G)/2,ae=Ct.INSIDE_ODD_WIDEST[Z],ye=9-ae,xe=Sr.getRSSvalue(m,ae,!0),pe=Sr.getRSSvalue(y,ye,!1),et=Ct.INSIDE_ODD_TOTAL_SUBSET[Z],Xe=Ct.INSIDE_GSUM[Z];return new ti(pe*et+xe+Xe,V)}}findFinderPattern(t,r){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),u=!1,d=0;for(;d<c&&(u=!t.get(d),r!==u);)d++;let m=0,y=d;for(let A=d;A<c;A++)if(t.get(A)!==u)a[m]++;else{if(m===3){if(Cn.isFinderPattern(a))return[y,A];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,u=!u}throw new ee}parseFoundFinderPattern(t,r,a,c){let u=t.get(c[0]),d=c[0]-1;for(;d>=0&&u!==t.get(d);)d--;d++;const m=c[0]-d,y=this.getDecodeFinderCounters(),A=new Int32Array(y.length);F.arraycopy(y,0,A,1,y.length-1),A[0]=m;const S=this.parseFinderValue(A,Ct.FINDER_PATTERNS);let O=d,D=c[1];return a&&(O=t.getSize()-1-O,D=t.getSize()-1-D),new ni(S,[d,c[1]],O,D,r)}adjustOddEvenCounts(t,r){let a=rt.sum(new Int32Array(this.getOddCounts())),c=rt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,m=!1,y=!1;t?(a>12?d=!0:a<4&&(u=!0),c>12?y=!0:c<4&&(m=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?y=!0:c<4&&(m=!0));let A=a+c-r,S=(a&1)===(t?1:0),O=(c&1)===1;if(A===1)if(S){if(O)throw new ee;d=!0}else{if(!O)throw new ee;y=!0}else if(A===-1)if(S){if(O)throw new ee;u=!0}else{if(!O)throw new ee;m=!0}else if(A===0){if(S){if(!O)throw new ee;a<c?(u=!0,y=!0):(d=!0,m=!0)}else if(O)throw new ee}else throw new ee;if(u){if(d)throw new ee;Cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new ee;Cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ur extends zt{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const a=t?t.get(be.POSSIBLE_FORMATS):null,c=t&&t.get(be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ee.EAN_13)||a.includes(Ee.UPC_A)||a.includes(Ee.EAN_8)||a.includes(Ee.UPC_E))&&this.readers.push(new fl(t)),a.includes(Ee.CODE_39)&&this.readers.push(new Dt(c)),a.includes(Ee.CODE_128)&&this.readers.push(new we),a.includes(Ee.ITF)&&this.readers.push(new Ze),a.includes(Ee.RSS_14)&&this.readers.push(new Ct),a.includes(Ee.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new fl(t)),this.readers.push(new Dt),this.readers.push(new fl(t)),this.readers.push(new we),this.readers.push(new Ze),this.readers.push(new Ct),this.readers.push(new me(this.verbose)))}decodeRow(t,r,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(t,r,a)}catch{}throw new ee}reset(){this.readers.forEach(t=>t.reset())}}class pu extends Ae{constructor(t=500,r){super(new ur(r),t,r)}}class yt{constructor(t,r,a){this.ecCodewords=t,this.ecBlocks=[r],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class xt{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(t,r,a,c,u,d){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let m=0;const y=d.getECCodewords(),A=d.getECBlocks();for(let S of A)m+=S.getCount()*(S.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new J;for(let a of it.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===r)return a;throw new J}toString(){return""+this.versionNumber}static buildVersions(){return[new it(1,10,10,8,8,new yt(5,new xt(1,3))),new it(2,12,12,10,10,new yt(7,new xt(1,5))),new it(3,14,14,12,12,new yt(10,new xt(1,8))),new it(4,16,16,14,14,new yt(12,new xt(1,12))),new it(5,18,18,16,16,new yt(14,new xt(1,18))),new it(6,20,20,18,18,new yt(18,new xt(1,22))),new it(7,22,22,20,20,new yt(20,new xt(1,30))),new it(8,24,24,22,22,new yt(24,new xt(1,36))),new it(9,26,26,24,24,new yt(28,new xt(1,44))),new it(10,32,32,14,14,new yt(36,new xt(1,62))),new it(11,36,36,16,16,new yt(42,new xt(1,86))),new it(12,40,40,18,18,new yt(48,new xt(1,114))),new it(13,44,44,20,20,new yt(56,new xt(1,144))),new it(14,48,48,22,22,new yt(68,new xt(1,174))),new it(15,52,52,24,24,new yt(42,new xt(2,102))),new it(16,64,64,14,14,new yt(56,new xt(2,140))),new it(17,72,72,16,16,new yt(36,new xt(4,92))),new it(18,80,80,18,18,new yt(48,new xt(4,114))),new it(19,88,88,20,20,new yt(56,new xt(4,144))),new it(20,96,96,22,22,new yt(68,new xt(4,174))),new it(21,104,104,24,24,new yt(56,new xt(6,136))),new it(22,120,120,18,18,new yt(68,new xt(6,175))),new it(23,132,132,20,20,new yt(62,new xt(8,163))),new it(24,144,144,22,22,new yt(62,new xt(8,156),new xt(2,155))),new it(25,8,18,6,16,new yt(7,new xt(1,5))),new it(26,8,32,6,14,new yt(11,new xt(1,10))),new it(27,12,26,10,24,new yt(14,new xt(1,16))),new it(28,12,36,10,16,new yt(18,new xt(1,22))),new it(29,16,36,14,16,new yt(24,new xt(1,32))),new it(30,16,48,14,22,new yt(28,new xt(1,49)))]}}it.VERSIONS=it.buildVersions();class Vi{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new J;this.version=Vi.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),a=t.getWidth();return it.getVersionForDimensions(r,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let m=!1,y=!1,A=!1,S=!1;do if(a===u&&c===0&&!m)t[r++]=this.readCorner1(u,d)&255,a-=2,c+=2,m=!0;else if(a===u-2&&c===0&&(d&3)!==0&&!y)t[r++]=this.readCorner2(u,d)&255,a-=2,c+=2,y=!0;else if(a===u+4&&c===2&&(d&7)===0&&!A)t[r++]=this.readCorner3(u,d)&255,a-=2,c+=2,A=!0;else if(a===u-2&&c===0&&(d&7)===4&&!S)t[r++]=this.readCorner4(u,d)&255,a-=2,c+=2,S=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(t[r++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(t[r++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(r!==this.version.getTotalCodewords())throw new J;return t}readModule(t,r,a,c){return t<0&&(t+=a,r+=4-(a+4&7)),r<0&&(r+=c,t+=4-(c+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,a,c){let u=0;return this.readModule(t-2,r-2,a,c)&&(u|=1),u<<=1,this.readModule(t-2,r-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,r-2,a,c)&&(u|=1),u<<=1,this.readModule(t-1,r-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,r,a,c)&&(u|=1),u<<=1,this.readModule(t,r-2,a,c)&&(u|=1),u<<=1,this.readModule(t,r-1,a,c)&&(u|=1),u<<=1,this.readModule(t,r,a,c)&&(u|=1),u}readCorner1(t,r){let a=0;return this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,1,t,r)&&(a|=1),a<<=1,this.readModule(t-1,2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(2,r-1,t,r)&&(a|=1),a<<=1,this.readModule(3,r-1,t,r)&&(a|=1),a}readCorner2(t,r){let a=0;return this.readModule(t-3,0,t,r)&&(a|=1),a<<=1,this.readModule(t-2,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(0,r-4,t,r)&&(a|=1),a<<=1,this.readModule(0,r-3,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a}readCorner3(t,r){let a=0;return this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(0,r-3,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-3,t,r)&&(a|=1),a<<=1,this.readModule(1,r-2,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a}readCorner4(t,r){let a=0;return this.readModule(t-3,0,t,r)&&(a|=1),a<<=1,this.readModule(t-2,0,t,r)&&(a|=1),a<<=1,this.readModule(t-1,0,t,r)&&(a|=1),a<<=1,this.readModule(0,r-2,t,r)&&(a|=1),a<<=1,this.readModule(0,r-1,t,r)&&(a|=1),a<<=1,this.readModule(1,r-1,t,r)&&(a|=1),a<<=1,this.readModule(2,r-1,t,r)&&(a|=1),a<<=1,this.readModule(3,r-1,t,r)&&(a|=1),a}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new R("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=r/c|0,m=a/u|0,y=d*c,A=m*u,S=new Te(A,y);for(let O=0;O<d;++O){const D=O*c;for(let U=0;U<m;++U){const G=U*u;for(let V=0;V<c;++V){const Z=O*(c+2)+1+V,ae=D+V;for(let ye=0;ye<u;++ye){const xe=U*(u+2)+1+ye;if(t.get(xe,Z)){const pe=G+ye;S.set(pe,ae)}}}}}return S}}class qi{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const a=r.getECBlocks();let c=0;const u=a.getECBlocks();for(let V of u)c+=V.getCount();const d=new Array(c);let m=0;for(let V of u)for(let Z=0;Z<V.getCount();Z++){const ae=V.getDataCodewords(),ye=a.getECCodewords()+ae;d[m++]=new qi(ae,new Uint8Array(ye))}const A=d[0].codewords.length-a.getECCodewords(),S=A-1;let O=0;for(let V=0;V<S;V++)for(let Z=0;Z<m;Z++)d[Z].codewords[V]=t[O++];const D=r.getVersionNumber()===24,U=D?8:m;for(let V=0;V<U;V++)d[V].codewords[A-1]=t[O++];const G=d[0].codewords.length;for(let V=A;V<G;V++)for(let Z=0;Z<m;Z++){const ae=D?(Z+8)%m:Z,ye=D&&ae>7?V-1:V;d[ae].codewords[ye]=t[O++]}if(O!==t.length)throw new R;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hr{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new R(""+t);let r=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,m=t<d?t:d,y=d-m,A=255>>8-m<<y;r=(u[c]&A)>>y,t-=m,a+=m,a===8&&(a=0,c++)}if(t>0){for(;t>=8;)r=r<<8|u[c]&255,c++,t-=8;if(t>0){const d=8-t,m=255>>d<<d;r=r<<t|(u[c]&m)>>d,a+=t}}return this.bitOffset=a,this.byteOffset=c,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wt;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(wt||(wt={}));class zr{static decode(t){const r=new hr(t),a=new We,c=new We,u=new Array;let d=wt.ASCII_ENCODE;do if(d===wt.ASCII_ENCODE)d=this.decodeAsciiSegment(r,a,c);else{switch(d){case wt.C40_ENCODE:this.decodeC40Segment(r,a);break;case wt.TEXT_ENCODE:this.decodeTextSegment(r,a);break;case wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,a);break;case wt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,a);break;case wt.BASE256_ENCODE:this.decodeBase256Segment(r,a,u);break;default:throw new J}d=wt.ASCII_ENCODE}while(d!==wt.PAD_ENCODE&&r.available()>0);return c.length()>0&&a.append(c.toString()),new Lt(t,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,r,a){let c=!1;do{let u=t.readBits(8);if(u===0)throw new J;if(u<=128)return c&&(u+=128),r.append(String.fromCharCode(u-1)),wt.ASCII_ENCODE;if(u===129)return wt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&r.append("0"),r.append(""+d)}else switch(u){case 230:return wt.C40_ENCODE;case 231:return wt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:r.append("[)>05"),a.insert(0,"");break;case 237:r.append("[)>06"),a.insert(0,"");break;case 238:return wt.ANSIX12_ENCODE;case 239:return wt.TEXT_ENCODE;case 240:return wt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new J;break}}while(t.available()>0);return wt.ASCII_ENCODE}static decodeC40Segment(t,r){let a=!1;const c=[];let u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[y];a?(r.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):r.append(A)}else throw new J;break;case 1:a?(r.append(String.fromCharCode(y+128)),a=!1):r.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[y];a?(r.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):r.append(A)}else switch(y){case 27:r.append("");break;case 30:a=!0;break;default:throw new J}u=0;break;case 3:a?(r.append(String.fromCharCode(y+224)),a=!1):r.append(String.fromCharCode(y+96)),u=0;break;default:throw new J}}}while(t.available()>0)}static decodeTextSegment(t,r){let a=!1,c=[],u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[y];a?(r.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):r.append(A)}else throw new J;break;case 1:a?(r.append(String.fromCharCode(y+128)),a=!1):r.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[y];a?(r.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):r.append(A)}else switch(y){case 27:r.append("");break;case 30:a=!0;break;default:throw new J}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[y];a?(r.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):r.append(A),u=0}else throw new J;break;default:throw new J}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const a=[];do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new J;break}}}while(t.available()>0)}static parseTwoBytes(t,r,a){let c=(t<<8)+r-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let c=t.readBits(6);if(c===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(c&32)===0&&(c|=64),r.append(String.fromCharCode(c))}}while(t.available()>0)}static decodeBase256Segment(t,r,a){let c=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),c++);let d;if(u===0?d=t.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(t.readBits(8),c++),d<0)throw new J;const m=new Uint8Array(d);for(let y=0;y<d;y++){if(t.available()<8)throw new J;m[y]=this.unrandomize255State(t.readBits(8),c++)}a.push(m);try{r.append(ve.decode(m,Ce.ISO88591))}catch(y){throw new Qn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,r){const a=149*r%255+1,c=t-a;return c>=0?c:c+256}}zr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zr.TEXT_SHIFT2_SET_CHARS=zr.C40_SHIFT2_SET_CHARS,zr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class xu{constructor(){this.rsDecoder=new fi(pt.DATA_MATRIX_FIELD_256)}decode(t){const r=new Vi(t),a=r.getVersion(),c=r.readCodewords(),u=qi.getDataBlocks(c,a);let d=0;for(let A of u)d+=A.getNumDataCodewords();const m=new Uint8Array(d),y=u.length;for(let A=0;A<y;A++){const S=u[A],O=S.getCodewords(),D=S.getNumDataCodewords();this.correctErrors(O,D);for(let U=0;U<D;U++)m[U*y+A]=O[U]}return zr.decode(m)}correctErrors(t,r){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-r)}catch{throw new k}for(let c=0;c<r;c++)t[c]=a[c]}}class Gt{constructor(t){this.image=t,this.rectangleDetector=new Jt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ee;r=this.shiftToModuleCenter(r);const a=r[0],c=r[1],u=r[2],d=r[3];let m=this.transitionsBetween(a,d)+1,y=this.transitionsBetween(u,d)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let A=Gt.sampleGrid(this.image,a,c,u,d,m,y);return new ss(A,[a,c,u,d])}static shiftPoint(t,r,a){let c=(r.getX()-t.getX())/(a+1),u=(r.getY()-t.getY())/(a+1);return new Ie(t.getX()+c,t.getY()+u)}static moveAway(t,r,a){let c=t.getX(),u=t.getY();return c<r?c-=1:c+=1,u<a?u-=1:u+=1,new Ie(c,u)}detectSolid1(t){let r=t[0],a=t[1],c=t[3],u=t[2],d=this.transitionsBetween(r,a),m=this.transitionsBetween(a,c),y=this.transitionsBetween(c,u),A=this.transitionsBetween(u,r),S=d,O=[u,r,a,c];return S>m&&(S=m,O[0]=r,O[1]=a,O[2]=c,O[3]=u),S>y&&(S=y,O[0]=a,O[1]=c,O[2]=u,O[3]=r),S>A&&(O[0]=c,O[1]=u,O[2]=r,O[3]=a),O}detectSolid2(t){let r=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(r,u),m=Gt.shiftPoint(a,c,(d+1)*4),y=Gt.shiftPoint(c,a,(d+1)*4),A=this.transitionsBetween(m,r),S=this.transitionsBetween(y,u);return A<S?(t[0]=r,t[1]=a,t[2]=c,t[3]=u):(t[0]=a,t[1]=c,t[2]=u,t[3]=r),t}correctTopRight(t){let r=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(r,u),m=this.transitionsBetween(a,u),y=Gt.shiftPoint(r,a,(m+1)*4),A=Gt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(y,u),m=this.transitionsBetween(A,u);let S=new Ie(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),O=new Ie(u.getX()+(r.getX()-a.getX())/(m+1),u.getY()+(r.getY()-a.getY())/(m+1));if(!this.isValid(S))return this.isValid(O)?O:null;if(!this.isValid(O))return S;let D=this.transitionsBetween(y,S)+this.transitionsBetween(A,S),U=this.transitionsBetween(y,O)+this.transitionsBetween(A,O);return D>U?S:O}shiftToModuleCenter(t){let r=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(r,u)+1,m=this.transitionsBetween(c,u)+1,y=Gt.shiftPoint(r,a,m*4),A=Gt.shiftPoint(c,a,d*4);d=this.transitionsBetween(y,u)+1,m=this.transitionsBetween(A,u)+1,(d&1)===1&&(d+=1),(m&1)===1&&(m+=1);let S=(r.getX()+a.getX()+c.getX()+u.getX())/4,O=(r.getY()+a.getY()+c.getY()+u.getY())/4;r=Gt.moveAway(r,S,O),a=Gt.moveAway(a,S,O),c=Gt.moveAway(c,S,O),u=Gt.moveAway(u,S,O);let D,U;return y=Gt.shiftPoint(r,a,m*4),y=Gt.shiftPoint(y,u,d*4),D=Gt.shiftPoint(a,r,m*4),D=Gt.shiftPoint(D,c,d*4),A=Gt.shiftPoint(c,u,m*4),A=Gt.shiftPoint(A,a,d*4),U=Gt.shiftPoint(u,c,m*4),U=Gt.shiftPoint(U,r,d*4),[y,D,A,U]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,a,c,u,d,m){return or.getInstance().sampleGrid(t,d,m,.5,.5,d-.5,.5,d-.5,m-.5,.5,m-.5,r.getX(),r.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(t,r){let a=Math.trunc(t.getX()),c=Math.trunc(t.getY()),u=Math.trunc(r.getX()),d=Math.trunc(r.getY()),m=Math.abs(d-c)>Math.abs(u-a);if(m){let V=a;a=c,c=V,V=u,u=d,d=V}let y=Math.abs(u-a),A=Math.abs(d-c),S=-y/2,O=c<d?1:-1,D=a<u?1:-1,U=0,G=this.image.get(m?c:a,m?a:c);for(let V=a,Z=c;V!==u;V+=D){let ae=this.image.get(m?Z:V,m?V:Z);if(ae!==G&&(U++,G=ae),S+=A,S>0){if(Z===d)break;Z+=O,S-=y}}return U}}class Hr{constructor(){this.decoder=new xu}decode(t,r=null){let a,c;if(r!=null&&r.has(be.PURE_BARCODE)){const A=Hr.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(A),c=Hr.NO_POINTS}else{const A=new Gt(t.getBlackMatrix()).detect();a=this.decoder.decode(A.getBits()),c=A.getPoints()}const u=a.getRawBytes(),d=new _e(a.getText(),u,8*u.length,c,Ee.DATA_MATRIX,F.currentTimeMillis()),m=a.getByteSegments();m!=null&&d.putMetadata(mt.BYTE_SEGMENTS,m);const y=a.getECLevel();return y!=null&&d.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(r==null||a==null)throw new ee;const c=this.moduleSize(r,t);let u=r[1];const d=a[1];let m=r[0];const A=(a[0]-m+1)/c,S=(d-u+1)/c;if(A<=0||S<=0)throw new ee;const O=c/2;u+=O,m+=O;const D=new Te(A,S);for(let U=0;U<S;U++){const G=u+U*c;for(let V=0;V<A;V++)t.get(m+V*c,G)&&D.set(V,U)}return D}static moduleSize(t,r){const a=r.getWidth();let c=t[0];const u=t[1];for(;c<a&&r.get(c,u);)c++;if(c===a)throw new ee;const d=c-t[0];if(d===0)throw new ee;return d}}Hr.NO_POINTS=[];class us extends Ae{constructor(t=500){super(new Hr,t)}}var Xi;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(Xi||(Xi={}));class nt{constructor(t,r,a){this.value=t,this.stringValue=r,this.bits=a,nt.FOR_BITS.set(a,this),nt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return nt.L;case"M":return nt.M;case"Q":return nt.Q;case"H":return nt.H;default:throw new C(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof nt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=nt.FOR_BITS.size)throw new R;return nt.FOR_BITS.get(t)}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.L=new nt(Xi.L,"L",1),nt.M=new nt(Xi.M,"M",0),nt.Q=new nt(Xi.Q,"Q",3),nt.H=new nt(Xi.H,"H",2);class gn{constructor(t){this.errorCorrectionLevel=nt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return P.bitCount(t^r)}static decodeFormatInformation(t,r){const a=gn.doDecodeFormatInformation(t,r);return a!==null?a:gn.doDecodeFormatInformation(t^gn.FORMAT_INFO_MASK_QR,r^gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of gn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===t||d===r)return new gn(u[1]);let m=gn.numBitsDiffering(t,d);m<a&&(c=u[1],a=m),t!==r&&(m=gn.numBitsDiffering(r,d),m<a&&(c=u[1],a=m))}return a<=3?new gn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof gn))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}gn.FORMAT_INFO_MASK_QR=21522,gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Q{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const a of r)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class L{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Me{constructor(t,r,...a){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const m of d)c+=m.getCount()*(m.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new J;try{return this.getVersionForNumber((t-17)/4)}catch{throw new J}}static getVersionForNumber(t){if(t<1||t>40)throw new R;return Me.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Me.VERSION_DECODE_INFO.length;c++){const u=Me.VERSION_DECODE_INFO[c];if(u===t)return Me.getVersionForNumber(c+7);const d=gn.numBitsDiffering(t,u);d<r&&(a=c+7,r=d)}return r<=3?Me.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Te(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}Me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Me.VERSIONS=[new Me(1,new Int32Array(0),new Q(7,new L(1,19)),new Q(10,new L(1,16)),new Q(13,new L(1,13)),new Q(17,new L(1,9))),new Me(2,Int32Array.from([6,18]),new Q(10,new L(1,34)),new Q(16,new L(1,28)),new Q(22,new L(1,22)),new Q(28,new L(1,16))),new Me(3,Int32Array.from([6,22]),new Q(15,new L(1,55)),new Q(26,new L(1,44)),new Q(18,new L(2,17)),new Q(22,new L(2,13))),new Me(4,Int32Array.from([6,26]),new Q(20,new L(1,80)),new Q(18,new L(2,32)),new Q(26,new L(2,24)),new Q(16,new L(4,9))),new Me(5,Int32Array.from([6,30]),new Q(26,new L(1,108)),new Q(24,new L(2,43)),new Q(18,new L(2,15),new L(2,16)),new Q(22,new L(2,11),new L(2,12))),new Me(6,Int32Array.from([6,34]),new Q(18,new L(2,68)),new Q(16,new L(4,27)),new Q(24,new L(4,19)),new Q(28,new L(4,15))),new Me(7,Int32Array.from([6,22,38]),new Q(20,new L(2,78)),new Q(18,new L(4,31)),new Q(18,new L(2,14),new L(4,15)),new Q(26,new L(4,13),new L(1,14))),new Me(8,Int32Array.from([6,24,42]),new Q(24,new L(2,97)),new Q(22,new L(2,38),new L(2,39)),new Q(22,new L(4,18),new L(2,19)),new Q(26,new L(4,14),new L(2,15))),new Me(9,Int32Array.from([6,26,46]),new Q(30,new L(2,116)),new Q(22,new L(3,36),new L(2,37)),new Q(20,new L(4,16),new L(4,17)),new Q(24,new L(4,12),new L(4,13))),new Me(10,Int32Array.from([6,28,50]),new Q(18,new L(2,68),new L(2,69)),new Q(26,new L(4,43),new L(1,44)),new Q(24,new L(6,19),new L(2,20)),new Q(28,new L(6,15),new L(2,16))),new Me(11,Int32Array.from([6,30,54]),new Q(20,new L(4,81)),new Q(30,new L(1,50),new L(4,51)),new Q(28,new L(4,22),new L(4,23)),new Q(24,new L(3,12),new L(8,13))),new Me(12,Int32Array.from([6,32,58]),new Q(24,new L(2,92),new L(2,93)),new Q(22,new L(6,36),new L(2,37)),new Q(26,new L(4,20),new L(6,21)),new Q(28,new L(7,14),new L(4,15))),new Me(13,Int32Array.from([6,34,62]),new Q(26,new L(4,107)),new Q(22,new L(8,37),new L(1,38)),new Q(24,new L(8,20),new L(4,21)),new Q(22,new L(12,11),new L(4,12))),new Me(14,Int32Array.from([6,26,46,66]),new Q(30,new L(3,115),new L(1,116)),new Q(24,new L(4,40),new L(5,41)),new Q(20,new L(11,16),new L(5,17)),new Q(24,new L(11,12),new L(5,13))),new Me(15,Int32Array.from([6,26,48,70]),new Q(22,new L(5,87),new L(1,88)),new Q(24,new L(5,41),new L(5,42)),new Q(30,new L(5,24),new L(7,25)),new Q(24,new L(11,12),new L(7,13))),new Me(16,Int32Array.from([6,26,50,74]),new Q(24,new L(5,98),new L(1,99)),new Q(28,new L(7,45),new L(3,46)),new Q(24,new L(15,19),new L(2,20)),new Q(30,new L(3,15),new L(13,16))),new Me(17,Int32Array.from([6,30,54,78]),new Q(28,new L(1,107),new L(5,108)),new Q(28,new L(10,46),new L(1,47)),new Q(28,new L(1,22),new L(15,23)),new Q(28,new L(2,14),new L(17,15))),new Me(18,Int32Array.from([6,30,56,82]),new Q(30,new L(5,120),new L(1,121)),new Q(26,new L(9,43),new L(4,44)),new Q(28,new L(17,22),new L(1,23)),new Q(28,new L(2,14),new L(19,15))),new Me(19,Int32Array.from([6,30,58,86]),new Q(28,new L(3,113),new L(4,114)),new Q(26,new L(3,44),new L(11,45)),new Q(26,new L(17,21),new L(4,22)),new Q(26,new L(9,13),new L(16,14))),new Me(20,Int32Array.from([6,34,62,90]),new Q(28,new L(3,107),new L(5,108)),new Q(26,new L(3,41),new L(13,42)),new Q(30,new L(15,24),new L(5,25)),new Q(28,new L(15,15),new L(10,16))),new Me(21,Int32Array.from([6,28,50,72,94]),new Q(28,new L(4,116),new L(4,117)),new Q(26,new L(17,42)),new Q(28,new L(17,22),new L(6,23)),new Q(30,new L(19,16),new L(6,17))),new Me(22,Int32Array.from([6,26,50,74,98]),new Q(28,new L(2,111),new L(7,112)),new Q(28,new L(17,46)),new Q(30,new L(7,24),new L(16,25)),new Q(24,new L(34,13))),new Me(23,Int32Array.from([6,30,54,78,102]),new Q(30,new L(4,121),new L(5,122)),new Q(28,new L(4,47),new L(14,48)),new Q(30,new L(11,24),new L(14,25)),new Q(30,new L(16,15),new L(14,16))),new Me(24,Int32Array.from([6,28,54,80,106]),new Q(30,new L(6,117),new L(4,118)),new Q(28,new L(6,45),new L(14,46)),new Q(30,new L(11,24),new L(16,25)),new Q(30,new L(30,16),new L(2,17))),new Me(25,Int32Array.from([6,32,58,84,110]),new Q(26,new L(8,106),new L(4,107)),new Q(28,new L(8,47),new L(13,48)),new Q(30,new L(7,24),new L(22,25)),new Q(30,new L(22,15),new L(13,16))),new Me(26,Int32Array.from([6,30,58,86,114]),new Q(28,new L(10,114),new L(2,115)),new Q(28,new L(19,46),new L(4,47)),new Q(28,new L(28,22),new L(6,23)),new Q(30,new L(33,16),new L(4,17))),new Me(27,Int32Array.from([6,34,62,90,118]),new Q(30,new L(8,122),new L(4,123)),new Q(28,new L(22,45),new L(3,46)),new Q(30,new L(8,23),new L(26,24)),new Q(30,new L(12,15),new L(28,16))),new Me(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new L(3,117),new L(10,118)),new Q(28,new L(3,45),new L(23,46)),new Q(30,new L(4,24),new L(31,25)),new Q(30,new L(11,15),new L(31,16))),new Me(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new L(7,116),new L(7,117)),new Q(28,new L(21,45),new L(7,46)),new Q(30,new L(1,23),new L(37,24)),new Q(30,new L(19,15),new L(26,16))),new Me(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new L(5,115),new L(10,116)),new Q(28,new L(19,47),new L(10,48)),new Q(30,new L(15,24),new L(25,25)),new Q(30,new L(23,15),new L(25,16))),new Me(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new L(13,115),new L(3,116)),new Q(28,new L(2,46),new L(29,47)),new Q(30,new L(42,24),new L(1,25)),new Q(30,new L(23,15),new L(28,16))),new Me(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new L(17,115)),new Q(28,new L(10,46),new L(23,47)),new Q(30,new L(10,24),new L(35,25)),new Q(30,new L(19,15),new L(35,16))),new Me(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new L(17,115),new L(1,116)),new Q(28,new L(14,46),new L(21,47)),new Q(30,new L(29,24),new L(19,25)),new Q(30,new L(11,15),new L(46,16))),new Me(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new L(13,115),new L(6,116)),new Q(28,new L(14,46),new L(23,47)),new Q(30,new L(44,24),new L(7,25)),new Q(30,new L(59,16),new L(1,17))),new Me(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new L(12,121),new L(7,122)),new Q(28,new L(12,47),new L(26,48)),new Q(30,new L(39,24),new L(14,25)),new Q(30,new L(22,15),new L(41,16))),new Me(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new L(6,121),new L(14,122)),new Q(28,new L(6,47),new L(34,48)),new Q(30,new L(46,24),new L(10,25)),new Q(30,new L(2,15),new L(64,16))),new Me(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new L(17,122),new L(4,123)),new Q(28,new L(29,46),new L(14,47)),new Q(30,new L(49,24),new L(10,25)),new Q(30,new L(24,15),new L(46,16))),new Me(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new L(4,122),new L(18,123)),new Q(28,new L(13,46),new L(32,47)),new Q(30,new L(48,24),new L(14,25)),new Q(30,new L(42,15),new L(32,16))),new Me(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new L(20,117),new L(4,118)),new Q(28,new L(40,47),new L(7,48)),new Q(30,new L(43,24),new L(22,25)),new Q(30,new L(10,15),new L(67,16))),new Me(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new L(19,118),new L(6,119)),new Q(28,new L(18,47),new L(31,48)),new Q(30,new L(34,24),new L(34,25)),new Q(30,new L(20,15),new L(61,16)))];var un;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));class Xn{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let a=0;a<r;a++)for(let c=0;c<r;c++)this.isMasked(a,c)&&t.flip(c,a)}}Xn.values=new Map([[un.DATA_MASK_000,new Xn(un.DATA_MASK_000,(N,t)=>(N+t&1)===0)],[un.DATA_MASK_001,new Xn(un.DATA_MASK_001,(N,t)=>(N&1)===0)],[un.DATA_MASK_010,new Xn(un.DATA_MASK_010,(N,t)=>t%3===0)],[un.DATA_MASK_011,new Xn(un.DATA_MASK_011,(N,t)=>(N+t)%3===0)],[un.DATA_MASK_100,new Xn(un.DATA_MASK_100,(N,t)=>(Math.floor(N/2)+Math.floor(t/3)&1)===0)],[un.DATA_MASK_101,new Xn(un.DATA_MASK_101,(N,t)=>N*t%6===0)],[un.DATA_MASK_110,new Xn(un.DATA_MASK_110,(N,t)=>N*t%6<3)],[un.DATA_MASK_111,new Xn(un.DATA_MASK_111,(N,t)=>(N+t+N*t%3&1)===0)]]);class Yi{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new J;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const r=this.bitMatrix.getHeight();let a=0;const c=r-7;for(let u=r-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=r-8;u<r;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=gn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new J}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Me.getVersionForNumber(r);let a=0;const c=t-11;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(m,d,a);let u=Me.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(d,m,a);if(u=Me.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new J}copyBit(t,r,a){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),a=Xn.values.get(t.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=r.buildFunctionPattern();let d=!0;const m=new Uint8Array(r.getTotalCodewords());let y=0,A=0,S=0;for(let O=c-1;O>0;O-=2){O===6&&O--;for(let D=0;D<c;D++){const U=d?c-1-D:D;for(let G=0;G<2;G++)u.get(O-G,U)||(S++,A<<=1,this.bitMatrix.get(O-G,U)&&(A|=1),S===8&&(m[y++]=A,S=0,A=0))}d=!d}if(y!==r.getTotalCodewords())throw new J;return m}remask(){if(this.parsedFormatInfo===null)return;const t=Xn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,a=t.getWidth();r<a;r++)for(let c=r+1,u=t.getHeight();c<u;c++)t.get(r,c)!==t.get(c,r)&&(t.flip(c,r),t.flip(r,c))}}class dl{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,a){if(t.length!==r.getTotalCodewords())throw new R;const c=r.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const G of d)u+=G.getCount();const m=new Array(u);let y=0;for(const G of d)for(let V=0;V<G.getCount();V++){const Z=G.getDataCodewords(),ae=c.getECCodewordsPerBlock()+Z;m[y++]=new dl(Z,new Uint8Array(ae))}const A=m[0].codewords.length;let S=m.length-1;for(;S>=0&&m[S].codewords.length!==A;)S--;S++;const O=A-c.getECCodewordsPerBlock();let D=0;for(let G=0;G<O;G++)for(let V=0;V<y;V++)m[V].codewords[G]=t[D++];for(let G=S;G<y;G++)m[G].codewords[O]=t[D++];const U=m[0].codewords.length;for(let G=O;G<U;G++)for(let V=0;V<y;V++){const Z=V<S?G:G+1;m[V].codewords[Z]=t[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Yn;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(Yn||(Yn={}));class Ue{constructor(t,r,a,c){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=a,this.bits=c,Ue.FOR_BITS.set(c,this),Ue.FOR_VALUE.set(t,this)}static forBits(t){const r=Ue.FOR_BITS.get(t);if(r===void 0)throw new R;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let a;return r<=9?a=0:r<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ue))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.TERMINATOR=new Ue(Yn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ue.NUMERIC=new Ue(Yn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ue.ALPHANUMERIC=new Ue(Yn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ue.STRUCTURED_APPEND=new Ue(Yn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ue.BYTE=new Ue(Yn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ue.ECI=new Ue(Yn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ue.KANJI=new Ue(Yn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ue.FNC1_FIRST_POSITION=new Ue(Yn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ue.FNC1_SECOND_POSITION=new Ue(Yn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ue.HANZI=new Ue(Yn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ut{static decode(t,r,a,c){const u=new hr(t);let d=new We;const m=new Array;let y=-1,A=-1;try{let S=null,O=!1,D;do{if(u.available()<4)D=Ue.TERMINATOR;else{const U=u.readBits(4);D=Ue.forBits(U)}switch(D){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:O=!0;break;case Ue.STRUCTURED_APPEND:if(u.available()<16)throw new J;y=u.readBits(8),A=u.readBits(8);break;case Ue.ECI:const U=Ut.parseECIValue(u);if(S=he.getCharacterSetECIByValue(U),S===null)throw new J;break;case Ue.HANZI:const G=u.readBits(4),V=u.readBits(D.getCharacterCountBits(r));G===Ut.GB2312_SUBSET&&Ut.decodeHanziSegment(u,d,V);break;default:const Z=u.readBits(D.getCharacterCountBits(r));switch(D){case Ue.NUMERIC:Ut.decodeNumericSegment(u,d,Z);break;case Ue.ALPHANUMERIC:Ut.decodeAlphanumericSegment(u,d,Z,O);break;case Ue.BYTE:Ut.decodeByteSegment(u,d,Z,S,m,c);break;case Ue.KANJI:Ut.decodeKanjiSegment(u,d,Z);break;default:throw new J}break}}while(D!==Ue.TERMINATOR)}catch{throw new J}return new Lt(t,d.toString(),m.length===0?null:m,a===null?null:a.toString(),y,A)}static decodeHanziSegment(t,r,a){if(a*13>t.available())throw new J;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/96<<8&4294967295|d%96;m<959?m+=41377:m+=42657,c[u]=m>>8&255,c[u+1]=m&255,u+=2,a--}try{r.append(ve.decode(c,Ce.GB2312))}catch(d){throw new J(d)}}static decodeKanjiSegment(t,r,a){if(a*13>t.available())throw new J;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/192<<8&4294967295|d%192;m<7936?m+=33088:m+=49472,c[u]=m>>8,c[u+1]=m,u+=2,a--}try{r.append(ve.decode(c,Ce.SHIFT_JIS))}catch(d){throw new J(d)}}static decodeByteSegment(t,r,a,c,u,d){if(8*a>t.available())throw new J;const m=new Uint8Array(a);for(let A=0;A<a;A++)m[A]=t.readBits(8);let y;c===null?y=Ce.guessEncoding(m,d):y=c.getName();try{r.append(ve.decode(m,y))}catch(A){throw new J(A)}u.push(m)}static toAlphaNumericChar(t){if(t>=Ut.ALPHANUMERIC_CHARS.length)throw new J;return Ut.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,a,c){const u=r.length();for(;a>1;){if(t.available()<11)throw new J;const d=t.readBits(11);r.append(Ut.toAlphaNumericChar(Math.floor(d/45))),r.append(Ut.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(t.available()<6)throw new J;r.append(Ut.toAlphaNumericChar(t.readBits(6)))}if(c)for(let d=u;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(t,r,a){for(;a>=3;){if(t.available()<10)throw new J;const c=t.readBits(10);if(c>=1e3)throw new J;r.append(Ut.toAlphaNumericChar(Math.floor(c/100))),r.append(Ut.toAlphaNumericChar(Math.floor(c/10)%10)),r.append(Ut.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(t.available()<7)throw new J;const c=t.readBits(7);if(c>=100)throw new J;r.append(Ut.toAlphaNumericChar(Math.floor(c/10))),r.append(Ut.toAlphaNumericChar(c%10))}else if(a===1){if(t.available()<4)throw new J;const c=t.readBits(4);if(c>=10)throw new J;r.append(Ut.toAlphaNumericChar(c))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const a=t.readBits(8);return(r&63)<<8&4294967295|a}if((r&224)===192){const a=t.readBits(16);return(r&31)<<16&4294967295|a}throw new J}}Ut.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ut.GB2312_SUBSET=1;class So{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class yu{constructor(){this.rsDecoder=new fi(pt.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Te.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const a=new Yi(t);let c=null;try{return this.decodeBitMatrixParser(a,r)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,r);return u.setOther(new So(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(t,r){const a=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),d=dl.getDataBlocks(u,a,c);let m=0;for(const S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m);let A=0;for(const S of d){const O=S.getCodewords(),D=S.getNumDataCodewords();this.correctErrors(O,D);for(let U=0;U<D;U++)y[A++]=O[U]}return Ut.decode(y,a,c,r)}correctErrors(t,r){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-r)}catch{throw new k}for(let c=0;c<r;c++)t[c]=a[c]}}class Wi extends Ie{constructor(t,r,a){super(t,r),this.estimatedModuleSize=a}aboutEquals(t,r,a){if(Math.abs(r-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,r,a){const c=(this.getX()+r)/2,u=(this.getY()+t)/2,d=(this.estimatedModuleSize+a)/2;return new Wi(c,u,d)}}class er{constructor(t,r,a,c,u,d,m){this.image=t,this.startX=r,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,a=this.width,c=t+a,u=this.startY+r/2,d=new Int32Array(3),m=this.image;for(let y=0;y<r;y++){const A=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let S=t;for(;S<c&&!m.get(S,A);)S++;let O=0;for(;S<c;){if(m.get(S,A))if(O===1)d[1]++;else if(O===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,A,S);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,O=1}else d[++O]++;else O===1&&O++,d[O]++;S++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,A,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,a=r/2;for(let c=0;c<3;c++)if(Math.abs(r-t[c])>=a)return!1;return!0}crossCheckVertical(t,r,a,c){const u=this.image,d=u.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=t;for(;y>=0&&u.get(r,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&!u.get(r,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(r,y)&&m[1]<=a;)m[1]++,y++;if(y===d||m[1]>a)return NaN;for(;y<d&&!u.get(r,y)&&m[2]<=a;)m[2]++,y++;if(m[2]>a)return NaN;const A=m[0]+m[1]+m[2];return 5*Math.abs(A-c)>=2*c?NaN:this.foundPatternCross(m)?er.centerFromEnd(m,y):NaN}handlePossibleCenter(t,r,a){const c=t[0]+t[1]+t[2],u=er.centerFromEnd(t,a),d=this.crossCheckVertical(r,u,2*t[1],c);if(!isNaN(d)){const m=(t[0]+t[1]+t[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(m,d,u))return A.combineEstimate(d,u,m);const y=new Wi(u,d,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Da extends Ie{constructor(t,r,a,c){super(t,r),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,a){if(Math.abs(r-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,r,a){const c=this.count+1,u=(this.count*this.getX()+r)/c,d=(this.count*this.getY()+t)/c,m=(this.count*this.estimatedModuleSize+a)/c;return new Da(u,d,m,c)}}class gl{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(be.TRY_HARDER)!==void 0,a=t!=null&&t.get(be.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let m=Math.floor(3*u/(4*Vt.MAX_MODULES));(m<Vt.MIN_SKIP||r)&&(m=Vt.MIN_SKIP);let y=!1;const A=new Int32Array(5);for(let O=m-1;O<u&&!y;O+=m){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let D=0;for(let U=0;U<d;U++)if(c.get(U,O))(D&1)===1&&D++,A[D]++;else if((D&1)===0)if(D===4)if(Vt.foundPatternCross(A)){if(this.handlePossibleCenter(A,O,U,a)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>A[2]&&(O+=V-A[2]-m,U=d-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;continue}D=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;else A[++D]++;else A[D]++;Vt.foundPatternCross(A)&&this.handlePossibleCenter(A,O,d,a)===!0&&(m=A[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return Ie.orderBestPatterns(S),new gl(S)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let u=0;u<5;u++){const d=t[u];if(d===0)return!1;r+=d}if(r<7)return!1;const a=r/7,c=a/2;return Math.abs(a-t[0])<c&&Math.abs(a-t[1])<c&&Math.abs(3*a-t[2])<3*c&&Math.abs(a-t[3])<c&&Math.abs(a-t[4])<c}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,a,c){const u=this.getCrossCheckStateCount();let d=0;const m=this.image;for(;t>=d&&r>=d&&m.get(r-d,t-d);)u[2]++,d++;if(t<d||r<d)return!1;for(;t>=d&&r>=d&&!m.get(r-d,t-d)&&u[1]<=a;)u[1]++,d++;if(t<d||r<d||u[1]>a)return!1;for(;t>=d&&r>=d&&m.get(r-d,t-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const y=m.getHeight(),A=m.getWidth();for(d=1;t+d<y&&r+d<A&&m.get(r+d,t+d);)u[2]++,d++;if(t+d>=y||r+d>=A)return!1;for(;t+d<y&&r+d<A&&!m.get(r+d,t+d)&&u[3]<a;)u[3]++,d++;if(t+d>=y||r+d>=A||u[3]>=a)return!1;for(;t+d<y&&r+d<A&&m.get(r+d,t+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const S=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(S-c)<2*c&&Vt.foundPatternCross(u)}crossCheckVertical(t,r,a,c){const u=this.image,d=u.getHeight(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(r,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(r,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(r,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(r,y);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(r,y)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(r,y)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=2*c?NaN:Vt.foundPatternCross(m)?Vt.centerFromEnd(m,y):NaN}crossCheckHorizontal(t,r,a,c){const u=this.image,d=u.getWidth(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,r);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,r)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(y,r)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(y,r);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(y,r)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(y,r)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=c?NaN:Vt.foundPatternCross(m)?Vt.centerFromEnd(m,y):NaN}handlePossibleCenter(t,r,a,c){const u=t[0]+t[1]+t[2]+t[3]+t[4];let d=Vt.centerFromEnd(t,a),m=this.crossCheckVertical(r,Math.floor(d),t[2],u);if(!isNaN(m)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(m),t[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(d),t[2],u)))){const y=u/7;let A=!1;const S=this.possibleCenters;for(let O=0,D=S.length;O<D;O++){const U=S[O];if(U.aboutEquals(y,m,d)){S[O]=U.combineEstimate(m,d,y),A=!0;break}}if(!A){const O=new Da(d,m,y);S.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const a of this.possibleCenters)if(a.getCount()>=Vt.CENTER_QUORUM)if(r==null)r=a;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Vt.CENTER_QUORUM&&(t++,r+=d.getEstimatedModuleSize());if(t<3)return!1;const c=r/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ee;const r=this.possibleCenters;let a;if(t>3){let c=0,u=0;for(const y of this.possibleCenters){const A=y.getEstimatedModuleSize();c+=A,u+=A*A}a=c/t;let d=Math.sqrt(u/t-a*a);r.sort((y,A)=>{const S=Math.abs(A.getEstimatedModuleSize()-a),O=Math.abs(y.getEstimatedModuleSize()-a);return S<O?-1:S>O?1:0});const m=Math.max(.2*a,d);for(let y=0;y<r.length&&r.length>3;y++){const A=r[y];Math.abs(A.getEstimatedModuleSize()-a)>m&&(r.splice(y,1),y--)}}if(r.length>3){let c=0;for(const u of r)c+=u.getEstimatedModuleSize();a=c/r.length,r.sort((u,d)=>{if(d.getCount()===u.getCount()){const m=Math.abs(d.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return m<y?1:m>y?-1:0}else return d.getCount()-u.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Vt.CENTER_QUORUM=2,Vt.MIN_SKIP=3,Vt.MAX_MODULES=57;class Rr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(be.NEED_RESULT_POINT_CALLBACK);const a=new Vt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const r=t.getTopLeft(),a=t.getTopRight(),c=t.getBottomLeft(),u=this.calculateModuleSize(r,a,c);if(u<1)throw new ee("No pattern found in proccess finder.");const d=Rr.computeDimension(r,a,c,u),m=Me.getProvisionalVersionForDimension(d),y=m.getDimensionForVersion()-7;let A=null;if(m.getAlignmentPatternCenters().length>0){const U=a.getX()-r.getX()+c.getX(),G=a.getY()-r.getY()+c.getY(),V=1-3/y,Z=Math.floor(r.getX()+V*(U-r.getX())),ae=Math.floor(r.getY()+V*(G-r.getY()));for(let ye=4;ye<=16;ye<<=1)try{A=this.findAlignmentInRegion(u,Z,ae,ye);break}catch(xe){if(!(xe instanceof ee))throw xe}}const S=Rr.createTransform(r,a,c,A,d),O=Rr.sampleGrid(this.image,S,d);let D;return A===null?D=[c,r,a]:D=[c,r,a,A],new ss(O,D)}static createTransform(t,r,a,c,u){const d=u-3.5;let m,y,A,S;return c!==null?(m=c.getX(),y=c.getY(),A=d-3,S=A):(m=r.getX()-t.getX()+a.getX(),y=r.getY()-t.getY()+a.getY(),A=d,S=d),Jn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,A,S,3.5,d,t.getX(),t.getY(),r.getX(),r.getY(),m,y,a.getX(),a.getY())}static sampleGrid(t,r,a){return or.getInstance().sampleGridWithTransform(t,a,a,r)}static computeDimension(t,r,a,c){const u=rt.round(Ie.distance(t,r)/c),d=rt.round(Ie.distance(t,a)/c);let m=Math.floor((u+d)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new ee("Dimensions could be not found.")}return m}calculateModuleSize(t,r,a){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,r){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,a,c){let u=this.sizeOfBlackWhiteBlackRun(t,r,a,c),d=1,m=t-(a-t);m<0?(d=t/(t-m),m=0):m>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(m-t),m=this.image.getWidth()-1);let y=Math.floor(r-(c-r)*d);return d=1,y<0?(d=r/(r-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(y-r),y=this.image.getHeight()-1),m=Math.floor(t+(m-t)*d),u+=this.sizeOfBlackWhiteBlackRun(t,r,m,y),u-1}sizeOfBlackWhiteBlackRun(t,r,a,c){const u=Math.abs(c-r)>Math.abs(a-t);if(u){let U=t;t=r,r=U,U=a,a=c,c=U}const d=Math.abs(a-t),m=Math.abs(c-r);let y=-d/2;const A=t<a?1:-1,S=r<c?1:-1;let O=0;const D=a+A;for(let U=t,G=r;U!==D;U+=A){const V=u?G:U,Z=u?U:G;if(O===1===this.image.get(V,Z)){if(O===2)return rt.distance(U,G,t,r);O++}if(y+=m,y>0){if(G===c)break;G+=S,y-=d}}return O===2?rt.distance(a+A,c,t,r):NaN}findAlignmentInRegion(t,r,a,c){const u=Math.floor(c*t),d=Math.max(0,r-u),m=Math.min(this.image.getWidth()-1,r+u);if(m-d<t*3)throw new ee("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),A=Math.min(this.image.getHeight()-1,a+u);if(A-y<t*3)throw new ee("Alignment bottom exceeds estimated module size.");return new er(this.image,d,y,m-d,A-y,t,this.resultPointCallback).find()}}class Gr{constructor(){this.decoder=new yu}getDecoder(){return this.decoder}decode(t,r){let a,c;if(r!=null&&r.get(be.PURE_BARCODE)!==void 0){const y=Gr.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,r),c=Gr.NO_POINTS}else{const y=new Rr(t.getBlackMatrix()).detect(r);a=this.decoder.decodeBitMatrix(y.getBits(),r),c=y.getPoints()}a.getOther()instanceof So&&a.getOther().applyMirroredCorrection(c);const u=new _e(a.getText(),a.getRawBytes(),void 0,c,Ee.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(mt.BYTE_SEGMENTS,d);const m=a.getECLevel();return m!==null&&u.putMetadata(mt.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(u.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(mt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(r===null||a===null)throw new ee;const c=this.moduleSize(r,t);let u=r[1],d=a[1],m=r[0],y=a[0];if(m>=y||u>=d)throw new ee;if(d-u!==y-m&&(y=m+(d-u),y>=t.getWidth()))throw new ee;const A=Math.round((y-m+1)/c),S=Math.round((d-u+1)/c);if(A<=0||S<=0)throw new ee;if(S!==A)throw new ee;const O=Math.floor(c/2);u+=O,m+=O;const D=m+Math.floor((A-1)*c)-y;if(D>0){if(D>O)throw new ee;m-=D}const U=u+Math.floor((S-1)*c)-d;if(U>0){if(U>O)throw new ee;u-=U}const G=new Te(A,S);for(let V=0;V<S;V++){const Z=u+Math.floor(V*c);for(let ae=0;ae<A;ae++)t.get(m+Math.floor(ae*c),Z)&&G.set(ae,V)}return G}static moduleSize(t,r){const a=r.getHeight(),c=r.getWidth();let u=t[0],d=t[1],m=!0,y=0;for(;u<c&&d<a;){if(m!==r.get(u,d)){if(++y===5)break;m=!m}u++,d++}if(u===c||d===a)throw new ee;return(u-t[0])/7}}Gr.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(t){return rt.sum(t)}static toIntArray(t){if(t==null||!t.length)return Pe.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let a=0;for(const c of t)r[a++]=c;return r}static getCodeword(t){const r=X.binarySearch(Pe.SYMBOL_TABLE,t&262143);return r<0?-1:(Pe.CODEWORD_TABLE[r]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class To{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class qe{static detectMultiple(t,r,a){let c=t.getBlackMatrix(),u=qe.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=qe.detect(a,c)),new To(c,u)}static detect(t,r){const a=new Array;let c=0,u=0,d=!1;for(;c<r.getHeight();){const m=qe.findVertices(r,c,u);if(m[0]==null&&m[3]==null){if(!d)break;d=!1,u=0;for(const y of a)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=qe.ROW_STEP;continue}if(d=!0,a.push(m),!t)break;m[2]!=null?(u=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(u=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return a}static findVertices(t,r,a){const c=t.getHeight(),u=t.getWidth(),d=new Array(8);return qe.copyToResult(d,qe.findRowsWithPattern(t,c,u,r,a,qe.START_PATTERN),qe.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),qe.copyToResult(d,qe.findRowsWithPattern(t,c,u,r,a,qe.STOP_PATTERN),qe.INDEXES_STOP_PATTERN),d}static copyToResult(t,r,a){for(let c=0;c<a.length;c++)t[a[c]]=r[c]}static findRowsWithPattern(t,r,a,c,u,d){const m=new Array(4);let y=!1;const A=new Int32Array(d.length);for(;c<r;c+=qe.ROW_STEP){let O=qe.findGuardPattern(t,u,c,a,!1,d,A);if(O!=null){for(;c>0;){const D=qe.findGuardPattern(t,u,--c,a,!1,d,A);if(D!=null)O=D;else{c++;break}}m[0]=new Ie(O[0],c),m[1]=new Ie(O[1],c),y=!0;break}}let S=c+1;if(y){let O=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;S<r;S++){const U=qe.findGuardPattern(t,D[0],S,a,!1,d,A);if(U!=null&&Math.abs(D[0]-U[0])<qe.MAX_PATTERN_DRIFT&&Math.abs(D[1]-U[1])<qe.MAX_PATTERN_DRIFT)D=U,O=0;else{if(O>qe.SKIPPED_ROW_COUNT_MAX)break;O++}}S-=O+1,m[2]=new Ie(D[0],S),m[3]=new Ie(D[1],S)}return S-c<qe.BARCODE_MIN_HEIGHT&&X.fill(m,null),m}static findGuardPattern(t,r,a,c,u,d,m){X.fillWithin(m,0,m.length,0);let y=r,A=0;for(;t.get(y,a)&&y>0&&A++<qe.MAX_PIXEL_DRIFT;)y--;let S=y,O=0,D=d.length;for(let U=u;S<c;S++)if(t.get(S,a)!==U)m[O]++;else{if(O===D-1){if(qe.patternMatchVariance(m,d,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE)return new Int32Array([y,S]);y+=m[0]+m[1],F.arraycopy(m,2,m,0,O-1),m[O-1]=0,m[O]=0,O--}else O++;m[O]=1,U=!U}return O===D-1&&qe.patternMatchVariance(m,d,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE?new Int32Array([y,S-1]):null}static patternMatchVariance(t,r,a){let c=t.length,u=0,d=0;for(let A=0;A<c;A++)u+=t[A],d+=r[A];if(u<d)return 1/0;let m=u/d;a*=m;let y=0;for(let A=0;A<c;A++){let S=t[A],O=r[A]*m,D=S>O?S-O:O-S;if(D>a)return 1/0;y+=D}return y/u}}qe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),qe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),qe.MAX_AVG_VARIANCE=.42,qe.MAX_INDIVIDUAL_VARIANCE=.8,qe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),qe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),qe.MAX_PIXEL_DRIFT=3,qe.MAX_PATTERN_DRIFT=5,qe.SKIPPED_ROW_COUNT_MAX=25,qe.ROW_STEP=5,qe.BARCODE_MIN_HEIGHT=10;class jt{constructor(t,r){if(r.length===0)throw new R;this.field=t;let a=r.length;if(a>1&&r[0]===0){let c=1;for(;c<a&&r[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),F.arraycopy(r,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let r=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)r=this.field.add(this.field.multiply(t,r),this.coefficients[c]);return r}add(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,a=t.coefficients;if(r.length>a.length){let d=r;r=a,a=d}let c=new Int32Array(a.length),u=a.length-r.length;F.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(r[d-u],a[d]);return new jt(this.field,c)}subtract(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof jt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new jt(this.field,new Int32Array([0]));let r=this.coefficients,a=r.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let m=0;m<a;m++){let y=r[m];for(let A=0;A<u;A++)d[m+A]=this.field.add(d[m+A],this.field.multiply(y,c[A]))}return new jt(this.field,d)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let a=0;a<t;a++)r[a]=this.field.subtract(0,this.coefficients[a]);return new jt(this.field,r)}multiplyScalar(t){if(t===0)return new jt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,a=new Int32Array(r);for(let c=0;c<r;c++)a[c]=this.field.multiply(this.coefficients[c],t);return new jt(this.field,a)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return new jt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+t);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],r);return new jt(this.field,c)}toString(){let t=new We;for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(r===0||a!==1)&&t.append(a),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class ml{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}inverse(t){if(t===0)throw new Fi;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class di extends ml{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let c=0;c<t;c++)this.expTable[c]=a,a=a*r%t;for(let c=0;c<t-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new jt(this,new Int32Array([0])),this.one=new jt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;let a=new Int32Array(t+1);return a[0]=r,new jt(this,a)}}di.PDF417_GF=new di(Pe.NUMBER_OF_CODEWORDS,3);class Vr{constructor(){this.field=di.PDF417_GF}decode(t,r,a){let c=new jt(this.field,t),u=new Int32Array(r),d=!1;for(let G=r;G>0;G--){let V=c.evaluateAt(this.field.exp(G));u[r-G]=V,V!==0&&(d=!0)}if(!d)return 0;let m=this.field.getOne();if(a!=null)for(const G of a){let V=this.field.exp(t.length-1-G),Z=new jt(this.field,new Int32Array([this.field.subtract(0,V),1]));m=m.multiply(Z)}let y=new jt(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),S=A[0],O=A[1],D=this.findErrorLocations(S),U=this.findErrorMagnitudes(O,S,D);for(let G=0;G<D.length;G++){let V=t.length-1-this.field.log(D[G]);if(V<0)throw k.getChecksumInstance();t[V]=this.field.subtract(t[V],U[G])}return D.length}runEuclideanAlgorithm(t,r,a){if(t.getDegree()<r.getDegree()){let D=t;t=r,r=D}let c=t,u=r,d=this.field.getZero(),m=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let D=c,U=d;if(c=u,d=m,c.isZero())throw k.getChecksumInstance();u=D;let G=this.field.getZero(),V=c.getCoefficient(c.getDegree()),Z=this.field.inverse(V);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let ae=u.getDegree()-c.getDegree(),ye=this.field.multiply(u.getCoefficient(u.getDegree()),Z);G=G.add(this.field.buildMonomial(ae,ye)),u=u.subtract(c.multiplyByMonomial(ae,ye))}m=G.multiply(d).subtract(U).negative()}let y=m.getCoefficient(0);if(y===0)throw k.getChecksumInstance();let A=this.field.inverse(y),S=m.multiply(A),O=u.multiply(A);return[S,O]}findErrorLocations(t){let r=t.getDegree(),a=new Int32Array(r),c=0;for(let u=1;u<this.field.getSize()&&c<r;u++)t.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==r)throw k.getChecksumInstance();return a}findErrorMagnitudes(t,r,a){let c=r.getDegree(),u=new Int32Array(c);for(let A=1;A<=c;A++)u[c-A]=this.field.multiply(A,r.getCoefficient(A));let d=new jt(this.field,u),m=a.length,y=new Int32Array(m);for(let A=0;A<m;A++){let S=this.field.inverse(a[A]),O=this.field.subtract(0,t.evaluateAt(S)),D=this.field.inverse(d.evaluateAt(S));y[A]=this.field.multiply(O,D)}return y}}class qr{constructor(t,r,a,c,u){t instanceof qr?this.constructor_2(t):this.constructor_1(t,r,a,c,u)}constructor_1(t,r,a,c,u){const d=r==null||a==null,m=c==null||u==null;if(d&&m)throw new ee;d?(r=new Ie(0,c.getY()),a=new Ie(0,u.getY())):m&&(c=new Ie(t.getWidth()-1,r.getY()),u=new Ie(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=r,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(r.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(r.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new qr(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,m=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,A=Math.trunc(y.getY()-t);A<0&&(A=0);let S=new Ie(y.getX(),A);a?c=S:d=S}if(r>0){let y=a?this.bottomLeft:this.bottomRight,A=Math.trunc(y.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let S=new Ie(y.getX(),A);a?u=S:m=S}return new qr(this.image,c,u,d,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class hs{constructor(t,r,a,c){this.columnCount=t,this.errorCorrectionLevel=c,this.rowCountUpperPart=r,this.rowCountLowerPart=a,this.rowCount=r+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ki{constructor(){this.buffer=""}static form(t,r){let a=-1;function c(d,m,y,A,S,O){if(d==="%%")return"%";if(r[++a]===void 0)return;d=A?parseInt(A.substr(1)):void 0;let D=S?parseInt(S.substr(1)):void 0,U;switch(O){case"s":U=r[a];break;case"c":U=r[a][0];break;case"f":U=parseFloat(r[a]).toFixed(d);break;case"p":U=parseFloat(r[a]).toPrecision(d);break;case"e":U=parseFloat(r[a]).toExponential(d);break;case"x":U=parseInt(r[a]).toString(D||16);break;case"d":U=parseFloat(parseInt(r[a],D||10).toPrecision(d)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(D);let G=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;U.length<G;)U=m!==void 0?U+V:V+U;return U}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}format(t,...r){this.buffer+=Ki.form(t,r)}toString(){return this.buffer}}class ii{constructor(t){this.boundingBox=new qr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let a=1;a<ii.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(t)-a;if(c>=0&&(r=this.codewords[c],r!=null)||(c=this.imageRowToCodewordIndex(t)+a,c<this.codewords.length&&(r=this.codewords[c],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Ki;let r=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue())}return t.toString()}}ii.MAX_NEARBY_DISTANCE=5;class ai{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>t?(t=u.getValue(),r=[],r.push(u.getKey())):u.getValue()===t&&r.push(u.getKey())}return Pe.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class pl extends ii{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,A=1,S=0;for(let O=d;O<m;O++){if(r[O]==null)continue;let D=r[O],U=D.getRowNumber()-y;if(U===0)S++;else if(U===1)A=Math.max(A,S),S=1,y=D.getRowNumber();else if(U<0||D.getRowNumber()>=t.getRowCount()||U>O)r[O]=null;else{let G;A>2?G=(A-2)*U:G=U;let V=G>=O;for(let Z=1;Z<=G&&!V;Z++)V=r[O-Z]!=null;V?r[O]=null:(y=D.getRowNumber(),S=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=r.length)continue;r[c]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),c=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),y=-1;for(let A=u;A<d;A++){if(m[A]==null)continue;let S=m[A];S.setRowNumberAsRowIndicatorColumn();let O=S.getRowNumber()-y;O===0||(O===1?y=S.getRowNumber():S.getRowNumber()>=t.getRowCount()?m[A]=null:y=S.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new ai,a=new ai,c=new ai,u=new ai;for(let m of t){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,A=m.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:r.setValue(y+1);break}}if(r.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||r.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let d=new hs(r.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,r){for(let a=0;a<t.length;a++){let c=t[a];if(t[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>r.getRowCount()){t[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(t[a]=null);break;case 2:u+1!==r.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class mn{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Pe.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let a=this.detectionResultColumns[r].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(r,c,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&r[a]!=null&&t[a].getRowNumber()===r[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(t[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let c=r[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=mn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let c=r[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=mn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,a){if(!this.detectionResultColumns[t-1])return;let c=a[r],u=this.detectionResultColumns[t-1].getCodewords(),d=u;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let m=new Array(14);m[2]=u[r],m[3]=d[r],r>0&&(m[0]=a[r-1],m[4]=u[r-1],m[5]=d[r-1]),r>1&&(m[8]=a[r-2],m[10]=u[r-2],m[11]=d[r-2]),r<a.length-1&&(m[1]=a[r+1],m[6]=u[r+1],m[7]=d[r+1]),r<a.length-2&&(m[9]=a[r+2],m[12]=u[r+2],m[13]=d[r+2]);for(let y of m)if(mn.adjustRowNumber(c,y))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Ki;for(let a=0;a<t.getCodewords().length;a++){r.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){r.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){r.format("    |   ");continue}r.format(" %3d|%3d",u.getRowNumber(),u.getValue())}r.format("%n")}return r.toString()}}class fr{constructor(t,r,a,c){this.rowNumber=fr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==fr.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}fr.BARCODE_ROW_UNKNOWN=-1;class Sn{static initialize(){for(let t=0;t<Pe.SYMBOL_TABLE.length;t++){let r=Pe.SYMBOL_TABLE[t],a=r&1;for(let c=0;c<Pe.BARS_IN_MODULE;c++){let u=0;for(;(r&1)===a;)u+=1,r>>=1;a=r&1,Sn.RATIOS_TABLE[t]||(Sn.RATIOS_TABLE[t]=new Array(Pe.BARS_IN_MODULE)),Sn.RATIOS_TABLE[t][Pe.BARS_IN_MODULE-c-1]=Math.fround(u/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Sn.getDecodedCodewordValue(Sn.sampleBitCounts(t));return r!==-1?r:Sn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=rt.sum(t),a=new Int32Array(Pe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Pe.MODULES_IN_CODEWORD;d++){let m=r/(2*Pe.MODULES_IN_CODEWORD)+d*r/Pe.MODULES_IN_CODEWORD;u+t[c]<=m&&(u+=t[c],c++),a[c]++}return a}static getDecodedCodewordValue(t){let r=Sn.getBitValue(t);return Pe.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let a=0;a<t.length;a++)for(let c=0;c<t[a];c++)r=r<<1|(a%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=rt.sum(t),a=new Array(Pe.BARS_IN_MODULE);if(r>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(t[d]/r);let c=zi.MAX_VALUE,u=-1;this.bSymbolTableReady||Sn.initialize();for(let d=0;d<Sn.RATIOS_TABLE.length;d++){let m=0,y=Sn.RATIOS_TABLE[d];for(let A=0;A<Pe.BARS_IN_MODULE;A++){let S=Math.fround(y[A]-a[A]);if(m+=Math.fround(S*S),m>=c)break}m<c&&(c=m,u=Pe.SYMBOL_TABLE[d])}return u}}Sn.bSymbolTableReady=!1,Sn.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(N=>new Array(Pe.BARS_IN_MODULE));class Zi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ro{static parseLong(t,r=void 0){return parseInt(t,r)}}class fs extends w{}fs.kind="NullPointerException";class xl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,a){if(t==null)throw new fs;if(r<0||r>t.length||a<0||r+a>t.length||r+a<0)throw new H;if(a===0)return;for(let c=0;c<a;c++)this.write(t[r+c])}flush(){}close(){}}class Ma extends w{}class ds extends xl{constructor(t=32){if(super(),this.count=0,t<0)throw new R("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ma;a=P.MAX_VALUE}this.buf=X.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,a){if(r<0||r>t.length||a<0||r+a-t.length>0)throw new H;this.ensureCapacity(this.count+a),F.arraycopy(t,r,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return X.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var At;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(At||(At={}));function No(){if(typeof window<"u")return window.BigInt||null;if(typeof Fc<"u")return Fc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let gs;function si(N){if(typeof gs>"u"&&(gs=No()),gs===null)throw new Error("BigInt is not supported!");return gs(N)}function yl(){let N=[];N[0]=si(1);let t=si(900);N[1]=t;for(let r=2;r<16;r++)N[r]=N[r-1]*t;return N}class se{static decode(t,r){let a=new We(""),c=he.ISO8859_1;a.enableDecoding(c);let u=1,d=t[u++],m=new Zi;for(;u<t[0];){switch(d){case se.TEXT_COMPACTION_MODE_LATCH:u=se.textCompaction(t,u,a);break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:u=se.byteCompaction(d,t,c,u,a);break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[u++]);break;case se.NUMERIC_COMPACTION_MODE_LATCH:u=se.numericCompaction(t,u,a);break;case se.ECI_CHARSET:he.getCharacterSetECIByValue(t[u++]);break;case se.ECI_GENERAL_PURPOSE:u+=2;break;case se.ECI_USER_DEFINED:u++;break;case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=se.decodeMacroBlock(t,u,m);break;case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:throw new J;default:u--,u=se.textCompaction(t,u,a);break}if(u<t.length)d=t[u++];else throw J.getFormatInstance()}if(a.length()===0)throw J.getFormatInstance();let y=new Lt(null,a.toString(),null,r);return y.setOther(m),y}static decodeMacroBlock(t,r,a){if(r+se.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw J.getFormatInstance();let c=new Int32Array(se.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<se.NUMBER_OF_SEQUENCE_CODEWORDS;m++,r++)c[m]=t[r];a.setSegmentIndex(P.parseInt(se.decodeBase900toBase10(c,se.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new We;r=se.textCompaction(t,r,u),a.setFileId(u.toString());let d=-1;for(t[r]===se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<t[0];)switch(t[r]){case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new We;r=se.textCompaction(t,r+1,m),a.setFileName(m.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new We;r=se.textCompaction(t,r+1,y),a.setSender(y.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new We;r=se.textCompaction(t,r+1,A),a.setAddressee(A.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new We;r=se.numericCompaction(t,r+1,S),a.setSegmentCount(P.parseInt(S.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new We;r=se.numericCompaction(t,r+1,O),a.setTimestamp(Ro.parseLong(O.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new We;r=se.numericCompaction(t,r+1,D),a.setChecksum(P.parseInt(D.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new We;r=se.numericCompaction(t,r+1,U),a.setFileSize(Ro.parseLong(U.toString()));break;default:throw J.getFormatInstance()}break;case se.MACRO_PDF417_TERMINATOR:r++,a.setLastSegment(!0);break;default:throw J.getFormatInstance()}if(d!==-1){let m=r-d;a.isLastSegment()&&m--,a.setOptionalData(X.copyOfRange(t,d,d+m))}return r}static textCompaction(t,r,a){let c=new Int32Array((t[0]-r)*2),u=new Int32Array((t[0]-r)*2),d=0,m=!1;for(;r<t[0]&&!m;){let y=t[r++];if(y<se.TEXT_COMPACTION_MODE_LATCH)c[d]=y/30,c[d+1]=y%30,d+=2;else switch(y){case se.TEXT_COMPACTION_MODE_LATCH:c[d++]=se.TEXT_COMPACTION_MODE_LATCH;break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:r--,m=!0;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[r++],u[d]=y,d++;break}}return se.decodeTextCompaction(c,u,d,a),r}static decodeTextCompaction(t,r,a,c){let u=At.ALPHA,d=At.ALPHA,m=0;for(;m<a;){let y=t[m],A="";switch(u){case At.ALPHA:if(y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case se.LL:u=At.LOWER;break;case se.ML:u=At.MIXED;break;case se.PS:d=u,u=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.LOWER:if(y<26)A=String.fromCharCode(97+y);else switch(y){case 26:A=" ";break;case se.AS:d=u,u=At.ALPHA_SHIFT;break;case se.ML:u=At.MIXED;break;case se.PS:d=u,u=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.MIXED:if(y<se.PL)A=se.MIXED_CHARS[y];else switch(y){case se.PL:u=At.PUNCT;break;case 26:A=" ";break;case se.LL:u=At.LOWER;break;case se.AL:u=At.ALPHA;break;case se.PS:d=u,u=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.PUNCT:if(y<se.PAL)A=se.PUNCT_CHARS[y];else switch(y){case se.PAL:u=At.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.ALPHA_SHIFT:if(u=d,y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.PUNCT_SHIFT:if(u=d,y<se.PAL)A=se.PUNCT_CHARS[y];else switch(y){case se.PAL:u=At.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break}A!==""&&c.append(A),m++}}static byteCompaction(t,r,a,c,u){let d=new ds,m=0,y=0,A=!1;switch(t){case se.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),O=r[c++];for(;c<r[0]&&!A;)switch(S[m++]=O,y=900*y+O,O=r[c++],O){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:c--,A=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)d.write(Number(si(y)>>si(8*(5-D))));y=0,m=0}break}c===r[0]&&O<se.TEXT_COMPACTION_MODE_LATCH&&(S[m++]=O);for(let D=0;D<m;D++)d.write(S[D]);break;case se.BYTE_COMPACTION_MODE_LATCH_6:for(;c<r[0]&&!A;){let D=r[c++];if(D<se.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+D;else switch(D){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:c--,A=!0;break}if(m%5===0&&m>0){for(let U=0;U<6;++U)d.write(Number(si(y)>>si(8*(5-U))));y=0,m=0}}break}return u.append(ve.decode(d.toByteArray(),a)),c}static numericCompaction(t,r,a){let c=0,u=!1,d=new Int32Array(se.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!u;){let m=t[r++];if(r===t[0]&&(u=!0),m<se.TEXT_COMPACTION_MODE_LATCH)d[c]=m,c++;else switch(m){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:r--,u=!0;break}(c%se.MAX_NUMERIC_CODEWORDS===0||m===se.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(se.decodeBase900toBase10(d,c)),c=0)}return r}static decodeBase900toBase10(t,r){let a=si(0);for(let u=0;u<r;u++)a+=se.EXP900[r-u-1]*si(t[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new J;return c.substring(1)}}se.TEXT_COMPACTION_MODE_LATCH=900,se.BYTE_COMPACTION_MODE_LATCH=901,se.NUMERIC_COMPACTION_MODE_LATCH=902,se.BYTE_COMPACTION_MODE_LATCH_6=924,se.ECI_USER_DEFINED=925,se.ECI_GENERAL_PURPOSE=926,se.ECI_CHARSET=927,se.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,se.MACRO_PDF417_TERMINATOR=922,se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,se.MAX_NUMERIC_CODEWORDS=15,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,se.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,se.PL=25,se.LL=27,se.AS=27,se.ML=28,se.AL=28,se.PS=29,se.PAL=29,se.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,se.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",se.EXP900=No()?yl():[],se.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Qe{constructor(){}static decode(t,r,a,c,u,d,m){let y=new qr(t,r,a,c,u),A=null,S=null,O;for(let G=!0;;G=!1){if(r!=null&&(A=Qe.getRowIndicatorColumn(t,y,r,!0,d,m)),c!=null&&(S=Qe.getRowIndicatorColumn(t,y,c,!1,d,m)),O=Qe.merge(A,S),O==null)throw ee.getNotFoundInstance();let V=O.getBoundingBox();if(G&&V!=null&&(V.getMinY()<y.getMinY()||V.getMaxY()>y.getMaxY()))y=V;else break}O.setBoundingBox(y);let D=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,A),O.setDetectionResultColumn(D,S);let U=A!=null;for(let G=1;G<=D;G++){let V=U?G:D-G;if(O.getDetectionResultColumn(V)!==void 0)continue;let Z;V===0||V===D?Z=new pl(y,V===0):Z=new ii(y),O.setDetectionResultColumn(V,Z);let ae=-1,ye=ae;for(let xe=y.getMinY();xe<=y.getMaxY();xe++){if(ae=Qe.getStartColumn(O,V,xe,U),ae<0||ae>y.getMaxX()){if(ye===-1)continue;ae=ye}let pe=Qe.detectCodeword(t,y.getMinX(),y.getMaxX(),U,ae,xe,d,m);pe!=null&&(Z.setCodeword(xe,pe),ye=ae,d=Math.min(d,pe.getWidth()),m=Math.max(m,pe.getWidth()))}}return Qe.createDecoderResult(O)}static merge(t,r){if(t==null&&r==null)return null;let a=Qe.getBarcodeMetadata(t,r);if(a==null)return null;let c=qr.merge(Qe.adjustBoundingBox(t),Qe.adjustBoundingBox(r));return new mn(a,c)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let a=Qe.getMax(r),c=0;for(let m of r)if(c+=a-m,m>0)break;let u=t.getCodewords();for(let m=0;c>0&&u[m]==null;m++)c--;let d=0;for(let m=r.length-1;m>=0&&(d+=a-r[m],!(r[m]>0));m--);for(let m=u.length-1;d>0&&u[m]==null;m--)d--;return t.getBoundingBox().addMissingRows(c,d,t.isLeft())}static getMax(t){let r=-1;for(let a of t)r=Math.max(r,a);return r}static getBarcodeMetadata(t,r){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let c;return r==null||(c=r.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(t,r,a,c,u,d){let m=new pl(r,c);for(let y=0;y<2;y++){let A=y===0?1:-1,S=Math.trunc(Math.trunc(a.getX()));for(let O=Math.trunc(Math.trunc(a.getY()));O<=r.getMaxY()&&O>=r.getMinY();O+=A){let D=Qe.detectCodeword(t,0,t.getWidth(),c,S,O,u,d);D!=null&&(m.setCodeword(O,D),c?S=D.getStartX():S=D.getEndX())}}return m}static adjustCodewordCount(t,r){let a=r[0][1],c=a.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Qe.getNumberOfECCodeWords(t.getBarcodeECLevel());if(c.length===0){if(u<1||u>Pe.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(t){let r=Qe.createBarcodeMatrix(t);Qe.adjustCodewordCount(t,r);let a=new Array,c=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],d=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let A=0;A<t.getBarcodeColumnCount();A++){let S=r[y][A+1].getValue(),O=y*t.getBarcodeColumnCount()+A;S.length===0?a.push(O):S.length===1?c[O]=S[0]:(d.push(O),u.push(S))}let m=new Array(u.length);for(let y=0;y<m.length;y++)m[y]=u[y];return Qe.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),c,Pe.toIntArray(a),Pe.toIntArray(d),m)}static createDecoderResultFromAmbiguousValues(t,r,a,c,u){let d=new Int32Array(c.length),m=100;for(;m-- >0;){for(let y=0;y<d.length;y++)r[c[y]]=u[y][d[y]];try{return Qe.decodeCodewords(r,t,a)}catch(y){if(!(y instanceof k))throw y}if(d.length===0)throw k.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<u[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let c=0;c<r.length;c++)for(let u=0;u<r[c].length;u++)r[c][u]=new ai;let a=0;for(let c of t.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][a].setValue(u.getValue())}}}a++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,a,c){let u=c?1:-1,d=null;if(Qe.isValidBarcodeColumn(t,r-u)&&(d=t.getDetectionResultColumn(r-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(r).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(Qe.isValidBarcodeColumn(t,r-u)&&(d=t.getDetectionResultColumn(r-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let m=0;for(;Qe.isValidBarcodeColumn(t,r-u);){r-=u;for(let y of t.getDetectionResultColumn(r).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*m*(y.getEndX()-y.getStartX());m++}return c?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,a,c,u,d,m,y){u=Qe.adjustCodewordStartColumn(t,r,a,c,u,d);let A=Qe.getModuleBitCount(t,r,a,c,u,d);if(A==null)return null;let S,O=rt.sum(A);if(c)S=u+O;else{for(let G=0;G<A.length/2;G++){let V=A[G];A[G]=A[A.length-1-G],A[A.length-1-G]=V}S=u,u=S-O}if(!Qe.checkCodewordSkew(O,m,y))return null;let D=Sn.getDecodedValue(A),U=Pe.getCodeword(D);return U===-1?null:new fr(u,S,Qe.getCodewordBucketNumber(D),U)}static getModuleBitCount(t,r,a,c,u,d){let m=u,y=new Int32Array(8),A=0,S=c?1:-1,O=c;for(;(c?m<a:m>=r)&&A<y.length;)t.get(m,d)===O?(y[A]++,m+=S):(A++,O=!O);return A===y.length||m===(c?a:r)&&A===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,a,c,u,d){let m=u,y=c?-1:1;for(let A=0;A<2;A++){for(;(c?m>=r:m<a)&&c===t.get(m,d);){if(Math.abs(u-m)>Qe.CODEWORD_SKEW_SIZE)return u;m+=y}y=-y,c=!c}return m}static checkCodewordSkew(t,r,a){return r-Qe.CODEWORD_SKEW_SIZE<=t&&t<=a+Qe.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,a){if(t.length===0)throw J.getFormatInstance();let c=1<<r+1,u=Qe.correctErrors(t,a,c);Qe.verifyCodewordCount(t,c);let d=se.decode(t,""+r);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(t,r,a){if(r!=null&&r.length>a/2+Qe.MAX_ERRORS||a<0||a>Qe.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return Qe.errorCorrection.decode(t,a,r)}static verifyCodewordCount(t,r){if(t.length<4)throw J.getFormatInstance();let a=t[0];if(a>t.length)throw J.getFormatInstance();if(a===0)if(r<t.length)t[0]=t.length-r;else throw J.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),a=0,c=r.length-1;for(;!((t&1)!==a&&(a=t&1,c--,c<0));)r[c]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Qe.getCodewordBucketNumber(Qe.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Ki;for(let a=0;a<t.length;a++){r.format("Row %2d: ",a);for(let c=0;c<t[a].length;c++){let u=t[a][c];u.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}r.format("%n")}return r.toString()}}Qe.CODEWORD_SKEW_SIZE=2,Qe.MAX_ERRORS=3,Qe.MAX_EC_CODEWORDS=512,Qe.errorCorrection=new Vr;class Tn{decode(t,r=null){let a=Tn.decode(t,r,!1);if(a==null||a.length===0||a[0]==null)throw ee.getNotFoundInstance();return a[0]}decodeMultiple(t,r=null){try{return Tn.decode(t,r,!0)}catch(a){throw a instanceof J||a instanceof k?ee.getNotFoundInstance():a}}static decode(t,r,a){const c=new Array,u=qe.detectMultiple(t,r,a);for(const d of u.getPoints()){const m=Qe.decode(u.getBits(),d[4],d[5],d[6],d[7],Tn.getMinCodewordWidth(d),Tn.getMaxCodewordWidth(d)),y=new _e(m.getText(),m.getRawBytes(),void 0,d,Ee.PDF_417);y.putMetadata(mt.ERROR_CORRECTION_LEVEL,m.getECLevel());const A=m.getOther();A!=null&&y.putMetadata(mt.PDF417_EXTRA_METADATA,A),c.push(y)}return c.map(d=>d)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?P.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Tn.getMaxWidth(t[0],t[4]),Tn.getMaxWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(Tn.getMaxWidth(t[1],t[5]),Tn.getMaxWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Tn.getMinWidth(t[0],t[4]),Tn.getMinWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(Tn.getMinWidth(t[1],t[5]),Tn.getMinWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class ms extends w{}ms.kind="ReaderException";class Oo{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!h(t)&&t.get(be.TRY_HARDER)===!0,a=h(t)?null:t.get(be.POSSIBLE_FORMATS),c=new Array;if(!h(a)){const u=a.some(d=>d===Ee.UPC_A||d===Ee.UPC_E||d===Ee.EAN_13||d===Ee.EAN_8||d===Ee.CODABAR||d===Ee.CODE_39||d===Ee.CODE_93||d===Ee.CODE_128||d===Ee.ITF||d===Ee.RSS_14||d===Ee.RSS_EXPANDED);u&&!r&&c.push(new ur(t,this.verbose)),a.includes(Ee.QR_CODE)&&c.push(new Gr),a.includes(Ee.DATA_MATRIX)&&c.push(new Hr),a.includes(Ee.AZTEC)&&c.push(new ls),a.includes(Ee.PDF_417)&&c.push(new Tn),u&&r&&c.push(new ur(t,this.verbose))}c.length===0&&(r||c.push(new ur(t,this.verbose)),c.push(new Gr),c.push(new Hr),c.push(new ls),c.push(new Tn),r&&c.push(new ur(t,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new ms("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(a){if(a instanceof ms)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class Io extends Ae{constructor(t=null,r=500){const a=new Oo;a.setHints(t),super(a,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class wu extends Ae{constructor(t=500){super(new Tn,t)}}class bu extends Ae{constructor(t=500){super(new Gr,t)}}var wl;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(wl||(wl={}));var hn=wl;class Ba{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new An(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let a=r[r.length-1];const c=this.field;for(let u=r.length;u<=t;u++){const d=a.multiply(new An(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));r.push(d),a=d}}return r[t]}encode(t,r){if(r===0)throw new R("No error correction bytes");const a=t.length-r;if(a<=0)throw new R("No data bytes provided");const c=this.buildGenerator(r),u=new Int32Array(a);F.arraycopy(t,0,u,0,a);let d=new An(this.field,u);d=d.multiplyByMonomial(r,1);const y=d.divide(c)[1].getCoefficients(),A=r-y.length;for(let S=0;S<A;S++)t[a+S]=0;F.arraycopy(y,0,t,a+A,y.length)}}class Kt{constructor(){}static applyMaskPenaltyRule1(t){return Kt.applyMaskPenaltyRule1Internal(t,!0)+Kt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u-1;d++){const m=a[d];for(let y=0;y<c-1;y++){const A=m[y];A===m[y+1]&&A===a[d+1][y]&&A===a[d+1][y+1]&&r++}}return Kt.N2*r}static applyMaskPenaltyRule3(t){let r=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u;d++)for(let m=0;m<c;m++){const y=a[d];m+6<c&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(Kt.isWhiteHorizontal(y,m-4,m)||Kt.isWhiteHorizontal(y,m+7,m+11))&&r++,d+6<u&&a[d][m]===1&&a[d+1][m]===0&&a[d+2][m]===1&&a[d+3][m]===1&&a[d+4][m]===1&&a[d+5][m]===0&&a[d+6][m]===1&&(Kt.isWhiteVertical(a,m,d-4,d)||Kt.isWhiteVertical(a,m,d+7,d+11))&&r++}return r*Kt.N3}static isWhiteHorizontal(t,r,a){r=Math.max(r,0),a=Math.min(a,t.length);for(let c=r;c<a;c++)if(t[c]===1)return!1;return!0}static isWhiteVertical(t,r,a,c){a=Math.max(a,0),c=Math.min(c,t.length);for(let u=a;u<c;u++)if(t[u][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const A=a[y];for(let S=0;S<c;S++)A[S]===1&&r++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*Kt.N4}static getDataMaskBit(t,r,a){let c,u;switch(t){case 0:c=a+r&1;break;case 1:c=a&1;break;case 2:c=r%3;break;case 3:c=(a+r)%3;break;case 4:c=Math.floor(a/2)+Math.floor(r/3)&1;break;case 5:u=a*r,c=(u&1)+u%3;break;case 6:u=a*r,c=(u&1)+u%3&1;break;case 7:u=a*r,c=u%3+(a+r&1)&1;break;default:throw new R("Invalid mask pattern: "+t)}return c===0}static applyMaskPenaltyRule1Internal(t,r){let a=0;const c=r?t.getHeight():t.getWidth(),u=r?t.getWidth():t.getHeight(),d=t.getArray();for(let m=0;m<c;m++){let y=0,A=-1;for(let S=0;S<u;S++){const O=r?d[m][S]:d[S][m];O===A?y++:(y>=5&&(a+=Kt.N1+(y-5)),y=1,A=O)}y>=5&&(a+=Kt.N1+(y-5))}return a}}Kt.N1=3,Kt.N2=3,Kt.N3=40,Kt.N4=10;class ps{constructor(t,r){this.width=t,this.height=r;const a=new Array(r);for(let c=0;c!==r;c++)a[c]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,a){this.bytes[r][t]=a}setBoolean(t,r,a){this.bytes[r][t]=a?1:0}clear(t){for(const r of this.bytes)X.fill(r,t)}equals(t){if(!(t instanceof ps))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=r.bytes[a];for(let m=0,y=this.width;m<y;++m)if(u[m]!==d[m])return!1}return!0}toString(){const t=new We;for(let r=0,a=this.height;r<a;++r){const c=this.bytes[r];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class gi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new We;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<gi.NUM_MASK_PATTERNS}}gi.NUM_MASK_PATTERNS=8;class St extends w{}St.kind="WriterException";class Fe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,a,c,u){Fe.clearMatrix(u),Fe.embedBasicPatterns(a,u),Fe.embedTypeInfo(r,c,u),Fe.maybeEmbedVersionInfo(a,u),Fe.embedDataBits(t,c,u)}static embedBasicPatterns(t,r){Fe.embedPositionDetectionPatternsAndSeparators(r),Fe.embedDarkDotAtLeftBottomCorner(r),Fe.maybeEmbedPositionAdjustmentPatterns(t,r),Fe.embedTimingPatterns(r)}static embedTypeInfo(t,r,a){const c=new ce;Fe.makeTypeInfoBits(t,r,c);for(let u=0,d=c.getSize();u<d;++u){const m=c.get(c.getSize()-1-u),y=Fe.TYPE_INFO_COORDINATES[u],A=y[0],S=y[1];if(a.setBoolean(A,S,m),u<8){const O=a.getWidth()-u-1;a.setBoolean(O,8,m)}else{const D=a.getHeight()-7+(u-8);a.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const a=new ce;Fe.makeVersionInfoBits(t,a);let c=17;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const m=a.get(c);c--,r.setBoolean(u,r.getHeight()-11+d,m),r.setBoolean(r.getHeight()-11+d,u,m)}}static embedDataBits(t,r,a){let c=0,u=-1,d=a.getWidth()-1,m=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);m>=0&&m<a.getHeight();){for(let y=0;y<2;++y){const A=d-y;if(!Fe.isEmpty(a.get(A,m)))continue;let S;c<t.getSize()?(S=t.get(c),++c):S=!1,r!==255&&Kt.getDataMaskBit(r,A,m)&&(S=!S),a.setBoolean(A,m,S)}m+=u}u=-u,m+=u,d-=2}if(c!==t.getSize())throw new St("Not all bits consumed: "+c+"/"+t.getSize())}static findMSBSet(t){return 32-P.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new R("0 polynomial");const a=Fe.findMSBSet(r);for(t<<=a-1;Fe.findMSBSet(t)>=a;)t^=r<<Fe.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,r,a){if(!gi.isValidMaskPattern(r))throw new St("Invalid mask pattern");const c=t.getBits()<<3|r;a.appendBits(c,5);const u=Fe.calculateBCHCode(c,Fe.TYPE_INFO_POLY);a.appendBits(u,10);const d=new ce;if(d.appendBits(Fe.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new St("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const a=Fe.calculateBCHCode(t.getVersionNumber(),Fe.VERSION_INFO_POLY);if(r.appendBits(a,12),r.getSize()!==18)throw new St("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const a=(r+1)%2;Fe.isEmpty(t.get(r,6))&&t.setNumber(r,6,a),Fe.isEmpty(t.get(6,r))&&t.setNumber(6,r,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new St;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,a){for(let c=0;c<8;++c){if(!Fe.isEmpty(a.get(t+c,r)))throw new St;a.setNumber(t+c,r,0)}}static embedVerticalSeparationPattern(t,r,a){for(let c=0;c<7;++c){if(!Fe.isEmpty(a.get(t,r+c)))throw new St;a.setNumber(t,r+c,0)}}static embedPositionAdjustmentPattern(t,r,a){for(let c=0;c<5;++c){const u=Fe.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(t+d,r+c,u[d])}}static embedPositionDetectionPattern(t,r,a){for(let c=0;c<7;++c){const u=Fe.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(t+d,r+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(t){const r=Fe.POSITION_DETECTION_PATTERN[0].length;Fe.embedPositionDetectionPattern(0,0,t),Fe.embedPositionDetectionPattern(t.getWidth()-r,0,t),Fe.embedPositionDetectionPattern(0,t.getWidth()-r,t);const a=8;Fe.embedHorizontalSeparationPattern(0,a-1,t),Fe.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Fe.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const c=7;Fe.embedVerticalSeparationPattern(c,0,t),Fe.embedVerticalSeparationPattern(t.getHeight()-c-1,0,t),Fe.embedVerticalSeparationPattern(c,t.getHeight()-c,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,c=Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const m=c[u];if(m>=0)for(let y=0;y!==d;y++){const A=c[y];A>=0&&Fe.isEmpty(r.get(A,m))&&Fe.embedPositionAdjustmentPattern(A-2,m-2,r)}}}}Fe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Fe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Fe.VERSION_INFO_POLY=7973,Fe.TYPE_INFO_POLY=1335,Fe.TYPE_INFO_MASK_PATTERN=21522;class vu{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Pt{constructor(){}static calculateMaskPenalty(t){return Kt.applyMaskPenaltyRule1(t)+Kt.applyMaskPenaltyRule2(t)+Kt.applyMaskPenaltyRule3(t)+Kt.applyMaskPenaltyRule4(t)}static encode(t,r,a=null){let c=Pt.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(hn.CHARACTER_SET)!==void 0;u&&(c=a.get(hn.CHARACTER_SET).toString());const d=this.chooseMode(t,c),m=new ce;if(d===Ue.BYTE&&(u||Pt.DEFAULT_BYTE_MODE_ENCODING!==c)){const xe=he.getCharacterSetECIByName(c);xe!==void 0&&this.appendECI(xe,m)}this.appendModeInfo(d,m);const y=new ce;this.appendBytes(t,d,y,c);let A;if(a!==null&&a.get(hn.QR_VERSION)!==void 0){const xe=Number.parseInt(a.get(hn.QR_VERSION).toString(),10);A=Me.getVersionForNumber(xe);const pe=this.calculateBitsNeeded(d,m,y,A);if(!this.willFit(pe,A,r))throw new St("Data too big for requested version")}else A=this.recommendVersion(r,d,m,y);const S=new ce;S.appendBitArray(m);const O=d===Ue.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(O,A,d,S),S.appendBitArray(y);const D=A.getECBlocksForLevel(r),U=A.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(U,S);const G=this.interleaveWithECBytes(S,A.getTotalCodewords(),U,D.getNumBlocks()),V=new gi;V.setECLevel(r),V.setMode(d),V.setVersion(A);const Z=A.getDimensionForVersion(),ae=new ps(Z,Z),ye=this.chooseMaskPattern(G,r,A,ae);return V.setMaskPattern(ye),Fe.buildMatrix(G,r,A,ye,ae),V.setMatrix(ae),V}static recommendVersion(t,r,a,c){const u=this.calculateBitsNeeded(r,a,c,Me.getVersionForNumber(1)),d=this.chooseVersion(u,t),m=this.calculateBitsNeeded(r,a,c,d);return this.chooseVersion(m,t)}static calculateBitsNeeded(t,r,a,c){return r.getSize()+t.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(t){return t<Pt.ALPHANUMERIC_TABLE.length?Pt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(he.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Ue.KANJI;let a=!1,c=!1;for(let u=0,d=t.length;u<d;++u){const m=t.charAt(u);if(Pt.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Ue.BYTE}return c?Ue.ALPHANUMERIC:a?Ue.NUMERIC:Ue.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=ve.encode(t,he.SJIS)}catch{return!1}const a=r.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=r[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,r,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let m=0;m<gi.NUM_MASK_PATTERNS;m++){Fe.buildMatrix(t,r,a,m,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,d=m)}return d}static chooseVersion(t,r){for(let a=1;a<=40;a++){const c=Me.getVersionForNumber(a);if(Pt.willFit(t,c,r))return c}throw new St("Data too big")}static willFit(t,r,a){const c=r.getTotalCodewords(),d=r.getECBlocksForLevel(a).getTotalECCodewords(),m=c-d,y=(t+7)/8;return m>=y}static terminateBits(t,r){const a=t*8;if(r.getSize()>a)throw new St("data bits cannot fit in the QR Code"+r.getSize()+" > "+a);for(let d=0;d<4&&r.getSize()<a;++d)r.appendBit(!1);const c=r.getSize()&7;if(c>0)for(let d=c;d<8;d++)r.appendBit(!1);const u=t-r.getSizeInBytes();for(let d=0;d<u;++d)r.appendBits((d&1)===0?236:17,8);if(r.getSize()!==a)throw new St("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,a,c,u,d){if(c>=a)throw new St("Block ID too large");const m=t%a,y=a-m,A=Math.floor(t/a),S=A+1,O=Math.floor(r/a),D=O+1,U=A-O,G=S-D;if(U!==G)throw new St("EC bytes mismatch");if(a!==y+m)throw new St("RS blocks mismatch");if(t!==(O+U)*y+(D+G)*m)throw new St("Total bytes mismatch");c<y?(u[0]=O,d[0]=U):(u[0]=D,d[0]=G)}static interleaveWithECBytes(t,r,a,c){if(t.getSizeInBytes()!==a)throw new St("Number of bits and data bytes does not match");let u=0,d=0,m=0;const y=new Array;for(let S=0;S<c;++S){const O=new Int32Array(1),D=new Int32Array(1);Pt.getNumDataBytesAndNumECBytesForBlockID(r,a,c,S,O,D);const U=O[0],G=new Uint8Array(U);t.toBytes(8*u,G,0,U);const V=Pt.generateECBytes(G,D[0]);y.push(new vu(G,V)),d=Math.max(d,U),m=Math.max(m,V.length),u+=O[0]}if(a!==u)throw new St("Data bytes does not match offset");const A=new ce;for(let S=0;S<d;++S)for(const O of y){const D=O.getDataBytes();S<D.length&&A.appendBits(D[S],8)}for(let S=0;S<m;++S)for(const O of y){const D=O.getErrorCorrectionBytes();S<D.length&&A.appendBits(D[S],8)}if(r!==A.getSizeInBytes())throw new St("Interleaving error: "+r+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(t,r){const a=t.length,c=new Int32Array(a+r);for(let d=0;d<a;d++)c[d]=t[d]&255;new Ba(pt.QR_CODE_FIELD_256).encode(c,r);const u=new Uint8Array(r);for(let d=0;d<r;d++)u[d]=c[a+d];return u}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,a,c){const u=a.getCharacterCountBits(r);if(t>=1<<u)throw new St(t+" is bigger than "+((1<<u)-1));c.appendBits(t,u)}static appendBytes(t,r,a,c){switch(r){case Ue.NUMERIC:Pt.appendNumericBytes(t,a);break;case Ue.ALPHANUMERIC:Pt.appendAlphanumericBytes(t,a);break;case Ue.BYTE:Pt.append8BitBytes(t,a,c);break;case Ue.KANJI:Pt.appendKanjiBytes(t,a);break;default:throw new St("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Pt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const a=t.length;let c=0;for(;c<a;){const u=Pt.getDigit(t.charAt(c));if(c+2<a){const d=Pt.getDigit(t.charAt(c+1)),m=Pt.getDigit(t.charAt(c+2));r.appendBits(u*100+d*10+m,10),c+=3}else if(c+1<a){const d=Pt.getDigit(t.charAt(c+1));r.appendBits(u*10+d,7),c+=2}else r.appendBits(u,4),c++}}static appendAlphanumericBytes(t,r){const a=t.length;let c=0;for(;c<a;){const u=Pt.getAlphanumericCode(t.charCodeAt(c));if(u===-1)throw new St;if(c+1<a){const d=Pt.getAlphanumericCode(t.charCodeAt(c+1));if(d===-1)throw new St;r.appendBits(u*45+d,11),c+=2}else r.appendBits(u,6),c++}}static append8BitBytes(t,r,a){let c;try{c=ve.encode(t,a)}catch(u){throw new St(u)}for(let u=0,d=c.length;u!==d;u++){const m=c[u];r.appendBits(m,8)}}static appendKanjiBytes(t,r){let a;try{a=ve.encode(t,he.SJIS)}catch(u){throw new St(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,m=a[u+1]&255,y=d<<8&4294967295|m;let A=-1;if(y>=33088&&y<=40956?A=y-33088:y>=57408&&y<=60351&&(A=y-49472),A===-1)throw new St("Invalid byte sequence");const S=(A>>8)*192+(A&255);r.appendBits(S,13)}}static appendECI(t,r){r.appendBits(Ue.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Pt.DEFAULT_BYTE_MODE_ENCODING=he.UTF8.getName();class mi{write(t,r,a,c=null){if(t.length===0)throw new R("Found empty contents");if(r<0||a<0)throw new R("Requested dimensions are too small: "+r+"x"+a);let u=nt.L,d=mi.QUIET_ZONE_SIZE;c!==null&&(c.get(hn.ERROR_CORRECTION)!==void 0&&(u=nt.fromString(c.get(hn.ERROR_CORRECTION).toString())),c.get(hn.MARGIN)!==void 0&&(d=Number.parseInt(c.get(hn.MARGIN).toString(),10)));const m=Pt.encode(t,u,c);return this.renderResult(m,r,a,d)}writeToDom(t,r,a,c,u=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(r,a,c,u);t&&t.appendChild(d)}renderResult(t,r,a,c){const u=t.getMatrix();if(u===null)throw new Qn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,A=m+c*2,S=Math.max(r,y),O=Math.max(a,A),D=Math.min(Math.floor(S/y),Math.floor(O/A)),U=Math.floor((S-d*D)/2),G=Math.floor((O-m*D)/2),V=this.createSVGElement(S,O);for(let Z=0,ae=G;Z<m;Z++,ae+=D)for(let ye=0,xe=U;ye<d;ye++,xe+=D)if(u.get(ye,Z)===1){const pe=this.createSvgRectElement(xe,ae,D,D);V.appendChild(pe)}return V}createSVGElement(t,r){const a=document.createElementNS(mi.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",r.toString()),a}createSvgRectElement(t,r,a,c){const u=document.createElementNS(mi.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}mi.QUIET_ZONE_SIZE=4,mi.SVG_NS="http://www.w3.org/2000/svg";class Qi{encode(t,r,a,c,u){if(t.length===0)throw new R("Found empty contents");if(r!==Ee.QR_CODE)throw new R("Can only encode QR_CODE, but got "+r);if(a<0||c<0)throw new R(`Requested dimensions are too small: ${a}x${c}`);let d=nt.L,m=Qi.QUIET_ZONE_SIZE;u!==null&&(u.get(hn.ERROR_CORRECTION)!==void 0&&(d=nt.fromString(u.get(hn.ERROR_CORRECTION).toString())),u.get(hn.MARGIN)!==void 0&&(m=Number.parseInt(u.get(hn.MARGIN).toString(),10)));const y=Pt.encode(t,d,u);return Qi.renderResult(y,a,c,m)}static renderResult(t,r,a,c){const u=t.getMatrix();if(u===null)throw new Qn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,A=m+c*2,S=Math.max(r,y),O=Math.max(a,A),D=Math.min(Math.floor(S/y),Math.floor(O/A)),U=Math.floor((S-d*D)/2),G=Math.floor((O-m*D)/2),V=new Te(S,O);for(let Z=0,ae=G;Z<m;Z++,ae+=D)for(let ye=0,xe=U;ye<d;ye++,xe+=D)u.get(ye,Z)===1&&V.setRegion(xe,ae,D,D);return V}}Qi.QUIET_ZONE_SIZE=4;class Eu{encode(t,r,a,c,u){let d;if(r===Ee.QR_CODE)d=new Qi;else throw new R("No encoder available for format "+r);return d.encode(t,r,a,c,u)}}class Nr extends Le{constructor(t,r,a,c,u,d,m,y){if(super(d,m),this.yuvData=t,this.dataWidth=r,this.dataHeight=a,this.left=c,this.top=u,c+d>r||u+m>a)throw new R("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,m)}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,c,r,0,a),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const a=t*r,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return F.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<r;d++){const m=d*t;F.arraycopy(this.yuvData,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,r,a,c){return new Nr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,a,c,!1)}renderThumbnail(){const t=this.getWidth()/Nr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Nr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*r),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const m=d*t;for(let y=0;y<t;y++){const A=c[u+y*Nr.THUMBNAIL_SCALE_FACTOR]&255;a[m+y]=4278190080|A*65793}u+=this.dataWidth*Nr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Nr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Nr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<r;c++,u+=this.dataWidth){const d=u+t/2;for(let m=u,y=u+t-1;m<d;m++,y--){const A=a[m];a[m]=a[y],a[y]=A}}}invert(){return new $e(this)}}Nr.THUMBNAIL_SCALE_FACTOR=2;class bl extends Le{constructor(t,r,a,c,u,d,m){if(super(r,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=m,t.BYTES_PER_ELEMENT===4){const y=r*a,A=new Uint8ClampedArray(y);for(let S=0;S<y;S++){const O=t[S],D=O>>16&255,U=O>>7&510,G=O&255;A[S]=(D+U+G)/4&255}this.luminances=A}else this.luminances=t;if(c===void 0&&(this.dataWidth=r),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+a>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,c,r,0,a),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const a=t*r,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return F.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<r;d++){const m=d*t;F.arraycopy(this.luminances,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,r,a,c){return new bl(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new $e(this)}}class Do extends he{static forName(t){return this.getCharacterSetECIByName(t)}}class ka{}ka.ISO_8859_1=he.ISO8859_1;class Ji{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Mo{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Bo{constructor(t){this.previous=t}getPrevious(){return this.previous}}class pi extends Bo{constructor(t,r,a){super(t),this.value=r,this.bitCount=a}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new pi(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new pi(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+P.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class xs extends pi{constructor(t,r,a){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=a}appendTo(t,r){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+a],8)}addBinaryShift(t,r){return new xs(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ko(N,t,r){return new xs(N,t,r)}function $i(N,t,r){return new pi(N,t,r)}const ea=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],li=0,ys=1,tr=2,vl=3,dr=4,La=new pi(null,0,0),xi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Au(N){for(let t of N)X.fill(t,-1);return N[li][dr]=0,N[ys][dr]=0,N[ys][li]=28,N[vl][dr]=0,N[tr][dr]=0,N[tr][li]=15,N}const Ua=Au(X.createInt32Array(6,6));class gr{constructor(t,r,a,c){this.token=t,this.mode=r,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let a=this.bitCount,c=this.token;if(t!==this.mode){let d=xi[this.mode][t];c=$i(c,d&65535,d>>16),a+=d>>16}let u=t===tr?4:5;return c=$i(c,r,u),new gr(c,t,0,a+u)}shiftAndAppend(t,r){let a=this.token,c=this.mode===tr?4:5;return a=$i(a,Ua[this.mode][t],c),a=$i(a,r,5),new gr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(t){let r=this.token,a=this.mode,c=this.bitCount;if(this.mode===dr||this.mode===tr){let m=xi[a][li];r=$i(r,m&65535,m>>16),c+=m>>16,a=li}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gr(r,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=ko(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new gr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(xi[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=gr.calculateBinaryShiftCost(t)-gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let c=this.endBinaryShift(t.length).token;c!==null;c=c.getPrevious())r.unshift(c);let a=new ce;for(const c of r)c.appendTo(a,t);return a}toString(){return Ce.format("%s bits=%d bytes=%d",ea[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}gr.INITIAL_STATE=new gr(La,li,0,0);function Lo(N){const t=Ce.getCharCode(" "),r=Ce.getCharCode("."),a=Ce.getCharCode(",");N[li][t]=1;const c=Ce.getCharCode("Z"),u=Ce.getCharCode("A");for(let D=u;D<=c;D++)N[li][D]=D-u+2;N[ys][t]=1;const d=Ce.getCharCode("z"),m=Ce.getCharCode("a");for(let D=m;D<=d;D++)N[ys][D]=D-m+2;N[tr][t]=1;const y=Ce.getCharCode("9"),A=Ce.getCharCode("0");for(let D=A;D<=y;D++)N[tr][D]=D-A+2;N[tr][a]=12,N[tr][r]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<S.length;D++)N[vl][Ce.getCharCode(S[D])]=D;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<O.length;D++)Ce.getCharCode(O[D])>0&&(N[dr][Ce.getCharCode(O[D])]=D);return N}const ja=Lo(X.createInt32Array(5,256));class yi{constructor(t){this.text=t}encode(){const t=Ce.getCharCode(" "),r=Ce.getCharCode(`
`);let a=Mo.singletonList(gr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,m=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Ce.getCharCode("\r"):d=m===r?2:0;break;case Ce.getCharCode("."):d=m===t?3:0;break;case Ce.getCharCode(","):d=m===t?4:0;break;case Ce.getCharCode(":"):d=m===t?5:0;break;default:d=0}d>0?(a=yi.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return Mo.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const a=[];for(let c of t)this.updateStateForChar(c,r,a);return yi.simplifyStates(a)}updateStateForChar(t,r,a){let c=this.text[r]&255,u=ja[t.getMode()][c]>0,d=null;for(let m=0;m<=dr;m++){let y=ja[m][c];if(y>0){if(d==null&&(d=t.endBinaryShift(r)),!u||m===t.getMode()||m===tr){const A=d.latchAndAppend(m,y);a.push(A)}if(!u&&Ua[t.getMode()][m]>=0){const A=d.shiftAndAppend(m,y);a.push(A)}}}if(t.getBinaryShiftByteCount()>0||ja[t.getMode()][c]===0){let m=t.addBinaryShiftChar(r);a.push(m)}}static updateStateListForPair(t,r,a){const c=[];for(let u of t)this.updateStateForPair(u,r,a,c);return this.simplifyStates(c)}static updateStateForPair(t,r,a,c){let u=t.endBinaryShift(r);if(c.push(u.latchAndAppend(dr,a)),t.getMode()!==dr&&c.push(u.shiftAndAppend(dr,a)),a===3||a===4){let d=u.latchAndAppend(tr,16-a).latchAndAppend(tr,1);c.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);c.push(d)}}static simplifyStates(t){let r=[];for(const a of t){let c=!0;for(const u of r){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(r=r.filter(d=>d!==u))}c&&r.push(a)}return r}}class ut{constructor(){}static encodeBytes(t){return ut.encode(t,ut.DEFAULT_EC_PERCENT,ut.DEFAULT_AZTEC_LAYERS)}static encode(t,r,a){let c=new yi(t).encode(),u=P.truncDivision(c.getSize()*r,100)+11,d=c.getSize()+u,m,y,A,S,O;if(a!==ut.DEFAULT_AZTEC_LAYERS){if(m=a<0,y=Math.abs(a),y>(m?ut.MAX_NB_BITS_COMPACT:ut.MAX_NB_BITS))throw new R(Ce.format("Illegal value %s for layers",a));A=ut.totalBitsInLayer(y,m),S=ut.WORD_SIZE[y];let pe=A-A%S;if(O=ut.stuffBits(c,S),O.getSize()+u>pe)throw new R("Data to large for user specified layer");if(m&&O.getSize()>S*64)throw new R("Data to large for user specified layer")}else{S=0,O=null;for(let pe=0;;pe++){if(pe>ut.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(m=pe<=3,y=m?pe+1:pe,A=ut.totalBitsInLayer(y,m),d>A)continue;(O==null||S!==ut.WORD_SIZE[y])&&(S=ut.WORD_SIZE[y],O=ut.stuffBits(c,S));let et=A-A%S;if(!(m&&O.getSize()>S*64)&&O.getSize()+u<=et)break}}let D=ut.generateCheckWords(O,A,S),U=O.getSize()/S,G=ut.generateModeMessage(m,y,U),V=(m?11:14)+y*4,Z=new Int32Array(V),ae;if(m){ae=V;for(let pe=0;pe<Z.length;pe++)Z[pe]=pe}else{ae=V+1+2*P.truncDivision(P.truncDivision(V,2)-1,15);let pe=P.truncDivision(V,2),et=P.truncDivision(ae,2);for(let Xe=0;Xe<pe;Xe++){let nn=Xe+P.truncDivision(Xe,15);Z[pe-Xe-1]=et-nn-1,Z[pe+Xe]=et+nn+1}}let ye=new Te(ae);for(let pe=0,et=0;pe<y;pe++){let Xe=(y-pe)*4+(m?9:12);for(let nn=0;nn<Xe;nn++){let nr=nn*2;for(let kn=0;kn<2;kn++)D.get(et+nr+kn)&&ye.set(Z[pe*2+kn],Z[pe*2+nn]),D.get(et+Xe*2+nr+kn)&&ye.set(Z[pe*2+nn],Z[V-1-pe*2-kn]),D.get(et+Xe*4+nr+kn)&&ye.set(Z[V-1-pe*2-kn],Z[V-1-pe*2-nn]),D.get(et+Xe*6+nr+kn)&&ye.set(Z[V-1-pe*2-nn],Z[pe*2+kn])}et+=Xe*8}if(ut.drawModeMessage(ye,m,ae,G),m)ut.drawBullsEye(ye,P.truncDivision(ae,2),5);else{ut.drawBullsEye(ye,P.truncDivision(ae,2),7);for(let pe=0,et=0;pe<P.truncDivision(V,2)-1;pe+=15,et+=16)for(let Xe=P.truncDivision(ae,2)&1;Xe<ae;Xe+=2)ye.set(P.truncDivision(ae,2)-et,Xe),ye.set(P.truncDivision(ae,2)+et,Xe),ye.set(Xe,P.truncDivision(ae,2)-et),ye.set(Xe,P.truncDivision(ae,2)+et)}let xe=new Ji;return xe.setCompact(m),xe.setSize(ae),xe.setLayers(y),xe.setCodeWords(U),xe.setMatrix(ye),xe}static drawBullsEye(t,r,a){for(let c=0;c<a;c+=2)for(let u=r-c;u<=r+c;u++)t.set(u,r-c),t.set(u,r+c),t.set(r-c,u),t.set(r+c,u);t.set(r-a,r-a),t.set(r-a+1,r-a),t.set(r-a,r-a+1),t.set(r+a,r-a),t.set(r+a,r-a+1),t.set(r+a,r+a-1)}static generateModeMessage(t,r,a){let c=new ce;return t?(c.appendBits(r-1,2),c.appendBits(a-1,6),c=ut.generateCheckWords(c,28,4)):(c.appendBits(r-1,5),c.appendBits(a-1,11),c=ut.generateCheckWords(c,40,4)),c}static drawModeMessage(t,r,a,c){let u=P.truncDivision(a,2);if(r)for(let d=0;d<7;d++){let m=u-3+d;c.get(d)&&t.set(m,u-5),c.get(d+7)&&t.set(u+5,m),c.get(20-d)&&t.set(m,u+5),c.get(27-d)&&t.set(u-5,m)}else for(let d=0;d<10;d++){let m=u-5+d+P.truncDivision(d,5);c.get(d)&&t.set(m,u-7),c.get(d+10)&&t.set(u+7,m),c.get(29-d)&&t.set(m,u+7),c.get(39-d)&&t.set(u-7,m)}}static generateCheckWords(t,r,a){let c=t.getSize()/a,u=new Ba(ut.getGF(a)),d=P.truncDivision(r,a),m=ut.bitsToWords(t,a,d);u.encode(m,d-c);let y=r%a,A=new ce;A.appendBits(0,y);for(const S of Array.from(m))A.appendBits(S,a);return A}static bitsToWords(t,r,a){let c=new Int32Array(a),u,d;for(u=0,d=t.getSize()/r;u<d;u++){let m=0;for(let y=0;y<r;y++)m|=t.get(u*r+y)?1<<r-y-1:0;c[u]=m}return c}static getGF(t){switch(t){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new R("Unsupported word size "+t)}}static stuffBits(t,r){let a=new ce,c=t.getSize(),u=(1<<r)-2;for(let d=0;d<c;d+=r){let m=0;for(let y=0;y<r;y++)(d+y>=c||t.get(d+y))&&(m|=1<<r-1-y);(m&u)===u?(a.appendBits(m&u,r),d--):(m&u)===0?(a.appendBits(m|1,r),d--):a.appendBits(m,r)}return a}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}ut.DEFAULT_EC_PERCENT=33,ut.DEFAULT_AZTEC_LAYERS=0,ut.MAX_NB_BITS=32,ut.MAX_NB_BITS_COMPACT=4,ut.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Pa{encode(t,r,a,c){return this.encodeWithHints(t,r,a,c,null)}encodeWithHints(t,r,a,c,u){let d=ka.ISO_8859_1,m=ut.DEFAULT_EC_PERCENT,y=ut.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(hn.CHARACTER_SET)&&(d=Do.forName(u.get(hn.CHARACTER_SET).toString())),u.has(hn.ERROR_CORRECTION)&&(m=P.parseInt(u.get(hn.ERROR_CORRECTION).toString())),u.has(hn.AZTEC_LAYERS)&&(y=P.parseInt(u.get(hn.AZTEC_LAYERS).toString()))),Pa.encodeLayers(t,r,a,c,d,m,y)}static encodeLayers(t,r,a,c,u,d,m){if(r!==Ee.AZTEC)throw new R("Can only encode AZTEC, but got "+r);let y=ut.encode(Ce.getBytes(t,u),d,m);return Pa.renderResult(y,a,c)}static renderResult(t,r,a){let c=t.getMatrix();if(c==null)throw new Qn;let u=c.getWidth(),d=c.getHeight(),m=Math.max(r,u),y=Math.max(a,d),A=Math.min(m/u,y/d),S=(m-u*A)/2,O=(y-d*A)/2,D=new Te(m,y);for(let U=0,G=O;U<d;U++,G+=A)for(let V=0,Z=S;V<u;V++,Z+=A)c.get(V,U)&&D.setRegion(Z,G,A,A);return D}}o.AbstractExpandedDecoder=cn,o.ArgumentException=C,o.ArithmeticException=Fi,o.AztecCode=Ji,o.AztecCodeReader=ls,o.AztecCodeWriter=Pa,o.AztecDecoder=Rt,o.AztecDetector=ul,o.AztecDetectorResult=Eo,o.AztecEncoder=ut,o.AztecHighLevelEncoder=yi,o.AztecPoint=Mn,o.BarcodeFormat=Ee,o.Binarizer=j,o.BinaryBitmap=M,o.BitArray=ce,o.BitMatrix=Te,o.BitSource=hr,o.BrowserAztecCodeReader=mu,o.BrowserBarcodeReader=pu,o.BrowserCodeReader=Ae,o.BrowserDatamatrixCodeReader=us,o.BrowserMultiFormatReader=Io,o.BrowserPDF417Reader=wu,o.BrowserQRCodeReader=bu,o.BrowserQRCodeSvgWriter=mi,o.CharacterSetECI=he,o.ChecksumException=k,o.Code128Reader=we,o.Code39Reader=Dt,o.DataMatrixDecodedBitStreamParser=zr,o.DataMatrixReader=Hr,o.DecodeHintType=be,o.DecoderResult=Lt,o.DefaultGridSampler=cl,o.DetectorResult=ss,o.EAN13Reader=Cr,o.EncodeHintType=hn,o.Exception=w,o.FormatException=J,o.GenericGF=pt,o.GenericGFPoly=An,o.GlobalHistogramBinarizer=ne,o.GridSampler=ol,o.GridSamplerInstance=or,o.HTMLCanvasElementLuminanceSource=tt,o.HybridBinarizer=fe,o.ITFReader=Ze,o.IllegalArgumentException=R,o.IllegalStateException=Qn,o.InvertedLuminanceSource=$e,o.LuminanceSource=Le,o.MathUtils=rt,o.MultiFormatOneDReader=ur,o.MultiFormatReader=Oo,o.MultiFormatWriter=Eu,o.NotFoundException=ee,o.OneDReader=zt,o.PDF417DecodedBitStreamParser=se,o.PDF417DecoderErrorCorrection=Vr,o.PDF417Reader=Tn,o.PDF417ResultMetadata=Zi,o.PerspectiveTransform=Jn,o.PlanarYUVLuminanceSource=Nr,o.QRCodeByteMatrix=ps,o.QRCodeDataMask=Xn,o.QRCodeDecodedBitStreamParser=Ut,o.QRCodeDecoderErrorCorrectionLevel=nt,o.QRCodeDecoderFormatInformation=gn,o.QRCodeEncoder=Pt,o.QRCodeEncoderQRCode=gi,o.QRCodeMaskUtil=Kt,o.QRCodeMatrixUtil=Fe,o.QRCodeMode=Ue,o.QRCodeReader=Gr,o.QRCodeVersion=Me,o.QRCodeWriter=Qi,o.RGBLuminanceSource=bl,o.RSS14Reader=Ct,o.RSSExpandedReader=me,o.ReaderException=ms,o.ReedSolomonDecoder=fi,o.ReedSolomonEncoder=Ba,o.ReedSolomonException=Zn,o.Result=_e,o.ResultMetadataType=mt,o.ResultPoint=Ie,o.StringUtils=Ce,o.UnsupportedOperationException=ot,o.VideoInputDevice=Y,o.WhiteRectangleDetector=Jt,o.WriterException=St,o.ZXingArrays=X,o.ZXingCharset=Do,o.ZXingInteger=P,o.ZXingStandardCharsets=ka,o.ZXingStringBuilder=We,o.ZXingStringEncoding=ve,o.ZXingSystem=F,o.createAbstractExpandedDecoder=Gi,Object.defineProperty(o,"__esModule",{value:!0})}))})(lo,lo.exports)),lo.exports}var $t=Qv();const Jv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var $g=(function(){function l(i,o,h){if(this.formatMap=new Map([[Oe.QR_CODE,$t.BarcodeFormat.QR_CODE],[Oe.AZTEC,$t.BarcodeFormat.AZTEC],[Oe.CODABAR,$t.BarcodeFormat.CODABAR],[Oe.CODE_39,$t.BarcodeFormat.CODE_39],[Oe.CODE_93,$t.BarcodeFormat.CODE_93],[Oe.CODE_128,$t.BarcodeFormat.CODE_128],[Oe.DATA_MATRIX,$t.BarcodeFormat.DATA_MATRIX],[Oe.MAXICODE,$t.BarcodeFormat.MAXICODE],[Oe.ITF,$t.BarcodeFormat.ITF],[Oe.EAN_13,$t.BarcodeFormat.EAN_13],[Oe.EAN_8,$t.BarcodeFormat.EAN_8],[Oe.PDF_417,$t.BarcodeFormat.PDF_417],[Oe.RSS_14,$t.BarcodeFormat.RSS_14],[Oe.RSS_EXPANDED,$t.BarcodeFormat.RSS_EXPANDED],[Oe.UPC_A,$t.BarcodeFormat.UPC_A],[Oe.UPC_E,$t.BarcodeFormat.UPC_E],[Oe.UPC_EAN_EXTENSION,$t.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Jv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=o,this.logger=h;var p=this.createZXingFormats(i),g=new Map;g.set($t.DecodeHintType.POSSIBLE_FORMATS,p),g.set($t.DecodeHintType.TRY_HARDER,!1),this.hints=g}return l.prototype.decodeAsync=function(i){var o=this;return new Promise(function(h,p){try{h(o.decode(i))}catch(g){p(g)}})},l.prototype.decode=function(i){var o=new $t.MultiFormatReader(this.verbose,this.hints),h=new $t.HTMLCanvasElementLuminanceSource(i),p=new $t.BinaryBitmap(new $t.HybridBinarizer(h)),g=o.decode(p);return{text:g.text,format:o2.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},l.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(o,h,p){i.set(o,h)}),i},l.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},l.prototype.createZXingFormats=function(i){for(var o=[],h=0,p=i;h<p.length;h++){var g=p[h];this.formatMap.has(g)?o.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return o},l.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},l})(),$v=function(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})},e3=function(l,i){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(w){return function(C){return E([w,C])}}function E(w){if(h)throw new TypeError("Generator is already executing.");for(;v&&(v=0,w[0]&&(o=0)),o;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,p=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=i.call(l,o)}catch(C){w=[6,C],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},em=(function(){function l(i,o,h){if(this.formatMap=new Map([[Oe.QR_CODE,"qr_code"],[Oe.AZTEC,"aztec"],[Oe.CODABAR,"codabar"],[Oe.CODE_39,"code_39"],[Oe.CODE_93,"code_93"],[Oe.CODE_128,"code_128"],[Oe.DATA_MATRIX,"data_matrix"],[Oe.ITF,"itf"],[Oe.EAN_13,"ean_13"],[Oe.EAN_8,"ean_8"],[Oe.PDF_417,"pdf417"],[Oe.UPC_A,"upc_a"],[Oe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!l.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=o,this.logger=h;var p=this.createBarcodeDetectorFormats(i);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return l.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var i=new BarcodeDetector({formats:["qr_code"]});return typeof i<"u"},l.prototype.decodeAsync=function(i){return $v(this,void 0,void 0,function(){var o,h;return e3(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(i)];case 1:if(o=p.sent(),!o||o.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(o),[2,{text:h.rawValue,format:o2.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},l.prototype.selectLargestBarcode=function(i){for(var o=null,h=0,p=0,g=i;p<g.length;p++){var v=g[p],_=v.boundingBox.width*v.boundingBox.height;_>h&&(h=_,o=v)}if(!o)throw"No largest barcode found";return o},l.prototype.createBarcodeDetectorFormats=function(i){for(var o=[],h=0,p=i;h<p.length;h++){var g=p[h];this.formatMap.has(g)?o.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:o}},l.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},l.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(o,h,p){i.set(o,h)}),i},l.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},l})(),tm=function(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})},nm=function(l,i){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(w){return function(C){return E([w,C])}}function E(w){if(h)throw new TypeError("Generator is already executing.");for(;v&&(v=0,w[0]&&(o=0)),o;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,p=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=i.call(l,o)}catch(C){w=[6,C],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},t3=(function(){function l(i,o,h,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,o&&em.isSupported()?(this.primaryDecoder=new em(i,h,p),this.secondaryDecoder=new $g(i,h,p)):this.primaryDecoder=new $g(i,h,p)}return l.prototype.decodeAsync=function(i){return tm(this,void 0,void 0,function(){var o;return nm(this,function(h){switch(h.label){case 0:o=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(i)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(o),[7];case 4:return[2]}})})},l.prototype.decodeRobustlyAsync=function(i){return tm(this,void 0,void 0,function(){var o,h;return nm(this,function(p){switch(p.label){case 0:o=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(i)];case 2:return[2,p.sent()];case 3:if(h=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(i)];throw h;case 4:return this.possiblyLogPerformance(o),[7];case 5:return[2]}})})},l.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},l.prototype.possiblyLogPerformance=function(i){if(this.verbose){var o=performance.now()-i;this.executionResults.push(o),this.executions++,this.possiblyFlushPerformanceReport()}},l.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var i=0,o=0,h=this.executionResults;o<h.length;o++){var p=h[o];i+=p}var g=i/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},l})(),nd=(function(){var l=function(i,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(h[g]=p[g])},l(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(i,o);function h(){this.constructor=i}i.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}})(),au=function(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})},su=function(l,i){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(w){return function(C){return E([w,C])}}function E(w){if(h)throw new TypeError("Generator is already executing.");for(;v&&(v=0,w[0]&&(o=0)),o;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,p=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=i.call(l,o)}catch(C){w=[6,C],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},u2=(function(){function l(i,o){this.name=i,this.track=o}return l.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},l.prototype.apply=function(i){var o={};o[this.name]=i;var h={advanced:[o]};return this.track.applyConstraints(h)},l.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var o=i[this.name];return o}return null},l})(),n3=(function(l){nd(i,l);function i(o,h){return l.call(this,o,h)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(o){var h={};h[this.name]=o;var p={advanced:[h]};return this.track.applyConstraints(p)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var o=this.track.getCapabilities(),h=o[this.name];return{min:h.min,max:h.max,step:h.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i})(u2),r3=(function(l){nd(i,l);function i(o){return l.call(this,"zoom",o)||this}return i})(n3),i3=(function(l){nd(i,l);function i(o){return l.call(this,"torch",o)||this}return i})(u2),a3=(function(){function l(i){this.track=i}return l.prototype.zoomFeature=function(){return new r3(this.track)},l.prototype.torchFeature=function(){return new i3(this.track)},l})(),s3=(function(){function l(i,o,h){this.isClosed=!1,this.parentElement=i,this.mediaStream=o,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),i.append(this.surface)}return l.prototype.createVideoElement=function(i){var o=document.createElement("video");return o.style.width="".concat(i,"px"),o.style.display="block",o.muted=!0,o.setAttribute("muted","true"),o.playsInline=!0,o},l.prototype.setupSurface=function(){var i=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var o=function(){var h=i.surface.clientWidth,p=i.surface.clientHeight;i.callbacks.onRenderSurfaceReady(h,p),i.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.srcObject=this.mediaStream,this.surface.play()},l.create=function(i,o,h,p){return au(this,void 0,void 0,function(){var g,v;return su(this,function(_){switch(_.label){case 0:return g=new l(i,o,p),h.aspectRatio?(v={aspectRatio:h.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(v)]):[3,2];case 1:_.sent(),_.label=2;case 2:return g.setupSurface(),[2,g]}})})},l.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},l.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},l.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},l.prototype.resume=function(i){this.failIfClosed();var o=this,h=function(){setTimeout(i,200),o.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},l.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},l.prototype.getSurface=function(){return this.failIfClosed(),this.surface},l.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},l.prototype.applyVideoConstraints=function(i){return au(this,void 0,void 0,function(){return su(this,function(o){if("aspectRatio"in i)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(i)]})})},l.prototype.close=function(){if(this.isClosed)return Promise.resolve();var i=this;return new Promise(function(o,h){var p=i.mediaStream.getVideoTracks(),g=p.length,v=0;i.mediaStream.getVideoTracks().forEach(function(_){i.mediaStream.removeTrack(_),_.stop(),++v,v>=g&&(i.isClosed=!0,i.parentElement.removeChild(i.surface),o())})})},l.prototype.getCapabilities=function(){return new a3(this.getFirstTrackOrFail())},l})(),l3=(function(){function l(i){this.mediaStream=i}return l.prototype.render=function(i,o,h){return au(this,void 0,void 0,function(){return su(this,function(p){return[2,s3.create(i,this.mediaStream,o,h)]})})},l.create=function(i){return au(this,void 0,void 0,function(){var o,h;return su(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return o={audio:!1,video:i},[4,navigator.mediaDevices.getUserMedia(o)];case 1:return h=p.sent(),[2,new l(h)]}})})},l})(),rm=function(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})},im=function(l,i){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(w){return function(C){return E([w,C])}}function E(w){if(h)throw new TypeError("Generator is already executing.");for(;v&&(v=0,w[0]&&(o=0)),o;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,p=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=i.call(l,o)}catch(C){w=[6,C],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o3=(function(){function l(){}return l.failIfNotSupported=function(){return rm(this,void 0,void 0,function(){return im(this,function(i){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new l]})})},l.prototype.create=function(i){return rm(this,void 0,void 0,function(){return im(this,function(o){return[2,l3.create(i)]})})},l})(),c3=function(l,i,o,h){function p(g){return g instanceof o?g:new o(function(v){v(g)})}return new(o||(o=Promise))(function(g,v){function _(C){try{w(h.next(C))}catch(R){v(R)}}function E(C){try{w(h.throw(C))}catch(R){v(R)}}function w(C){C.done?g(C.value):p(C.value).then(_,E)}w((h=h.apply(l,i||[])).next())})},u3=function(l,i){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,p,g,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(w){return function(C){return E([w,C])}}function E(w){if(h)throw new TypeError("Generator is already executing.");for(;v&&(v=0,w[0]&&(o=0)),o;)try{if(h=1,p&&(g=w[0]&2?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,p=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=i.call(l,o)}catch(C){w=[6,C],p=0}finally{h=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},h3=(function(){function l(){}return l.retrieve=function(){if(navigator.mediaDevices)return l.getCamerasFromMediaDevices();var i=MediaStreamTrack;return MediaStreamTrack&&i.getSources?l.getCamerasFromMediaStreamTrack():l.rejectWithError()},l.rejectWithError=function(){var i=nl.unableToQuerySupportedDevices();return l.isHttpsOrLocalhost()||(i=nl.insecureContextCameraQueryError()),Promise.reject(i)},l.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var i=location.host.split(":")[0];return i==="127.0.0.1"||i==="localhost"},l.getCamerasFromMediaDevices=function(){return c3(this,void 0,void 0,function(){var i,o,h,p,g,v,_;return u3(this,function(E){switch(E.label){case 0:return i=function(w){for(var C=w.getVideoTracks(),R=0,M=C;R<M.length;R++){var k=M[R];k.enabled=!1,k.stop(),w.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return o=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=E.sent(),p=[],g=0,v=h;g<v.length;g++)_=v[g],_.kind==="videoinput"&&p.push({id:_.deviceId,label:_.label});return i(o),[2,p]}})})},l.getCamerasFromMediaStreamTrack=function(){return new Promise(function(i,o){var h=function(g){for(var v=[],_=0,E=g;_<E.length;_++){var w=E[_];w.kind==="video"&&v.push({id:w.id,label:w.label})}i(v)},p=MediaStreamTrack;p.getSources(h)})},l})(),ln;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.NOT_STARTED=1]="NOT_STARTED",l[l.SCANNING=2]="SCANNING",l[l.PAUSED=3]="PAUSED"})(ln||(ln={}));var f3=(function(){function l(){this.state=ln.NOT_STARTED,this.onGoingTransactionNewState=ln.UNKNOWN}return l.prototype.directTransition=function(i){this.failIfTransitionOngoing(),this.validateTransition(i),this.state=i},l.prototype.startTransition=function(i){return this.failIfTransitionOngoing(),this.validateTransition(i),this.onGoingTransactionNewState=i,this},l.prototype.execute=function(){if(this.onGoingTransactionNewState===ln.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var i=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ln.UNKNOWN,this.directTransition(i)},l.prototype.cancel=function(){if(this.onGoingTransactionNewState===ln.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ln.UNKNOWN},l.prototype.getState=function(){return this.state},l.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ln.UNKNOWN)throw"Cannot transition to a new state, already under transition"},l.prototype.validateTransition=function(i){switch(this.state){case ln.UNKNOWN:throw"Transition from unknown is not allowed";case ln.NOT_STARTED:this.failIfNewStateIs(i,[ln.PAUSED]);break;case ln.SCANNING:break;case ln.PAUSED:break}},l.prototype.failIfNewStateIs=function(i,o){for(var h=0,p=o;h<p.length;h++){var g=p[h];if(i===g)throw"Cannot transition from ".concat(this.state," to ").concat(i)}},l})(),d3=(function(){function l(i){this.stateManager=i}return l.prototype.startTransition=function(i){return this.stateManager.startTransition(i)},l.prototype.directTransition=function(i){this.stateManager.directTransition(i)},l.prototype.getState=function(){return this.stateManager.getState()},l.prototype.canScanFile=function(){return this.stateManager.getState()===ln.NOT_STARTED},l.prototype.isScanning=function(){return this.stateManager.getState()!==ln.NOT_STARTED},l.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ln.SCANNING},l.prototype.isPaused=function(){return this.stateManager.getState()===ln.PAUSED},l})(),g3=(function(){function l(){}return l.create=function(){return new d3(new f3)},l})(),m3=(function(){var l=function(i,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(h[g]=p[g])},l(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(i,o);function h(){this.constructor=i}i.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}})(),Er=(function(l){m3(i,l);function i(){return l!==null&&l.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(Yv),p3=(function(){function l(i,o){this.logger=o,this.fps=Er.SCAN_DEFAULT_FPS,i?(i.fps&&(this.fps=i.fps),this.disableFlip=i.disableFlip===!0,this.qrbox=i.qrbox,this.aspectRatio=i.aspectRatio,this.videoConstraints=i.videoConstraints):this.disableFlip=Er.DEFAULT_DISABLE_FLIP}return l.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?c2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},l.prototype.isShadedBoxEnabled=function(){return!ki(this.qrbox)},l.create=function(i,o){return new l(i,o)},l})(),x3=(function(){function l(i,o){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.elementId=i,this.verbose=!1;var h;typeof o=="boolean"?this.verbose=o===!0:o&&(h=o,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new Kv(this.verbose),this.qrcode=new t3(this.getSupportedFormats(o),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=g3.create()}return l.prototype.start=function(i,o,h,p){var g=this;if(!i)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var v;p?v=p:v=this.verbose?this.logger.log:function(){};var _=p3.create(o,this.logger);this.clearElement();var E=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=E,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Er.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var R=this,M=this.stateManagerProxy.startTransition(ln.SCANNING);return new Promise(function(k,j){var F=w?_.videoConstraints:R.createVideoConstraints(i);if(!F){M.cancel(),j("videoConstraints should be defined");return}var H={};(!w||_.aspectRatio)&&(H.aspectRatio=_.aspectRatio);var ie={onRenderSurfaceReady:function(X,P){R.setupUi(X,P,_),R.isScanning=!0,R.foreverScan(_,h,v)}};o3.failIfNotSupported().then(function(X){X.create(F).then(function(P){return P.render(g.element,H,ie).then(function(ce){R.renderedCamera=ce,M.execute(),k(null)}).catch(function(ce){M.cancel(),j(ce)})}).catch(function(P){M.cancel(),j(nl.errorGettingUserMedia(P))})}).catch(function(X){M.cancel(),j(nl.cameraStreamingNotSupported())})})},l.prototype.pause=function(i){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ln.PAUSED),this.showPausedState(),(ki(i)||i!==!0)&&(i=!1),i&&this.renderedCamera&&this.renderedCamera.pause()},l.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var i=this,o=function(){i.stateManagerProxy.directTransition(ln.SCANNING),i.hidePausedState()};if(!this.renderedCamera.isPaused()){o();return}this.renderedCamera.resume(function(){o()})},l.prototype.getState=function(){return this.stateManagerProxy.getState()},l.prototype.stop=function(){var i=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var o=this.stateManagerProxy.startTransition(ln.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(i.element){var g=document.getElementById(Er.SHADED_REGION_ELEMENT_ID);g&&i.element.removeChild(g)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),h(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),o.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},l.prototype.scanFile=function(i,o){return this.scanFileV2(i,o).then(function(h){return h.decodedText})},l.prototype.scanFileV2=function(i,o){var h=this;if(!i||!(i instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ki(o)&&(o=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,g){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(i);var v=new Image;v.onload=function(){var _=v.width,E=v.height,w=document.getElementById(h.elementId),C=w.clientWidth?w.clientWidth:Er.DEFAULT_WIDTH,R=Math.max(w.clientHeight?w.clientHeight:E,Er.FILE_SCAN_MIN_HEIGHT),M=h.computeCanvasDrawConfig(_,E,C,R);if(o){var k=h.createCanvasElement(C,R,"qr-canvas-visible");k.style.display="inline-block",w.appendChild(k);var j=k.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=C,j.canvas.height=R,j.drawImage(v,0,0,_,E,M.x,M.y,M.width,M.height)}var F=Er.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(v.width,M.width),ie=Math.max(v.height,M.height),X=H+2*F,P=ie+2*F,ce=h.createCanvasElement(X,P);w.appendChild(ce);var Re=ce.getContext("2d");if(!Re)throw"Unable to get 2d context from canvas";Re.canvas.width=X,Re.canvas.height=P,Re.drawImage(v,0,0,_,E,F,F,H,ie);try{h.qrcode.decodeRobustlyAsync(ce).then(function(be){p(Qg.createFromQrcodeResult(be))}).catch(g)}catch(be){g("QR code parse error, error = ".concat(be))}},v.onerror=g,v.onabort=g,v.onstalled=g,v.onsuspend=g,v.src=URL.createObjectURL(i)})},l.prototype.clear=function(){this.clearElement()},l.getCameras=function(){return h3.retrieve()},l.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},l.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},l.prototype.applyVideoConstraints=function(i){if(i){if(!c2.isMediaStreamConstraintsValid(i,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(i)},l.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},l.prototype.getSupportedFormats=function(i){var o=[Oe.QR_CODE,Oe.AZTEC,Oe.CODABAR,Oe.CODE_39,Oe.CODE_93,Oe.CODE_128,Oe.DATA_MATRIX,Oe.MAXICODE,Oe.ITF,Oe.EAN_13,Oe.EAN_8,Oe.PDF_417,Oe.RSS_14,Oe.RSS_EXPANDED,Oe.UPC_A,Oe.UPC_E,Oe.UPC_EAN_EXTENSION];if(!i||typeof i=="boolean"||!i.formatsToSupport)return o;if(!Array.isArray(i.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(i.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],p=0,g=i.formatsToSupport;p<g.length;p++){var v=g[p];Xv(v)?h.push(v):this.logger.warn("Invalid format: ".concat(v," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},l.prototype.getUseBarCodeDetectorIfSupported=function(i){if(ki(i))return!0;if(!ki(i.useBarCodeDetectorIfSupported))return i.useBarCodeDetectorIfSupported!==!1;if(ki(i.experimentalFeatures))return!0;var o=i.experimentalFeatures;return ki(o.useBarCodeDetectorIfSupported)?!0:o.useBarCodeDetectorIfSupported!==!1},l.prototype.validateQrboxSize=function(i,o,h){var p=this,g=h.qrbox;this.validateQrboxConfig(g);var v=this.toQrdimensions(i,o,g),_=function(w){if(w<Er.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Er.MIN_QR_BOX_SIZE,"px.")},E=function(w){return w>i&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=i),w};_(v.width),_(v.height),v.width=E(v.width)},l.prototype.validateQrboxConfig=function(i){if(typeof i!="number"&&typeof i!="function"&&(i.width===void 0||i.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},l.prototype.toQrdimensions=function(i,o,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(i,o)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return h},l.prototype.setupUi=function(i,o,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(i,o,h);var p=ki(h.qrbox)?{width:i,height:o}:h.qrbox;this.validateQrboxConfig(p);var g=this.toQrdimensions(i,o,p);g.height>o&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var v=h.isShadedBoxEnabled()&&g.height<=o,_={x:0,y:0,width:i,height:o},E=v?this.getShadedRegionBounds(i,o,g):_,w=this.createCanvasElement(E.width,E.height),C={willReadFrequently:!0},R=w.getContext("2d",C);R.canvas.width=E.width,R.canvas.height=E.height,this.element.append(w),v&&this.possiblyInsertShadingElement(this.element,i,o,g),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=R,this.canvasElement=w},l.prototype.createScannerPausedUiElement=function(i){var o=document.createElement("div");o.innerText=nl.scannerPaused(),o.style.display="none",o.style.position="absolute",o.style.top="0px",o.style.zIndex="1",o.style.background="rgba(9, 9, 9, 0.46)",o.style.color="#FFECEC",o.style.textAlign="center",o.style.width="100%",i.appendChild(o),this.scannerPausedUiElement=o},l.prototype.scanContext=function(i,o){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return i(p.text,Qg.createFromQrcodeResult(p)),h.possiblyUpdateShaders(!0),!0}).catch(function(p){h.possiblyUpdateShaders(!1);var g=nl.codeParseError(p);return o(g,Wv.createFrom(g)),!1})},l.prototype.foreverScan=function(i,o,h){var p=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),v=g.videoWidth/g.clientWidth,_=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*v,w=this.qrRegion.height*_,C=this.qrRegion.x*v,R=this.qrRegion.y*_;this.context.drawImage(g,C,R,E,w,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(i,o,h)},p.getTimeoutFps(i.fps))};this.scanContext(o,h).then(function(k){!k&&i.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(o,h).finally(function(){M()})):M()}).catch(function(k){p.logger.logError("Error happend while scanning context",k),M()})}},l.prototype.createVideoConstraints=function(i){if(typeof i=="string")return{deviceId:{exact:i}};if(typeof i=="object"){var o="facingMode",h="deviceId",p={user:!0,environment:!0},g="exact",v=function(j){if(j in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},_=Object.keys(i);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var E=Object.keys(i)[0];if(E!==o&&E!==h)throw"Only '".concat(o,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(E===o){var w=i.facingMode;if(typeof w=="string"){if(v(w))return{facingMode:w}}else if(typeof w=="object")if(g in w){if(v(w["".concat(g)]))return{facingMode:{exact:w["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var C=typeof w;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var R=i.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(g in R)return{deviceId:{exact:R["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var M=typeof R;throw"Invalid type of 'deviceId' = ".concat(M)}}}var k=typeof i;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},l.prototype.computeCanvasDrawConfig=function(i,o,h,p){if(i<=h&&o<=p){var g=(h-i)/2,v=(p-o)/2;return{x:g,y:v,width:i,height:o}}else{var _=i,E=o;return i>h&&(o=h/i*o,i=h),o>p&&(i=p/o*i,o=p),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(E)+" to ".concat(i,"X").concat(o,".")),this.computeCanvasDrawConfig(i,o,h,p)}},l.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var i=document.getElementById(this.elementId);i&&(i.innerHTML="")},l.prototype.possiblyUpdateShaders=function(i){this.qrMatch!==i&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(o){o.style.backgroundColor=i?Er.BORDER_SHADER_MATCH_COLOR:Er.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=i)},l.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},l.prototype.createCanvasElement=function(i,o,h){var p=i,g=o,v=document.createElement("canvas");return v.style.width="".concat(p,"px"),v.style.height="".concat(g,"px"),v.style.display="none",v.id=ki(h)?"qr-canvas":h,v},l.prototype.getShadedRegionBounds=function(i,o,h){if(h.width>i||h.height>o)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(i-h.width)/2,y:(o-h.height)/2,width:h.width,height:h.height}},l.prototype.possiblyInsertShadingElement=function(i,o,h,p){if(!(o-p.width<1||h-p.height<1)){var g=document.createElement("div");g.style.position="absolute";var v=(o-p.width)/2,_=(h-p.height)/2;if(g.style.borderLeft="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Er.SHADED_REGION_ELEMENT_ID),o-p.width<11||h-p.height<11)this.hasBorderShaders=!1;else{var E=5,w=40;this.insertShaderBorders(g,w,E,-E,null,0,!0),this.insertShaderBorders(g,w,E,-E,null,0,!1),this.insertShaderBorders(g,w,E,null,-E,0,!0),this.insertShaderBorders(g,w,E,null,-E,0,!1),this.insertShaderBorders(g,E,w+E,-E,null,-E,!0),this.insertShaderBorders(g,E,w+E,null,-E,-E,!0),this.insertShaderBorders(g,E,w+E,-E,null,-E,!1),this.insertShaderBorders(g,E,w+E,null,-E,-E,!1),this.hasBorderShaders=!0}i.append(g)}},l.prototype.insertShaderBorders=function(i,o,h,p,g,v,_){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Er.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(o,"px"),E.style.height="".concat(h,"px"),p!==null&&(E.style.top="".concat(p,"px")),g!==null&&(E.style.bottom="".concat(g,"px")),_?E.style.left="".concat(v,"px"):E.style.right="".concat(v,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),i.appendChild(E)},l.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},l.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},l.prototype.getTimeoutFps=function(i){return 1e3/i},l})(),am;(function(l){l[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(am||(am={}));const y3=({onScanSuccess:l})=>{const i=W.useRef(null),[o,h]=W.useState(""),p=W.useRef(!1);return W.useEffect(()=>{p.current=!0;const g="reader-custom";return setTimeout(async()=>{try{if(i.current)return;const _=new x3(g);i.current=_,await _.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},E=>{p.current&&l(E)},()=>{})}catch(_){console.error("Erreur start scanner",_),p.current&&h("Impossible d'accder  la camra. Vrifiez les permissions.")}},100),()=>{p.current=!1,i.current&&i.current.isScanning&&i.current.stop().then(()=>{i.current?.clear(),i.current=null}).catch(_=>{console.error("Erreur stop scanner",_)})}},[]),I.jsxs("div",{className:"w-full max-w-md mx-auto relative rounded-lg overflow-hidden bg-black",children:[I.jsx("div",{id:"reader-custom",style:{width:"100%",minHeight:"300px"}}),o&&I.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-80 text-white p-4 text-center",children:o}),!o&&I.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-white text-sm opacity-70",children:"Camra active"})]})},w3=()=>{const{user:l,role:i}=gu(),o=ou(),[h,p]=W.useState("list"),[g,v]=W.useState(null),[_,E]=W.useState([]),[w,C]=W.useState({nom:"",service_perimetre:"",date_debut:new Date().toISOString().split("T")[0]}),[R,M]=W.useState([]),[k,j]=W.useState(null),[F,H]=W.useState(null),[ie,X]=W.useState(0);W.useEffect(()=>{P()},[]),W.useEffect(()=>{g&&l&&ce()},[g,l]);const P=async()=>{try{const ve=await ao.getAll();E(ve||[])}catch(ve){console.error("Erreur chargement campagnes",ve)}},ce=async()=>{if(!(!g||!l))try{const ve=await ao.getStats(g,l.id);X(ve.scannedCount)}catch(ve){console.error("Erreur stats",ve)}},Re=async ve=>{ve.preventDefault();try{const Ce=await ao.create(w);alert(`Campagne "${Ce.nom}" cre!`),v(Ce.id),p("scan"),P()}catch(Ce){alert("Erreur cration campagne"),console.error(Ce)}},be=ve=>{v(ve),p("scan"),M([]),j(null)},J=async ve=>{if(!(!g||!l)&&!F)try{const Ce=await ao.getMaterielByCode(ve);H(Ce),new Audio("/beep.mp3").play().catch(()=>{})}catch(Ce){console.error(Ce),j({status:"error",msg:"Matriel non trouv ou erreur"})}},Se=async()=>{if(!(!F||!g||!l))try{await ao.confirmScan({inventaire_id:g,materiel_id:F.id,user_id:l.id}),j({status:"success",msg:`Confirm: ${F.nom} `,item:F}),M(ve=>[F,...ve]),H(null),X(ve=>ve+1)}catch(ve){console.error(ve),j({status:"error",msg:ve.message||"Erreur confirmation"}),H(null)}},he=()=>{H(null),j({status:"error",msg:"Scan annul"})},ot=()=>{confirm("Quitter le mode scan ?")&&(v(null),p("list"),P())};return I.jsxs("div",{className:"relative min-h-screen bg-gray-50 pb-20",children:[I.jsxs("div",{className:"flex items-center justify-between mb-6",children:[I.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:h==="scan"?"Mode Scan":"Campagnes d'Inventaire"}),h==="scan"&&I.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-bold shadow-sm",children:[I.jsx($y,{className:"w-5 h-5 mr-2 text-blue-600"}),I.jsxs("span",{children:[ie," Scans"]})]}),I.jsxs("div",{className:"text-xs text-gray-400 absolute top-0 right-0 mt-2 mr-2",children:["Role: ",i," (User: ",l?.email,")"]})]}),h==="list"&&I.jsxs("div",{className:"space-y-6",children:[i==="admin"&&I.jsxs("button",{onClick:()=>p("create"),className:"w-full sm:w-auto bg-blue-600 text-white px-6 py-3 rounded-lg font-bold shadow hover:bg-blue-700 flex items-center justify-center",children:[I.jsx(Ry,{className:"mr-2"})," Nouvelle Campagne"]}),I.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:_.map(ve=>I.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border hover:border-blue-300 transition-colors",children:[I.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-800",children:ve.nom}),I.jsxs("div",{className:"text-gray-500 text-sm mb-4 space-y-1",children:[I.jsxs("p",{children:[" Dbut: ",new Date(ve.date_debut).toLocaleDateString()]}),I.jsxs("p",{children:[" ",ve.service_perimetre||"Non spcifi"]})]}),I.jsxs("div",{className:"flex space-x-2",children:[I.jsxs("button",{onClick:()=>be(ve.id),className:"flex-1 bg-green-50 text-green-700 border border-green-200 py-2 rounded-lg font-bold hover:bg-green-100 flex items-center justify-center",children:[I.jsx(Gy,{className:"w-4 h-4 mr-2"})," Rejoindre"]}),i==="admin"&&I.jsxs("button",{onClick:()=>o(`/inventaire/${ve.id}`),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-purple-700 shadow flex items-center justify-center ml-2",title:"Tableau de bord",children:[I.jsx(Cy,{className:"w-4 h-4 mr-2"})," Tableau de Bord"]})]})]},ve.id))}),_.length===0&&I.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Aucune campagne active."})]}),h==="create"&&I.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-lg mx-auto",children:[I.jsxs("button",{onClick:()=>p("list"),className:"text-gray-500 mb-4 flex items-center hover:text-gray-700",children:[I.jsx(If,{className:"w-4 h-4 mr-1"})," Retour liste"]}),I.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nouvelle Campagne"}),I.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Nom de la campagne"}),I.jsx("input",{type:"text",className:"w-full border p-3 rounded-lg",required:!0,value:w.nom,onChange:ve=>C({...w,nom:ve.target.value}),placeholder:"ex: Inventaire 2026 - Ple A"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Service / Primtre"}),I.jsx("input",{type:"text",className:"w-full border p-3 rounded-lg",value:w.service_perimetre,onChange:ve=>C({...w,service_perimetre:ve.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Date Dbut"}),I.jsx("input",{type:"date",className:"w-full border p-3 rounded-lg",required:!0,value:w.date_debut,onChange:ve=>C({...w,date_debut:ve.target.value})})]}),I.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 shadow",children:"Crer et Commencer"})]})]}),h==="scan"&&I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 relative",children:[I.jsxs("button",{onClick:ot,className:"lg:col-span-2 text-gray-500 flex items-center hover:text-red-600 mb-2",children:[I.jsx(If,{className:"w-4 h-4 mr-2"})," Changer de campagne (Quitter)"]}),F&&I.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in fade-in zoom-in duration-300",children:[I.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-4",children:"Vrification"}),I.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden mb-4 border-2 border-gray-200 relative",children:F.photo_url?I.jsx("img",{src:F.photo_url,alt:"Materiel",className:"w-full h-full object-cover"}):I.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Pas de photo"})}),I.jsxs("div",{className:"text-center mb-6 space-y-1",children:[I.jsx("p",{className:"text-xl font-black text-gray-800 leading-tight",children:F.nom}),I.jsx("p",{className:"text-sm font-mono text-gray-500 bg-gray-100 inline-block px-2 py-1 rounded",children:F.numero_inventaire})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsx("button",{onClick:he,className:"py-4 rounded-xl font-bold text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 transition-colors",children:"Refuser"}),I.jsx("button",{onClick:Se,className:"py-4 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 shadow-lg shadow-green-200 transition-all transform active:scale-95",children:"Valider"})]})]})}),I.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border-t-4 border-blue-500",children:[I.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-gray-700",children:"Scanner le code-barres"}),I.jsx("div",{className:F?"invisible h-0 overflow-hidden":"",children:I.jsx(y3,{onScanSuccess:J})}),F&&I.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-100 rounded text-gray-400",children:"Scan en pause..."}),k&&!F&&I.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center font-bold flex items-center justify-center ${k.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[k.status==="success"?I.jsx(Df,{className:"w-6 h-6 mr-2"}):I.jsx(Qy,{className:"w-6 h-6 mr-2"}),k.msg]})]}),I.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[I.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-700",children:"Session en cours"}),I.jsxs("ul",{className:"divide-y divide-gray-100 max-h-[500px] overflow-y-auto",children:[R.map((ve,Ce)=>I.jsxs("li",{className:"py-3 flex justify-between items-center group hover:bg-gray-50 px-2 rounded",children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-bold block text-gray-800",children:ve.nom}),I.jsx("span",{className:"text-xs text-gray-500 font-mono",children:ve.numero_inventaire})]}),I.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full flex items-center",children:[I.jsx(Df,{className:"w-3 h-3 mr-1"})," OK"]})]},Ce)),R.length===0&&I.jsxs("div",{className:"text-center py-10 text-gray-400 flex flex-col items-center",children:[I.jsx(Uy,{className:"w-10 h-10 mb-2 opacity-20"}),I.jsx("p",{children:"Vos scans apparatront ici"})]})]})]})]})]})},b3="modulepreload",v3=function(l){return"/inventaireapp/"+l},sm={},Kc=function(i,o,h){let p=Promise.resolve();if(o&&o.length>0){let E=function(w){return Promise.all(w.map(C=>Promise.resolve(C).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),_=v?.nonce||v?.getAttribute("nonce");p=E(o.map(w=>{if(w=v3(w),w in sm)return;sm[w]=!0;const C=w.endsWith(".css"),R=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${R}`))return;const M=document.createElement("link");if(M.rel=C?"stylesheet":b3,C||(M.as="script"),M.crossOrigin="",M.href=w,_&&M.setAttribute("nonce",_),document.head.appendChild(M),C)return new Promise((k,j)=>{M.addEventListener("load",k),M.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${w}`)))})}))}function g(v){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=v,window.dispatchEvent(_),!_.defaultPrevented)throw v}return p.then(v=>{for(const _ of v||[])_.status==="rejected"&&g(_.reason);return i().catch(g)})},E3=()=>{const{id:l}=Ax(),[i,o]=W.useState([]),[h,p]=W.useState([]),[g,v]=W.useState(!0),[_,E]=W.useState("scanned"),[w,C]=W.useState(null);W.useEffect(()=>{R()},[l]);const R=async()=>{if(l){v(!0);try{const{data:H}=await Yt.from("inventaires").select("*").eq("id",l).single();C(H);const{data:ie,error:X}=await Yt.from("inventaire_lignes").select(`
                    *,
                    materiel:materiels(*),
                    agent:profiles(full_name)
                `).eq("inventaire_id",l);if(X)throw X;const P=ie.map(J=>({...J,agent_name:J.agent?.full_name||"Inconnu"}));o(P);const ce=ie.map(J=>J.materiel_id);let Re=Yt.from("materiels").select("*").neq("statut","Rebut");const{data:be}=await Re;if(be){const J=be.filter(Se=>!ce.includes(Se.id));p(J)}}catch(H){console.error("Error loading details:",H)}finally{v(!1)}}},M=async()=>{const H=await Kc(()=>import("./exceljs.min-Csw5mZdY.js").then(Te=>Te.e),[]),ie=(await Kc(async()=>{const{default:Te}=await import("./FileSaver.min-Dz6lpJJc.js").then(ee=>ee.F);return{default:Te}},[])).default,X=new H.Workbook,P=X.addWorksheet("Inventaire Complet");try{const ee=await(await fetch("/header.png")).arrayBuffer(),ne=X.addImage({buffer:ee,extension:"png"});P.addImage(ne,{tl:{col:0,row:0},ext:{width:500,height:60}})}catch(Te){console.warn("Header image not found for Excel",Te)}P.addRow([]),P.addRow([]),P.addRow([]),P.addRow([]);const ce=P.addRow(["RAPPORT D'INVENTAIRE CONSOLID"]);ce.font={bold:!0,size:14};const Re=P.addRow([`Campagne : ${w?.nom}`]);Re.font={bold:!0},P.addRow([`Date de gnration : ${new Date().toLocaleString()}`]),P.addRow([]);const be=[...i.map(Te=>({...Te.materiel,scanned:!0,scanDetails:Te})),...h.map(Te=>({...Te,scanned:!1,scanDetails:null}))];be.sort((Te,ee)=>(Te.categorie||"").localeCompare(ee.categorie||"")||Te.nom.localeCompare(ee.nom));const J=be.map(Te=>({"Nom Article":Te.nom,"N Inventaire":Te.numero_inventaire,"Statut Inventaire":Te.scanned?"PRSENT":"ABSENT",Service:Te.service||"N/A",tat:Te.statut||"N/A",Catgorie:Te.categorie||"N/A",Localisation:Te.emplacement||"N/A","Scann Par":Te.scanDetails?Te.scanDetails.agent_name:"-","Date Scan":Te.scanDetails?new Date(Te.scanDetails.created_at).toLocaleString():"-"})),Se=Object.keys(J[0]||{}).map(Te=>({header:Te,key:Te,width:22}));P.columns=Se;const ot=P.getRow(9);Se.forEach((Te,ee)=>{const ne=ot.getCell(ee+1);ne.value=Te.header,ne.font={bold:!0,color:{argb:"FFFFFFFF"}},ne.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1F497D"}},ne.alignment={vertical:"middle",horizontal:"center"}}),J.forEach(Te=>{const ne=P.addRow(Te).getCell(3);Te["Statut Inventaire"]==="PRSENT"?ne.font={color:{argb:"FF008000"},bold:!0}:ne.font={color:{argb:"FFFF0000"},bold:!0}});const ve=P.lastRow?P.lastRow.number+2:15,Ce=P.getRow(ve);Ce.values=["Signature de l'Agent Responsable :","","","Cachet de l'Hpital :"],Ce.font={italic:!0,bold:!0};try{const ee=await(await fetch("/footer.png")).arrayBuffer(),ne=X.addImage({buffer:ee,extension:"png"});P.addImage(ne,{tl:{col:0,row:ve+2},ext:{width:500,height:40}})}catch(Te){console.warn("Footer image not found for Excel",Te)}const We=await X.xlsx.writeBuffer();ie(new Blob([We]),`Rapport_Inventaire_Consolide_${w?.nom}.xlsx`)},k=async H=>{const{jsPDF:ie}=await Kc(async()=>{const{jsPDF:ve}=await import("./jspdf.es.min-BLZI33ud.js").then(Ce=>Ce.j);return{jsPDF:ve}},[]);await Kc(()=>import("./jspdf.plugin.autotable-Czd7wD0t.js").then(ve=>ve.j),__vite__mapDeps([0,1]));const X=new ie,P=X.internal.pageSize.getWidth(),ce=X.internal.pageSize.getHeight(),Re=()=>{try{X.addImage("/footer.png","PNG",0,ce-20,P,20)}catch{console.warn("Footer image not found, skipping")}},be=H==="scanned"?"RAPPORT MATRIELS PRSENTS":"RAPPORT MATRIELS MANQUANTS";X.setFontSize(16),X.text(be,P/2,45,{align:"center"}),X.setFontSize(11),X.text(w?.nom||"",P/2,52,{align:"center"}),X.setFontSize(8),X.text(`Date du rapport: ${new Date().toLocaleDateString()}`,14,62),X.text(`Priode: Du ${new Date(w?.date_debut).toLocaleDateString()} au ${w?.date_fin?new Date(w.date_fin).toLocaleDateString():"En cours"}`,14,67),X.text(`Statistiques: ${i.length} prsents / ${h.length} manquants (Total: ${i.length+h.length})`,14,72);const J=H==="scanned"?i.map(ve=>[ve.materiel.nom,ve.materiel.numero_inventaire,ve.materiel.service||"-",ve.agent_name,new Date(ve.created_at).toLocaleDateString()]):h.map(ve=>[ve.nom,ve.numero_inventaire,ve.service||"-"]),Se=H==="scanned"?[["Nom","N Inventaire","Service","Scann par","Date"]]:[["Nom","N Inventaire","Service"]];X.autoTable({startY:78,head:Se,body:J,theme:"striped",styles:{fontSize:8,cellPadding:1},headStyles:{fillColor:H==="scanned"?[31,73,125]:[192,0,0],fontSize:9},margin:{top:35,bottom:25},didDrawPage:()=>{X.addImage("/header.png","PNG",0,0,P,30)}});const he=X.lastAutoTable.finalY+15;let ot;he>ce-40?(X.addPage(),X.addImage("/header.png","PNG",0,0,P,30),ot=50):ot=he,X.setFontSize(9),X.text("Signature de l'Agent Responsable",14,ot),X.text("Cachet de l'Hpital",P-60,ot),X.line(14,ot+10,70,ot+10),X.line(P-60,ot+10,P-14,ot+10),Re(),X.save(`Rapport_${H==="scanned"?"Presents":"Manquants"}_${w?.nom}.pdf`)};if(g)return I.jsx("div",{className:"p-8 text-center",children:"Chargement..."});const j=i.length+h.length,F=j>0?Math.round(i.length/j*100):0;return I.jsxs("div",{className:"p-6 max-w-7xl mx-auto animate-fade-in",children:[I.jsxs(Ca,{to:"/inventaire",className:"flex items-center text-gray-600 mb-4 hover:text-gray-900",children:[I.jsx(If,{className:"w-4 h-4 mr-2"})," Retour aux campagnes"]}),I.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[I.jsxs("div",{className:"flex justify-between items-start mb-4",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:w?.nom}),I.jsxs("p",{className:"text-sm text-gray-500",children:["Du ",new Date(w?.date_debut).toLocaleDateString(),w?.date_fin&&` au ${new Date(w.date_fin).toLocaleDateString()}`]})]}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[I.jsxs("button",{onClick:M,className:"flex items-center justify-center bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition shadow-sm text-sm",title:"Export complet Excel",children:[I.jsx(bf,{className:"w-4 h-4 mr-2"})," Excel"]}),I.jsxs("button",{onClick:()=>k("scanned"),className:"flex items-center justify-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition shadow-sm text-sm",children:[I.jsx(bf,{className:"w-4 h-4 mr-2"})," PDF Prsents"]}),I.jsxs("button",{onClick:()=>k("missing"),className:"flex items-center justify-center bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition shadow-sm text-sm",children:[I.jsx(bf,{className:"w-4 h-4 mr-2"})," PDF Manquants"]})]})]}),I.jsxs("div",{className:"mb-2 flex justify-between text-sm font-medium",children:[I.jsx("span",{children:"Progression"}),I.jsxs("span",{children:[F,"% (",i.length," / ",j,")"]})]}),I.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-6",children:I.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500",style:{width:`${F}%`}})}),I.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[I.jsxs("button",{className:`py-2 px-4 font-medium flex items-center ${_==="scanned"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>E("scanned"),children:[I.jsx(Df,{className:"w-4 h-4 mr-2"}),"Prsents (",i.length,")"]}),I.jsxs("button",{className:`py-2 px-4 font-medium flex items-center ${_==="missing"?"text-red-500 border-b-2 border-red-500":"text-gray-500 hover:text-gray-700"}`,onClick:()=>E("missing"),children:[I.jsx(Oy,{className:"w-4 h-4 mr-2"}),"Manquants (",h.length,")"]})]}),I.jsxs("div",{className:"overflow-x-auto",children:[I.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[I.jsx("thead",{className:"bg-gray-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Matriel"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),_==="scanned"&&I.jsxs(I.Fragment,{children:[I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Scann par"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Heure"})]})]})}),I.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_==="scanned"?i.map(H=>I.jsxs("tr",{className:"hover:bg-gray-50",children:[I.jsx("td",{className:"px-6 py-4",children:I.jsxs("div",{className:"flex items-center",children:[H.materiel.photo_url?I.jsx("img",{src:H.materiel.photo_url,className:"h-10 w-10 rounded-full object-cover mr-3"}):I.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 mr-3 flex items-center justify-center text-gray-500 text-xs",children:"IMG"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium text-gray-900",children:H.materiel.nom}),I.jsx("div",{className:"text-xs text-gray-500 font-mono",children:H.materiel.numero_inventaire})]})]})}),I.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:H.materiel.service||"-"}),I.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:H.agent_name}),I.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(H.created_at).toLocaleTimeString()})]},H.id)):h.map(H=>I.jsxs("tr",{className:"hover:bg-red-50",children:[I.jsx("td",{className:"px-6 py-4",children:I.jsxs("div",{className:"flex items-center",children:[H.photo_url?I.jsx("img",{src:H.photo_url,className:"h-10 w-10 rounded-full object-cover mr-3 grayscale"}):I.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 mr-3 flex items-center justify-center text-gray-500 text-xs",children:"IMG"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium text-gray-900",children:H.nom}),I.jsx("div",{className:"text-xs text-red-500 font-mono",children:H.numero_inventaire})]})]})}),I.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:H.service||"-"})]},H.id))})]}),_==="scanned"&&i.length===0&&I.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucun lment scann pour le moment."}),_==="missing"&&h.length===0&&I.jsx("div",{className:"p-8 text-center text-green-600 font-medium",children:"Incroyable ! Aucun lment manquant."})]})]})]})},A3=()=>{const[l,i]=W.useState([]),[o,h]=W.useState(!0),[p,g]=W.useState(!1),[v,_]=W.useState({email:"",password:"",name:""}),[E,w]=W.useState("");W.useEffect(()=>{C()},[]);const C=async()=>{try{const M=await Yg.getAgents();i(M||[])}catch(M){console.error(M)}finally{h(!1)}},R=async M=>{M.preventDefault(),w("");try{await Yg.createAgent(v.email,v.password,v.name),w("Agent cr avec succs !"),_({email:"",password:"",name:""}),g(!1),C()}catch(k){console.error(k),w("Erreur: "+k.message)}};return I.jsxs("div",{className:"container mx-auto p-6",children:[I.jsxs("h1",{className:"text-2xl font-bold mb-6 flex items-center",children:[I.jsx(Nm,{className:"mr-2"})," Gestion des Agents"]}),E&&I.jsx("div",{className:"bg-blue-100 p-3 rounded mb-4 text-blue-800",children:E}),I.jsx("div",{className:"mb-6",children:p?I.jsxs("div",{className:"bg-white p-6 rounded shadow max-w-md border border-gray-200",children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un Agent"}),I.jsxs("form",{onSubmit:R,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Nom complet"}),I.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded",value:v.name,onChange:M=>_({...v,name:M.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Email"}),I.jsx("input",{type:"email",required:!0,className:"w-full border p-2 rounded",value:v.email,onChange:M=>_({...v,email:M.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium",children:"Mot de passe provisoire"}),I.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded",minLength:6,value:v.password,onChange:M=>_({...v,password:M.target.value})})]}),I.jsxs("div",{className:"flex justify-end space-x-3",children:[I.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Annuler"}),I.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Crer le compte"})]})]})]}):I.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded flex items-center hover:bg-green-700",children:[I.jsx(tw,{className:"mr-2 w-4 h-4"})," Nouvel Agent"]})}),I.jsx("div",{className:"bg-white rounded shadow overflow-hidden",children:I.jsxs("table",{className:"w-full text-left border-collapse",children:[I.jsx("thead",{className:"bg-gray-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"p-4 border-b",children:"Email"}),I.jsx("th",{className:"p-4 border-b",children:"Rle"}),I.jsx("th",{className:"p-4 border-b",children:"ID"})]})}),I.jsx("tbody",{children:o?I.jsx("tr",{children:I.jsx("td",{className:"p-4",children:"Chargement..."})}):l.length===0?I.jsx("tr",{children:I.jsx("td",{className:"p-4 text-gray-500",children:"Aucun agent trouv."})}):l.map(M=>I.jsxs("tr",{className:"hover:bg-gray-50",children:[I.jsx("td",{className:"p-4 border-b font-medium",children:M.email}),I.jsx("td",{className:"p-4 border-b",children:I.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-bold uppercase",children:M.role})}),I.jsx("td",{className:"p-4 border-b text-sm text-gray-400 font-mono",children:M.id})]},M.id))})]})})]})},lm={width:50,height:25,marginLeft:0,marginTop:0,fontSize:9,logoWidth:15},_3=[{label:"Standard (114x25mm)",width:114,height:25,fontSize:10,logoWidth:28},{label:"Petit (50x25mm)",width:50,height:25,fontSize:8,logoWidth:15},{label:"Moyen (70x30mm)",width:70,height:30,fontSize:9,logoWidth:20}],C3=()=>{const[l,i]=W.useState(lm),[o,h]=W.useState(!1);W.useEffect(()=>{const E=localStorage.getItem("zebra_printer_settings");if(E)try{i(JSON.parse(E))}catch(w){console.error("Failed to parse printer settings",w)}},[]);const p=E=>{i(w=>({...w,width:E.width,height:E.height,fontSize:E.fontSize,logoWidth:E.logoWidth})),h(!1)},g=E=>{const{name:w,value:C}=E.target;i(R=>({...R,[w]:parseFloat(C)||0})),h(!1)},v=()=>{localStorage.setItem("zebra_printer_settings",JSON.stringify(l)),h(!0),setTimeout(()=>h(!1),3e3)},_=()=>{window.confirm("Rinitialiser aux valeurs par dfaut ?")&&(i(lm),h(!1))};return I.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[I.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[I.jsx("div",{className:"bg-purple-100 p-3 rounded-xl text-purple-600",children:I.jsx(Tm,{size:32})}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-outfit",children:"Configuration Imprimante Zebra"}),I.jsx("p",{className:"text-gray-500",children:"Ajustez les dimensions pour vos rouleaux d'tiquettes"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[I.jsxs("h2",{className:"text-xl font-semibold mb-2 flex items-center gap-2",children:[I.jsx(Rm,{size:20,className:"text-gray-400"}),"Paramtres du Support"]}),I.jsxs("div",{className:"mb-6",children:[I.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Pr-rglages rapides"}),I.jsx("div",{className:"flex flex-wrap gap-2",children:_3.map((E,w)=>I.jsx("button",{onClick:()=>p(E),className:"px-3 py-1.5 bg-gray-50 hover:bg-purple-50 hover:text-purple-600 text-gray-600 text-xs font-semibold rounded-lg border border-gray-200 transition-colors",children:E.label},w))})]}),I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Largeur (mm)"}),I.jsx("input",{type:"number",name:"width",value:l.width,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hauteur (mm)"}),I.jsx("input",{type:"number",name:"height",value:l.height,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marge Gauche (mm)"}),I.jsx("input",{type:"number",name:"marginLeft",value:l.marginLeft,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marge Haute (mm)"}),I.jsx("input",{type:"number",name:"marginTop",value:l.marginTop,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taille Police (pt)"}),I.jsx("input",{type:"number",name:"fontSize",value:l.fontSize,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Largeur Logo (mm)"}),I.jsx("input",{type:"number",name:"logoWidth",value:l.logoWidth,onChange:g,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),I.jsxs("div",{className:"flex gap-4 pt-4",children:[I.jsxs("button",{onClick:v,className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${o?"bg-green-500 text-white":"bg-purple-600 text-white hover:bg-purple-700"} shadow-lg shadow-purple-200`,children:[I.jsx(Wy,{size:20}),o?"Enregistr !":"Enregistrer"]}),I.jsx("button",{onClick:_,className:"px-6 py-3 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-all font-medium flex items-center gap-2",title:"Rinitialiser",children:I.jsx(Xy,{size:20})})]})]})]}),I.jsxs("div",{className:"flex flex-col gap-4",children:[I.jsx("h3",{className:"text-gray-500 font-medium px-2 flex items-center gap-2",children:"Aperu visuel (chelle 1:1)"}),I.jsx("div",{className:"bg-checkered p-10 rounded-2xl flex items-center justify-center min-h-[300px] bg-slate-100/50 border-2 border-dashed border-slate-200",children:I.jsxs("div",{style:{width:`${l.width}mm`,height:`${l.height}mm`,marginLeft:`${l.marginLeft}mm`,marginTop:`${l.marginTop}mm`,backgroundColor:"white",boxShadow:"0 10px 30px -5px rgba(0,0,0,0.1)",border:"1px solid #ddd",display:"flex",flexDirection:"column",padding:"1mm",overflow:"hidden"},className:"relative",children:[I.jsxs("div",{className:"w-full text-left mb-1",children:[I.jsx("span",{style:{fontSize:`${l.fontSize}pt`},className:"font-bold truncate uppercase block",children:"NOM DU MATRIEL"}),I.jsx("span",{className:"text-[6pt] text-gray-500 block",children:"DESCRIPTION OU CATGORIE"})]}),I.jsxs("div",{className:"flex-1 flex items-end justify-between w-full",children:[I.jsxs("div",{className:"flex flex-col items-start",children:[I.jsx("div",{className:"w-[15mm] h-[15mm] bg-black bg-opacity-5 flex items-center justify-center mb-1 border border-dashed border-gray-300",children:I.jsxs("div",{className:"grid grid-cols-3 gap-0.5 p-1 w-full h-full opacity-20",children:[I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"border border-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"}),I.jsx("div",{className:"bg-black"})]})}),I.jsx("span",{style:{fontSize:`${l.fontSize-2}pt`},className:"font-mono font-bold leading-none",children:"INV-2026-0001"})]}),I.jsx("div",{style:{width:`${l.logoWidth}mm`},className:"flex justify-end items-end",children:I.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded flex items-center justify-center",children:I.jsx("span",{className:"text-[6pt] text-gray-400",children:"LOGO"})})})]})]})}),I.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-xl text-yellow-800 text-sm",children:[I.jsx("strong",{children:"Note :"}),` L'aperu ci-dessus est estim. Lors de l'impression relle, assurez-vous que les paramtres d'chelle du navigateur sont rgls sur "100%" ou "Par dfaut".`]})]})]})]})},S3=()=>{const[l,i]=W.useState(""),[o,h]=W.useState(""),[p,g]=W.useState(!1),v=ou(),_=async E=>{E.preventDefault(),g(!0);const{error:w}=await Yt.auth.signInWithPassword({email:l,password:o});w?alert(w.message):v("/"),g(!1)};return I.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:I.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded shadow-lg",children:[I.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-blue-600",children:"Hpital Inventaire"}),I.jsx("h2",{className:"text-xl mb-4 text-center",children:"Connexion"}),I.jsxs("form",{onSubmit:_,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700",children:"Email"}),I.jsx("input",{type:"email",className:"w-full border p-2 rounded focus:outline-none focus:border-blue-500",value:l,onChange:E=>i(E.target.value),required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700",children:"Mot de passe"}),I.jsx("input",{type:"password",className:"w-full border p-2 rounded focus:outline-none focus:border-blue-500",value:o,onChange:E=>h(E.target.value),required:!0})]}),I.jsx("button",{type:"submit",disabled:p,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Chargement...":"Se connecter"})]})]})})},T3=({allowedRoles:l})=>{const{user:i,role:o,loading:h}=gu();return h?I.jsx("div",{children:"Chargement..."}):i?l&&o&&!l.includes(o)?I.jsx(Nf,{to:"/unauthorized",replace:!0}):I.jsx(vm,{}):I.jsx(Nf,{to:"/login",replace:!0})};function R3(){return console.log("App.tsx full rendering with HashRouter"),I.jsx(oy,{children:I.jsx(Iv,{children:I.jsxs(jx,{children:[I.jsx(Kr,{path:"/login",element:I.jsx(S3,{})}),I.jsx(Kr,{element:I.jsx(T3,{}),children:I.jsxs(Kr,{path:"/",element:I.jsx(Dv,{}),children:[I.jsx(Kr,{index:!0,element:I.jsx(Bv,{})}),I.jsx(Kr,{path:"materiels",element:I.jsx(qv,{})}),I.jsx(Kr,{path:"inventaire",element:I.jsx(w3,{})}),I.jsx(Kr,{path:"inventaire/:id",element:I.jsx(E3,{})}),I.jsx(Kr,{path:"users",element:I.jsx(A3,{})}),I.jsx(Kr,{path:"printer-config",element:I.jsx(C3,{})})]})}),I.jsx(Kr,{path:"*",element:I.jsx(Nf,{to:"/",replace:!0})})]})})})}window.onerror=function(l,i,o,h,p){const g=`
    <div style="background:red; color:white; padding:20px; font-size:16px; position:fixed; top:0; left:0; width:100%; z-index:9999;">
      <h1>CRITICAL ERROR</h1>
      <p><strong>Message:</strong> ${l}</p>
      <p><strong>Location:</strong> ${i}:${o}:${h}</p>
      <p><strong>Stack:</strong> ${p?.stack}</p>
    </div>
  `;return document.body.innerHTML+=g,console.error("Global error caught:",p),!1};window.onunhandledrejection=function(l){const i=`
    <div style="background:darkred; color:white; padding:20px; font-size:16px; position:fixed; bottom:0; left:0; width:100%; z-index:9999;">
      <h1>UNHANDLED PROMISE REJECTION</h1>
      <p><strong>Reason:</strong> ${l.reason}</p>
    </div>
  `;document.body.innerHTML+=i,console.error("Unhandled rejection:",l.reason)};class N3 extends W.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,o){console.error("Uncaught error:",i,o)}render(){return this.state.hasError?I.jsxs("div",{style:{padding:"20px",color:"red",fontFamily:"monospace"},children:[I.jsx("h1",{children:"React Info: Something went wrong."}),I.jsx("pre",{children:this.state.error?.toString()}),I.jsx("pre",{children:this.state.error?.stack})]}):this.props.children}}jp.createRoot(document.getElementById("root")).render(I.jsx(W.StrictMode,{children:I.jsx(N3,{children:I.jsx(R3,{})})}));export{Kc as _,O3 as a,Fc as c,Rp as g};
